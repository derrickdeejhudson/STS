using Microsoft.Xna.Framework;
using System;

namespace Terraria
{
    public class NPC
    {
        public int team = -1;
        public bool canTakeDamage = false;
        public byte itemEXP = 0;
        public int statusKiller = -99;

        public static Rectangle JUNGLE_AREA = new Rectangle(168*16, 130*16, 200*16, 80*16);
        public static Rectangle TOP_AREA = new Rectangle(168*16, 43*16, 200*16, 80*16);

        public bool jungle = false;

        public int abilityPointHP = 0;
        public double lastHitValue = 0.0f;

        public static Vector2[] WAVE_SPAWNS = {
            new Vector2(120*16, 120*16),
            new Vector2(116*16, 141*16),
            new Vector2(180*16, 140*16),
            new Vector2(160*16, 160*16),
            new Vector2(130*16, 165*16),
            new Vector2(228*16, 160*16),
            new Vector2(68*16, 150*16)
        };

        public Buff[] buffs = {
            new Buff(),
            new Buff(),
            new Buff(),
            new Buff(),
            new Buff(),
            new Buff(),
            new Buff(),
            new Buff(),
            new Buff(),
            new Buff()
        };

        public int healCD = 0;
        public int shootCD = 0;

        public bool doom;
        public int doomTimer = 0;
        public int doomOwner = 0;

        public static int bossLevel = 0;

        public const int WAVE = 500;
        public const int KING_SLIME = 50;
        public const int SKELETRON_PRIME = 127;
        public const int GOLEM = 245;
        public const int BRAIN_OF_CTHULHU = 266;
        public const int DESTROYER = 134;
        public const int RETINAZER = 125;
        public const int SPAZMATISM = 126;
        public const int QUEEN_BEE = 222;
        public const int PLANTERA = 262;
        public const int WALL_OF_FLESH = 113;

        public const int BLOOD_JELLY = 242;
        public const int GASTROPOD = 122;
        public const int SHARK = 65;
        public const int ARAPAIMA = 157;
        public const int CURSED_HAMMER = 83;
        public const int GIANT_CURSED_SKULL = 289;
        public const int ICE_GOLEM = 243;
        public const int WYVERN = 87;

        public static Vector2 KING_SLIME_SPAWN = new Vector2(104*16, 208*16);
        public static Vector2 SKELETRON_PRIME_SPAWN = new Vector2(328*16, 92*16);
        public static Vector2 TWINS_SPAWN = new Vector2(149*16, 65*16);
        public static Vector2 GOLEM_SPAWN = new Vector2(228*16, 290*16);
        public static Vector2 QUEEN_BEE_SPAWN = new Vector2(112*16, 258*16);
        public static Vector2 WALL_OF_FLESH_SPAWN = new Vector2(560*16, 515*16);
        public static Vector2 BRAIN_OF_CTHULHU_SPAWN = new Vector2(263*16, 371*16);
        public static Vector2 DESTROYER_SPAWN = new Vector2(88*16, 451*16);
        public static Vector2 PLANTERA_SPAWN = new Vector2(429*16, 284*16);


        public const int P1_SP1 = 151;
        public const int P1_SP2 = 152;
        public const int P1_SP3 = 153;
        public const int P1_SP4 = 154;
        public const int P2_SP1 = 155;
        public const int P2_SP2 = 156;
        public const int P2_SP3 = 157;
        public const int P2_SP4 = 158;
        public const int P3_SP1 = 159;
        public const int P3_SP2 = 160;
        public const int P3_SP3 = 161;
        public const int P3_SP4 = 162;
        public const int P4_SP1 = 163;
        public const int P4_SP2 = 164;
        public const int P4_SP3 = 165;
        public const int P4_SP4 = 166;
        public const int P5_SP1 = 167;
        public const int P5_SP2 = 168;
        public const int P5_SP3 = 169;
        public const int P5_SP4 = 170;
        public const int P6_SP1 = 171;
        public const int P6_SP2 = 172;
        public const int P6_SP3 = 173;
        public const int P6_SP4 = 174;

        public const int HORNET = 42;
        public const int WOLF = 155;
        public const int MOTHER_SLIME = 16;
        public const int BLOOD_CRAWLER = 239;
        public const int GIANT_TORTOISE = 153;
        public const int DEMON = 62;
        public const int BLACK_RECLUSE = 163;
        public const int CORRUPT_SLIME = 81;
        public const int BRAIN_OF_CTHULU = 266;

        public const int BLUE_JELLYFISH = 63;
        public const int PINK_JELLYFISH = 64;
        public const int PIRANHA = 58;
        public const int ANGLER_FISH = 102;
        public const int WHITE_SOLDIER = 26;
        public const int BLACK_SOLDIER = 27;
        public const int RAGGED_CASTER = 281;
        public const int DIABOLIST = 285;

        public static int twt = 0;
        public static int tbt = 0;
        public static int bwt = 0;
        public static int bbt = 0;
        public static int numPink = 0;
        public static int numBlue = 0;
        public static int numBlack = 0;
        public static int numWhite = 0;
        public static int numPiranha = 0;
        public static int numDiabolist = 0;

        public static bool isBossDowned = false;
        public const int SPAWN_RANGE = 10;
        public static int jCounter = 0;
        public int junglePoints = 0;
        public const int BOSS_SUMMON = 200;

        public const int maxBuffs = 10;
        public float teleportTime;
        public static int immuneTime = 20;
        public static int maxAI = 4;
        public int netSpam;
        public static bool noStream = false;
        private static int spawnSpaceX = 3;
        private static int spawnSpaceY = 3;
        public float gfxOffY;
        public float stepSpeed;
        private static float gravity = 0.3f;
        public bool teleporting;
        private static int maxAttack = 20;
        private static int[] attackNPC = new int[NPC.maxAttack];
        private byte netStream;
        private byte[] streamPlayer = new byte[255];
        public Vector2[] oldPos = new Vector2[10];
        public bool setFrameSize;
        public static int golemBoss = -1;
        public static int plantBoss = -1;
        public static int crimsonBoss = -1;
        public int netSkip;
        public bool netAlways;
        public int realLife = -1;
        public static int sWidth = 1920;
        public static int sHeight = 1080;
        private static int spawnRangeX = (int) ((double) (NPC.sWidth/16)*0.7);
        private static int spawnRangeY = (int) ((double) (NPC.sHeight/16)*0.7);
        public static int safeRangeX = (int) ((double) (NPC.sWidth/16)*0.52);
        public static int safeRangeY = (int) ((double) (NPC.sHeight/16)*0.52);
        private static int activeRangeX = (int) ((double) NPC.sWidth*.1);
        private static int activeRangeY = (int) ((double) NPC.sHeight*.1);
        private static int townRangeX = NPC.sWidth;
        private static int townRangeY = NPC.sHeight;
        public float npcSlots = 1f;
        //private static bool noSpawnCycle = false;
        private static int activeTime = 750;
        private static int defaultSpawnRate = 0;
        private static int defaultMaxSpawns = 5;
        public bool wet;
        public bool honeyWet;
        public byte wetCount;
        public bool lavaWet;
        public int[] buffType = new int[10];
        public int[] buffTime = new int[10];
        public int[] buffOwner = new int[10];
        public bool[] buffImmune = new bool[101];
        public bool midas;
        public bool ichor;
        public int ichorOwner = -99;
        public bool onFire;
        public bool onFire2;
        public bool onFrostBurn;
        public bool poisoned;
        public bool venom;
        public bool bleed;
        public int lifeRegen;
        public int lifeRegenCount;
        public bool confused;
        public static bool downedBoss1 = false;
        public static bool downedBoss2 = false;
        public static bool downedBoss3 = false;
        public static bool downedQueenBee = false;
        public static bool savedGoblin = false;
        public static bool savedWizard = false;
        public static bool savedMech = false;
        public static bool downedGoblins = false;
        public static bool downedFrost = false;
        public static bool downedPirates = false;
        public static bool downedClown = false;
        public static bool downedPlantBoss = false;
        public static bool downedGolemBoss = false;
        public static bool downedMechBossAny = false;
        public static bool downedMechBoss1 = false;
        public static bool downedMechBoss2 = false;
        public static bool downedMechBoss3 = false;
        private static int spawnRate = NPC.defaultSpawnRate;
        private static int maxSpawns = NPC.defaultMaxSpawns;
        public int soundDelay;
        public Vector2 position;
        public Vector2 velocity;
        public Vector2 oldPosition;
        public Vector2 oldVelocity;
        public int width;
        public int height;
        public bool active;
        public int[] immune = new int[256];
        public int[] bladeOfGrass = new int[256];
        public int direction = 1;
        public int directionY = 1;
        public int type;
        public float[] ai = new float[NPC.maxAI];
        public float[] localAI = new float[NPC.maxAI];
        public int aiAction;
        public int aiStyle;
        public bool justHit;
        public int timeLeft;
        public int target = -1;
        public int damage;
        public int defense;
        public int defDamage;
        public int defDefense;
        public int soundHit;
        public int soundKilled;
        public int life;
        public int lifeMax;
        public Rectangle targetRect;
        public double frameCounter;
        public Rectangle frame;
        public string name;
        public string displayName;
        public Color color;
        public int alpha;
        public float scale = 1f;
        public float knockBackResist = 1f;
        public int oldDirection;
        public int oldDirectionY;
        public int oldTarget;
        public int whoAmI;
        public float rotation;
        public bool noGravity;
        public bool noTileCollide;
        public bool netUpdate;
        public bool netUpdate2;
        public bool collideX;
        public bool collideY;
        public bool boss;
        public int spriteDirection = -1;
        public bool behindTiles;
        public bool lavaImmune;
        public float value;
        public bool dontTakeDamage;
        public int netID;
        public bool townNPC;
        public bool homeless;
        public int homeTileX = -1;
        public int homeTileY = -1;
        public bool oldHomeless;
        public int oldHomeTileX = -1;
        public int oldHomeTileY = -1;
        public bool friendly;
        public bool closeDoor;
        public int doorX;
        public int doorY;
        public int friendlyRegen;

        public static void clrNames()
        {
            for (int i = 0; i < 297; i++)
            {
                Main.chrName[i] = "";
            }
        }

        public static void setNames()
        {
            if (WorldGen.genRand == null)
            {
                WorldGen.genRand = new Random();
            }
            int num = WorldGen.genRand.Next(24);
            string text;
            if (num == 0)
            {
                text = "Molly";
            }
            else
            {
                if (num == 1)
                {
                    text = "Amy";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Claire";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Emily";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Katie";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Madeline";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Katelyn";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Emma";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Abigail";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Carly";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Jenna";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Heather";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Katherine";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Caitlin";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Kaitlin";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Holly";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Kaitlyn";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Hannah";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Kathryn";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Lorraine";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "Helen";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num == 21)
                                                                                                {
                                                                                                    text = "Kayla";
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num == 22)
                                                                                                    {
                                                                                                        text = "Lisa";
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        text = "Allison";
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[18] == "")
            {
                Main.chrName[18] = text;
            }
            num = WorldGen.genRand.Next(24);
            if (num == 0)
            {
                text = "Shayna";
            }
            else
            {
                if (num == 1)
                {
                    text = "Korrie";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Ginger";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Brooke";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Jenny";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Autumn";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Nancy";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Ella";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Kayla";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Selah";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Sophia";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Marshanna";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Lauren";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Trisha";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Shirlena";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Sheena";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Ellen";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Amy";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Dawn";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Susana";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "Meredith";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num == 21)
                                                                                                {
                                                                                                    text = "Selene";
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num == 22)
                                                                                                    {
                                                                                                        text = "Terra";
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        text = "Sally";
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[124] == "")
            {
                Main.chrName[124] = text;
            }
            num = WorldGen.genRand.Next(24);
            if (num == 0)
            {
                text = "DeShawn";
            }
            else
            {
                if (num == 1)
                {
                    text = "DeAndre";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Marquis";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Darnell";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Terrell";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Malik";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Trevon";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Tyrone";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Willie";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Dominique";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Demetrius";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Reginald";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Jamal";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Maurice";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Jalen";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Darius";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Xavier";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Terrance";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Andre";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Dante";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "Brimst";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num == 21)
                                                                                                {
                                                                                                    text = "Bronson";
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num == 22)
                                                                                                    {
                                                                                                        text = "Tony";
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        text = "Darryl";
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[19] == "")
            {
                Main.chrName[19] = text;
            }
            num = WorldGen.genRand.Next(35);
            if (num == 0)
            {
                text = "Joe";
            }
            else
            {
                if (num == 1)
                {
                    text = "Connor";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Tanner";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Wyatt";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Cody";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Levi";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Luke";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Jack";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Scott";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Logan";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Cole";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Asher";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Bradley";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Jacob";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Garrett";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Dylan";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Maxwell";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Steve";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Brett";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Andrew";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "Harley";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num == 21)
                                                                                                {
                                                                                                    text = "Kyle";
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num == 22)
                                                                                                    {
                                                                                                        text = "Jake";
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (num == 23)
                                                                                                        {
                                                                                                            text = "Ryan";
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (num == 24)
                                                                                                            {
                                                                                                                text = "Jeffrey";
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (num == 25)
                                                                                                                {
                                                                                                                    text = "Seth";
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (num == 26)
                                                                                                                    {
                                                                                                                        text = "Marty";
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        if (num == 27)
                                                                                                                        {
                                                                                                                            text = "Brandon";
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if (num == 28)
                                                                                                                            {
                                                                                                                                text = "Zach";
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if (num == 29)
                                                                                                                                {
                                                                                                                                    text = "Jeff";
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    if (num == 30)
                                                                                                                                    {
                                                                                                                                        text = "Daniel";
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (num == 31)
                                                                                                                                        {
                                                                                                                                            text = "Trent";
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (num == 32)
                                                                                                                                            {
                                                                                                                                                text = "Kevin";
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                if (num == 33)
                                                                                                                                                {
                                                                                                                                                    text = "Brian";
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    text = "Colin";
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[22] == "")
            {
                Main.chrName[22] = text;
            }
            num = WorldGen.genRand.Next(22);
            if (num == 0)
            {
                text = "Alalia";
            }
            else
            {
                if (num == 1)
                {
                    text = "Alalia";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Alura";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Ariella";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Caelia";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Calista";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Chryseis";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Emerenta";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Elysia";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Evvie";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Faye";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Felicitae";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Lunette";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Nata";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Nissa";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Tatiana";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Rosalva";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Shea";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Tania";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Isis";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "Celestia";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                text = "Xylia";
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[20] == "")
            {
                Main.chrName[20] = text;
            }
            num = WorldGen.genRand.Next(22);
            if (num == 0)
            {
                text = "Dolbere";
            }
            else
            {
                if (num == 1)
                {
                    text = "Bazdin";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Durim";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Tordak";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Garval";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Morthal";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Oten";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Dolgen";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Gimli";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Gimut";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Duerthen";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Beldin";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Jarut";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Ovbere";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Norkas";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Dolgrim";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Boften";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Norsun";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Dias";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Fikod";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "Urist";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                text = "Darur";
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[38] == "")
            {
                Main.chrName[38] = text;
            }
            num = WorldGen.genRand.Next(21);
            if (num == 0)
            {
                text = "Dalamar";
            }
            else
            {
                if (num == 1)
                {
                    text = "Dulais";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Elric";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Arddun";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Maelor";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Leomund";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Hirael";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Gwentor";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Greum";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Gearroid";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Fizban";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Ningauble";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Seonag";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Sargon";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Merlyn";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Magius";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Berwyn";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Arwyn";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Alasdair";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Tagar";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            text = "Xanadu";
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[108] == "")
            {
                Main.chrName[108] = text;
            }
            num = WorldGen.genRand.Next(23);
            if (num == 0)
            {
                text = "Alfred";
            }
            else
            {
                if (num == 1)
                {
                    text = "Barney";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Calvin";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Edmund";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Edwin";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Eugene";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Frank";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Frederick";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Gilbert";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Gus";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Wilbur";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Seymour";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Louis";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Humphrey";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Harold";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Milton";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Mortimer";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Howard";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Walter";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Finn";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "Isacc";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num == 21)
                                                                                                {
                                                                                                    text = "Joseph";
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    text = "Ralph";
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[17] == "")
            {
                Main.chrName[17] = text;
            }
            num = WorldGen.genRand.Next(24);
            if (num == 0)
            {
                text = "Sebastian";
            }
            else
            {
                if (num == 1)
                {
                    text = "Rupert";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Clive";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Nigel";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Mervyn";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Cedric";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Pip";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Cyril";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Fitz";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Lloyd";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Arthur";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Rodney";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Graham";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Edward";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Alfred";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Edmund";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Henry";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Herald";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Roland";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Lincoln";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "Lloyd";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num == 21)
                                                                                                {
                                                                                                    text = "Edgar";
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num == 22)
                                                                                                    {
                                                                                                        text = "Eustace";
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        text = "Rodrick";
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[54] == "")
            {
                Main.chrName[54] = text;
            }
            num = WorldGen.genRand.Next(25);
            if (num == 0)
            {
                text = "Grodax";
            }
            else
            {
                if (num == 1)
                {
                    text = "Sarx";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Xon";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Mrunok";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Nuxatk";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Tgerd";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Darz";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Smador";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Stazen";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Mobart";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Knogs";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Tkanus";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Negurk";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Nort";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Durnok";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Trogem";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Stezom";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Gnudar";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Ragz";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Fahd";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "Xanos";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num == 21)
                                                                                                {
                                                                                                    text = "Arback";
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num == 22)
                                                                                                    {
                                                                                                        text = "Fjell";
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (num == 23)
                                                                                                        {
                                                                                                            text = "Dalek";
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            text = "Knub";
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[107] == "")
            {
                Main.chrName[107] = text;
            }
            num = WorldGen.genRand.Next(12);
            if (num == 0)
            {
                text = "Reishi";
            }
            else
            {
                if (num == 1)
                {
                    text = "Maitake";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Chanterelle";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Porcini";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Shimeji";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Amanita";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Muscaria";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Agaric";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Cremini";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Morel";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Enoki";
                                                    }
                                                    else
                                                    {
                                                        text = "Shiitake";
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[160] == "")
            {
                Main.chrName[160] = text;
            }
            num = WorldGen.genRand.Next(20);
            if (num == 0)
            {
                text = "Whitney";
            }
            else
            {
                if (num == 1)
                {
                    text = "Verity";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Ada";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Cornelia";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Lydia";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Leila";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Minerva";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Emeline";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Cynthia";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Fidelia";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Lilly";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Phoebe";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Zylphia";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Zelda";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Selina";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Hope";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Isabella";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Judith";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "Savannah";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        text = "Vivian";
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[178] == "")
            {
                Main.chrName[178] = text;
            }
            num = WorldGen.genRand.Next(16);
            if (num == 0)
            {
                text = "Abdosir";
            }
            else
            {
                if (num == 1)
                {
                    text = "Akbar";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Bodashtart";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Danel";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Hanno";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Hiram";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Kanmi";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Philosir";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Tabnit";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Yutpan";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Ahirom";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Batnoam";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Sikarbaal";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Hannibal";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Yehomilk";
                                                                    }
                                                                    else
                                                                    {
                                                                        text = "Ahinadab";
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[207] == "")
            {
                Main.chrName[207] = text;
            }
            num = WorldGen.genRand.Next(18);
            if (num == 0)
            {
                text = "Candy";
            }
            else
            {
                if (num == 1)
                {
                    text = "Roxanne";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Trixy";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Destiny";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Lexus";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Bambi";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Bailey";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Glitter";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Sparkle";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Paris";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Dazzle";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Fantasy";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Bunny";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Sugar";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Fantasia";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Star";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Isis";
                                                                            }
                                                                            else
                                                                            {
                                                                                text = "Cherry";
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[208] == "")
            {
                Main.chrName[208] = text;
            }
            num = WorldGen.genRand.Next(23);
            if (num == 0)
            {
                text = "Alpha";
            }
            else
            {
                if (num == 1)
                {
                    text = "Beta";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Delta";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Omega";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Gamma";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Theta";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Kappa";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Omicron";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Sigma";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Upsilon";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Phi";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Zeta";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Lambda";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Nu";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Ci";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Rho";
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num == 16)
                                                                            {
                                                                                text = "Phi";
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num == 17)
                                                                                {
                                                                                    text = "Fender";
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num == 18)
                                                                                    {
                                                                                        text = "T-3E0";
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num == 19)
                                                                                        {
                                                                                            text = "Niner-7";
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num == 20)
                                                                                            {
                                                                                                text = "A.N.D.Y";
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num == 21)
                                                                                                {
                                                                                                    text = "Syn-X";
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    text = "Mu";
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[209] == "")
            {
                Main.chrName[209] = text;
            }
            num = WorldGen.genRand.Next(17);
            if (num == 0)
            {
                text = "Marco";
            }
            else
            {
                if (num == 1)
                {
                    text = "Guido";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Enzo";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Martino";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Mauro";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Lorenzo";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Ludo";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Luciano";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Carlo";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Bruno";
                                                }
                                                else
                                                {
                                                    if (num == 10)
                                                    {
                                                        text = "Mario";
                                                    }
                                                    else
                                                    {
                                                        if (num == 11)
                                                        {
                                                            text = "Leonardo";
                                                        }
                                                        else
                                                        {
                                                            if (num == 12)
                                                            {
                                                                text = "Raphael";
                                                            }
                                                            else
                                                            {
                                                                if (num == 13)
                                                                {
                                                                    text = "Luigi";
                                                                }
                                                                else
                                                                {
                                                                    if (num == 14)
                                                                    {
                                                                        text = "Luca";
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num == 15)
                                                                        {
                                                                            text = "Darren";
                                                                        }
                                                                        else
                                                                        {
                                                                            text = "Stefano";
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[227] == "")
            {
                Main.chrName[227] = text;
            }
            num = WorldGen.genRand.Next(10);
            if (num == 0)
            {
                text = "Abibe";
            }
            else
            {
                if (num == 1)
                {
                    text = "Jamundi";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "U'wa";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Tairona";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Xirigua";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Zop'a";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "Opuni";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Kogi-ghi";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Konah";
                                            }
                                            else
                                            {
                                                text = "Gboto";
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[228] == "")
            {
                Main.chrName[228] = text;
            }
            num = WorldGen.genRand.Next(11);
            if (num == 0)
            {
                text = "David";
            }
            else
            {
                if (num == 1)
                {
                    text = "Red Beard";
                }
                else
                {
                    if (num == 2)
                    {
                        text = "Jack";
                    }
                    else
                    {
                        if (num == 3)
                        {
                            text = "Black Beard";
                        }
                        else
                        {
                            if (num == 4)
                            {
                                text = "Captain Morgan";
                            }
                            else
                            {
                                if (num == 5)
                                {
                                    text = "Wet Beard";
                                }
                                else
                                {
                                    if (num == 6)
                                    {
                                        text = "James T. Beard";
                                    }
                                    else
                                    {
                                        if (num == 7)
                                        {
                                            text = "Gunpowder Garry";
                                        }
                                        else
                                        {
                                            if (num == 8)
                                            {
                                                text = "Captain Stoney Dirt";
                                            }
                                            else
                                            {
                                                if (num == 9)
                                                {
                                                    text = "Jake";
                                                }
                                                else
                                                {
                                                    text = "Captain Bullywort";
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (Main.chrName[229] == "")
            {
                Main.chrName[229] = text;
            }
        }

        public void netDefaults(int type)
        {
            if (type < 0)
            {
                if (type == -1)
                {
                    this.SetDefaults("Slimeling");
                    return;
                }
                if (type == -2)
                {
                    this.SetDefaults("Slimer2");
                    return;
                }
                if (type == -3)
                {
                    this.SetDefaults("Green Slime");
                    return;
                }
                if (type == -4)
                {
                    this.SetDefaults("Pinky");
                    return;
                }
                if (type == -5)
                {
                    this.SetDefaults("Baby Slime");
                    return;
                }
                if (type == -6)
                {
                    this.SetDefaults("Black Slime");
                    return;
                }
                if (type == -7)
                {
                    this.SetDefaults("Purple Slime");
                    return;
                }
                if (type == -8)
                {
                    this.SetDefaults("Red Slime");
                    return;
                }
                if (type == -9)
                {
                    this.SetDefaults("Yellow Slime");
                    return;
                }
                if (type == -10)
                {
                    this.SetDefaults("Jungle Slime");
                    return;
                }
                if (type == -11)
                {
                    this.SetDefaults("Little Eater");
                    return;
                }
                if (type == -12)
                {
                    this.SetDefaults("Big Eater");
                    return;
                }
                if (type == -13)
                {
                    this.SetDefaults("Short Bones");
                    return;
                }
                if (type == -14)
                {
                    this.SetDefaults("Big Boned");
                    return;
                }
                if (type == -15)
                {
                    this.SetDefaults("Heavy Skeleton");
                    return;
                }
                if (type == -16)
                {
                    this.SetDefaults("Little Stinger");
                    return;
                }
                if (type == -17)
                {
                    this.SetDefaults("Big Stinger");
                    return;
                }
                if (type == -18)
                {
                    this.SetDefaults("Tiny Moss Hornet");
                    return;
                }
                if (type == -19)
                {
                    this.SetDefaults("Little Moss Hornet");
                    return;
                }
                if (type == -20)
                {
                    this.SetDefaults("Big Moss Hornet");
                    return;
                }
                if (type == -21)
                {
                    this.SetDefaults("Giant Moss Hornet");
                    return;
                }
                if (type == -22)
                {
                    this.SetDefaults("Little Crimera");
                    return;
                }
                if (type == -23)
                {
                    this.SetDefaults("Big Crimera");
                    return;
                }
                if (type == -24)
                {
                    this.SetDefaults("Little Crimslime");
                    return;
                }
                if (type == -25)
                {
                    this.SetDefaults("Big Crimslime");
                    return;
                }
                if (type == -26)
                {
                    this.SetDefaults("Small Zombie");
                    return;
                }
                if (type == -27)
                {
                    this.SetDefaults("Big Zombie");
                    return;
                }
                if (type == -28)
                {
                    this.SetDefaults("Small Bald Zombie");
                    return;
                }
                if (type == -29)
                {
                    this.SetDefaults("Big Bald Zombie");
                    return;
                }
                if (type == -30)
                {
                    this.SetDefaults("Small Pincushion Zombie");
                    return;
                }
                if (type == -31)
                {
                    this.SetDefaults("Big Pincushion Zombie");
                    return;
                }
                if (type == -32)
                {
                    this.SetDefaults("Small Slimed Zombie");
                    return;
                }
                if (type == -33)
                {
                    this.SetDefaults("Big Slimed Zombie");
                    return;
                }
                if (type == -34)
                {
                    this.SetDefaults("Small Swamp Zombie");
                    return;
                }
                if (type == -35)
                {
                    this.SetDefaults("Big Swamp Zombie");
                    return;
                }
                if (type == -36)
                {
                    this.SetDefaults("Small Twiggy Zombie");
                    return;
                }
                if (type == -37)
                {
                    this.SetDefaults("Big Twiggy Zombie");
                    return;
                }
                if (type == -38)
                {
                    this.SetDefaults("Cataract Eye 2");
                    return;
                }
                if (type == -39)
                {
                    this.SetDefaults("Sleepy Eye 2");
                    return;
                }
                if (type == -40)
                {
                    this.SetDefaults("Dialated Eye 2");
                    return;
                }
                if (type == -41)
                {
                    this.SetDefaults("Green Eye 2");
                    return;
                }
                if (type == -42)
                {
                    this.SetDefaults("Purple Eye 2");
                    return;
                }
                if (type == -43)
                {
                    this.SetDefaults("Demon Eye 2");
                    return;
                }
                if (type == -44)
                {
                    this.SetDefaults("Small Female Zombie");
                    return;
                }
                if (type == -45)
                {
                    this.SetDefaults("Big Female Zombie");
                    return;
                }
                if (type == -46)
                {
                    this.SetDefaults("Small Skeleton");
                    return;
                }
                if (type == -47)
                {
                    this.SetDefaults("Big Skeleton");
                    return;
                }
                if (type == -48)
                {
                    this.SetDefaults("Small Headache Skeleton");
                    return;
                }
                if (type == -49)
                {
                    this.SetDefaults("Big Headache Skeleton");
                    return;
                }
                if (type == -50)
                {
                    this.SetDefaults("Small Misassembled Skeleton");
                    return;
                }
                if (type == -51)
                {
                    this.SetDefaults("Big Misassembled Skeleton");
                    return;
                }
                if (type == -52)
                {
                    this.SetDefaults("Small Pantless Skeleton");
                    return;
                }
                if (type == -53)
                {
                    this.SetDefaults("Big Pantless Skeleton");
                    return;
                }
                if (type == -54)
                {
                    this.SetDefaults("Small Rain Zombie");
                    return;
                }
                if (type == -55)
                {
                    this.SetDefaults("Big Rain Zombie");
                    return;
                }
                if (type == -56)
                {
                    this.SetDefaults("Little Hornet Fatty");
                    return;
                }
                if (type == -57)
                {
                    this.SetDefaults("Big Hornet Fatty");
                    return;
                }
                if (type == -58)
                {
                    this.SetDefaults("Little Hornet Honey");
                    return;
                }
                if (type == -59)
                {
                    this.SetDefaults("Big Hornet Honey");
                    return;
                }
                if (type == -60)
                {
                    this.SetDefaults("Little Hornet Leafy");
                    return;
                }
                if (type == -61)
                {
                    this.SetDefaults("Big Hornet Leafy");
                    return;
                }
                if (type == -62)
                {
                    this.SetDefaults("Little Hornet Spikey");
                    return;
                }
                if (type == -63)
                {
                    this.SetDefaults("Big Hornet Spikey");
                    return;
                }
                if (type == -64)
                {
                    this.SetDefaults("Little Hornet Stingy");
                    return;
                }
                if (type == -65)
                {
                    this.SetDefaults("Big Hornet Stingy");
                    return;
                }
            }
            else
            {
                this.SetDefaults(type, -1f);
            }
        }

        public void SetDefaults(string Name)
        {
            this.statusKiller = 0;
            this.itemEXP = 0;
            this.team = -1;
            this.jungle = false;
            this.junglePoints = 0;

            this.SetDefaults(0, -1f);
            if (Name == "Slimeling")
            {
                this.SetDefaults(81, 0.6f);
                this.itemEXP = 1;
                this.jungle = true;
                this.name = Name;
                this.damage = 20 + (2*(Main.gameTime/7200));
                this.defense = 0;
                this.life = 40 + (4*(Main.gameTime/7200));
                this.knockBackResist = 1.2f;
                this.value = 400 + (100*(Main.gameTime/7200));
                this.netID = -1;
            }
            else if (Name == "Slimer2")
            {
                this.SetDefaults(81, 0.9f);
                this.displayName = "Slimer";
                this.name = Name;
                this.damage = 45;
                this.defense = 20;
                this.life = 90;
                this.knockBackResist = 1.2f;
                this.value = 100f;
                this.netID = -2;
            }
            else if (Name == "Green Slime")
            {
                this.SetDefaults(1, 0.9f);
                this.name = Name;
                this.damage = 6;
                this.defense = 0;
                this.life = 14;
                this.knockBackResist = 1.2f;
                this.color = new Color(0, 220, 40, 100);
                this.value = 3f;
                this.netID = -3;
            }
            else if (Name == "Pinky")
            {
                this.SetDefaults(1, 0.6f);
                this.name = Name;
                this.damage = 5;
                this.defense = 5;
                this.life = 150;
                this.knockBackResist = 1.4f;
                this.color = new Color(250, 30, 90, 90);
                this.value = 10000f;
                this.netID = -4;
            }
            else if (Name == "Baby Slime")
            {
                this.SetDefaults(1, 0.9f);
                this.itemEXP = 1;
                this.jungle = true;
                this.name = Name;
                this.damage = 15 + (Main.gameTime/7200);
                this.defense = 0;
                this.life = 20 + (2*(Main.gameTime/7200));
                this.knockBackResist = 0.95f;
                this.alpha = 120;
                this.color = new Color(0, 0, 0, 50);
                this.value = 200 + (50*(Main.gameTime/7200));
                this.netID = -5;
            }
            else if (Name == "Black Slime")
            {
                this.SetDefaults(1, -1f);
                this.name = Name;
                this.damage = 15;
                this.defense = 4;
                this.life = 45;
                this.color = new Color(0, 0, 0, 50);
                this.value = 20f;
                this.netID = -6;
            }
            else if (Name == "Purple Slime")
            {
                this.SetDefaults(1, 1.2f);
                this.name = Name;
                this.damage = 12;
                this.defense = 6;
                this.life = 40;
                this.knockBackResist = 0.9f;
                this.color = new Color(200, 0, 255, 150);
                this.value = 10f;
                this.netID = -7;
            }
            else if (Name == "Red Slime")
            {
                this.SetDefaults(1, -1f);
                this.name = Name;
                this.damage = 12;
                this.defense = 4;
                this.life = 35;
                this.color = new Color(255, 30, 0, 100);
                this.value = 8f;
                this.netID = -8;
            }
            else if (Name == "Yellow Slime")
            {
                this.SetDefaults(1, 1.2f);
                this.name = Name;
                this.damage = 15;
                this.defense = 7;
                this.life = 45;
                this.color = new Color(255, 255, 0, 100);
                this.value = 10f;
                this.netID = -9;
            }
            else if (Name == "Jungle Slime")
            {
                this.SetDefaults(1, 1.1f);
                this.name = Name;
                this.damage = 18;
                this.defense = 6;
                this.life = 60;
                this.color = new Color(143, 215, 93, 100);
                this.value = 500f;
                this.netID = -10;
            }
            else if (Name == "Little Eater")
            {
                this.SetDefaults(6, 0.85f);
                this.name = Name;
                this.displayName = "Eater of Souls";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -11;
            }
            else if (Name == "Big Eater")
            {
                this.SetDefaults(6, 1.15f);
                this.name = Name;
                this.displayName = "Eater of Souls";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -12;
            }
            else if (Name == "Short Bones")
            {
                this.SetDefaults(31, 0.9f);
                this.name = Name;
                this.displayName = "Angry Bones";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.netID = -13;
            }
            else if (Name == "Big Boned")
            {
                this.SetDefaults(31, 1.15f);
                this.name = Name;
                this.displayName = "Angry Bones";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((double) ((float) this.damage*this.scale)*1.1);
                this.life = (int) ((double) ((float) this.life*this.scale)*1.1);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots = 2f;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -14;
            }
            else if (Name == "Heavy Skeleton")
            {
                this.SetDefaults(77, 1.15f);
                this.name = Name;
                this.displayName = "Armored Skeleton";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((double) ((float) this.damage*this.scale)*1.1);
                this.life = 400;
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots = 2f;
                this.knockBackResist *= 2f - this.scale;
                this.height = 44;
                this.netID = -15;
            }
            else if (Name == "Little Stinger")
            {
                this.SetDefaults(42, 0.85f);
                this.displayName = "Hornet";
                this.junglePoints = 1;
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -16;
            }
            else if (Name == "Big Stinger")
            {
                this.SetDefaults(42, 1.2f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -17;
            }
            else if (Name == "Tiny Moss Hornet")
            {
                this.SetDefaults(176, 0.8f);
                this.displayName = "Moss Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -18;
            }
            else if (Name == "Little Moss Hornet")
            {
                this.SetDefaults(176, 0.9f);
                this.displayName = "Moss Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -19;
            }
            else if (Name == "Big Moss Hornet")
            {
                this.SetDefaults(176, 1.1f);
                this.displayName = "Moss Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -20;
            }
            else if (Name == "Giant Moss Hornet")
            {
                this.SetDefaults(176, 1.2f);
                this.displayName = "Moss Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -21;
            }
            else if (Name == "Little Crimera")
            {
                this.SetDefaults(173, 0.85f);
                this.displayName = "Crimera";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -22;
            }
            else if (Name == "Big Crimera")
            {
                this.SetDefaults(173, 1.15f);
                this.displayName = "Crimera";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -23;
            }
            else if (Name == "Little Crimslime")
            {
                this.SetDefaults(183, 0.85f);
                this.displayName = "Crimslime";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -24;
            }
            else if (Name == "Big Crimslime")
            {
                this.SetDefaults(183, 1.15f);
                this.displayName = "Crimslime";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -25;
            }
            else if (Name == "Small Zombie")
            {
                this.SetDefaults(3, 0.9f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -26;
            }
            else if (Name == "Big Zombie")
            {
                this.SetDefaults(3, 1.1f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -27;
            }
            else if (Name == "Small Bald Zombie")
            {
                this.SetDefaults(132, 0.85f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -28;
            }
            else if (Name == "Big Bald Zombie")
            {
                this.SetDefaults(132, 1.15f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -29;
            }
            else if (Name == "Small Pincushion Zombie")
            {
                this.SetDefaults(186, 0.93f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -30;
            }
            else if (Name == "Big Pincushion Zombie")
            {
                this.SetDefaults(186, 1.13f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -31;
            }
            else if (Name == "Small Slimed Zombie")
            {
                this.SetDefaults(187, 0.89f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -32;
            }
            else if (Name == "Big Slimed Zombie")
            {
                this.SetDefaults(187, 1.11f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -33;
            }
            else if (Name == "Small Swamp Zombie")
            {
                this.SetDefaults(188, 0.87f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -34;
            }
            else if (Name == "Big Swamp Zombie")
            {
                this.SetDefaults(188, 1.13f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -35;
            }
            else if (Name == "Small Twiggy Zombie")
            {
                this.SetDefaults(189, 0.92f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -36;
            }
            else if (Name == "Big Twiggy Zombie")
            {
                this.SetDefaults(189, 1.08f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -37;
            }
            else if (Name == "Cataract Eye 2")
            {
                this.SetDefaults(190, 1.15f);
                this.name = Name;
                this.displayName = "Demon Eye";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -38;
            }
            else if (Name == "Sleepy Eye 2")
            {
                this.SetDefaults(191, 1.1f);
                this.name = Name;
                this.displayName = "Demon Eye";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -39;
            }
            else if (Name == "Dialated Eye 2")
            {
                this.SetDefaults(192, 0.9f);
                this.name = Name;
                this.displayName = "Demon Eye";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -40;
            }
            else if (Name == "Green Eye 2")
            {
                this.SetDefaults(193, 0.85f);
                this.name = Name;
                this.displayName = "Demon Eye";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -41;
            }
            else if (Name == "Purple Eye 2")
            {
                this.SetDefaults(194, 1.1f);
                this.name = Name;
                this.displayName = "Demon Eye";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -42;
            }
            else if (Name == "Demon Eye 2")
            {
                this.SetDefaults(2, 1.15f);
                this.name = Name;
                this.displayName = "Demon Eye";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -43;
            }
            else if (Name == "Small Female Zombie")
            {
                this.SetDefaults(200, 0.87f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -44;
            }
            else if (Name == "Big Female Zombie")
            {
                this.SetDefaults(200, 1.05f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -45;
            }
            else if (Name == "Small Skeleton")
            {
                this.SetDefaults(21, 0.9f);
                this.name = Name;
                this.displayName = "Skeleton";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -46;
            }
            else if (Name == "Big Skeleton")
            {
                this.SetDefaults(21, 1.1f);
                this.name = Name;
                this.displayName = "Skeleton";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -47;
            }
            else if (Name == "Small Headache Skeleton")
            {
                this.SetDefaults(201, 0.93f);
                this.name = Name;
                this.displayName = "Skeleton";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -48;
            }
            else if (Name == "Big Headache Skeleton")
            {
                this.SetDefaults(201, 1.07f);
                this.name = Name;
                this.displayName = "Skeleton";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -49;
            }
            else if (Name == "Small Misassembled Skeleton")
            {
                this.SetDefaults(202, 0.87f);
                this.name = Name;
                this.displayName = "Skeleton";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -50;
            }
            else if (Name == "Big Misassembled Skeleton")
            {
                this.SetDefaults(202, 1.13f);
                this.name = Name;
                this.displayName = "Skeleton";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -51;
            }
            else if (Name == "Small Pantless Skeleton")
            {
                this.SetDefaults(203, 0.85f);
                this.name = Name;
                this.displayName = "Skeleton";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -52;
            }
            else if (Name == "Big Pantless Skeleton")
            {
                this.SetDefaults(203, 1.15f);
                this.name = Name;
                this.displayName = "Skeleton";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -53;
            }
            else if (Name == "Small Rain Zombie")
            {
                this.SetDefaults(223, 0.9f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -54;
            }
            else if (Name == "Big Rain Zombie")
            {
                this.SetDefaults(223, 1.1f);
                this.name = Name;
                this.displayName = "Zombie";
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -55;
            }
            else if (Name == "Little Hornet Fatty")
            {
                this.SetDefaults(231, 0.85f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -56;
            }
            else if (Name == "Big Hornet Fatty")
            {
                this.SetDefaults(231, 1.25f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -57;
            }
            else if (Name == "Little Hornet Honey")
            {
                this.SetDefaults(232, 0.8f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -58;
            }
            else if (Name == "Big Hornet Honey")
            {
                this.SetDefaults(232, 1.15f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -59;
            }
            else if (Name == "Little Hornet Leafy")
            {
                this.SetDefaults(233, 0.92f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -60;
            }
            else if (Name == "Big Hornet Leafy")
            {
                this.SetDefaults(233, 1.1f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -61;
            }
            else if (Name == "Little Hornet Spikey")
            {
                this.SetDefaults(234, 0.78f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -62;
            }
            else if (Name == "Big Hornet Spikey")
            {
                this.SetDefaults(234, 1.16f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -63;
            }
            else if (Name == "Little Hornet Stingy")
            {
                this.SetDefaults(235, 0.87f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -64;
            }
            else if (Name == "Big Hornet Stingy")
            {
                this.SetDefaults(235, 1.21f);
                this.displayName = "Hornet";
                this.name = Name;
                this.defense = (int) ((float) this.defense*this.scale);
                this.damage = (int) ((float) this.damage*this.scale);
                this.life = (int) ((float) this.life*this.scale);
                this.value = (float) ((int) (this.value*this.scale));
                this.npcSlots *= this.scale;
                this.knockBackResist *= 2f - this.scale;
                this.netID = -65;
            }
            else if (Name != "")
            {
                for (int i = 1; i < 297; i++)
                {
                    if (Main.npcName[i] == Name)
                    {
                        this.SetDefaults(i, -1f);
                        return;
                    }
                }
                this.SetDefaults(0, -1f);
                this.active = false;
            }
            else
            {
                this.active = false;
            }

            if (this.type != 69 && this.type != 70)
            {
                this.displayName = "Lv. " + ((Main.gameTime/7200) + 1) + " " + Lang.npcName(this.netID, false);
            }
            else
            {
                this.displayName = Lang.npcName(this.netID, false);
            }
            this.lifeMax = this.life;
            this.defDamage = this.damage;
            this.defDefense = this.defense;
            this.value /= 100;
        }

        public static bool MechSpawn(float x, float y, int type)
        {
            int num = 0;
            int num2 = 0;
            int num3 = 0;
            for (int i = 0; i < 200; i++)
            {
                if (Main.npc[i].active && Main.npc[i].type == type)
                {
                    num++;
                    Vector2 vector = new Vector2(x, y);
                    float num4 = Main.npc[i].position.X - vector.X;
                    float num5 = Main.npc[i].position.Y - vector.Y;
                    float num6 = (float) Math.Sqrt((double) (num4*num4 + num5*num5));
                    if (num6 < 200f)
                    {
                        num2++;
                    }
                    if (num6 < 600f)
                    {
                        num3++;
                    }
                }
            }
            return num2 < 3 && num3 < 6 && num < 10;
        }

        public static int TypeToNum(int type)
        {
            if (type == 17)
            {
                return 2;
            }
            if (type == 18)
            {
                return 3;
            }
            if (type == 19)
            {
                return 6;
            }
            if (type == 20)
            {
                return 5;
            }
            if (type == 22)
            {
                return 1;
            }
            if (type == 38)
            {
                return 4;
            }
            if (type == 54)
            {
                return 7;
            }
            if (type == 107)
            {
                return 9;
            }
            if (type == 108)
            {
                return 10;
            }
            if (type == 124)
            {
                return 8;
            }
            if (type == 142)
            {
                return 11;
            }
            if (type == 160)
            {
                return 12;
            }
            if (type == 178)
            {
                return 13;
            }
            if (type == 207)
            {
                return 14;
            }
            if (type == 208)
            {
                return 15;
            }
            if (type == 209)
            {
                return 16;
            }
            if (type == 227)
            {
                return 17;
            }
            if (type == 228)
            {
                return 18;
            }
            if (type == 229)
            {
                return 19;
            }
            return -1;
        }

        public static int NumToType(int type)
        {
            if (type == 2)
            {
                return 17;
            }
            if (type == 3)
            {
                return 18;
            }
            if (type == 6)
            {
                return 19;
            }
            if (type == 5)
            {
                return 20;
            }
            if (type == 1)
            {
                return 22;
            }
            if (type == 4)
            {
                return 38;
            }
            if (type == 7)
            {
                return 54;
            }
            if (type == 9)
            {
                return 107;
            }
            if (type == 10)
            {
                return 108;
            }
            if (type == 8)
            {
                return 124;
            }
            if (type == 11)
            {
                return 142;
            }
            if (type == 12)
            {
                return 160;
            }
            if (type == 13)
            {
                return 178;
            }
            if (type == 14)
            {
                return 207;
            }
            if (type == 15)
            {
                return 208;
            }
            if (type == 16)
            {
                return 209;
            }
            if (type == 17)
            {
                return 227;
            }
            if (type == 18)
            {
                return 228;
            }
            if (type == 19)
            {
                return 229;
            }
            return -1;
        }

        public void SetDefaults(int Type, float scaleOverride = -1f)
        {
            this.lastHitValue = 0.0f;
            this.healCD = 0;
            this.shootCD = 0;
            NPC.noStream = false;
            this.netStream = 32;
            bool flag = false;
            this.netID = 0;
            this.netAlways = false;
            this.netSpam = 0;
            this.statusKiller = 0;
            this.itemEXP = 0;
            this.team = -1;
            this.jungle = false;
            this.junglePoints = 0;
            this.abilityPointHP = 0;
            if (Type == Main.wave_minions[0]) this.itemEXP = 1;
            if (Type == Main.wave_minions[1]) this.itemEXP = 2;
            if (Type == Main.wave_minions[2]) this.itemEXP = 3;

            for (int i = 0; i < this.oldPos.Length; i++)
            {
                this.oldPos[i].X = 0f;
                this.oldPos[i].Y = 0f;
            }
            for (int k = 0; k < 81; k++)
            {
                this.buffImmune[k] = false;
            }
            this.setFrameSize = false;
            this.buffImmune[31] = true;
            this.netSkip = -2;
            this.realLife = -1;
            this.lifeRegen = 0;
            this.lifeRegenCount = 0;
            this.poisoned = false;
            this.venom = false;
            this.onFire = false;
            this.midas = false;
            this.ichor = false;
            this.onFrostBurn = false;
            this.confused = false;
            this.onFire2 = false;
            this.justHit = false;
            this.dontTakeDamage = false;
            this.npcSlots = 1f;
            this.lavaImmune = false;
            this.lavaWet = false;
            this.wetCount = 0;
            this.wet = false;
            this.townNPC = false;
            this.homeless = false;
            this.homeTileX = -1;
            this.homeTileY = -1;
            this.friendly = false;
            this.behindTiles = false;
            this.boss = false;
            this.noTileCollide = false;
            this.rotation = 0f;
            this.active = true;
            this.alpha = 0;
            this.color = default(Color);
            this.collideX = false;
            this.collideY = false;
            this.direction = 0;
            this.oldDirection = this.direction;
            this.frameCounter = 0.0;
            this.netUpdate = true;
            this.netUpdate2 = false;
            this.knockBackResist = 1f;
            this.name = "";
            this.displayName = "";
            this.noGravity = false;
            this.scale = 1f;
            this.soundHit = 0;
            this.soundKilled = 0;
            this.spriteDirection = -1;
            this.target = 255;
            this.oldTarget = this.target;
            this.targetRect = default(Rectangle);
            this.timeLeft = NPC.activeTime;
            this.type = Type;
            this.value = 0f;
            for (int l = 0; l < NPC.maxAI; l++)
            {
                this.ai[l] = 0f;
            }
            for (int m = 0; m < NPC.maxAI; m++)
            {
                this.localAI[m] = 0f;
            }
            if (this.type == 1)
            {
                this.name = "Blue Slime";
                this.width = 24;
                this.height = 18;
                this.aiStyle = 1;
                this.damage = 15;
                this.defense = 2;
                this.lifeMax = 25;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 175;
                this.color = new Color(0, 80, 255, 100);
            }
            else if (this.type == 2)
            {
                this.name = "Demon Eye";
                this.width = 30;
                this.height = 32;
                this.aiStyle = 2;
                this.damage = 18;
                this.defense = 2;
                this.lifeMax = 60;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
                this.value = 75f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 3)
            {
                this.name = "Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 14;
                this.defense = 6;
                this.lifeMax = 45;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 60f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 4)
            {
                this.name = "Eye of Cthulhu";
                this.width = 100;
                this.height = 110;
                this.aiStyle = 4;
                this.damage = 15;
                this.defense = 12;
                this.lifeMax = 2800;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0f;
                this.noGravity = true;
                this.noTileCollide = true;
                this.timeLeft = NPC.activeTime*30;
                this.boss = true;
                this.value = 30000f;
                this.npcSlots = 5f;
            }
            else if (this.type == 5)
            {
                this.name = "Servant of Cthulhu";
                this.width = 20;
                this.height = 20;
                this.aiStyle = 5;
                this.damage = 12;
                this.defense = 0;
                this.lifeMax = 8;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
            }
            else if (this.type == 6)
            {
                this.npcSlots = 1f;
                this.name = "Eater of Souls";
                this.width = 30;
                this.height = 30;
                this.aiStyle = 5;
                this.damage = 22;
                this.defense = 8;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.knockBackResist = 0.5f;
                this.value = 90f;
            }
            else if (this.type == 7)
            {
                this.displayName = "Devourer";
                this.npcSlots = 3.5f;
                this.name = "Devourer Head";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.damage = 31;
                this.defense = 2;
                this.lifeMax = 100;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 140f;
                this.netAlways = true;
            }
            else if (this.type == 8)
            {
                this.displayName = "Devourer";
                this.name = "Devourer Body";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 16;
                this.defense = 6;
                this.lifeMax = 100;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 140f;
                NPC.noStream = true;
            }
            else if (this.type == 9)
            {
                this.displayName = "Devourer";
                this.name = "Devourer Tail";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 13;
                this.defense = 10;
                this.lifeMax = 100;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 140f;
                NPC.noStream = true;
            }
            else if (this.type == 10)
            {
                this.displayName = "Giant Worm";
                this.name = "Giant Worm Head";
                this.width = 14;
                this.height = 14;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 8;
                this.defense = 0;
                this.lifeMax = 30;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 40f;
            }
            else if (this.type == 11)
            {
                this.displayName = "Giant Worm";
                this.name = "Giant Worm Body";
                this.width = 14;
                this.height = 14;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 4;
                this.defense = 4;
                this.lifeMax = 30;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 40f;
                NPC.noStream = true;
            }
            else if (this.type == 12)
            {
                this.displayName = "Giant Worm";
                this.name = "Giant Worm Tail";
                this.width = 14;
                this.height = 14;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 4;
                this.defense = 6;
                this.lifeMax = 30;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 40f;
                NPC.noStream = true;
            }
            else if (this.type == 13)
            {
                this.displayName = "Eater of Worlds";
                this.npcSlots = 5f;
                this.name = "Eater of Worlds Head";
                this.width = 38;
                this.height = 38;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 22;
                this.defense = 2;
                this.lifeMax = 65;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 300f;
                this.scale = 1f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 14)
            {
                this.displayName = "Eater of Worlds";
                this.name = "Eater of Worlds Body";
                this.width = 38;
                this.height = 38;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 13;
                this.defense = 4;
                this.lifeMax = 150;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 300f;
                this.scale = 1f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                NPC.noStream = true;
            }
            else if (this.type == 15)
            {
                this.displayName = "Eater of Worlds";
                this.name = "Eater of Worlds Tail";
                this.width = 38;
                this.height = 38;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 11;
                this.defense = 8;
                this.lifeMax = 220;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 300f;
                this.scale = 1f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                NPC.noStream = true;
            }
            else if (this.type == 16)
            {
                this.npcSlots = 2f;
                this.name = "Mother Slime";
                this.itemEXP = 1;
                this.junglePoints = 2;
                this.jungle = true;
                this.width = 36;
                this.height = 24;
                this.aiStyle = 1;
                this.damage = 15 + ((Main.gameTime/7200));
                this.defense = (int) (0.5f*(Main.gameTime/7200));
                this.lifeMax = 75 + (8*(Main.gameTime/7200));
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 120;
                this.color = new Color(0, 0, 0, 50);
                this.value = 1000 + (250*(Main.gameTime/7200));
                this.scale = 2f;
                this.knockBackResist = 0.6f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 17)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Merchant";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 18)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Nurse";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 19)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Arms Dealer";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 20)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Dryad";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 21)
            {
                this.name = "Skeleton";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 8;
                this.lifeMax = 60;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 100f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 22)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Guide";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 23)
            {
                this.name = "Meteor Head";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 5;
                this.damage = 40;
                this.defense = 6;
                this.lifeMax = 26;
                this.soundHit = 3;
                this.soundKilled = 3;
                this.noGravity = true;
                this.noTileCollide = true;
                this.value = 80f;
                this.knockBackResist = 0.4f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 24)
            {
                this.npcSlots = 3f;
                this.name = "Fire Imp";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 30;
                this.defense = 16;
                this.lifeMax = 70;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
                this.lavaImmune = true;
                this.value = 350f;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 25)
            {
                this.name = "Burning Sphere";
                this.width = 16;
                this.height = 16;
                this.aiStyle = 9;
                this.damage = 30;
                this.defense = 0;
                this.lifeMax = 1;
                this.soundHit = 3;
                this.soundKilled = 3;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.alpha = 100;
            }
            else if (this.type == 26)
            {
                this.name = "Goblin Peon";
                this.itemEXP = 2;
                this.team = 1;
                this.scale = 0.95f;
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 10 + (4*(int) (Main.gameTime/7200));
                this.defense = ((int) (Main.gameTime/7200));
                this.lifeMax = 45 + (8*(int) (Main.gameTime/7200));
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.001f;
                this.value = 800f + (120*(int) (Main.gameTime/7200));
                if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                {
                    this.knockBackResist = 0.0005f;
                }
            }
            else if (this.type == 27)
            {
                this.name = "Goblin Thief";
                this.itemEXP = 2;
                this.team = 2;
                this.scale = 0.95f;
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 10 + (4*(int) (Main.gameTime/7200));
                this.defense = ((int) (Main.gameTime/7200));
                this.lifeMax = 45 + (8*(int) (Main.gameTime/7200));
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.001f;
                this.value = 800f + (120*(int) (Main.gameTime/7200));
                if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                {
                    this.knockBackResist = 0.0005f;
                }
            }
            else if (this.type == 28)
            {
                this.name = "Goblin Warrior";
                this.scale = 1.1f;
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 25;
                this.defense = 8;
                this.lifeMax = 110;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
                this.value = 150f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 29)
            {
                this.name = "Goblin Sorcerer";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 20;
                this.defense = 2;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.6f;
                this.value = 200f;
            }
            else if (this.type == 30)
            {
                this.name = "Chaos Ball";
                this.width = 16;
                this.height = 16;
                this.aiStyle = 9;
                this.damage = 20;
                this.defense = 0;
                this.lifeMax = 1;
                this.soundHit = 3;
                this.soundKilled = 3;
                this.noGravity = true;
                this.noTileCollide = true;
                this.alpha = 100;
                this.knockBackResist = 0f;
            }
            else if (this.type == 31)
            {
                this.name = "Angry Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 26;
                this.defense = 8;
                this.lifeMax = 80;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.8f;
                this.value = 130f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 32)
            {
                this.name = "Dark Caster";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 20;
                this.defense = 2;
                this.lifeMax = 50;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.6f;
                this.value = 140f;
                this.npcSlots = 2f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 33)
            {
                this.name = "Water Sphere";
                this.width = 16;
                this.height = 16;
                this.aiStyle = 9;
                this.damage = 25 + (Main.gameTime/900);
                this.defense = 0;
                this.lifeMax = 1;
                this.soundHit = 3;
                this.soundKilled = 3;
                this.noGravity = true;
                this.timeLeft = 500;
                this.noTileCollide = true;
                this.alpha = 255;
                this.knockBackResist = 0f;
            }
            else if (this.type == 34)
            {
                this.name = "Cursed Skull";
                this.width = 26;
                this.height = 28;
                this.aiStyle = 10;
                this.damage = 35;
                this.defense = 6;
                this.lifeMax = 40;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.noGravity = true;
                this.noTileCollide = true;
                this.value = 150f;
                this.knockBackResist = 0.2f;
                this.npcSlots = 0.75f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 35)
            {
                this.displayName = "Skeletron";
                this.name = "Skeletron Head";
                this.width = 80;
                this.height = 102;
                this.aiStyle = 11;
                this.damage = 32;
                this.defense = 10;
                this.lifeMax = 4400;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.noGravity = true;
                this.noTileCollide = true;
                this.value = 50000f;
                this.knockBackResist = 0f;
                this.boss = true;
                this.npcSlots = 6f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 36)
            {
                this.displayName = "Skeletron";
                this.name = "Skeletron Hand";
                this.width = 52;
                this.height = 52;
                this.aiStyle = 12;
                this.damage = 20;
                this.defense = 14;
                this.lifeMax = 600;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 37)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Old Man";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 38)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Demolitionist";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 39)
            {
                this.npcSlots = 6f;
                this.name = "Bone Serpent Head";
                this.displayName = "Bone Serpent";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 30;
                this.defense = 10;
                this.lifeMax = 250;
                this.soundHit = 2;
                this.soundKilled = 5;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 1200f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 40)
            {
                this.name = "Bone Serpent Body";
                this.displayName = "Bone Serpent";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 15;
                this.defense = 12;
                this.lifeMax = 250;
                this.soundHit = 2;
                this.soundKilled = 5;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 1200f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 41)
            {
                this.name = "Bone Serpent Tail";
                this.displayName = "Bone Serpent";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 10;
                this.defense = 18;
                this.lifeMax = 250;
                this.soundHit = 2;
                this.soundKilled = 5;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 1200f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 42)
            {
                this.name = "Hornet";
                this.jungle = true;
                this.junglePoints = 1;
                this.itemEXP = 2;
                this.width = 34;
                this.height = 32;
                this.aiStyle = 5;
                this.damage = 20 + (2*(Main.gameTime/7200));
                this.defense = (int) (0.5f*(Main.gameTime/7200));
                this.lifeMax = 20 + (2*(Main.gameTime/7200));
                this.soundHit = 1;
                this.knockBackResist = 0.5f;
                this.soundKilled = 1;
                this.value = 800 + (200*(Main.gameTime/7200));
                this.noGravity = true;
                this.buffImmune[20] = true;
            }
            else if (this.type == 43)
            {
                this.noGravity = true;
                this.noTileCollide = false;
                //if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                //{
                //    this.noTileCollide = true;
                //}
                this.name = "Man Eater";
                this.itemEXP = 1;
                this.width = 30;
                this.height = 30;
                this.aiStyle = 13;
                this.damage = 18 + (3*(int) (Main.gameTime/7200));
                this.defense = (Main.gameTime/7200);
                this.lifeMax = 50 + (10*(int) (Main.gameTime/7200));
                this.soundHit = 1;
                this.knockBackResist = 0f;
                this.soundKilled = 1;
                this.value = 1100f + (60*(int) (Main.gameTime/7200));
            }
            else if (this.type == 44)
            {
                this.name = "Undead Miner";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 22;
                this.defense = 9;
                this.lifeMax = 70;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 250f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 45)
            {
                this.name = "Tim";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 20;
                this.defense = 4;
                this.lifeMax = 200;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.6f;
                this.value = 5000f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 46)
            {
                this.name = "Bunny";
                this.width = 18;
                this.height = 20;
                this.aiStyle = 7;
                this.damage = 0;
                this.defense = 0;
                this.lifeMax = 5;
                this.soundHit = 1;
                this.soundKilled = 1;
            }
            else if (this.type == 47)
            {
                this.name = "Corrupt Bunny";
                this.width = 18;
                this.height = 20;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 4;
                this.lifeMax = 70;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.value = 500f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 48)
            {
                this.name = "Harpy";
                this.width = 24;
                this.height = 34;
                this.aiStyle = 14;
                this.damage = 25;
                this.defense = 8;
                this.lifeMax = 100;
                this.soundHit = 1;
                this.knockBackResist = 0.6f;
                this.soundKilled = 1;
                this.value = 300f;
            }
            else if (this.type == 49)
            {
                this.npcSlots = 0.5f;
                this.name = "Cave Bat";
                this.width = 22;
                this.height = 18;
                this.aiStyle = 14;
                this.damage = 13;
                this.defense = 2;
                this.lifeMax = 16;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 4;
                this.value = 90f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 50 || this.type == 51)
            {
                this.boss = true;
                //this.team = (this.type == 50) ? 1 : 2;
                this.name = (this.type == 50) ? "King Slime" : "Black Boss";
                this.width = 98;
                this.height = 92;
                this.aiStyle = 15;
                this.damage = 40;
                this.defense = 10;
                this.lifeMax = 3000;
                this.knockBackResist = 0f;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 30;
                this.scale = 1.25f;
            }
            else if (this.type == 51)
            {
                this.npcSlots = 0.5f;
                this.name = "Jungle Bat";
                this.width = 22;
                this.height = 18;
                this.aiStyle = 14;
                this.damage = 20;
                this.defense = 4;
                this.lifeMax = 34;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 4;
                this.value = 80f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 52)
            {
                this.name = "Doctor Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 10;
                this.lifeMax = 500;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 1000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 53)
            {
                this.name = "The Groom";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 14;
                this.defense = 8;
                this.lifeMax = 200;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 1000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 54)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Clothier";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 55)
            {
                this.noGravity = true;
                this.name = "Goldfish";
                this.width = 20;
                this.height = 18;
                this.aiStyle = 16;
                this.damage = 0;
                this.defense = 0;
                this.lifeMax = 5;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 56)
            {
                this.noTileCollide = false;
                this.noGravity = true;
                this.name = "Snatcher";
                this.width = 30;
                this.height = 30;
                this.aiStyle = 13;
                this.damage = 10 + ((int) (Main.gameTime/3600));
                this.defense = ((int) (Main.gameTime/9000));
                this.lifeMax = 30 + ((int) (Main.gameTime/720));
                this.soundHit = 1;
                this.knockBackResist = 0f;
                this.soundKilled = 1;
                this.value = 600f + (5*(int) (Main.gameTime/480));
            }
            else if (this.type == 57)
            {
                this.noGravity = true;
                this.name = "Corrupt Goldfish";
                this.width = 18;
                this.height = 20;
                this.aiStyle = 16;
                this.damage = 30;
                this.defense = 6;
                this.lifeMax = 100;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.value = 500f;
            }
            else if (this.type == 58)
            {
                this.npcSlots = 0.5f;
                this.noGravity = true;
                this.name = "Piranha";
                this.itemEXP = 1;
                this.width = 18;
                this.height = 20;
                this.aiStyle = 16;
                this.damage = 30 + (3*(Main.gameTime/7200));
                this.defense = (Main.gameTime/7200);
                this.lifeMax = 50 + (5*(Main.gameTime/7200));
                this.soundHit = 1;
                this.soundKilled = 1;
                this.value = 600 + (100*(Main.gameTime/7200));
            }
            else if (this.type == 59)
            {
                this.name = "Lava Slime";
                this.width = 24;
                this.height = 18;
                this.aiStyle = 1;
                this.damage = 15;
                this.defense = 10;
                this.lifeMax = 50;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.scale = 1.1f;
                this.alpha = 50;
                this.lavaImmune = true;
                this.value = 120f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 60)
            {
                this.npcSlots = 0.5f;
                this.name = "Hellbat";
                this.width = 22;
                this.height = 18;
                this.aiStyle = 14;
                this.damage = 35;
                this.defense = 8;
                this.lifeMax = 46;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 4;
                this.value = 120f;
                this.scale = 1.1f;
                this.lavaImmune = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 61)
            {
                this.name = "Vulture";
                this.width = 36;
                this.height = 36;
                this.aiStyle = 17;
                this.damage = 15;
                this.defense = 4;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
                this.value = 60f;
            }
            else if (this.type == 62)
            {
                this.npcSlots = 2f;
                this.name = "Demon";
                this.itemEXP = 2;
                this.jungle = true;
                this.width = 28;
                this.height = 48;
                this.aiStyle = 14;
                this.damage = 30 + (3*(Main.gameTime/7200));
                this.defense = 5 + (int) (0.5f*(Main.gameTime/7200));
                this.lifeMax = 50 + (5*(Main.gameTime/7200));
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
                this.value = 1500 + (400*(Main.gameTime/7200));
                this.lavaImmune = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 63)
            {
                this.noGravity = true;
                this.name = "Blue Jellyfish";
                this.team = 1;
                this.itemEXP = 2;
                this.width = 26;
                this.height = 26;
                this.aiStyle = 18;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 20;
                this.damage = 10 + (4*(int) (Main.gameTime/7200));
                this.defense = ((int) (Main.gameTime/7200));
                this.lifeMax = 45 + (8*(int) (Main.gameTime/7200));
                this.value = 800f + (120*(int) (Main.gameTime/7200));
                this.knockBackResist = 0f;
            }
            else if (this.type == 64)
            {
                this.noGravity = true;
                this.name = "Pink Jellyfish";
                this.team = 2;
                this.itemEXP = 2;
                this.width = 26;
                this.height = 26;
                this.aiStyle = 18;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 20;
                this.damage = 10 + (4*(int) (Main.gameTime/7200));
                this.defense = ((int) (Main.gameTime/7200));
                this.lifeMax = 45 + (8*(int) (Main.gameTime/7200));
                this.value = 800f + (120*(int) (Main.gameTime/7200));
                this.knockBackResist = 0f;
            }
            else if (this.type == 65)
            {
                this.noGravity = true;
                this.name = "Shark";
                this.width = 100;
                this.height = 24;
                this.aiStyle = 16;
                this.damage = 40;
                this.defense = 2;
                this.lifeMax = 200;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.7f;
            }
            else if (this.type == 66)
            {
                this.npcSlots = 2f;
                this.name = "Voodoo Demon";
                this.width = 28;
                this.height = 48;
                this.aiStyle = 14;
                this.damage = 32;
                this.defense = 8;
                this.lifeMax = 140;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
                this.value = 1000f;
                this.lavaImmune = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 67)
            {
                this.name = "Crab";
                this.width = 28;
                this.height = 20;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 10;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.value = 60f;
            }
            else if (this.type == 68)
            {
                this.name = "Dungeon Guardian";
                this.width = 80;
                this.height = 102;
                this.aiStyle = 11;
                this.damage = 9000;
                this.defense = 9000;
                this.lifeMax = 9999;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 69) //white tower
            {
                this.name = "Antlion";
                this.team = 1;
                this.width = 38; //was 24
                this.height = 38; //was 24
                this.aiStyle = 19;
                this.damage = 0;
                this.defense = 6;
                this.lifeMax = 2000;
                if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                {
                    this.lifeMax = 4500;
                }
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0f;
                this.value = 20000f;
                this.behindTiles = true;
            }
            else if (this.type == 70) //black tower
            {
                this.name = "Antlion";
                this.team = 2;
                this.width = 38; //was 24
                this.height = 64; //was 24
                this.aiStyle = 19;
                this.damage = 0;
                this.defense = 6;
                this.lifeMax = 2000;
                if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                {
                    this.lifeMax = 4500;
                }
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0f;
                this.value = 20000f;
                this.behindTiles = true;
            }
            else if (this.type == 71)
            {
                this.npcSlots = 2f;
                this.name = "Dungeon Slime";
                this.width = 36;
                this.height = 24;
                this.aiStyle = 1;
                this.damage = 30;
                this.defense = 7;
                this.lifeMax = 150;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 60;
                this.value = 150f;
                this.scale = 1.25f;
                this.knockBackResist = 0.6f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 72)
            {
                this.npcSlots = 0.3f;
                this.name = "Blazing Wheel";
                this.width = 34;
                this.height = 34;
                this.aiStyle = 21;
                this.damage = 24;
                this.defense = 100;
                this.lifeMax = 100;
                this.alpha = 100;
                this.behindTiles = true;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0f;
                this.noGravity = true;
                this.dontTakeDamage = true;
                this.scale = 1.2f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 73)
            {
                this.name = "Goblin Scout";
                this.scale = 0.95f;
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 6;
                this.lifeMax = 80;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.7f;
                this.value = 200f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 74)
            {
                this.name = "Bird";
                this.width = 14;
                this.height = 14;
                this.aiStyle = 24;
                this.damage = 0;
                this.defense = 0;
                this.lifeMax = 5;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
            }
            else if (this.type == 75)
            {
                this.noGravity = true;
                this.name = "Pixie";
                this.width = 20;
                this.height = 20;
                this.aiStyle = 22;
                this.damage = 55;
                this.defense = 20;
                this.lifeMax = 150;
                this.soundHit = 5;
                this.knockBackResist = 0.6f;
                this.soundKilled = 7;
                this.value = 350f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 77)
            {
                this.name = "Armored Skeleton";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 40;
                this.defense = 28;
                this.lifeMax = 260;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.4f;
                this.value = 400f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 78)
            {
                this.name = "Mummy";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 50;
                this.defense = 16;
                this.lifeMax = 130;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.6f;
                this.value = 600f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 79)
            {
                this.name = "Dark Mummy";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 60;
                this.defense = 18;
                this.lifeMax = 180;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.5f;
                this.value = 700f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 80)
            {
                this.name = "Light Mummy";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 55;
                this.defense = 18;
                this.lifeMax = 200;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.55f;
                this.value = 700f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 81)
            {
                this.name = "Corrupt Slime";
                this.itemEXP = 1;
                this.jungle = true;
                this.width = 40;
                this.height = 30;
                this.aiStyle = 1;
                this.damage = 20 + (2*(Main.gameTime/7200));
                this.defense = 2 + (int) (0.5f*(Main.gameTime/7200));
                this.lifeMax = 150 + (15*(Main.gameTime/7200));
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 55;
                this.value = 1800 + (500*(Main.gameTime/7200));
                this.scale = 1.1f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 82)
            {
                this.noGravity = true;
                this.noTileCollide = true;
                this.name = "Wraith";
                this.width = 24;
                this.height = 44;
                this.aiStyle = 22;
                this.damage = 65;
                this.defense = 16;
                this.lifeMax = 160;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.alpha = 100;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.knockBackResist = 0.7f;
            }
            else if (this.type == 83)
            {
                this.name = "Cursed Hammer";
                this.width = 40;
                this.height = 40;
                this.aiStyle = 23;
                this.damage = 45;
                this.defense = 20;
                this.lifeMax = 200;
                this.soundHit = 4;
                this.soundKilled = 6;
                this.knockBackResist = 0.4f;
            }
            else if (this.type == 84)
            {
                this.name = "Enchanted Sword";
                this.width = 40;
                this.height = 40;
                this.aiStyle = 23;
                this.damage = 80;
                this.defense = 18;
                this.lifeMax = 200;
                this.soundHit = 4;
                this.soundKilled = 6;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.knockBackResist = 0.4f;
            }
            else if (this.type == 85)
            {
                this.name = "Mimic";
                this.width = 24;
                this.height = 24;
                this.aiStyle = 25;
                this.damage = 80;
                this.defense = 30;
                this.lifeMax = 500;
                this.soundHit = 4;
                this.soundKilled = 6;
                this.value = 100000f;
                this.knockBackResist = 0.3f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 86)
            {
                this.name = "Unicorn";
                this.width = 46;
                this.height = 42;
                this.aiStyle = 26;
                this.damage = 65;
                this.defense = 30;
                this.lifeMax = 400;
                this.soundHit = 12;
                this.soundKilled = 18;
                this.knockBackResist = 0.3f;
                this.value = 1000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 87)
            {
                this.displayName = "Wyvern";
                this.noTileCollide = true;
                this.name = "Wyvern Head";
                this.width = 32;
                this.height = 32;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 80;
                this.defense = 10;
                this.lifeMax = 4000;
                this.soundHit = 7;
                this.soundKilled = 8;
                this.noGravity = true;
                this.knockBackResist = 0f;
                this.scale = 1f;
            }
            else if (this.type == 88)
            {
                this.displayName = "Wyvern";
                this.noTileCollide = true;
                this.name = "Wyvern Legs";
                this.width = 32;
                this.height = 32;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 40;
                this.defense = 20;
                this.lifeMax = 4000;
                this.soundHit = 7;
                this.soundKilled = 8;
                this.noGravity = true;
                this.knockBackResist = 0f;
                this.scale = 1f;
                NPC.noStream = true;
            }
            else if (this.type == 89)
            {
                this.displayName = "Wyvern";
                this.noTileCollide = true;
                this.name = "Wyvern Body";
                this.width = 32;
                this.height = 32;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 40;
                this.defense = 20;
                this.lifeMax = 4000;
                this.soundHit = 7;
                this.soundKilled = 8;
                this.noGravity = true;
                this.knockBackResist = 0f;
                this.scale = 1f;
                NPC.noStream = true;
            }
            else if (this.type == 90)
            {
                this.displayName = "Wyvern";
                this.noTileCollide = true;
                this.name = "Wyvern Body 2";
                this.width = 32;
                this.height = 32;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 40;
                this.defense = 20;
                this.lifeMax = 4000;
                this.soundHit = 7;
                this.soundKilled = 8;
                this.noGravity = true;
                this.knockBackResist = 0f;
                this.scale = 1f;
                NPC.noStream = true;
            }
            else if (this.type == 91)
            {
                this.displayName = "Wyvern";
                this.noTileCollide = true;
                this.name = "Wyvern Body 3";
                this.width = 32;
                this.height = 32;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 40;
                this.defense = 20;
                this.lifeMax = 4000;
                this.soundHit = 7;
                this.soundKilled = 8;
                this.noGravity = true;
                this.knockBackResist = 0f;
                this.scale = 1f;
                NPC.noStream = true;
            }
            else if (this.type == 92)
            {
                this.displayName = "Wyvern";
                this.noTileCollide = true;
                this.name = "Wyvern Tail";
                this.width = 32;
                this.height = 32;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 40;
                this.defense = 20;
                this.lifeMax = 4000;
                this.soundHit = 7;
                this.soundKilled = 8;
                this.noGravity = true;
                this.knockBackResist = 0f;
                this.scale = 1f;
                NPC.noStream = true;
            }
            else if (this.type == 93)
            {
                this.npcSlots = 0.5f;
                this.name = "Giant Bat";
                this.width = 26;
                this.height = 20;
                this.aiStyle = 14;
                this.damage = 45;
                this.defense = 16;
                this.lifeMax = 100;
                this.soundHit = 1;
                this.knockBackResist = 0.75f;
                this.soundKilled = 4;
                this.value = 400f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 94)
            {
                this.npcSlots = 1f;
                this.name = "Corruptor";
                this.width = 44;
                this.height = 44;
                this.aiStyle = 5;
                this.damage = 60;
                this.defense = 32;
                this.lifeMax = 230;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.knockBackResist = 0.55f;
                this.value = 500f;
            }
            else if (this.type == 95)
            {
                this.displayName = "Digger";
                this.name = "Digger Head";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 45;
                this.defense = 10;
                this.lifeMax = 200;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.scale = 0.9f;
                this.value = 300f;
            }
            else if (this.type == 96)
            {
                this.displayName = "Digger";
                this.name = "Digger Body";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 28;
                this.defense = 20;
                this.lifeMax = 200;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.scale = 0.9f;
                this.value = 300f;
                NPC.noStream = true;
            }
            else if (this.type == 97)
            {
                this.displayName = "Digger";
                this.name = "Digger Tail";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 26;
                this.defense = 30;
                this.lifeMax = 200;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.scale = 0.9f;
                this.value = 300f;
                NPC.noStream = true;
            }
            else if (this.type == 98)
            {
                this.displayName = "World Feeder";
                this.npcSlots = 3.5f;
                this.name = "Seeker Head";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 70;
                this.defense = 36;
                this.lifeMax = 500;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 700f;
            }
            else if (this.type == 99)
            {
                this.displayName = "World Feeder";
                this.name = "Seeker Body";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 55;
                this.defense = 40;
                this.lifeMax = 500;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 700f;
                NPC.noStream = true;
            }
            else if (this.type == 100)
            {
                this.displayName = "World Feeder";
                this.name = "Seeker Tail";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 40;
                this.defense = 44;
                this.lifeMax = 500;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.value = 700f;
                NPC.noStream = true;
            }
            else if (this.type == 101)
            {
                this.noGravity = true;
                this.noTileCollide = false;
                this.behindTiles = true;
                this.name = "Clinger";
                this.width = 30;
                this.height = 30;
                this.aiStyle = 13;
                this.damage = 30 + ((int) (Main.gameTime/900));
                this.defense = ((int) (Main.gameTime/3600));
                this.lifeMax = 125 + ((int) (Main.gameTime/720));
                this.soundHit = 1;
                this.knockBackResist = 0.2f;
                this.soundKilled = 1;
                this.value = 1800f + (5*(int) (Main.gameTime/240));
            }
            else if (this.type == 102)
            {
                this.npcSlots = 0.5f;
                this.noGravity = true;
                this.name = "Angler Fish";
                this.width = 18;
                this.height = 20;
                this.aiStyle = 16;
                this.damage = 30;
                this.lifeMax = 60;
                this.soundHit = 1;
                this.soundKilled = 1;
            }
            else if (this.type == 103)
            {
                this.noGravity = true;
                this.name = "Green Jellyfish";
                this.width = 26;
                this.height = 26;
                this.aiStyle = 18;
                this.damage = 80;
                this.defense = 30;
                this.lifeMax = 120;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.value = 800f;
                this.alpha = 20;
            }
            else if (this.type == 104)
            {
                this.name = "Werewolf";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 70;
                this.defense = 40;
                this.lifeMax = 400;
                this.soundHit = 6;
                this.soundKilled = 1;
                this.knockBackResist = 0.4f;
                this.value = 1000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 105)
            {
                this.friendly = true;
                this.name = "Bound Goblin";
                this.width = 18;
                this.height = 34;
                this.aiStyle = 0;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
                this.scale = 0.9f;
            }
            else if (this.type == 106)
            {
                this.friendly = true;
                this.name = "Bound Wizard";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 0;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 107)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Goblin Tinkerer";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
                this.scale = 0.9f;
            }
            else if (this.type == 108)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Wizard";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 109)
            {
                this.name = "Clown";
                this.width = 34;
                this.height = 78;
                this.aiStyle = 3;
                this.damage = 50;
                this.defense = 20;
                this.lifeMax = 400;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.4f;
                this.value = 8000f;
            }
            else if (this.type == 110)
            {
                this.name = "Skeleton Archer";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 45;
                this.defense = 14;
                this.lifeMax = 210;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.55f;
                this.value = 400f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 111)
            {
                this.name = "Goblin Archer";
                this.scale = 0.95f;
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 6;
                this.lifeMax = 80;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.7f;
                this.value = 200f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 112)
            {
                this.name = "Vile Spit";
                this.width = 16;
                this.height = 16;
                this.aiStyle = 9;
                this.damage = 65;
                this.defense = 0;
                this.lifeMax = 1;
                this.soundHit = 0;
                this.soundKilled = 9;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.scale = 0.9f;
                this.alpha = 80;
            }
            else if (this.type == 113)
            {
                this.npcSlots = 10f;
                this.name = "Wall of Flesh";
                this.width = 100;
                this.height = 100;
                this.aiStyle = 27;
                this.damage = 25 + (Main.bossLevel * 7); ;
                this.defense = 12;
                this.lifeMax = 2000 + (1000 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 8;
                this.soundKilled = 10;
                this.noGravity = true;
                this.noTileCollide = true;
                this.behindTiles = true;
                this.knockBackResist = 0f;
                this.scale = 1.2f;
                this.boss = true;
                this.value = 0;
            }
            else if (this.type == 114)
            {
                this.name = "Wall of Flesh Eye";
                this.displayName = "Wall of Flesh";
                this.width = 100;
                this.height = 100;
                this.aiStyle = 28;
                this.damage = 25 + (Main.bossLevel * 7); ;
                this.defense = 0;
                this.lifeMax = 2000 + (1000 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 8;
                this.soundKilled = 10;
                this.noGravity = true;
                this.noTileCollide = true;
                this.behindTiles = true;
                this.knockBackResist = 0f;
                this.scale = 1.2f;
                this.value = 0;
            }
            else if (this.type == 115)
            {
                this.name = "The Hungry";
                this.lastHitValue = 0.01f;
                this.itemEXP = 1;
                this.width = 30;
                this.height = 30;
                this.aiStyle = 29;
                this.damage = 25 + (Main.bossLevel * 7); ;
                this.defense = 10;
                this.lifeMax = 100 + (50 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 9;
                this.soundKilled = 11;
                this.noGravity = true;
                this.behindTiles = true;
                this.noTileCollide = true;
                this.knockBackResist = 1.1f;
            }
            else if (this.type == 116)
            {
                this.name = "The Hungry II";
                this.displayName = "The Hungry";
                this.itemEXP = 1;
                this.lastHitValue = 0.01f;
                this.width = 30;
                this.height = 32;
                this.aiStyle = 2;
                this.damage = 25 + (Main.bossLevel * 7); ;
                this.defense = 6;
                this.lifeMax = 100 + (50 * Main.bossLevel);
                this.soundHit = 9;
                this.knockBackResist = 0.8f;
                this.soundKilled = 12;
            }
            else if (this.type == 117)
            {
                this.displayName = "Leech";
                this.name = "Leech Head";
                this.lastHitValue = 0.01f;
                this.itemEXP = 1;
                this.width = 14;
                this.height = 14;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 25 + (Main.bossLevel * 7); ;
                this.defense = 2;
                this.lifeMax = 20 + (50 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 9;
                this.soundKilled = 12;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
            }
            else if (this.type == 118)
            {
                this.displayName = "Leech";
                this.name = "Leech Body";
                this.lastHitValue = 0.01f;
                this.itemEXP = 1;
                this.width = 14;
                this.height = 14;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 25 + (Main.bossLevel * 7); ;
                this.defense = 6;
                this.lifeMax = 20 + (50 * Main.bossLevel * Main.bossLevel); ;
                this.soundHit = 9;
                this.soundKilled = 12;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
            }
            else if (this.type == 119)
            {
                this.displayName = "Leech";
                this.name = "Leech Tail";
                this.lastHitValue = 0.01f;
                this.itemEXP = 1;
                this.width = 14;
                this.height = 14;
                this.aiStyle = 6;
                this.netAlways = true;
                this.damage = 25 + (Main.bossLevel * 7);
                this.defense = 10;
                this.lifeMax = 20 + (50 * Main.bossLevel * Main.bossLevel); ;
                this.soundHit = 9;
                this.soundKilled = 12;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
            }
            else if (this.type == 120)
            {
                this.name = "Chaos Elemental";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 40;
                this.defense = 30;
                this.lifeMax = 370;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.4f;
                this.value = 600f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 121)
            {
                this.name = "Slimer";
                this.width = 40;
                this.height = 30;
                this.aiStyle = 14;
                this.damage = 45;
                this.defense = 20;
                this.lifeMax = 60;
                this.soundHit = 1;
                this.alpha = 55;
                this.knockBackResist = 0.8f;
                this.scale = 1.1f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 122)
            {
                this.noGravity = true;
                this.name = "Gastropod";
                this.width = 20;
                this.height = 20;
                this.aiStyle = 22;
                this.damage = 30;
                this.lifeMax = 90;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
            }
            else if (this.type == 123)
            {
                this.friendly = true;
                this.name = "Bound Mechanic";
                this.width = 18;
                this.height = 34;
                this.aiStyle = 0;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
                this.scale = 0.9f;
            }
            else if (this.type == 124)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Mechanic";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 125)
            {
                this.name = "Retinazer";
                this.width = 100;
                this.height = 110;
                this.aiStyle = 30;
                this.damage = 25 + (Main.bossLevel * 7);
                this.defense = 2 * Main.bossLevel;
                this.lifeMax = 1500 + (900 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 1;
                this.soundKilled = 14;
                this.knockBackResist = 0f;
                this.noGravity = true;
                this.noTileCollide = true;
                this.timeLeft = NPC.activeTime*30;
                this.boss = true;
                this.npcSlots = 5f;
                this.boss = true;
            }
            else if (this.type == 126)
            {
                this.name = "Spazmatism";
                this.width = 100;
                this.height = 110;
                this.aiStyle = 31;
                this.damage = 25 + (Main.bossLevel * 7);
                this.defense = 2 * Main.bossLevel;
                this.lifeMax = 1500 + (900 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 1;
                this.soundKilled = 14;
                this.knockBackResist = 0f;
                this.noGravity = true;
                this.noTileCollide = true;
                this.timeLeft = NPC.activeTime*30;
                this.boss = true;
                this.npcSlots = 5f;
                this.boss = true;
            }
            else if (this.type == 127)
            {
                this.name = "Skeletron Prime";
                this.width = 80;
                this.height = 102;
                this.aiStyle = 32;
                this.damage = 25 + (Main.bossLevel * 7);
                this.defense = 5 * Main.bossLevel;
                this.lifeMax = 2000 + (800 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.boss = true;
                this.npcSlots = 6f;
                this.boss = true;
            }
            else if (this.type == 128)
            {
                this.name = "Prime Cannon";
                this.lastHitValue = 0.2f;
                this.itemEXP = 10;
                this.width = 52;
                this.height = 52;
                this.aiStyle = 35;
                this.damage = 25 + (Main.bossLevel * 7);
                this.defense = 5 * Main.bossLevel;
                this.lifeMax = 800 + (320 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.netAlways = true;
            }
            else if (this.type == 129)
            {
                this.name = "Prime Saw";
                this.lastHitValue = 0.2f;
                this.itemEXP = 10;
                this.width = 52;
                this.height = 52;
                this.aiStyle = 33;
                this.damage = 40 + (Main.bossLevel * 10);
                this.defense = 5 * Main.bossLevel;
                this.lifeMax = 800 + (320 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.netAlways = true;
            }
            else if (this.type == 130)
            {
                this.name = "Prime Vice";
                this.lastHitValue = 0.2f;
                this.itemEXP = 10;
                this.width = 52;
                this.height = 52;
                this.aiStyle = 34;
                this.damage = 40 + (Main.bossLevel * 10); 
                this.defense = 5 * Main.bossLevel;
                this.lifeMax = 800 + (320 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.netAlways = true;
            }
            else if (this.type == 131)
            {
                this.name = "Prime Laser";
                this.lastHitValue = 0.2f;
                this.itemEXP = 10;
                this.width = 52;
                this.height = 52;
                this.aiStyle = 36;
                this.damage = 25 + (Main.bossLevel * 7);
                this.defense = 5 * Main.bossLevel;
                this.lifeMax = 800 + (320 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.netAlways = true;
            }
            else if (this.type == 132)
            {
                this.displayName = "Zombie";
                this.name = "Bald Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 15;
                this.defense = 5;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 65f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 133)
            {
                this.name = "Wandering Eye";
                this.width = 30;
                this.height = 32;
                this.aiStyle = 2;
                this.damage = 40;
                this.defense = 20;
                this.lifeMax = 300;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
                this.value = 500f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 134)
            {
                this.displayName = "The Destroyer";
                this.name = "The Destroyer";
                this.width = 38;
                this.height = 38;
                this.aiStyle = 37;
                this.damage = 25 + (9 * Main.bossLevel);
                this.defense = 5 * Main.bossLevel;
                this.lifeMax = 6000 + (2000 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.scale = 1.25f;
                this.boss = true;
                this.netAlways = true;
                flag = true;
            }
            else if (this.type == 135)
            {
                this.displayName = "The Destroyer";
                this.name = "The Destroyer Body";
                this.width = 38;
                this.height = 38;
                this.aiStyle = 37;
                this.damage = 25 + (7 * Main.bossLevel);
                this.defense = 5 * Main.bossLevel;
                this.lifeMax = 6000 + (2000 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.netAlways = true;
                this.scale = 1.25f;
                NPC.noStream = true;
            }
            else if (this.type == 136)
            {
                this.displayName = "The Destroyer";
                this.name = "The Destroyer Tail";
                this.width = 38;
                this.height = 38;
                this.aiStyle = 37;
                this.damage = 25 + (7 * Main.bossLevel);
                this.defense = 5 * Main.bossLevel;
                this.lifeMax = 6000 + (2000 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.behindTiles = true;
                this.scale = 1.25f;
                this.netAlways = true;
                NPC.noStream = true;
            }
            else if (this.type == 139 || this.type == 140)
            {
                this.npcSlots = 1f;
                this.name = "Probe";
                this.itemEXP = 1;
                this.lastHitValue = 0.01f;
                //this.team = (this.type == 139) ? 1 : 2;
                this.width = 30;
                this.height = 30;
                this.aiStyle = 5;
                this.damage = 25 + (7 * Main.bossLevel);
                this.defense = 5 * Main.bossLevel;
                this.lifeMax = 30 + (70 * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.noGravity = true;
                this.knockBackResist = 0.8f;
                this.noTileCollide = false;
            }
            else if (this.type == 137)
            {
                this.name = "Illuminant Bat";
                this.width = 26;
                this.height = 20;
                this.aiStyle = 14;
                this.damage = 75;
                this.defense = 30;
                this.lifeMax = 200;
                this.soundHit = 1;
                this.knockBackResist = 0.75f;
                this.soundKilled = 6;
                this.value = 500f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 138)
            {
                this.name = "Illuminant Slime";
                this.width = 24;
                this.height = 18;
                this.aiStyle = 1;
                this.damage = 70;
                this.defense = 30;
                this.lifeMax = 180;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.alpha = 100;
                this.value = 400f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.knockBackResist = 0.85f;
                this.scale = 1.05f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 140)
            {
                this.name = "Possessed Armor";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 55;
                this.defense = 28;
                this.lifeMax = 260;
                this.soundHit = 4;
                this.soundKilled = 6;
                this.knockBackResist = 0.4f;
                this.value = 400f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
                this.buffImmune[24] = true;
            }
            else if (this.type == 141)
            {
                this.name = "Toxic Sludge";
                this.width = 34;
                this.height = 28;
                this.aiStyle = 1;
                this.damage = 50;
                this.defense = 18;
                this.lifeMax = 150;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 55;
                this.value = 400f;
                this.scale = 1.1f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
                this.knockBackResist = 0.8f;
            }
            else if (this.type == 142)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Santa Claus";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 143)
            {
                this.name = "Snowman Gangsta";
                this.width = 26;
                this.height = 40;
                this.aiStyle = 38;
                this.damage = 50;
                this.defense = 20;
                this.lifeMax = 200;
                this.soundHit = 11;
                this.soundKilled = 15;
                this.knockBackResist = 0.6f;
                this.value = 400f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 144)
            {
                this.name = "Mister Stabby";
                this.width = 26;
                this.height = 40;
                this.aiStyle = 38;
                this.damage = 65;
                this.defense = 26;
                this.lifeMax = 240;
                this.soundHit = 11;
                this.soundKilled = 15;
                this.knockBackResist = 0.6f;
                this.value = 400f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 145)
            {
                this.name = "Snow Balla";
                this.width = 26;
                this.height = 40;
                this.aiStyle = 38;
                this.damage = 55;
                this.defense = 22;
                this.lifeMax = 220;
                this.soundHit = 11;
                this.soundKilled = 15;
                this.knockBackResist = 0.6f;
                this.value = 400f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 147)
            {
                this.name = "Ice Slime";
                this.width = 24;
                this.height = 18;
                this.aiStyle = 1;
                this.damage = 8;
                this.defense = 4;
                this.lifeMax = 30;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 50;
                this.value = 50f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 148)
            {
                this.name = "Penguin";
                this.width = 16;
                this.height = 34;
                this.aiStyle = 7;
                this.damage = 0;
                this.defense = 0;
                this.lifeMax = 5;
                this.soundHit = 1;
                this.soundKilled = 1;
            }
            else if (this.type == 149)
            {
                this.name = "Penguin";
                this.width = 16;
                this.height = 34;
                this.aiStyle = 7;
                this.damage = 0;
                this.defense = 0;
                this.lifeMax = 5;
                this.soundHit = 1;
                this.soundKilled = 1;
            }
            else if (this.type == 150)
            {
                this.npcSlots = 0.5f;
                this.name = "Ice Bat";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 14;
                this.damage = 18;
                this.defense = 6;
                this.lifeMax = 30;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 4;
                this.value = 130f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 151)
            {
                this.npcSlots = 0.5f;
                this.name = "Lava bat";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 14;
                this.damage = 50;
                this.defense = 16;
                this.lifeMax = 160;
                this.soundHit = 1;
                this.knockBackResist = 0.6f;
                this.soundKilled = 4;
                this.value = 400f;
                this.scale = 1.15f;
                this.lavaImmune = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 152)
            {
                this.npcSlots = 0.5f;
                this.name = "Giant Flying Fox";
                this.width = 38;
                this.height = 34;
                this.aiStyle = 14;
                this.damage = 80;
                this.defense = 24;
                this.lifeMax = 220;
                this.soundHit = 1;
                this.knockBackResist = 0.65f;
                this.soundKilled = 4;
                this.value = 400f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 153)
            {
                this.npcSlots = 2f;
                this.name = "Giant Tortoise";
                this.jungle = true;
                this.width = 46;
                this.height = 32;
                this.aiStyle = 39;
                this.damage = 70;
                this.defense = 50;
                this.lifeMax = 3000;
                this.soundHit = 7;
                this.knockBackResist = 0.3f;
                this.soundKilled = 5;
                this.noGravity = false;
            }
            else if (this.type == 154)
            {
                this.npcSlots = 1.5f;
                this.name = "Ice Tortoise";
                this.width = 46;
                this.height = 32;
                this.aiStyle = 39;
                this.damage = 55;
                this.defense = 28;
                this.lifeMax = 400;
                this.soundHit = 7;
                this.knockBackResist = 0.3f;
                this.soundKilled = 5;
                this.value = 450f;
                this.noGravity = false;
                this.buffImmune[31] = false;
            }
            else if (this.type == 155)
            {
                this.name = "Wolf";
                this.junglePoints = 2;
                this.itemEXP = 4;
                this.jungle = true;
                this.width = 46;
                this.height = 30;
                this.aiStyle = 26;
                this.damage = 18 + (2*(Main.gameTime/7200));
                this.defense = 2 + (Main.gameTime/7200);
                this.lifeMax = 50 + (5*(Main.gameTime/7200));
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.3f;
                this.value = 1600 + (400*(Main.gameTime/7200));
                this.buffImmune[31] = false;
            }
            else if (this.type == 156)
            {
                this.npcSlots = 2f;
                this.name = "Red Devil";
                this.width = 28;
                this.height = 48;
                this.aiStyle = 14;
                this.damage = 50;
                this.defense = 40;
                this.lifeMax = 600;
                this.soundHit = 1;
                this.knockBackResist = 0.5f;
                this.soundKilled = 1;
                this.value = 1200f;
                this.lavaImmune = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
            }
            else if (this.type == 157)
            {
                this.npcSlots = 0.5f;
                this.noGravity = true;
                this.name = "Arapaima";
                this.width = 74;
                this.height = 20;
                this.aiStyle = 16;
                this.damage = 45;
                this.defense = 5;
                this.lifeMax = 300;
                this.soundHit = 1;
                this.soundKilled = 1;
            }
            else if (this.type == 158)
            {
                this.npcSlots = 2f;
                this.name = "Vampire";
                this.width = 22;
                this.height = 22;
                this.aiStyle = 14;
                this.damage = 60;
                this.defense = 30;
                this.lifeMax = 500;
                this.soundHit = 1;
                this.knockBackResist = 0.75f;
                this.soundKilled = 6;
                this.value = 5000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 159)
            {
                this.npcSlots = 2f;
                this.name = "Vampire";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 80;
                this.defense = 20;
                this.lifeMax = 500;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.4f;
                this.value = 5000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 160)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Truffle";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 161)
            {
                this.name = "Zombie Eskimo";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 16;
                this.defense = 8;
                this.lifeMax = 50;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.45f;
                this.value = 80f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 162)
            {
                this.name = "Frankenstein";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 60;
                this.defense = 18;
                this.lifeMax = 220;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.3f;
                this.value = 600f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 163 || this.type == 238)
            {
                this.name = "Black Recluse";
                this.itemEXP = 2;
                this.jungle = true;
                this.noGravity = (this.type == 163) ? false : true;
                this.width = 50;
                this.height = 20;
                this.aiStyle = (this.type == 163) ? 3 : 40;
                this.damage = 25 + (2*(Main.gameTime/7200));
                this.defense = 6 + (int) (0.5f*(Main.gameTime/7200));
                this.lifeMax = 75 + (7*(Main.gameTime/7200));
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.25f;
                this.value = 1500 + (400*(Main.gameTime/7200));
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
                this.npcSlots = 0.5f;
                this.timeLeft = NPC.activeTime*2;
            }
            //else if (this.type == 238)
            // {
            // this.noGravity = true;
            // this.jungle = true;
            // this.name = "Black Recluse";
            // this.width = 50;
            // this.height = 20;
            // this.aiStyle = 40;
            // this.damage = 100;
            // this.defense = 40;
            // this.lifeMax = 200;
            // this.soundHit = 1;
            // this.soundKilled = 1;
            // this.knockBackResist = 0.25f;
            // this.value = 500f;
            // this.timeLeft = NPC.activeTime * 2;
            // this.npcSlots = 0.5f;
            // this.buffImmune[20] = true;
            // this.buffImmune[31] = false;
            // } 
            else if (this.type == 164)
            {
                this.name = "Wall Creeper";
                this.width = 50;
                this.height = 20;
                this.aiStyle = 3;
                this.damage = 30;
                this.defense = 10;
                this.lifeMax = 80;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.25f;
                this.value = 100f;
                this.timeLeft = NPC.activeTime*2;
                this.npcSlots = 0.5f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 165)
            {
                this.noGravity = true;
                this.name = "Wall Creeper";
                this.width = 50;
                this.height = 20;
                this.aiStyle = 40;
                this.damage = 30;
                this.defense = 10;
                this.lifeMax = 80;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.25f;
                this.value = 100f;
                this.timeLeft = NPC.activeTime*2;
                this.npcSlots = 0.5f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 166)
            {
                this.name = "Swamp Thing";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 80;
                this.defense = 32;
                this.lifeMax = 350;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.2f;
                this.value = 1000f;
                this.buffImmune[31] = false;
                this.buffImmune[20] = true;
            }
            else if (this.type == 167)
            {
                this.name = "Undead Viking";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 24;
                this.defense = 10;
                this.lifeMax = 70;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 200f;
                this.buffImmune[31] = false;
                this.buffImmune[20] = true;
            }
            else if (this.type == 168)
            {
                this.name = "Corrupt Penguin";
                this.width = 16;
                this.height = 34;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 4;
                this.lifeMax = 70;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.value = 500f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 169)
            {
                this.noGravity = true;
                this.name = "Ice Elemental";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 22;
                this.damage = 55;
                this.defense = 20;
                this.lifeMax = 200;
                this.soundHit = 5;
                this.knockBackResist = 0.6f;
                this.soundKilled = 7;
                this.value = 1500f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.buffImmune[31] = false;
                this.buffImmune[44] = true;
            }
            else if (this.type == 170)
            {
                this.name = "Pigron";
                this.width = 44;
                this.height = 36;
                this.aiStyle = 2;
                this.damage = 70;
                this.defense = 16;
                this.lifeMax = 210;
                this.soundHit = 7;
                this.soundKilled = 17;
                this.knockBackResist = 0.5f;
                this.value = 2000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 171)
            {
                this.name = "Pigron";
                this.width = 44;
                this.height = 36;
                this.aiStyle = 2;
                this.damage = 70;
                this.defense = 16;
                this.lifeMax = 210;
                this.soundHit = 7;
                this.soundKilled = 17;
                this.knockBackResist = 0.5f;
                this.value = 2000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 172)
            {
                this.name = "Rune Wizard";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 200;
                this.defense = 30;
                this.lifeMax = 600;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.3f;
                this.value = 5000f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 173)
            {
                this.npcSlots = 1f;
                this.name = "Crimera";
                this.width = 30;
                this.height = 30;
                this.aiStyle = 5;
                this.damage = 22;
                this.defense = 8;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.knockBackResist = 0.5f;
                this.value = 90f;
            }
            else if (this.type == 174)
            {
                this.npcSlots = 1f;
                this.name = "Herpling";
                this.width = 52;
                this.height = 26;
                this.aiStyle = 41;
                this.damage = 65;
                this.defense = 26;
                this.lifeMax = 220;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.3f;
                this.value = 450f;
            }
            else if (this.type == 175)
            {
                this.noGravity = true;
                this.noTileCollide = true;
                this.name = "Angry Trapper";
                this.width = 30;
                this.height = 30;
                this.aiStyle = 13;
                this.damage = 20 + (Main.gameTime/1800);
                this.defense = (Main.gameTime/5400);
                this.lifeMax = 75 + (Main.gameTime/720);
                this.soundHit = 1;
                this.knockBackResist = 0.25f;
                this.soundKilled = 1;
                this.value = 1300f + (5*(Main.gameTime/300));
            }
            else if (this.type == 176)
            {
                this.name = "Moss Hornet";
                this.width = 34;
                this.height = 32;
                this.aiStyle = 5;
                this.damage = 70;
                this.defense = 22;
                this.lifeMax = 220;
                this.soundHit = 1;
                this.knockBackResist = 0.5f;
                this.soundKilled = 1;
                this.value = 600f;
                this.noGravity = true;
                this.buffImmune[20] = true;
                this.npcSlots = 1.5f;
            }
            else if (this.type == 177)
            {
                this.npcSlots = 1f;
                this.name = "Derpling";
                this.width = 58;
                this.height = 44;
                this.aiStyle = 41;
                this.damage = 80;
                this.defense = 26;
                this.lifeMax = 300;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
                this.value = 500f;
            }
            else if (this.type == 178)
            {
                this.townNPC = true;
                this.name = "Steampunker";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 179)
            {
                this.name = "Crimson Axe";
                this.width = 40;
                this.height = 40;
                this.aiStyle = 23;
                this.damage = 80;
                this.defense = 18;
                this.lifeMax = 200;
                this.soundHit = 4;
                this.soundKilled = 6;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.knockBackResist = 0.4f;
            }
            else if (this.type == 180)
            {
                this.name = "Pigron";
                this.width = 44;
                this.height = 36;
                this.aiStyle = 2;
                this.damage = 70;
                this.defense = 16;
                this.lifeMax = 210;
                this.soundHit = 7;
                this.soundKilled = 17;
                this.knockBackResist = 0.5f;
                this.value = 4000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 181)
            {
                this.name = "Face Monster";
                this.width = 18;
                this.height = 44;
                this.aiStyle = 3;
                this.damage = 25;
                this.defense = 10;
                this.lifeMax = 70;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.4f;
                this.value = 200f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 182)
            {
                this.noGravity = true;
                this.noTileCollide = true;
                this.name = "Floaty Gross";
                this.width = 24;
                this.height = 62;
                this.aiStyle = 22;
                this.damage = 65;
                this.defense = 18;
                this.lifeMax = 240;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.alpha = 100;
                this.value = 500f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.knockBackResist = 0.7f;
            }
            else if (this.type == 183)
            {
                this.name = "Crimslime";
                this.width = 40;
                this.height = 30;
                this.aiStyle = 1;
                this.damage = 60;
                this.defense = 26;
                this.lifeMax = 200;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 55;
                this.value = 400f;
                this.scale = 1.1f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 184)
            {
                this.name = "Spiked Ice Slime";
                this.width = 24;
                this.height = 18;
                this.aiStyle = 1;
                this.damage = 12;
                this.defense = 8;
                this.lifeMax = 60;
                this.scale = 1.1f;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 50;
                this.value = 200f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 185)
            {
                this.name = "Snow Flinx";
                this.width = 28;
                this.height = 28;
                this.aiStyle = 3;
                this.damage = 26;
                this.defense = 12;
                this.lifeMax = 70;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 1.1f;
                this.value = 200f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 186)
            {
                this.name = "Pincushion Zombie";
                this.displayName = "Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 16;
                this.defense = 8;
                this.lifeMax = 50;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.45f;
                this.value = 65f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 187)
            {
                this.name = "Slimed Zombie";
                this.displayName = "Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 13;
                this.defense = 6;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.55f;
                this.value = 55f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 188)
            {
                this.name = "Swamp Zombie";
                this.displayName = "Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 13;
                this.defense = 8;
                this.lifeMax = 45;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.45f;
                this.value = 80f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 189)
            {
                this.name = "Twiggy Zombie";
                this.displayName = "Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 16;
                this.defense = 4;
                this.lifeMax = 45;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.55f;
                this.value = 70f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 190)
            {
                this.name = "Cataract Eye";
                this.displayName = "Demon Eye";
                this.width = 30;
                this.height = 32;
                this.aiStyle = 2;
                this.damage = 18;
                this.defense = 4;
                this.lifeMax = 65;
                this.soundHit = 1;
                this.knockBackResist = 0.7f;
                this.soundKilled = 1;
                this.value = 75f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 191)
            {
                this.name = "Sleepy Eye";
                this.displayName = "Demon Eye";
                this.width = 30;
                this.height = 32;
                this.aiStyle = 2;
                this.damage = 16;
                this.defense = 2;
                this.lifeMax = 60;
                this.soundHit = 1;
                this.knockBackResist = 0.85f;
                this.soundKilled = 1;
                this.value = 75f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 192)
            {
                this.name = "Dialated Eye";
                this.displayName = "Demon Eye";
                this.width = 30;
                this.height = 32;
                this.aiStyle = 2;
                this.damage = 18;
                this.defense = 2;
                this.lifeMax = 50;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
                this.value = 75f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 193)
            {
                this.name = "Green Eye";
                this.displayName = "Demon Eye";
                this.width = 30;
                this.height = 32;
                this.aiStyle = 2;
                this.damage = 20;
                this.defense = 0;
                this.lifeMax = 60;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
                this.value = 75f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 194)
            {
                this.name = "Purple Eye";
                this.displayName = "Demon Eye";
                this.width = 30;
                this.height = 32;
                this.aiStyle = 2;
                this.damage = 14;
                this.defense = 4;
                this.lifeMax = 60;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
                this.value = 75f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 195)
            {
                this.name = "Lost Girl";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 42;
                this.damage = 10;
                this.defense = 30;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 196)
            {
                this.name = "Nymph";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 35;
                this.defense = 16;
                this.lifeMax = 300;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.4f;
                this.value = 10000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 197)
            {
                this.name = "Armored Viking";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 50;
                this.defense = 28;
                this.lifeMax = 280;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.45f;
                this.value = 500f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 198)
            {
                this.name = "Lihzahrd";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 38;
                this.defense = 20;
                this.lifeMax = 400;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.4f;
                this.value = 650f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 199)
            {
                this.name = "Lihzahrd";
                this.width = 42;
                this.height = 30;
                this.aiStyle = 3;
                this.damage = 60;
                this.defense = 30;
                this.lifeMax = 400;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0f;
                this.value = 650f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 200)
            {
                this.name = "Female Zombie";
                this.displayName = "Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 12;
                this.defense = 4;
                this.lifeMax = 38;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.6f;
                this.value = 65f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 201)
            {
                this.name = "Headache Skeleton";
                this.displayName = "Skeleton";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 12;
                this.lifeMax = 55;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 130f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 202)
            {
                this.name = "Misassembled Skeleton";
                this.displayName = "Skeleton";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 18;
                this.defense = 8;
                this.lifeMax = 65;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 120f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 203)
            {
                this.name = "Pantless Skeleton";
                this.displayName = "Skeleton";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 22;
                this.defense = 8;
                this.lifeMax = 60;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 110f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 204)
            {
                this.name = "Spiked Jungle Slime";
                this.width = 24;
                this.height = 18;
                this.aiStyle = 1;
                this.damage = 28;
                this.defense = 8;
                this.lifeMax = 65;
                this.scale = 1.15f;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 50;
                this.value = 300f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 205)
            {
                this.name = "Moth";
                this.width = 40;
                this.height = 40;
                this.aiStyle = 5;
                this.damage = 70;
                this.defense = 28;
                this.lifeMax = 1000;
                this.soundHit = 1;
                this.knockBackResist = 0.4f;
                this.soundKilled = 1;
                this.value = 600f;
                this.noGravity = true;
                this.buffImmune[20] = true;
            }
            else if (this.type == 206)
            {
                this.name = "Icy Merman";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 60;
                this.defense = 30;
                this.lifeMax = 280;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
                this.value = 500f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 207)
            {
                this.townNPC = true;
                this.name = "Dye Trader";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 208)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Party Girl";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 209)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Cyborg";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 1500;
                this.lifeMax = 999999999;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0f;
            }
            else if (this.type == 210)
            {
                this.name = "Bee";
                this.lastHitValue = 0.01f;
                this.width = 12;
                this.height = 12;
                this.aiStyle = 5;
                this.damage = 25 + (7 * Main.bossLevel);
                this.lifeMax = (15 * Main.bossLevel);
                this.soundHit = 1;
                this.knockBackResist = 0.5f;
                this.soundKilled = 1;
                this.noGravity = true;
            }
            else if (this.type == 211)
            {
                this.name = "Bee";
                this.lastHitValue = 0.01f;
                this.width = 8;
                this.height = 8;
                this.aiStyle = 5;
                this.damage = 25 + (7 * Main.bossLevel);
                this.lifeMax = (15 * Main.bossLevel);
                this.soundHit = 1;
                this.knockBackResist = 0.5f;
                this.soundKilled = 1;
                this.noGravity = true;
            }
            else if (this.type == 212)
            {
                this.name = "Pirate Deckhand";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 35;
                this.defense = 16;
                this.lifeMax = 200;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.4f;
                this.value = 700f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 213)
            {
                this.name = "Pirate Corsair";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 50;
                this.defense = 20;
                this.lifeMax = 300;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.2f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 214)
            {
                this.name = "Pirate Deadeye";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 30;
                this.defense = 12;
                this.lifeMax = 150;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.3f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 215)
            {
                this.name = "Pirate Crossbower";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 35;
                this.defense = 18;
                this.lifeMax = 260;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.35f;
                this.value = 1500f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 216)
            {
                this.name = "Pirate Captain";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 70;
                this.defense = 28;
                this.lifeMax = 2000;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0f;
                this.value = 50000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 217)
            {
                this.name = "Cochineal Beetle";
                this.width = 28;
                this.height = 20;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 10;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 16;
                this.value = 60f;
            }
            else if (this.type == 218)
            {
                this.name = "Cyan Beetle";
                this.width = 28;
                this.height = 20;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 10;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 16;
                this.value = 60f;
            }
            else if (this.type == 219)
            {
                this.name = "Lac Beetle";
                this.width = 28;
                this.height = 20;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 10;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 16;
                this.value = 60f;
            }
            else if (this.type == 220)
            {
                this.name = "Sea Snail";
                this.width = 28;
                this.height = 20;
                this.aiStyle = 3;
                this.damage = 20;
                this.defense = 10;
                this.lifeMax = 40;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.value = 60f;
            }
            else if (this.type == 221)
            {
                this.noGravity = true;
                this.name = "Squid";
                this.width = 26;
                this.height = 26;
                this.aiStyle = 18;
                this.damage = 20;
                this.defense = 2;
                this.lifeMax = 30;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.value = 100f;
                this.alpha = 20;
            }
            else if (this.type == 222)
            {
                this.name = "Queen Bee";
                this.width = 66;
                this.height = 66;
                this.aiStyle = 43;
                this.damage = 30 + (Main.bossLevel * 7);
                this.defense = Main.bossLevel;
                this.lifeMax = 2200 + (900 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0f;
                this.noGravity = true;
                this.noTileCollide = true;
                this.timeLeft = NPC.activeTime*30;
                this.boss = true;
                this.npcSlots = 5f;
                this.scale = 2f;
            }
            else if (this.type == 223)
            {
                this.name = "Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 16;
                this.defense = 8;
                this.lifeMax = 50;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.45f;
                this.value = 70f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 224)
            {
                this.name = "Flying Fish";
                this.width = 32;
                this.height = 18;
                this.aiStyle = 44;
                this.damage = 9;
                this.defense = 4;
                this.lifeMax = 20;
                this.soundHit = 1;
                this.knockBackResist = 0.8f;
                this.soundKilled = 1;
                this.value = 90f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 225)
            {
                this.name = "Umbrella Slime";
                this.width = 38;
                this.height = 26;
                this.aiStyle = 1;
                this.damage = 10;
                this.defense = 5;
                this.lifeMax = 35;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.75f;
                this.value = 25f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 226)
            {
                this.npcSlots = 0.5f;
                this.name = "Flying Snake";
                this.width = 34;
                this.height = 50;
                this.aiStyle = 14;
                this.damage = 85;
                this.defense = 28;
                this.lifeMax = 260;
                this.soundHit = 1;
                this.knockBackResist = 0.65f;
                this.soundKilled = 1;
                this.value = 400f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 227)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Painter";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 228)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Witch Doctor";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 229)
            {
                this.townNPC = true;
                this.friendly = true;
                this.name = "Pirate";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 7;
                this.damage = 10;
                this.defense = 15;
                this.lifeMax = 250;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.5f;
            }
            else if (this.type == 230)
            {
                this.name = "Goldfish";
                this.width = 18;
                this.height = 20;
                this.aiStyle = 7;
                this.damage = 0;
                this.defense = 0;
                this.lifeMax = 5;
                this.soundHit = 1;
                this.soundKilled = 1;
            }
            else if (this.type == 231)
            {
                this.name = "Hornet Fatty";
                this.width = 34;
                this.height = 32;
                this.aiStyle = 5;
                this.damage = 22;
                this.defense = 16;
                this.lifeMax = 50;
                this.soundHit = 1;
                this.knockBackResist = 0.3f;
                this.soundKilled = 1;
                this.value = 200f;
                this.noGravity = true;
                this.buffImmune[20] = true;
            }
            else if (this.type == 232)
            {
                this.name = "Hornet Honey";
                this.width = 34;
                this.height = 32;
                this.aiStyle = 5;
                this.damage = 28;
                this.defense = 12;
                this.lifeMax = 42;
                this.soundHit = 1;
                this.knockBackResist = 0.6f;
                this.soundKilled = 1;
                this.value = 200f;
                this.noGravity = true;
                this.buffImmune[20] = true;
            }
            else if (this.type == 233)
            {
                this.name = "Hornet Leafy";
                this.width = 34;
                this.height = 32;
                this.aiStyle = 5;
                this.damage = 30;
                this.defense = 14;
                this.lifeMax = 38;
                this.soundHit = 1;
                this.knockBackResist = 0.45f;
                this.soundKilled = 1;
                this.value = 200f;
                this.noGravity = true;
                this.buffImmune[20] = true;
            }
            else if (this.type == 234)
            {
                this.name = "Hornet Spikey";
                this.width = 34;
                this.height = 32;
                this.aiStyle = 5;
                this.damage = 32;
                this.defense = 6;
                this.lifeMax = 42;
                this.soundHit = 1;
                this.knockBackResist = 0.55f;
                this.soundKilled = 1;
                this.value = 200f;
                this.noGravity = true;
                this.buffImmune[20] = true;
            }
            else if (this.type == 235)
            {
                this.name = "Hornet Stingy";
                this.width = 34;
                this.height = 32;
                this.aiStyle = 5;
                this.damage = 34;
                this.defense = 4;
                this.lifeMax = 38;
                this.soundHit = 1;
                this.knockBackResist = 0.6f;
                this.soundKilled = 1;
                this.value = 200f;
                this.noGravity = true;
                this.buffImmune[20] = true;
            }
            else if (this.type == 236)
            {
                this.name = "Jungle Creeper";
                this.width = 50;
                this.height = 20;
                this.aiStyle = 3;
                this.damage = 50;
                this.defense = 14;
                this.lifeMax = 120;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.25f;
                this.value = 1000f;
                this.timeLeft = NPC.activeTime*2;
                this.npcSlots = 0.75f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 237)
            {
                this.noGravity = true;
                this.name = "Jungle Creeper";
                this.width = 50;
                this.height = 20;
                this.aiStyle = 40;
                this.damage = 50;
                this.defense = 14;
                this.lifeMax = 120;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0.25f;
                this.value = 1000f;
                this.timeLeft = NPC.activeTime*2;
                this.npcSlots = 0.75f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 239 || this.type == 240)
            {
                this.noGravity = (this.type == 240) ? true : false;
                this.name = "Blood Crawler";
                this.itemEXP = 2;
                this.junglePoints = 1;
                this.jungle = true;
                this.width = 50;
                this.height = 20;
                this.aiStyle = (this.type == 239) ? 3 : 40;
                this.damage = 15 + (1*(Main.gameTime/7200));
                this.defense = (int) (0.5f*(Main.gameTime/7200));
                this.lifeMax = 25 + (3*(Main.gameTime/7200));
                this.soundHit = 13;
                this.soundKilled = 19;
                this.knockBackResist = 0.5f;
                this.value = 800 + (200*(Main.gameTime/7200));
                this.timeLeft = NPC.activeTime*2;
                this.buffImmune[20] = true;
            }
            //else if (this.type == 240)
            // {
            // this.noGravity = true;
            // this.name = "Blood Crawler";
            // this.junglePoints = 1;
            // this.jungle = true;
            // this.width = 50;
            // this.height = 20;
            // this.aiStyle = 40;
            // this.damage = 30;
            // this.defense = 8;
            // this.lifeMax = 60;
            // this.soundHit = 13;
            // this.soundKilled = 19;
            // this.knockBackResist = 0.5f;
            // this.value = 130f;
            // this.timeLeft = NPC.activeTime * 2;
            // this.buffImmune[20] = true;
            // } 
            else if (this.type == 241)
            {
                this.npcSlots = 0.5f;
                this.noGravity = true;
                this.name = "Blood Feeder";
                this.width = 18;
                this.height = 20;
                this.aiStyle = 16;
                this.damage = 30;
                this.defense = 4;
                this.lifeMax = 20;
                this.soundHit = 13;
                this.soundKilled = 19;
                this.value = 350f;
            }
            else if (this.type == 242)
            {
                this.noGravity = true;
                this.name = "Blood Jelly";
                this.width = 26;
                this.height = 26;
                this.aiStyle = 18;
                this.defense = 1;
                this.damage = 20;
                this.lifeMax = 40;
                this.soundHit = 13;
                this.soundKilled = 19;
                this.alpha = 20;
            }
            else if (this.type == 243)
            {
                this.name = "Ice Golem";
                this.width = 30;
                this.height = 114;
                this.aiStyle = 3;
                this.damage = 50;
                this.defense = 32;
                this.lifeMax = 1000;
                this.soundHit = 5;
                this.soundKilled = 7;
                this.knockBackResist = 0.05f;
            }
            else if (this.type == 244)
            {
                this.name = "Rainbow Slime";
                this.width = 60;
                this.height = 42;
                this.aiStyle = 1;
                this.damage = 85;
                this.defense = 26;
                this.lifeMax = 400;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.alpha = 175;
                this.value = (float) Item.buyPrice(0, 0, 20, 0);
                this.knockBackResist = 0.3f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 245)
            {
                this.name = "Golem";
                this.width = 140;
                this.height = 140;
                this.aiStyle = 45;
                this.damage = 25 + (7 * Main.bossLevel); ;
                this.defense = 2 * Main.bossLevel;
                this.lifeMax = 1500 + (500 * Main.bossLevel * Main.bossLevel); ;
                this.soundHit = 4;
                this.soundKilled = 14;
                this.knockBackResist = 0f;
                this.scale = 1.1f;
                this.alpha = 255;
                this.boss = true;
            }
            else if (this.type == 246)
            {
                this.noGravity = true;
                this.name = "Golem Head";
                this.width = 70;
                this.height = 70;
                this.aiStyle = 46;
                this.damage = 25 + (7 * Main.bossLevel);
                this.defense = 2 * Main.bossLevel;
                this.lifeMax = 1500 + (500 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.scale = 1.1f;
                this.soundKilled = 0;
                this.knockBackResist = 0f;
                this.alpha = 255;
            }
            else if (this.type == 247 || this.type == 248)
            {
                this.noGravity = true;
                this.name = "Golem Fist";
                this.lastHitValue = 0.2f;
                this.itemEXP = 10;
                this.width = 40;
                this.height = 30;
                this.aiStyle = 47;
                this.damage = 25 + (7 * Main.bossLevel);
                this.defense = 2 * Main.bossLevel;
                this.lifeMax = 800 + (400 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.scale = 1.1f;
                this.soundKilled = 14;
                this.alpha = 255;
            }
            else if (this.type == 249)
            {
                this.noGravity = true;
                this.name = "Golem Head";
                this.lastHitValue = 0.2f;
                this.itemEXP = 10;
                this.width = 70;
                this.height = 70;
                this.aiStyle = 48;
                this.damage = 60;
                this.defense = 2 * Main.bossLevel;
                this.lifeMax = 1500 + (500 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 4;
                this.soundKilled = 14;
                this.scale = 1.1f;
                this.knockBackResist = 0f;
                this.dontTakeDamage = true;
            }
            else if (this.type == 250)
            {
                this.name = "Angry Nimbus";
                this.width = 34;
                this.height = 26;
                this.aiStyle = 49;
                this.damage = 50;
                this.defense = 24;
                this.lifeMax = 300;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.3f;
                this.value = 300f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 251)
            {
                this.name = "Eyezor";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 50;
                this.defense = 30;
                this.lifeMax = 1000;
                this.soundHit = 1;
                this.soundKilled = 2;
                this.knockBackResist = 0.3f;
                this.value = (float) Item.buyPrice(0, 0, 50, 0);
                this.buffImmune[31] = false;
            }
            else if (this.type == 252)
            {
                this.noGravity = true;
                this.npcSlots = 0.5f;
                this.name = "Parrot";
                this.width = 32;
                this.height = 32;
                this.aiStyle = 5;
                this.damage = 80;
                this.defense = 12;
                this.lifeMax = 100;
                this.soundHit = 1;
                this.knockBackResist = 0.7f;
                this.soundKilled = 4;
                this.value = 500f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 253)
            {
                this.noGravity = true;
                this.noTileCollide = true;
                this.name = "Reaper";
                this.width = 24;
                this.height = 44;
                this.aiStyle = 22;
                this.damage = 80;
                this.defense = 18;
                this.lifeMax = 300;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.alpha = 100;
                this.value = 1500f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[39] = true;
                this.knockBackResist = 0.6f;
            }
            else if (this.type == 254)
            {
                this.name = "Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 40;
                this.defense = 10;
                this.lifeMax = 180;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.4f;
                this.value = 1000f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 255)
            {
                this.name = "Zombie";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 38;
                this.defense = 16;
                this.lifeMax = 220;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.3f;
                this.value = 1200f;
                this.buffImmune[31] = false;
            }
            else if (this.type == 256)
            {
                this.noGravity = true;
                this.name = "Fungo Fish";
                this.width = 26;
                this.height = 26;
                this.aiStyle = 18;
                this.damage = 90;
                this.defense = 20;
                this.lifeMax = 140;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.value = 1200f;
                this.alpha = 20;
                this.npcSlots = 0.3f;
            }
            else if (this.type == 257)
            {
                this.name = "Anomura Fungus";
                this.width = 44;
                this.height = 34;
                this.aiStyle = 3;
                this.damage = 38;
                this.defense = 24;
                this.lifeMax = 230;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.3f;
                this.value = 1300f;
                this.buffImmune[31] = false;
                this.npcSlots = 0.3f;
            }
            else if (this.type == 258)
            {
                this.name = "Mushi Ladybug";
                this.width = 30;
                this.height = 24;
                this.aiStyle = 3;
                this.damage = 60;
                this.defense = 16;
                this.lifeMax = 220;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.knockBackResist = 0.3f;
                this.value = 1500f;
                this.buffImmune[31] = false;
                this.npcSlots = 0.3f;
            }
            else if (this.type == 259)
            {
                this.noGravity = true;
                this.noTileCollide = true;
                this.name = "Fungi Bulb";
                this.width = 20;
                this.height = 20;
                this.aiStyle = 13;
                this.damage = 24;
                this.defense = 4;
                this.lifeMax = 90;
                this.soundHit = 1;
                this.knockBackResist = 0f;
                this.soundKilled = 1;
                this.value = 350f;
                this.buffImmune[20] = true;
                this.npcSlots = 0.3f;
            }
            else if (this.type == 260)
            {
                this.noGravity = true;
                this.noTileCollide = true;
                //if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                //{
                //    this.noTileCollide = true;
                //}
                this.name = "Giant Fungi Bulb";
                this.itemEXP = 3;
                this.width = 36;
                this.height = 36;
                this.aiStyle = 13;
                this.damage = 25 + (4*(Main.gameTime/7200));
                this.defense = (Main.gameTime/7200);
                this.lifeMax = 100 + (10*(Main.gameTime/7200));
                this.soundHit = 1;
                this.knockBackResist = 0.2f;
                this.soundKilled = 1;
                this.value = 1500f + (120*(Main.gameTime/7200));
                this.npcSlots = 0.3f;
            }
            else if (this.type == 261)
            {
                this.name = "Fungi Spore";
                this.width = 12;
                this.height = 12;
                this.aiStyle = 5; //was 50
                this.damage = 80;
                this.defense = 0;
                this.lifeMax = 1;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = false;
                this.timeLeft = 3000;
                this.knockBackResist = 0f;
                this.npcSlots = 0f;
            }
            else if (this.type == 262)
            {
                this.noTileCollide = true;
                this.name = "Plantera";
                this.width = 86;
                this.height = 86;
                this.aiStyle = 51;
                this.damage = 100;
                this.defense = 20;
                this.lifeMax = 100000;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.knockBackResist = 0f;
                this.noGravity = true;
                this.boss = true;
                this.npcSlots = 16f;
                this.scale = 2f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 263)
            {
                this.noTileCollide = true;
                this.noGravity = true;
                this.name = "Plantera's Hook";
                this.width = 40;
                this.height = 40;
                this.aiStyle = 52;
                this.damage = 100;
                this.defense = 20;
                this.lifeMax = 4000;
                this.dontTakeDamage = true;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.buffImmune[20] = true;
            }
            else if (this.type == 264)
            {
                this.name = "Plantera's Tentacle";
                this.width = 24;
                this.height = 24;
                this.aiStyle = 53;
                this.damage = 70;
                this.defense = 10;
                this.lifeMax = 10000;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.buffImmune[20] = true;
            }
            else if (this.type == 265)
            {
                this.name = "Spore";
                this.width = 18;
                this.height = 18;
                this.aiStyle = 50;
                this.damage = 70;
                this.defense = 0;
                this.lifeMax = 1;
                this.soundHit = 1;
                this.soundKilled = 1;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0f;
                this.npcSlots = 0f;
            }
            else if (this.type == 266)
            {
                this.name = "Brain of Cthulhu";
                this.dontTakeDamage = true;
                this.width = 160;
                this.height = 110;
                this.aiStyle = 54;
                this.damage = 30 + (Main.bossLevel * 10);
                this.defense = Main.bossLevel;
                this.lifeMax = 2000 + (400 * Main.bossLevel * Main.bossLevel);
                this.soundHit = 9;
                this.soundKilled = 11;
                this.knockBackResist = 0f;
                this.scale = 2f;
                this.noGravity = true;
                this.noTileCollide = true;
                this.timeLeft = NPC.activeTime*30;
                this.boss = true;
            }
            else if (this.type == 267)
            {
                this.name = "Creeper";
                this.itemEXP = 1;
                this.lastHitValue = 0.02f;
                this.width = 30;
                this.height = 30;
                this.aiStyle = 55;
                this.damage = Main.bossLevel;
                this.defense = 25 + (7 * Main.bossLevel);
                this.lifeMax = 100 + (150 * Main.bossLevel);
                this.soundHit = 9;
                this.soundKilled = 11;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0.8f;
                this.scale = 2f;
            }
            else if (this.type == 268)
            {
                this.noGravity = true;
                this.name = "Ichor Sticker";
                this.width = 28;
                this.height = 56;
                this.aiStyle = 22;
                this.damage = 55;
                this.defense = 20;
                this.lifeMax = 340;
                this.soundHit = 13;
                this.soundKilled = 19;
                this.knockBackResist = 0.6f;
                this.value = 450f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 269)
            {
                this.name = "Rusty Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 70;
                this.defense = 34;
                this.lifeMax = 550;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.3f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 270)
            {
                this.name = "Rusty Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 55;
                this.defense = 50;
                this.lifeMax = 400;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.2f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 271)
            {
                this.name = "Rusty Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 70;
                this.defense = 40;
                this.lifeMax = 450;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.25f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 272)
            {
                this.name = "Rusty Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 75;
                this.defense = 28;
                this.lifeMax = 400;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.35f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 273)
            {
                this.name = "Blue Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 45;
                this.defense = 50;
                this.lifeMax = 500;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.15f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 274)
            {
                this.name = "Blue Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 65;
                this.defense = 34;
                this.lifeMax = 350;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.4f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 275)
            {
                this.name = "Blue Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 45;
                this.defense = 50;
                this.lifeMax = 550;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.15f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 276)
            {
                this.name = "Blue Armored Bones";
                this.itemEXP = 5;
                this.team = 1;
                this.width = 34; //was 18
                this.height = 62; //was 40
                this.aiStyle = 3;
                this.damage = 30 + (8*(Main.gameTime/7200));
                this.defense = 15 + (2*(Main.gameTime/7200));
                this.lifeMax = 1000 + (int) (Math.Pow(1.08, (((float) Main.gameTime/3600f)))*80);
                if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                {
                    this.lifeMax = 500 + (int) (Math.Pow(1.08, (((float) Main.gameTime/3600f)))*80);
                }
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.00001f;
                if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                {
                    this.knockBackResist = 0.1f;
                }
                this.value = 5000f + (500*(Main.gameTime/7200));
                this.buffImmune[31] = false;
            }
            else if (this.type == 277)
            {
                this.name = "Hell Armored Bones";
                this.itemEXP = 5;
                this.team = 2;
                this.width = 34; //was 18
                this.height = 62; //was 40
                this.aiStyle = 3;
                this.damage = 30 + (8*(Main.gameTime/7200));
                this.defense = 15 + (2*(Main.gameTime/7200));
                this.lifeMax = 1000 + (int) (Math.Pow(1.08, (((float) Main.gameTime/3600f)))*80);
                if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                {
                    this.lifeMax = 500 + (int) (Math.Pow(1.08, (((float) Main.gameTime/3600f)))*80);
                }
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.00001f;
                if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
                {
                    this.knockBackResist = 0.1f;
                }
                this.value = 5000f + (500*(Main.gameTime/7200));
                this.buffImmune[31] = false;
            }
            else if (this.type == 278)
            {
                this.name = "Hell Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 65;
                this.defense = 48;
                this.lifeMax = 450;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.3f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 279)
            {
                this.name = "Hell Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 40;
                this.defense = 54;
                this.lifeMax = 500;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.2f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 280)
            {
                this.name = "Hell Armored Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 75;
                this.defense = 34;
                this.lifeMax = 500;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.4f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[24] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 281)
            {
                this.name = "Ragged Caster";
                this.itemEXP = 3;
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 0;
                this.defense = 0;
                this.lifeMax = 40 + (4*(Main.gameTime/7200));
                this.value = 800 + (200*(Main.gameTime/7200));
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.6f;
                this.npcSlots = 2f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 282)
            {
                this.name = "Ragged Caster";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 35;
                this.defense = 28;
                this.lifeMax = 450;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 1500f;
                this.npcSlots = 2f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 283)
            {
                this.name = "Necromancer";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 50;
                this.defense = 18;
                this.lifeMax = 300;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.55f;
                this.value = 1500f;
                this.npcSlots = 2f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 284)
            {
                this.name = "Necromancer";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 35;
                this.defense = 24;
                this.lifeMax = 450;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.5f;
                this.value = 1500f;
                this.npcSlots = 2f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 285)
            {
                this.name = "Diabolist";
                this.itemEXP = 3;
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 0;
                this.defense = 0;
                this.lifeMax = 80 + (8*(Main.gameTime/7200));
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.7f;
                this.value = 1500 + (300*(Main.gameTime/7200));
                this.npcSlots = 2f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 286)
            {
                this.name = "Diabolist";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 8;
                this.damage = 60;
                this.defense = 10;
                this.lifeMax = 250;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.65f;
                this.value = 1500f;
                this.npcSlots = 2f;
                this.buffImmune[20] = true;
            }
            else if (this.type == 287)
            {
                this.name = "Bone Lee";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 90;
                this.defense = 42;
                this.lifeMax = 1000;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.3f;
                this.value = 2000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 288)
            {
                this.name = "Dungeon Spirit";
                this.width = 20;
                this.height = 20;
                this.aiStyle = 56;
                this.damage = 70;
                this.defense = 30;
                this.lifeMax = 200;
                this.knockBackResist = 0.2f;
                this.soundHit = 1;
                this.soundKilled = 6;
                this.value = 500f;
                this.noTileCollide = true;
                this.noGravity = true;
                flag = true;
            }
            else if (this.type == 289)
            {
                this.name = "Giant Cursed Skull";
                this.width = 44;
                this.height = 44;
                this.aiStyle = 10;
                this.damage = 60;
                this.defense = 20;
                this.lifeMax = 300;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.noGravity = true;
                this.noTileCollide = true;
                this.knockBackResist = 0.2f;
            }
            else if (this.type == 290)
            {
                this.name = "Paladin";
                this.width = 34;
                this.height = 62;
                this.aiStyle = 3;
                this.damage = 100;
                this.defense = 50;
                this.lifeMax = 5000;
                this.soundHit = 4;
                this.soundKilled = 6;
                this.knockBackResist = 0f;
                this.value = 50000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 291)
            {
                this.name = "Skeleton Sniper";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 60;
                this.defense = 28;
                this.lifeMax = 400;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.4f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 292)
            {
                this.name = "Tactical Skeleton";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 60;
                this.defense = 28;
                this.lifeMax = 400;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.4f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 293)
            {
                this.name = "Skeleton Commando";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 60;
                this.defense = 28;
                this.lifeMax = 400;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.4f;
                this.value = 1000f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 294)
            {
                this.name = "Angry Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 34;
                this.defense = 6;
                this.lifeMax = 70;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.9f;
                this.value = 130f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 295)
            {
                this.name = "Angry Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 28;
                this.defense = 12;
                this.lifeMax = 70;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.7f;
                this.value = 130f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            else if (this.type == 296)
            {
                this.name = "Angry Bones";
                this.width = 18;
                this.height = 40;
                this.aiStyle = 3;
                this.damage = 24;
                this.defense = 14;
                this.lifeMax = 120;
                this.soundHit = 2;
                this.soundKilled = 2;
                this.knockBackResist = 0.6f;
                this.value = 130f;
                this.buffImmune[20] = true;
                this.buffImmune[31] = false;
            }
            //this.lifeMax /= 6;
            this.value /= 100;
            if (this.boss)
            {
                this.abilityPointHP = this.lifeMax / 100 / 4;
                if (this.type == NPC.SPAZMATISM || this.type == NPC.RETINAZER) this.abilityPointHP *= 2;
            }

            if (flag)
            {
                for (int n = 0; n < 81; n++)
                {
                    this.buffImmune[n] = true;
                }
            }
            if (Main.dedServ)
            {
                this.frame = default(Rectangle);
            }
            else
            {
                if (Main.NPCLoaded[this.type])
                {
                    this.frame = new Rectangle(0, 0, Main.npcTexture[this.type].Width, Main.npcTexture[this.type].Height/Main.npcFrameCount[this.type]);
                }
                else
                {
                    this.setFrameSize = true;
                }
            }
            if (scaleOverride > 0f)
            {
                int num = (int) ((float) this.width*this.scale);
                int num2 = (int) ((float) this.height*this.scale);
                this.position.X = this.position.X + (float) (num/2);
                this.position.Y = this.position.Y + (float) num2;
                this.scale = scaleOverride;
                this.width = (int) ((float) this.width*this.scale);
                this.height = (int) ((float) this.height*this.scale);
                if (this.height == 16 || this.height == 32)
                {
                    this.height++;
                }
                this.position.X = this.position.X - (float) (this.width/2);
                this.position.Y = this.position.Y - (float) this.height;
            }
            else
            {
                this.width = (int) ((float) this.width*this.scale);
                this.height = (int) ((float) this.height*this.scale);
            }
            if (this.buffImmune[20])
            {
                this.buffImmune[70] = true;
            }
            this.life = this.lifeMax;
            this.defDamage = this.damage;
            this.defDefense = this.defense;
            this.netID = this.type;
            if (this.type != 69 && this.type != 70 && this.type != BRAIN_OF_CTHULU && this.type != 50 && this.type != 51 && this.type != 139 && this.type != 140)
            {
                this.displayName = "Lv. " + ((Main.gameTime/7200) + 1) + " " + Lang.npcName(this.netID, false);
            }
            else
            {
                this.displayName = Lang.npcName(this.netID, false);
            }
        }

        public void AI()
        {
            if (this.aiStyle == 0)
            {
                for (int i = 0; i < 255; i++)
                {
                    if (Main.player[i].active && Main.player[i].talkNPC == this.whoAmI)
                    {
                        if (this.type == 105)
                        {
                            this.Transform(107);
                            return;
                        }
                        if (this.type == 106)
                        {
                            this.Transform(108);
                            return;
                        }
                        if (this.type == 123)
                        {
                            this.Transform(124);
                            return;
                        }
                    }
                }
                this.velocity.X = this.velocity.X*0.93f;
                if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                {
                    this.velocity.X = 0f;
                }
                this.TargetClosest(true);
                this.spriteDirection = this.direction;
                return;
            }
            if (this.aiStyle == 1)
            {
                if (this.type == 244)
                {
                    float num = (float) Main.DiscoR/255f;
                    float num2 = (float) Main.DiscoG/255f;
                    float num3 = (float) Main.DiscoB/255f;
                    num *= 1f;
                    num2 *= 1f;
                    num3 *= 1f;
                    Lighting.addLight((int) ((this.position.X + (float) (this.width/2))/16f), (int) ((this.position.Y + (float) (this.height/2))/16f), num, num2, num3);
                    this.color.R = (byte) Main.DiscoR;
                    this.color.G = (byte) Main.DiscoG;
                    this.color.B = (byte) Main.DiscoB;
                    this.color.A = 100;
                    this.alpha = 175;
                }
                bool flag = false;
                if (!Main.dayTime || this.life != this.lifeMax || (double) this.position.Y > Main.worldSurface*16.0)
                {
                    flag = true;
                }
                if (this.type == 81)
                {
                    flag = true;
                    if (Main.rand.Next(30) == 0)
                    {
                        int num4 = Dust.NewDust(this.position, this.width, this.height, 14, 0f, 0f, this.alpha, this.color, 1f);
                        Main.dust[num4].velocity *= 0.3f;
                    }
                }
                if (this.type == 183)
                {
                    flag = true;
                }
                if (this.type == 147 && Main.rand.Next(10) == 0)
                {
                    int num5 = Dust.NewDust(this.position, this.width, this.height, 76, 0f, 0f, 0, default(Color), 1f);
                    Main.dust[num5].noGravity = true;
                    Main.dust[num5].velocity *= 0.1f;
                }
                if (this.type == 244)
                {
                    flag = true;
                    this.ai[0] += 2f;
                }
                if (this.type == 184)
                {
                    if (Main.rand.Next(8) == 0)
                    {
                        int num6 = Dust.NewDust(this.position - this.velocity, this.width, this.height, 76, 0f, 0f, 0, default(Color), 1f);
                        Main.dust[num6].noGravity = true;
                        Main.dust[num6].velocity *= 0.15f;
                    }
                    flag = true;
                    if (this.localAI[0] > 0f)
                    {
                        this.localAI[0] -= 1f;
                    }
                    if (!this.wet)
                    {
                        Vector2 vector = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                        float num7 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector.X;
                        float num8 = Main.player[this.target].position.Y - vector.Y;
                        float num9 = (float) Math.Sqrt((double) (num7*num7 + num8*num8));
                        if (num9 < 200f && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height) && this.velocity.Y == 0f)
                        {
                            this.ai[0] = -40f;
                            if (this.velocity.Y == 0f)
                            {
                                this.velocity.X = this.velocity.X*0.9f;
                            }
                            if (Main.netMode != 1 && this.localAI[0] == 0f)
                            {
                                num8 = Main.player[this.target].position.Y - vector.Y - (float) Main.rand.Next(0, 200);
                                num9 = (float) Math.Sqrt((double) (num7*num7 + num8*num8));
                                num9 = 4.5f/num9;
                                num7 *= num9;
                                num8 *= num9;
                                this.localAI[0] = 50f;
                                Projectile.NewProjectile(vector.X, vector.Y, num7, num8, 174, 9, 0f, Main.myPlayer, 0f, 0f);
                            }
                        }
                    }
                }
                if (this.type == 204 || this.type == 16 || this.name.Contains("Slimeling"))
                {
                    flag = true;
                    if (this.localAI[0] > 0f)
                    {
                        this.localAI[0] -= 1f;
                    }
                    if (!this.wet)
                    {
                        Vector2 vector2 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                        float num10 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector2.X;
                        float num11 = Main.player[this.target].position.Y - vector2.Y;
                        float num12 = (float) Math.Sqrt((double) (num10*num10 + num11*num11));
                        if (num12 < 400f && Collision.CanHit(new Vector2(this.position.X, this.position.Y - 20f), this.width, this.height + 20, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height) && this.velocity.Y == 0f)
                        {
                            this.ai[0] = -80f;
                            if (this.velocity.Y == 0f)
                            {
                                this.velocity.X = this.velocity.X*0.9f;
                            }
                            if (Main.netMode != 1 && this.localAI[0] == 0f)
                            {
                                num11 = Main.player[this.target].position.Y - vector2.Y - (float) Main.rand.Next(-30, 20);
                                num11 -= num12*0.05f;
                                num10 = Main.player[this.target].position.X - vector2.X - (float) Main.rand.Next(-20, 20);
                                num12 = (float) Math.Sqrt((double) (num10*num10 + num11*num11));
                                num12 = 7f/num12;
                                num10 *= num12;
                                num11 *= num12;
                                this.localAI[0] = 65f;
                                Projectile.NewProjectile(vector2.X, vector2.Y, num10, num11, 176, (this.damage/2), 0f, Main.myPlayer, 0f, 0f);
                            }
                        }
                    }
                }
                if (this.type == 59)
                {
                    Lighting.addLight((int) ((this.position.X + (float) (this.width/2))/16f), (int) ((this.position.Y + (float) (this.height/2))/16f), 1f, 0.3f, 0.1f);
                    int num13 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 1.7f);
                    Main.dust[num13].noGravity = true;
                }
                if (this.ai[2] > 1f)
                {
                    this.ai[2] -= 1f;
                }
                if (this.wet)
                {
                    if (this.collideY)
                    {
                        this.velocity.Y = -2f;
                    }
                    if (this.velocity.Y < 0f && this.ai[3] == this.position.X)
                    {
                        this.direction *= -1;
                        this.ai[2] = 200f;
                    }
                    if (this.velocity.Y > 0f)
                    {
                        this.ai[3] = this.position.X;
                    }
                    if (this.type == 59)
                    {
                        if (this.velocity.Y > 2f)
                        {
                            this.velocity.Y = this.velocity.Y*0.9f;
                        }
                        else
                        {
                            if (this.directionY < 0)
                            {
                                this.velocity.Y = this.velocity.Y - 0.8f;
                            }
                        }
                        this.velocity.Y = this.velocity.Y - 0.5f;
                        if (this.velocity.Y < -10f)
                        {
                            this.velocity.Y = -10f;
                        }
                    }
                    else
                    {
                        if (this.velocity.Y > 2f)
                        {
                            this.velocity.Y = this.velocity.Y*0.9f;
                        }
                        this.velocity.Y = this.velocity.Y - 0.5f;
                        if (this.velocity.Y < -4f)
                        {
                            this.velocity.Y = -4f;
                        }
                    }
                    if (this.ai[2] == 1f && flag)
                    {
                        this.TargetClosest(true);
                    }
                }
                this.aiAction = 0;
                if (this.ai[2] == 0f)
                {
                    this.ai[0] = -100f;
                    this.ai[2] = 1f;
                    this.TargetClosest(true);
                }
                if (this.velocity.Y == 0f)
                {
                    if (this.ai[3] == this.position.X)
                    {
                        this.direction *= -1;
                        this.ai[2] = 200f;
                    }
                    this.ai[3] = 0f;
                    this.velocity.X = this.velocity.X*0.8f;
                    if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                    {
                        this.velocity.X = 0f;
                    }
                    if (flag)
                    {
                        this.ai[0] += 1f;
                    }
                    this.ai[0] += 1f;
                    if (this.type == 59)
                    {
                        this.ai[0] += 2f;
                    }
                    if (this.type == 71)
                    {
                        this.ai[0] += 3f;
                    }
                    if (this.type == 138)
                    {
                        this.ai[0] += 2f;
                    }
                    if (this.type == 183)
                    {
                        this.ai[0] += 1f;
                    }
                    if (this.type == 81)
                    {
                        if (this.scale >= 0f)
                        {
                            this.ai[0] += 4f;
                        }
                        else
                        {
                            this.ai[0] += 1f;
                        }
                    }
                    if (this.ai[0] >= 0f)
                    {
                        this.netUpdate = true;
                        if (flag && this.ai[2] == 1f)
                        {
                            this.TargetClosest(true);
                        }
                        if (this.ai[1] == 2f)
                        {
                            this.velocity.Y = -8f;
                            if (this.type == 59)
                            {
                                this.velocity.Y = this.velocity.Y - 2f;
                            }
                            this.velocity.X = this.velocity.X + (float) (3*this.direction);
                            if (this.type == 59)
                            {
                                this.velocity.X = this.velocity.X + 0.5f*(float) this.direction;
                            }
                            this.ai[0] = -200f;
                            this.ai[1] = 0f;
                            this.ai[3] = this.position.X;
                        }
                        else
                        {
                            this.velocity.Y = -6f;
                            this.velocity.X = this.velocity.X + (float) (2*this.direction);
                            if (this.type == 59)
                            {
                                this.velocity.X = this.velocity.X + (float) (2*this.direction);
                            }
                            this.ai[0] = -120f;
                            this.ai[1] += 1f;
                        }
                        if (this.type == 141)
                        {
                            this.velocity.Y = this.velocity.Y*1.3f;
                            this.velocity.X = this.velocity.X*1.2f;
                            return;
                        }
                    }
                    else
                    {
                        if (this.ai[0] >= -30f)
                        {
                            this.aiAction = 1;
                            return;
                        }
                    }
                }
                else
                {
                    if (this.target < 255 && ((this.direction == 1 && this.velocity.X < 3f) || (this.direction == -1 && this.velocity.X > -3f)))
                    {
                        if ((this.direction == -1 && (double) this.velocity.X < 0.1) || (this.direction == 1 && (double) this.velocity.X > -0.1))
                        {
                            this.velocity.X = this.velocity.X + 0.2f*(float) this.direction;
                            return;
                        }
                        this.velocity.X = this.velocity.X*0.93f;
                        return;
                    }
                }
            }
            else
            {
                if (this.aiStyle == 2)
                {
                    if ((this.type == 170 || this.type == 171 || this.type == 180) && Main.rand.Next(1000) == 0)
                    {
                        Main.PlaySound(29, (int) this.position.X, (int) this.position.Y, 9);
                    }
                    this.noGravity = true;
                    if (!this.noTileCollide)
                    {
                        if (this.collideX)
                        {
                            this.velocity.X = this.oldVelocity.X*-0.5f;
                            if (this.direction == -1 && this.velocity.X > 0f && this.velocity.X < 2f)
                            {
                                this.velocity.X = 2f;
                            }
                            if (this.direction == 1 && this.velocity.X < 0f && this.velocity.X > -2f)
                            {
                                this.velocity.X = -2f;
                            }
                        }
                        if (this.collideY)
                        {
                            this.velocity.Y = this.oldVelocity.Y*-0.5f;
                            if (this.velocity.Y > 0f && this.velocity.Y < 1f)
                            {
                                this.velocity.Y = 1f;
                            }
                            if (this.velocity.Y < 0f && this.velocity.Y > -1f)
                            {
                                this.velocity.Y = -1f;
                            }
                        }
                    }
                    if (Main.dayTime && (double) this.position.Y <= Main.worldSurface*16.0 && (this.type == 2 || this.type == 133 || this.type == 190 || this.type == 191 || this.type == 192 || this.type == 193 || this.type == 194))
                    {
                        if (this.timeLeft > 10)
                        {
                            this.timeLeft = 10;
                        }
                        this.directionY = -1;
                        if (this.velocity.Y > 0f)
                        {
                            this.direction = 1;
                        }
                        this.direction = -1;
                        if (this.velocity.X > 0f)
                        {
                            this.direction = 1;
                        }
                    }
                    else
                    {
                        this.TargetClosest(true);
                    }
                    if (this.type == 170 || this.type == 171 || this.type == 180)
                    {
                        if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                        {
                            if (this.ai[1] > 0f && !Collision.SolidCollision(this.position, this.width, this.height))
                            {
                                this.ai[1] = 0f;
                                this.ai[0] = 0f;
                                this.netUpdate = true;
                            }
                        }
                        else
                        {
                            if (this.ai[1] == 0f)
                            {
                                this.ai[0] += 1f;
                            }
                        }
                        if (this.ai[0] >= 300f)
                        {
                            this.ai[1] = 1f;
                            this.ai[0] = 0f;
                            this.netUpdate = true;
                        }
                        if (this.ai[1] == 0f)
                        {
                            this.alpha = 0;
                            this.noTileCollide = false;
                        }
                        else
                        {
                            this.wet = false;
                            this.alpha = 200;
                            this.noTileCollide = true;
                        }
                        this.rotation = this.velocity.Y*0.1f*(float) this.direction;
                        this.TargetClosest(true);
                        if (this.direction == -1 && this.velocity.X > -4f && this.position.X > Main.player[this.target].position.X + (float) Main.player[this.target].width)
                        {
                            this.velocity.X = this.velocity.X - 0.08f;
                            if (this.velocity.X > 4f)
                            {
                                this.velocity.X = this.velocity.X - 0.04f;
                            }
                            else
                            {
                                if (this.velocity.X > 0f)
                                {
                                    this.velocity.X = this.velocity.X - 0.2f;
                                }
                            }
                            if (this.velocity.X < -4f)
                            {
                                this.velocity.X = -4f;
                            }
                        }
                        else
                        {
                            if (this.direction == 1 && this.velocity.X < 4f && this.position.X + (float) this.width < Main.player[this.target].position.X)
                            {
                                this.velocity.X = this.velocity.X + 0.08f;
                                if (this.velocity.X < -4f)
                                {
                                    this.velocity.X = this.velocity.X + 0.04f;
                                }
                                else
                                {
                                    if (this.velocity.X < 0f)
                                    {
                                        this.velocity.X = this.velocity.X + 0.2f;
                                    }
                                }
                                if (this.velocity.X > 4f)
                                {
                                    this.velocity.X = 4f;
                                }
                            }
                        }
                        if (this.directionY == -1 && (double) this.velocity.Y > -2.5 && this.position.Y > Main.player[this.target].position.Y + (float) Main.player[this.target].height)
                        {
                            this.velocity.Y = this.velocity.Y - 0.1f;
                            if ((double) this.velocity.Y > 2.5)
                            {
                                this.velocity.Y = this.velocity.Y - 0.05f;
                            }
                            else
                            {
                                if (this.velocity.Y > 0f)
                                {
                                    this.velocity.Y = this.velocity.Y - 0.15f;
                                }
                            }
                            if ((double) this.velocity.Y < -2.5)
                            {
                                this.velocity.Y = -2.5f;
                            }
                        }
                        else
                        {
                            if (this.directionY == 1 && (double) this.velocity.Y < 2.5 && this.position.Y + (float) this.height < Main.player[this.target].position.Y)
                            {
                                this.velocity.Y = this.velocity.Y + 0.1f;
                                if ((double) this.velocity.Y < -2.5)
                                {
                                    this.velocity.Y = this.velocity.Y + 0.05f;
                                }
                                else
                                {
                                    if (this.velocity.Y < 0f)
                                    {
                                        this.velocity.Y = this.velocity.Y + 0.15f;
                                    }
                                }
                                if ((double) this.velocity.Y > 2.5)
                                {
                                    this.velocity.Y = 2.5f;
                                }
                            }
                        }
                    }
                    else
                    {
                        if (this.type == 116)
                        {
                            this.TargetClosest(true);
                            Lighting.addLight((int) (this.position.X + (float) (this.width/2))/16, (int) (this.position.Y + (float) (this.height/2))/16, 0.3f, 0.2f, 0.1f);
                            if (this.direction == -1 && this.velocity.X > -6f)
                            {
                                this.velocity.X = this.velocity.X - 0.1f;
                                if (this.velocity.X > 6f)
                                {
                                    this.velocity.X = this.velocity.X - 0.1f;
                                }
                                else
                                {
                                    if (this.velocity.X > 0f)
                                    {
                                        this.velocity.X = this.velocity.X - 0.2f;
                                    }
                                }
                                if (this.velocity.X < -6f)
                                {
                                    this.velocity.X = -6f;
                                }
                            }
                            else
                            {
                                if (this.direction == 1 && this.velocity.X < 6f)
                                {
                                    this.velocity.X = this.velocity.X + 0.1f;
                                    if (this.velocity.X < -6f)
                                    {
                                        this.velocity.X = this.velocity.X + 0.1f;
                                    }
                                    else
                                    {
                                        if (this.velocity.X < 0f)
                                        {
                                            this.velocity.X = this.velocity.X + 0.2f;
                                        }
                                    }
                                    if (this.velocity.X > 6f)
                                    {
                                        this.velocity.X = 6f;
                                    }
                                }
                            }
                            if (this.directionY == -1 && (double) this.velocity.Y > -2.5)
                            {
                                this.velocity.Y = this.velocity.Y - 0.04f;
                                if ((double) this.velocity.Y > 2.5)
                                {
                                    this.velocity.Y = this.velocity.Y - 0.05f;
                                }
                                else
                                {
                                    if (this.velocity.Y > 0f)
                                    {
                                        this.velocity.Y = this.velocity.Y - 0.15f;
                                    }
                                }
                                if ((double) this.velocity.Y < -2.5)
                                {
                                    this.velocity.Y = -2.5f;
                                }
                            }
                            else
                            {
                                if (this.directionY == 1 && (double) this.velocity.Y < 1.5)
                                {
                                    this.velocity.Y = this.velocity.Y + 0.04f;
                                    if ((double) this.velocity.Y < -2.5)
                                    {
                                        this.velocity.Y = this.velocity.Y + 0.05f;
                                    }
                                    else
                                    {
                                        if (this.velocity.Y < 0f)
                                        {
                                            this.velocity.Y = this.velocity.Y + 0.15f;
                                        }
                                    }
                                    if ((double) this.velocity.Y > 2.5)
                                    {
                                        this.velocity.Y = 2.5f;
                                    }
                                }
                            }
                            if (Main.rand.Next(40) == 0)
                            {
                                int num14 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + (float) this.height*0.25f), this.width, (int) ((float) this.height*0.5f), 5, this.velocity.X, 2f, 0, default(Color), 1f);
                                Dust expr_1B42_cp_0 = Main.dust[num14];
                                expr_1B42_cp_0.velocity.X = expr_1B42_cp_0.velocity.X*0.5f;
                                Dust expr_1B60_cp_0 = Main.dust[num14];
                                expr_1B60_cp_0.velocity.Y = expr_1B60_cp_0.velocity.Y*0.1f;
                            }
                        }
                        else
                        {
                            if (this.type == 133)
                            {
                                if ((double) this.life < (double) this.lifeMax*0.5)
                                {
                                    if (this.direction == -1 && this.velocity.X > -6f)
                                    {
                                        this.velocity.X = this.velocity.X - 0.1f;
                                        if (this.velocity.X > 6f)
                                        {
                                            this.velocity.X = this.velocity.X - 0.1f;
                                        }
                                        else
                                        {
                                            if (this.velocity.X > 0f)
                                            {
                                                this.velocity.X = this.velocity.X + 0.05f;
                                            }
                                        }
                                        if (this.velocity.X < -6f)
                                        {
                                            this.velocity.X = -6f;
                                        }
                                    }
                                    else
                                    {
                                        if (this.direction == 1 && this.velocity.X < 6f)
                                        {
                                            this.velocity.X = this.velocity.X + 0.1f;
                                            if (this.velocity.X < -6f)
                                            {
                                                this.velocity.X = this.velocity.X + 0.1f;
                                            }
                                            else
                                            {
                                                if (this.velocity.X < 0f)
                                                {
                                                    this.velocity.X = this.velocity.X - 0.05f;
                                                }
                                            }
                                            if (this.velocity.X > 6f)
                                            {
                                                this.velocity.X = 6f;
                                            }
                                        }
                                    }
                                    if (this.directionY == -1 && this.velocity.Y > -4f)
                                    {
                                        this.velocity.Y = this.velocity.Y - 0.1f;
                                        if (this.velocity.Y > 4f)
                                        {
                                            this.velocity.Y = this.velocity.Y - 0.1f;
                                        }
                                        else
                                        {
                                            if (this.velocity.Y > 0f)
                                            {
                                                this.velocity.Y = this.velocity.Y + 0.05f;
                                            }
                                        }
                                        if (this.velocity.Y < -4f)
                                        {
                                            this.velocity.Y = -4f;
                                        }
                                    }
                                    else
                                    {
                                        if (this.directionY == 1 && this.velocity.Y < 4f)
                                        {
                                            this.velocity.Y = this.velocity.Y + 0.1f;
                                            if (this.velocity.Y < -4f)
                                            {
                                                this.velocity.Y = this.velocity.Y + 0.1f;
                                            }
                                            else
                                            {
                                                if (this.velocity.Y < 0f)
                                                {
                                                    this.velocity.Y = this.velocity.Y - 0.05f;
                                                }
                                            }
                                            if (this.velocity.Y > 4f)
                                            {
                                                this.velocity.Y = 4f;
                                            }
                                        }
                                    }
                                }
                                else
                                {
                                    if (this.direction == -1 && this.velocity.X > -4f)
                                    {
                                        this.velocity.X = this.velocity.X - 0.1f;
                                        if (this.velocity.X > 4f)
                                        {
                                            this.velocity.X = this.velocity.X - 0.1f;
                                        }
                                        else
                                        {
                                            if (this.velocity.X > 0f)
                                            {
                                                this.velocity.X = this.velocity.X + 0.05f;
                                            }
                                        }
                                        if (this.velocity.X < -4f)
                                        {
                                            this.velocity.X = -4f;
                                        }
                                    }
                                    else
                                    {
                                        if (this.direction == 1 && this.velocity.X < 4f)
                                        {
                                            this.velocity.X = this.velocity.X + 0.1f;
                                            if (this.velocity.X < -4f)
                                            {
                                                this.velocity.X = this.velocity.X + 0.1f;
                                            }
                                            else
                                            {
                                                if (this.velocity.X < 0f)
                                                {
                                                    this.velocity.X = this.velocity.X - 0.05f;
                                                }
                                            }
                                            if (this.velocity.X > 4f)
                                            {
                                                this.velocity.X = 4f;
                                            }
                                        }
                                    }
                                    if (this.directionY == -1 && (double) this.velocity.Y > -1.5)
                                    {
                                        this.velocity.Y = this.velocity.Y - 0.04f;
                                        if ((double) this.velocity.Y > 1.5)
                                        {
                                            this.velocity.Y = this.velocity.Y - 0.05f;
                                        }
                                        else
                                        {
                                            if (this.velocity.Y > 0f)
                                            {
                                                this.velocity.Y = this.velocity.Y + 0.03f;
                                            }
                                        }
                                        if ((double) this.velocity.Y < -1.5)
                                        {
                                            this.velocity.Y = -1.5f;
                                        }
                                    }
                                    else
                                    {
                                        if (this.directionY == 1 && (double) this.velocity.Y < 1.5)
                                        {
                                            this.velocity.Y = this.velocity.Y + 0.04f;
                                            if ((double) this.velocity.Y < -1.5)
                                            {
                                                this.velocity.Y = this.velocity.Y + 0.05f;
                                            }
                                            else
                                            {
                                                if (this.velocity.Y < 0f)
                                                {
                                                    this.velocity.Y = this.velocity.Y - 0.03f;
                                                }
                                            }
                                            if ((double) this.velocity.Y > 1.5)
                                            {
                                                this.velocity.Y = 1.5f;
                                            }
                                        }
                                    }
                                }
                            }
                            else
                            {
                                float num15 = 4f;
                                float num16 = 1.5f;
                                num15 *= 1f + (1f - this.scale);
                                num16 *= 1f + (1f - this.scale);
                                if (this.direction == -1 && this.velocity.X > -num15)
                                {
                                    this.velocity.X = this.velocity.X - 0.1f;
                                    if (this.velocity.X > num15)
                                    {
                                        this.velocity.X = this.velocity.X - 0.1f;
                                    }
                                    else
                                    {
                                        if (this.velocity.X > 0f)
                                        {
                                            this.velocity.X = this.velocity.X + 0.05f;
                                        }
                                    }
                                    if (this.velocity.X < -num15)
                                    {
                                        this.velocity.X = -num15;
                                    }
                                }
                                else
                                {
                                    if (this.direction == 1 && this.velocity.X < num15)
                                    {
                                        this.velocity.X = this.velocity.X + 0.1f;
                                        if (this.velocity.X < -num15)
                                        {
                                            this.velocity.X = this.velocity.X + 0.1f;
                                        }
                                        else
                                        {
                                            if (this.velocity.X < 0f)
                                            {
                                                this.velocity.X = this.velocity.X - 0.05f;
                                            }
                                        }
                                        if (this.velocity.X > num15)
                                        {
                                            this.velocity.X = num15;
                                        }
                                    }
                                }
                                if (this.directionY == -1 && this.velocity.Y > -num16)
                                {
                                    this.velocity.Y = this.velocity.Y - 0.04f;
                                    if (this.velocity.Y > num16)
                                    {
                                        this.velocity.Y = this.velocity.Y - 0.05f;
                                    }
                                    else
                                    {
                                        if (this.velocity.Y > 0f)
                                        {
                                            this.velocity.Y = this.velocity.Y + 0.03f;
                                        }
                                    }
                                    if (this.velocity.Y < -num16)
                                    {
                                        this.velocity.Y = -num16;
                                    }
                                }
                                else
                                {
                                    if (this.directionY == 1 && this.velocity.Y < num16)
                                    {
                                        this.velocity.Y = this.velocity.Y + 0.04f;
                                        if (this.velocity.Y < -num16)
                                        {
                                            this.velocity.Y = this.velocity.Y + 0.05f;
                                        }
                                        else
                                        {
                                            if (this.velocity.Y < 0f)
                                            {
                                                this.velocity.Y = this.velocity.Y - 0.03f;
                                            }
                                        }
                                        if (this.velocity.Y > num16)
                                        {
                                            this.velocity.Y = num16;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    if ((this.type == 2 || this.type == 133 || this.type == 190 || this.type == 191 || this.type == 192 || this.type == 193 || this.type == 194) && Main.rand.Next(40) == 0)
                    {
                        int num17 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + (float) this.height*0.25f), this.width, (int) ((float) this.height*0.5f), 5, this.velocity.X, 2f, 0, default(Color), 1f);
                        Dust expr_251E_cp_0 = Main.dust[num17];
                        expr_251E_cp_0.velocity.X = expr_251E_cp_0.velocity.X*0.5f;
                        Dust expr_253C_cp_0 = Main.dust[num17];
                        expr_253C_cp_0.velocity.Y = expr_253C_cp_0.velocity.Y*0.1f;
                    }
                    if (this.wet && this.type != 170 && this.type != 171 && this.type != 172)
                    {
                        if (this.velocity.Y > 0f)
                        {
                            this.velocity.Y = this.velocity.Y*0.95f;
                        }
                        this.velocity.Y = this.velocity.Y - 0.5f;
                        if (this.velocity.Y < -4f)
                        {
                            this.velocity.Y = -4f;
                        }
                        this.TargetClosest(true);
                        return;
                    }
                }
                else
                {
                    if (this.aiStyle == 3)
                    {
                        bool flag2 = false;
                        if (this.velocity.X == 0f)
                        {
                            flag2 = true;
                        }
                        if (this.justHit)
                        {
                            flag2 = false;
                        }
                        if (Main.netMode != 1 && this.type == 198 && (double) this.life <= (double) this.lifeMax*0.55)
                        {
                            this.Transform(199);
                        }
                        int num18 = 60;
                        if (this.type == 120)
                        {
                            num18 = 180;
                            if (this.ai[3] == -120f)
                            {
                                this.velocity *= 0f;
                                this.ai[3] = 0f;
                                Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 8);
                                Vector2 vector3 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                float num19 = this.oldPos[2].X + (float) this.width*0.5f - vector3.X;
                                float num20 = this.oldPos[2].Y + (float) this.height*0.5f - vector3.Y;
                                float num21 = (float) Math.Sqrt((double) (num19*num19 + num20*num20));
                                num21 = 2f/num21;
                                num19 *= num21;
                                num20 *= num21;
                                for (int j = 0; j < 20; j++)
                                {
                                    int num22 = Dust.NewDust(this.position, this.width, this.height, 71, num19, num20, 200, default(Color), 2f);
                                    Main.dust[num22].noGravity = true;
                                    Dust expr_27D5_cp_0 = Main.dust[num22];
                                    expr_27D5_cp_0.velocity.X = expr_27D5_cp_0.velocity.X*2f;
                                }
                                for (int k = 0; k < 20; k++)
                                {
                                    int num23 = Dust.NewDust(this.oldPos[2], this.width, this.height, 71, -num19, -num20, 200, default(Color), 2f);
                                    Main.dust[num23].noGravity = true;
                                    Dust expr_2856_cp_0 = Main.dust[num23];
                                    expr_2856_cp_0.velocity.X = expr_2856_cp_0.velocity.X*2f;
                                }
                            }
                        }
                        bool flag3 = false;
                        bool flag4 = true;
                        if (this.type == 47 || this.type == 67 || this.type == 109 || this.type == 110 || this.type == 111 || this.type == 120 || this.type == 163 || this.type == 164 || this.type == 239 || this.type == 168 || this.type == 199 || this.type == 206 || this.type == 214 || this.type == 215 || this.type == 216 || this.type == 217 || this.type == 218 || this.type == 219 || this.type == 220 || this.type == 226 || this.type == 243 || this.type == 251 || this.type == 257 || this.type == 258 || this.type == 290 || this.type == 291 || this.type == 292 || this.type == 293)
                        {
                            flag4 = false;
                        }
                        if ((this.type != 110 && this.type != 111 && this.type != 206 && this.type != 216 && this.type != 214 && this.type != 215 && this.type != 291 && this.type != 292 && this.type != 293) || this.ai[2] <= 0f)
                        {
                            if (this.velocity.Y == 0f && ((this.velocity.X > 0f && this.direction < 0) || (this.velocity.X < 0f && this.direction > 0)))
                            {
                                flag3 = true;
                            }
                            if (this.position.X == this.oldPosition.X || this.ai[3] >= (float) num18 || flag3)
                            {
                                this.ai[3] += 1f;
                            }
                            else
                            {
                                if ((double) Math.Abs(this.velocity.X) > 0.9 && this.ai[3] > 0f)
                                {
                                    this.ai[3] -= 1f;
                                }
                            }
                            if (this.ai[3] > (float) (num18*10))
                            {
                                this.ai[3] = 0f;
                            }
                            if (this.justHit)
                            {
                                this.ai[3] = 0f;
                            }
                            if (this.ai[3] == (float) num18)
                            {
                                this.netUpdate = true;
                            }
                        }
                        if ((Main.eclipse || !Main.dayTime || (double) this.position.Y > Main.worldSurface*16.0 || this.type == 26 || this.type == 27 || this.type == 28 || this.type == 31 || this.type == 294 || this.type == 295 || this.type == 296 || this.type == 47 || this.type == 67 || this.type == 73 || this.type == 77 || this.type == 78 || this.type == 79 || this.type == 80 || this.type == 110 || this.type == 111 || this.type == 120 || this.type == 168 || this.type == 181 || this.type == 185 || this.type == 198 || this.type == 199 || this.type == 198 || this.type == 206 || this.type == 217 || this.type == 218 || this.type == 219 || this.type == 220 || this.type == 239 || this.type == 243 || this.type == 254 || (this.type == 255 | this.type == 257) || this.type == 258 || this.type == 291 || this.type == 292 || this.type == 293 || (this.type >= 212 && this.type <= 216)) && this.ai[3] < (float) num18)
                        {
                            if ((this.type == 3 || this.type == 21 || this.type == 31 || this.type == 294 || this.type == 295 || this.type == 296 || this.type == 77 || this.type == 110 || this.type == 132 || this.type == 167 || this.type == 161 || this.type == 162 || this.type == 186 || this.type == 187 || this.type == 188 || this.type == 189 || this.type == 197 || this.type == 200 || this.type == 201 || this.type == 202 || this.type == 203 || this.type == 223 || this.type == 291 || this.type == 292 || this.type == 293) && Main.rand.Next(1000) == 0)
                            {
                                Main.PlaySound(14, (int) this.position.X, (int) this.position.Y, 1);
                            }
                            if ((this.type == 78 || this.type == 79 || this.type == 80) && Main.rand.Next(500) == 0)
                            {
                                Main.PlaySound(26, (int) this.position.X, (int) this.position.Y, 1);
                            }
                            if (this.type == 159 && Main.rand.Next(500) == 0)
                            {
                                Main.PlaySound(29, (int) this.position.X, (int) this.position.Y, 7);
                            }
                            if (this.type == 162 && Main.rand.Next(500) == 0)
                            {
                                Main.PlaySound(29, (int) this.position.X, (int) this.position.Y, 6);
                            }
                            if (this.type == 181 && Main.rand.Next(500) == 0)
                            {
                                Main.PlaySound(29, (int) this.position.X, (int) this.position.Y, 8);
                            }
                            if (this.type >= 269 && this.type <= 280 && Main.rand.Next(1000) == 0)
                            {
                                Main.PlaySound(14, (int) this.position.X, (int) this.position.Y, 1);
                            }
                            //this.TargetClosest(true); //targetting
                        }
                        else
                        {
                            if ((this.type != 110 && this.type != 111 && this.type != 206 && this.type != 216 && this.type != 214 && this.type != 215 && this.type != 291 && this.type != 292 && this.type != 293) || this.ai[2] <= 0f)
                            {
                                if (Main.dayTime && (double) (this.position.Y/16f) < Main.worldSurface && this.timeLeft > 10)
                                {
                                    this.timeLeft = 10;
                                }
                                if (this.velocity.X == 0f)
                                {
                                    if (this.velocity.Y == 0f)
                                    {
                                        this.ai[0] += 1f;
                                        if (this.ai[0] >= 2f)
                                        {
                                            this.direction *= -1;
                                            this.spriteDirection = this.direction;
                                            this.ai[0] = 0f;
                                        }
                                    }
                                }
                                else
                                {
                                    this.ai[0] = 0f;
                                }
                                if (this.direction == 0)
                                {
                                    this.direction = 1;
                                }
                            }
                        }
                        if (this.type == 159)
                        {
                            if (this.type == 159 && ((this.velocity.X > 0f && this.direction < 0) || (this.velocity.X < 0f && this.direction > 0)))
                            {
                                this.velocity.X = this.velocity.X*0.95f;
                            }
                            if (this.velocity.X < -6f || this.velocity.X > 6f)
                            {
                                if (this.velocity.Y == 0f)
                                {
                                    this.velocity *= 0.8f;
                                }
                            }
                            else
                            {
                                if (this.velocity.X < 6f && this.direction == 1)
                                {
                                    if (this.velocity.Y == 0f && this.velocity.X < 0f)
                                    {
                                        this.velocity.X = this.velocity.X*0.99f;
                                    }
                                    this.velocity.X = this.velocity.X + 0.07f;
                                    if (this.velocity.X > 6f)
                                    {
                                        this.velocity.X = 6f;
                                    }
                                }
                                else
                                {
                                    if (this.velocity.X > -6f && this.direction == -1)
                                    {
                                        if (this.velocity.Y == 0f && this.velocity.X > 0f)
                                        {
                                            this.velocity.X = this.velocity.X*0.99f;
                                        }
                                        this.velocity.X = this.velocity.X - 0.07f;
                                        if (this.velocity.X < -6f)
                                        {
                                            this.velocity.X = -6f;
                                        }
                                    }
                                }
                            }
                        }
                        else
                        {
                            if (this.type == 199)
                            {
                                if (this.velocity.X < -4f || this.velocity.X > 4f)
                                {
                                    if (this.velocity.Y == 0f)
                                    {
                                        this.velocity *= 0.8f;
                                    }
                                }
                                else
                                {
                                    if (this.velocity.X < 4f && this.direction == 1)
                                    {
                                        if (this.velocity.Y == 0f && this.velocity.X < 0f)
                                        {
                                            this.velocity.X = this.velocity.X*0.8f;
                                        }
                                        this.velocity.X = this.velocity.X + 0.1f;
                                        if (this.velocity.X > 4f)
                                        {
                                            this.velocity.X = 4f;
                                        }
                                    }
                                    else
                                    {
                                        if (this.velocity.X > -4f && this.direction == -1)
                                        {
                                            if (this.velocity.Y == 0f && this.velocity.X > 0f)
                                            {
                                                this.velocity.X = this.velocity.X*0.8f;
                                            }
                                            this.velocity.X = this.velocity.X - 0.1f;
                                            if (this.velocity.X < -4f)
                                            {
                                                this.velocity.X = -4f;
                                            }
                                        }
                                    }
                                }
                            }
                            else
                            {
                                if (this.type == 120 || this.type == 166 || this.type == 213 || this.type == 258)
                                {
                                    if (this.velocity.X < -3f || this.velocity.X > 3f)
                                    {
                                        if (this.velocity.Y == 0f)
                                        {
                                            this.velocity *= 0.8f;
                                        }
                                    }
                                    else
                                    {
                                        if (this.velocity.X < 3f && this.direction == 1)
                                        {
                                            if (this.velocity.Y == 0f && this.velocity.X < 0f)
                                            {
                                                this.velocity.X = this.velocity.X*0.99f;
                                            }
                                            this.velocity.X = this.velocity.X + 0.07f;
                                            if (this.velocity.X > 3f)
                                            {
                                                this.velocity.X = 3f;
                                            }
                                        }
                                        else
                                        {
                                            if (this.velocity.X > -3f && this.direction == -1)
                                            {
                                                if (this.velocity.Y == 0f && this.velocity.X > 0f)
                                                {
                                                    this.velocity.X = this.velocity.X*0.99f;
                                                }
                                                this.velocity.X = this.velocity.X - 0.07f;
                                                if (this.velocity.X < -3f)
                                                {
                                                    this.velocity.X = -3f;
                                                }
                                            }
                                        }
                                    }
                                }
                                else
                                {
                                    if (this.type == 26 || this.type == 27 || this.type == 77 || this.type == 104 || this.type == 163 || this.type == 162 || this.type == 196 || this.type == 197 || this.type == 212 || this.type == 257)
                                    {
                                        if (this.velocity.X < -2f || this.velocity.X > 2f)
                                        {
                                            if (this.velocity.Y == 0f)
                                            {
                                                this.velocity *= 0.8f;
                                            }
                                        }
                                        else
                                        {
                                            if (this.velocity.X < 3f && this.direction == 1)
                                            {
                                                this.velocity.X = this.velocity.X + 0.07f;
                                                if (this.velocity.X > 3f)
                                                {
                                                    this.velocity.X = 3f;
                                                }
                                            }
                                            else
                                            {
                                                if (this.velocity.X > -3f && this.direction == -1)
                                                {
                                                    this.velocity.X = this.velocity.X - 0.07f;
                                                    if (this.velocity.X < -3f)
                                                    {
                                                        this.velocity.X = -3f;
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    else
                                    {
                                        if (this.type == 109)
                                        {
                                            if (this.velocity.X < -2f || this.velocity.X > 2f)
                                            {
                                                if (this.velocity.Y == 0f)
                                                {
                                                    this.velocity *= 0.8f;
                                                }
                                            }
                                            else
                                            {
                                                if (this.velocity.X < 2f && this.direction == 1)
                                                {
                                                    this.velocity.X = this.velocity.X + 0.04f;
                                                    if (this.velocity.X > 2f)
                                                    {
                                                        this.velocity.X = 2f;
                                                    }
                                                }
                                                else
                                                {
                                                    if (this.velocity.X > -2f && this.direction == -1)
                                                    {
                                                        this.velocity.X = this.velocity.X - 0.04f;
                                                        if (this.velocity.X < -2f)
                                                        {
                                                            this.velocity.X = -2f;
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else
                                        {
                                            if (this.type == 21 || this.type == 26 || this.type == 31 || this.type == 294 || this.type == 295 || this.type == 296 || this.type == 47 || this.type == 73 || /*this.type == 140 || */ this.type == 164 || this.type == 239 || this.type == 167 || this.type == 168 || this.type == 185 || this.type == 198 || this.type == 201 || this.type == 202 || this.type == 203 || this.type == 217 || this.type == 218 || this.type == 219 || this.type == 226 || this.type == 181 || this.type == 254)
                                            {
                                                float num24 = 1.5f;
                                                if (this.type == 294)
                                                {
                                                    num24 = 2f;
                                                }
                                                if (this.type == 295)
                                                {
                                                    num24 = 1.75f;
                                                }
                                                if (this.type == 296)
                                                {
                                                    num24 = 1.25f;
                                                }
                                                if (this.type == 201)
                                                {
                                                    num24 = 1.1f;
                                                }
                                                if (this.type == 202)
                                                {
                                                    num24 = 0.9f;
                                                }
                                                if (this.type == 203)
                                                {
                                                    num24 = 1.2f;
                                                }
                                                if (this.type == 21 || this.type == 201 || this.type == 202 || this.type == 203)
                                                {
                                                    num24 *= 1f + (1f - this.scale);
                                                }
                                                if (this.velocity.X < -num24 || this.velocity.X > num24)
                                                {
                                                    if (this.velocity.Y == 0f)
                                                    {
                                                        this.velocity *= 0.8f;
                                                    }
                                                }
                                                else
                                                {
                                                    if (this.velocity.X < num24 && this.direction == 1)
                                                    {
                                                        this.velocity.X = this.velocity.X + 0.07f;
                                                        if (this.velocity.X > num24)
                                                        {
                                                            this.velocity.X = num24;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.velocity.X > -num24 && this.direction == -1)
                                                        {
                                                            this.velocity.X = this.velocity.X - 0.07f;
                                                            if (this.velocity.X < -num24)
                                                            {
                                                                this.velocity.X = -num24;
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (this.type >= 269 && this.type <= 280)
                                                {
                                                    float num25 = 1.5f;
                                                    if (this.type == 269)
                                                    {
                                                        num25 = 2f;
                                                    }
                                                    if (this.type == 270)
                                                    {
                                                        num25 = 1f;
                                                    }
                                                    if (this.type == 271)
                                                    {
                                                        num25 = 1.5f;
                                                    }
                                                    if (this.type == 272)
                                                    {
                                                        num25 = 3f;
                                                    }
                                                    if (this.type == 273)
                                                    {
                                                        num25 = 1.25f;
                                                    }
                                                    if (this.type == 274)
                                                    {
                                                        num25 = 3f;
                                                    }
                                                    if (this.type == 275)
                                                    {
                                                        num25 = 3.25f;
                                                    }
                                                    if (this.type == 276)
                                                    {
                                                        num25 = 1.75f + ((Main.gameTime/7200)*0.1f);
                                                    }
                                                    if (this.type == 277)
                                                    {
                                                        num25 = 1.75f + ((Main.gameTime/7200)*0.1f);
                                                    }
                                                    if (this.type == 278)
                                                    {
                                                        num25 = 1.8f;
                                                    }
                                                    if (this.type == 279)
                                                    {
                                                        num25 = 1.3f;
                                                    }
                                                    if (this.type == 280)
                                                    {
                                                        num25 = 2.5f;
                                                    }
                                                    num25 *= 1f + (1f - this.scale);
                                                    if (this.velocity.X < -num25 || this.velocity.X > num25)
                                                    {
                                                        if (this.velocity.Y == 0f)
                                                        {
                                                            this.velocity *= 0.8f;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.velocity.X < num25 && this.direction == 1)
                                                        {
                                                            this.velocity.X = this.velocity.X + 0.07f;
                                                            if (this.velocity.X > num25)
                                                            {
                                                                this.velocity.X = num25;
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (this.velocity.X > -num25 && this.direction == -1)
                                                            {
                                                                this.velocity.X = this.velocity.X - 0.07f;
                                                                if (this.velocity.X < -num25)
                                                                {
                                                                    this.velocity.X = -num25;
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                else
                                                {
                                                    if (this.type == 67 || this.type == 220)
                                                    {
                                                        if (this.velocity.X < -0.5f || this.velocity.X > 0.5f)
                                                        {
                                                            if (this.velocity.Y == 0f)
                                                            {
                                                                this.velocity *= 0.7f;
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (this.velocity.X < 0.5f && this.direction == 1)
                                                            {
                                                                this.velocity.X = this.velocity.X + 0.03f;
                                                                if (this.velocity.X > 0.5f)
                                                                {
                                                                    this.velocity.X = 0.5f;
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.velocity.X > -0.5f && this.direction == -1)
                                                                {
                                                                    this.velocity.X = this.velocity.X - 0.03f;
                                                                    if (this.velocity.X < -0.5f)
                                                                    {
                                                                        this.velocity.X = -0.5f;
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.type == 78 || this.type == 79 || this.type == 80)
                                                        {
                                                            float num26 = 1f;
                                                            float num27 = 0.05f;
                                                            if (this.life < this.lifeMax/2)
                                                            {
                                                                num26 = 2f;
                                                                num27 = 0.1f;
                                                            }
                                                            if (this.type == 79)
                                                            {
                                                                num26 *= 1.5f;
                                                            }
                                                            if (this.velocity.X < -num26 || this.velocity.X > num26)
                                                            {
                                                                if (this.velocity.Y == 0f)
                                                                {
                                                                    this.velocity *= 0.7f;
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.velocity.X < num26 && this.direction == 1)
                                                                {
                                                                    this.velocity.X = this.velocity.X + num27;
                                                                    if (this.velocity.X > num26)
                                                                    {
                                                                        this.velocity.X = num26;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.velocity.X > -num26 && this.direction == -1)
                                                                    {
                                                                        this.velocity.X = this.velocity.X - num27;
                                                                        if (this.velocity.X < -num26)
                                                                        {
                                                                            this.velocity.X = -num26;
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (this.type == 287)
                                                            {
                                                                float num28 = 5f;
                                                                float num29 = 0.2f;
                                                                if (this.velocity.X < -num28 || this.velocity.X > num28)
                                                                {
                                                                    if (this.velocity.Y == 0f)
                                                                    {
                                                                        this.velocity *= 0.7f;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.velocity.X < num28 && this.direction == 1)
                                                                    {
                                                                        this.velocity.X = this.velocity.X + num29;
                                                                        if (this.velocity.X > num28)
                                                                        {
                                                                            this.velocity.X = num28;
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.velocity.X > -num28 && this.direction == -1)
                                                                        {
                                                                            this.velocity.X = this.velocity.X - num29;
                                                                            if (this.velocity.X < -num28)
                                                                            {
                                                                                this.velocity.X = -num28;
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.type == 243)
                                                                {
                                                                    float num30 = 1f;
                                                                    float num31 = 0.07f;
                                                                    num30 += (1f - (float) this.life/(float) this.lifeMax)*1.5f;
                                                                    num31 += (1f - (float) this.life/(float) this.lifeMax)*0.15f;
                                                                    if (this.velocity.X < -num30 || this.velocity.X > num30)
                                                                    {
                                                                        if (this.velocity.Y == 0f)
                                                                        {
                                                                            this.velocity *= 0.7f;
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.velocity.X < num30 && this.direction == 1)
                                                                        {
                                                                            this.velocity.X = this.velocity.X + num31;
                                                                            if (this.velocity.X > num30)
                                                                            {
                                                                                this.velocity.X = num30;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.velocity.X > -num30 && this.direction == -1)
                                                                            {
                                                                                this.velocity.X = this.velocity.X - num31;
                                                                                if (this.velocity.X < -num30)
                                                                                {
                                                                                    this.velocity.X = -num30;
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.type == 251)
                                                                    {
                                                                        float num32 = 1f;
                                                                        float num33 = 0.08f;
                                                                        num32 += (1f - (float) this.life/(float) this.lifeMax)*2f;
                                                                        num33 += (1f - (float) this.life/(float) this.lifeMax)*0.2f;
                                                                        if (this.velocity.X < -num32 || this.velocity.X > num32)
                                                                        {
                                                                            if (this.velocity.Y == 0f)
                                                                            {
                                                                                this.velocity *= 0.7f;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.velocity.X < num32 && this.direction == 1)
                                                                            {
                                                                                this.velocity.X = this.velocity.X + num33;
                                                                                if (this.velocity.X > num32)
                                                                                {
                                                                                    this.velocity.X = num32;
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.X > -num32 && this.direction == -1)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X - num33;
                                                                                    if (this.velocity.X < -num32)
                                                                                    {
                                                                                        this.velocity.X = -num32;
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.type != 110 && this.type != 111 && this.type != 206 && this.type != 214 && this.type != 215 && this.type != 216 && this.type != 290 && this.type != 291 && this.type != 292 && this.type != 293)
                                                                        {
                                                                            float num34 = 1f;
                                                                            if (this.type == 186)
                                                                            {
                                                                                num34 = 1.1f;
                                                                            }
                                                                            if (this.type == 187)
                                                                            {
                                                                                num34 = 0.9f;
                                                                            }
                                                                            if (this.type == 188)
                                                                            {
                                                                                num34 = 1.2f;
                                                                            }
                                                                            if (this.type == 189)
                                                                            {
                                                                                num34 = 0.8f;
                                                                            }
                                                                            if (this.type == 132)
                                                                            {
                                                                                num34 = 0.95f;
                                                                            }
                                                                            if (this.type == 200)
                                                                            {
                                                                                num34 = 0.87f;
                                                                            }
                                                                            if (this.type == 223)
                                                                            {
                                                                                num34 = 1.05f;
                                                                            }
                                                                            if (this.type == 3 || this.type == 132 || this.type == 186 || this.type == 187 || this.type == 188 || this.type == 189 || this.type == 200 || this.type == 223)
                                                                            {
                                                                                num34 *= 1f + (1f - this.scale);
                                                                            }
                                                                            if (this.velocity.X < -num34 || this.velocity.X > num34)
                                                                            {
                                                                                if (this.velocity.Y == 0f)
                                                                                {
                                                                                    this.velocity *= 0.8f;
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.X < num34 && this.direction == 1)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + 0.07f;
                                                                                    if (this.velocity.X > num34)
                                                                                    {
                                                                                        this.velocity.X = num34;
                                                                                    }
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.velocity.X > -num34 && this.direction == -1)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X - 0.07f;
                                                                                        if (this.velocity.X < -num34)
                                                                                        {
                                                                                            this.velocity.X = -num34;
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        if (this.type >= 277 && this.type <= 280)
                        {
                            Lighting.addLight((int) this.center().X/16, (int) this.center().Y/16, 0.2f, 0.1f, 0f);
                        }
                        if (this.type == 258)
                        {
                            if (this.velocity.Y != 0f)
                            {
                                this.TargetClosest(true);
                                this.spriteDirection = this.direction;
                                if (Main.player[this.target].center().X < this.position.X && this.velocity.X > 0f)
                                {
                                    this.velocity.X = this.velocity.X*0.95f;
                                }
                                else
                                {
                                    if (Main.player[this.target].center().X > this.position.X + (float) this.width && this.velocity.X < 0f)
                                    {
                                        this.velocity.X = this.velocity.X*0.95f;
                                    }
                                }
                                if (Main.player[this.target].center().X < this.position.X && this.velocity.X > -5f)
                                {
                                    this.velocity.X = this.velocity.X - 0.1f;
                                }
                                else
                                {
                                    if (Main.player[this.target].center().X > this.position.X + (float) this.width && this.velocity.X < 5f)
                                    {
                                        this.velocity.X = this.velocity.X + 0.1f;
                                    }
                                }
                            }
                            else
                            {
                                if (Main.player[this.target].center().Y + 50f < this.position.Y && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                {
                                    this.velocity.Y = -7f;
                                }
                            }
                        }
                        if (this.type == 185)
                        {
                            if (this.velocity.Y == 0f)
                            {
                                this.rotation = 0f;
                                this.localAI[0] = 0f;
                            }
                            else
                            {
                                if (this.localAI[0] == 1f)
                                {
                                    this.rotation += this.velocity.X*0.05f;
                                }
                            }
                        }
                        if (this.type == 159 && Main.netMode != 1)
                        {
                            Vector2 vector4 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                            float num35 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector4.X;
                            float num36 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector4.Y;
                            float num37 = (float) Math.Sqrt((double) (num35*num35 + num36*num36));
                            if (num37 > 300f)
                            {
                                this.Transform(158);
                            }
                        }
                        if (this.type == 164 && Main.netMode != 1 && this.velocity.Y == 0f)
                        {
                            int num38 = (int) this.center().X/16;
                            int num39 = (int) this.center().Y/16;
                            bool flag5 = false;
                            for (int l = num38 - 1; l <= num38 + 1; l++)
                            {
                                for (int m = num39 - 1; m <= num39 + 1; m++)
                                {
                                    if (Main.tile[l, m].wall > 0)
                                    {
                                        flag5 = true;
                                    }
                                }
                            }
                            if (flag5)
                            {
                                this.Transform(165);
                            }
                        }
                        if (this.type == 239 && Main.netMode != 1 && this.velocity.Y == 0f)
                        {
                            int num40 = (int) this.center().X/16;
                            int num41 = (int) this.center().Y/16;
                            bool flag6 = false;
                            for (int n = num40 - 1; n <= num40 + 1; n++)
                            {
                                for (int num42 = num41 - 1; num42 <= num41 + 1; num42++)
                                {
                                    if (Main.tile[n, num42].wall > 0)
                                    {
                                        flag6 = true;
                                    }
                                }
                            }
                            if (flag6)
                            {
                                this.Transform(240);
                            }
                        }
                        if (this.type == 163 && Main.netMode != 1 && this.velocity.Y == 0f)
                        {
                            int num43 = (int) this.center().X/16;
                            int num44 = (int) this.center().Y/16;
                            bool flag7 = false;
                            for (int num45 = num43 - 1; num45 <= num43 + 1; num45++)
                            {
                                for (int num46 = num44 - 1; num46 <= num44 + 1; num46++)
                                {
                                    if (Main.tile[num45, num46].wall > 0)
                                    {
                                        flag7 = true;
                                    }
                                }
                            }
                            if (flag7)
                            {
                                this.Transform(238);
                            }
                        }
                        if (this.type == 236 && Main.netMode != 1 && this.velocity.Y == 0f)
                        {
                            int num47 = (int) this.center().X/16;
                            int num48 = (int) this.center().Y/16;
                            bool flag8 = false;
                            for (int num49 = num47 - 1; num49 <= num47 + 1; num49++)
                            {
                                for (int num50 = num48 - 1; num50 <= num48 + 1; num50++)
                                {
                                    if (Main.tile[num49, num50].wall > 0)
                                    {
                                        flag8 = true;
                                    }
                                }
                            }
                            if (flag8)
                            {
                                this.Transform(237);
                            }
                        }
                        if (this.type == 243)
                        {
                            if (this.justHit && Main.rand.Next(3) == 0)
                            {
                                this.ai[2] -= (float) Main.rand.Next(30);
                            }
                            if (this.ai[2] < 0f)
                            {
                                this.ai[2] = 0f;
                            }
                            if (this.confused)
                            {
                                this.ai[2] = 0f;
                            }
                            this.ai[2] += 1f;
                            float num51 = (float) Main.rand.Next(30, 900);
                            num51 *= (float) this.life/(float) this.lifeMax;
                            num51 += 30f;
                            if (Main.netMode != 1 && this.ai[2] >= num51 && this.velocity.Y == 0f && !Main.player[this.target].dead && !Main.player[this.target].frozen && ((this.direction > 0 && this.center().X < Main.player[this.target].center().X) || (this.direction < 0 && this.center().X > Main.player[this.target].center().X)) && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                            {
                                float num52 = 15f;
                                Vector2 vector5 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + 20f);
                                vector5.X += (float) (10*this.direction);
                                float num53 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector5.X;
                                float num54 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector5.Y;
                                num53 += (float) Main.rand.Next(-40, 41);
                                num54 += (float) Main.rand.Next(-40, 41);
                                float num55 = (float) Math.Sqrt((double) (num53*num53 + num54*num54));
                                this.netUpdate = true;
                                num55 = num52/num55;
                                num53 *= num55;
                                num54 *= num55;
                                int num56 = 32;
                                int num57 = 257;
                                vector5.X += num53*3f;
                                vector5.Y += num54*3f;
                                Projectile.NewProjectile(vector5.X, vector5.Y, num53, num54, num57, num56, 0f, Main.myPlayer, 0f, 0f);
                                this.ai[2] = 0f;
                            }
                        }
                        if (this.type == 251)
                        {
                            if (this.justHit)
                            {
                                this.ai[2] -= (float) Main.rand.Next(30);
                            }
                            if (this.ai[2] < 0f)
                            {
                                this.ai[2] = 0f;
                            }
                            if (this.confused)
                            {
                                this.ai[2] = 0f;
                            }
                            this.ai[2] += 1f;
                            float num58 = (float) Main.rand.Next(60, 1800);
                            num58 *= (float) this.life/(float) this.lifeMax;
                            num58 += 15f;
                            if (Main.netMode != 1 && this.ai[2] >= num58 && this.velocity.Y == 0f && !Main.player[this.target].dead && !Main.player[this.target].frozen && ((this.direction > 0 && this.center().X < Main.player[this.target].center().X) || (this.direction < 0 && this.center().X > Main.player[this.target].center().X)) && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                            {
                                float num59 = 15f;
                                Vector2 vector6 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + 12f);
                                vector6.X += (float) (6*this.direction);
                                float num60 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector6.X;
                                float num61 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector6.Y;
                                num60 += (float) Main.rand.Next(-40, 41);
                                num61 += (float) Main.rand.Next(-30, 0);
                                float num62 = (float) Math.Sqrt((double) (num60*num60 + num61*num61));
                                this.netUpdate = true;
                                num62 = num59/num62;
                                num60 *= num62;
                                num61 *= num62;
                                int num63 = 30;
                                int num64 = 83;
                                vector6.X += num60*3f;
                                vector6.Y += num61*3f;
                                Projectile.NewProjectile(vector6.X, vector6.Y, num60, num61, num64, num63, 0f, Main.myPlayer, 0f, 0f);
                                this.ai[2] = 0f;
                            }
                        }
                        if (this.type == 110 || this.type == 111 || this.type == 206 || this.type == 214 || this.type == 215 || this.type == 216 || this.type == 290 || this.type == 291 || this.type == 292 || this.type == 293)
                        {
                            if (this.confused)
                            {
                                this.ai[2] = 0f;
                            }
                            else
                            {
                                if (this.ai[1] > 0f)
                                {
                                    this.ai[1] -= 1f;
                                }
                                if (this.justHit)
                                {
                                    this.ai[1] = 30f;
                                    this.ai[2] = 0f;
                                }
                                int num65 = 70;
                                if (this.type == 291)
                                {
                                    num65 = 200;
                                }
                                if (this.type == 292)
                                {
                                    num65 = 120;
                                }
                                if (this.type == 293)
                                {
                                    num65 = 90;
                                }
                                if (this.type == 111)
                                {
                                    num65 = 180;
                                }
                                if (this.type == 206)
                                {
                                    num65 = 50;
                                }
                                if (this.type == 214)
                                {
                                    num65 = 40;
                                }
                                if (this.type == 215)
                                {
                                    num65 = 80;
                                }
                                if (this.type == 290)
                                {
                                    num65 = 30;
                                }
                                bool flag9 = false;
                                if (this.type == 216)
                                {
                                    if (this.localAI[2] >= 20f)
                                    {
                                        flag9 = true;
                                    }
                                    if (flag9)
                                    {
                                        num65 = 60;
                                    }
                                    else
                                    {
                                        num65 = 8;
                                    }
                                }
                                if (this.ai[2] > 0f)
                                {
                                    //this.TargetClosest(true);
                                    if (this.ai[1] == (float) (num65/2))
                                    {
                                        if (this.type == 216)
                                        {
                                            this.localAI[2] += 1f;
                                        }
                                        float num66 = 11f;
                                        if (this.type == 111)
                                        {
                                            num66 = 9f;
                                        }
                                        if (this.type == 206)
                                        {
                                            num66 = 7f;
                                        }
                                        if (this.type == 290)
                                        {
                                            num66 = 9f;
                                        }
                                        if (this.type == 293)
                                        {
                                            num66 = 4f;
                                        }
                                        if (this.type == 214)
                                        {
                                            num66 = 14f;
                                        }
                                        if (this.type == 215)
                                        {
                                            num66 = 16f;
                                        }
                                        Vector2 vector7 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                        if (this.type == 206)
                                        {
                                            vector7.Y -= 10f;
                                        }
                                        if (this.type == 290)
                                        {
                                            vector7.Y -= 10f;
                                        }
                                        float num67 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector7.X;
                                        float num68 = Math.Abs(num67)*0.1f;
                                        if (this.type == 291 || this.type == 292)
                                        {
                                            num68 = 0f;
                                        }
                                        if (this.type == 215)
                                        {
                                            num68 = Math.Abs(num67)*0.08f;
                                        }
                                        if (this.type == 214 || (this.type == 216 && !flag9))
                                        {
                                            num68 = 0f;
                                        }
                                        float num69 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector7.Y - num68;
                                        if (this.type == 291)
                                        {
                                            num67 += (float) Main.rand.Next(-40, 41)*0.2f;
                                            num69 += (float) Main.rand.Next(-40, 41)*0.2f;
                                        }
                                        else
                                        {
                                            if (this.type != 292)
                                            {
                                                num67 += (float) Main.rand.Next(-40, 41);
                                                num69 += (float) Main.rand.Next(-40, 41);
                                            }
                                        }
                                        float num70 = (float) Math.Sqrt((double) (num67*num67 + num69*num69));
                                        this.netUpdate = true;
                                        num70 = num66/num70;
                                        num67 *= num70;
                                        num69 *= num70;
                                        int num71 = 35;
                                        if (this.type == 111)
                                        {
                                            num71 = 11;
                                        }
                                        if (this.type == 206)
                                        {
                                            num71 = 37;
                                        }
                                        int num72 = 82;
                                        if (this.type == 111)
                                        {
                                            num72 = 81;
                                        }
                                        if (this.type == 206)
                                        {
                                            num72 = 177;
                                        }
                                        if (this.type == 291)
                                        {
                                            num72 = 302;
                                            num71 = 100;
                                        }
                                        if (this.type == 290)
                                        {
                                            num72 = 300;
                                            num71 = 60;
                                        }
                                        if (this.type == 293)
                                        {
                                            num72 = 303;
                                            num71 = 60;
                                        }
                                        if (this.type == 214)
                                        {
                                            num72 = 180;
                                            num71 = 25;
                                        }
                                        if (this.type == 215)
                                        {
                                            num72 = 82;
                                            num71 = 40;
                                        }
                                        if (this.type == 292)
                                        {
                                            num71 = 50;
                                            num72 = 180;
                                        }
                                        if (this.type == 216)
                                        {
                                            num72 = 180;
                                            num71 = 30;
                                            if (flag9)
                                            {
                                                num71 = 100;
                                                num72 = 240;
                                                this.localAI[2] = 0f;
                                            }
                                        }
                                        vector7.X += num67;
                                        vector7.Y += num69;
                                        if (Main.netMode != 1)
                                        {
                                            if (this.type == 292)
                                            {
                                                for (int num73 = 0; num73 < 4; num73++)
                                                {
                                                    num67 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector7.X;
                                                    num69 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector7.Y;
                                                    num70 = (float) Math.Sqrt((double) (num67*num67 + num69*num69));
                                                    num70 = 12f/num70;
                                                    num67 += (float) Main.rand.Next(-40, 41);
                                                    num69 += (float) Main.rand.Next(-40, 41);
                                                    num67 *= num70;
                                                    num69 *= num70;
                                                    Projectile.NewProjectile(vector7.X, vector7.Y, num67, num69, num72, num71, 0f, Main.myPlayer, 0f, 0f);
                                                }
                                            }
                                            else
                                            {
                                                Projectile.NewProjectile(vector7.X, vector7.Y, num67, num69, num72, num71, 0f, Main.myPlayer, 0f, 0f);
                                            }
                                        }
                                        if (Math.Abs(num69) > Math.Abs(num67)*2f)
                                        {
                                            if (num69 > 0f)
                                            {
                                                this.ai[2] = 1f;
                                            }
                                            else
                                            {
                                                this.ai[2] = 5f;
                                            }
                                        }
                                        else
                                        {
                                            if (Math.Abs(num67) > Math.Abs(num69)*2f)
                                            {
                                                this.ai[2] = 3f;
                                            }
                                            else
                                            {
                                                if (num69 > 0f)
                                                {
                                                    this.ai[2] = 2f;
                                                }
                                                else
                                                {
                                                    this.ai[2] = 4f;
                                                }
                                            }
                                        }
                                    }
                                    if (this.velocity.Y != 0f || this.ai[1] <= 0f)
                                    {
                                        this.ai[2] = 0f;
                                        this.ai[1] = 0f;
                                    }
                                    else
                                    {
                                        this.velocity.X = this.velocity.X*0.9f;
                                        this.spriteDirection = this.direction;
                                    }
                                }
                                if (this.ai[2] <= 0f && this.velocity.Y == 0f && this.ai[1] <= 0f && !Main.player[this.target].dead && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                {
                                    float num74 = 10f;
                                    Vector2 vector8 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                    float num75 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector8.X;
                                    float num76 = Math.Abs(num75)*0.1f;
                                    float num77 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector8.Y - num76;
                                    num75 += (float) Main.rand.Next(-40, 41);
                                    num77 += (float) Main.rand.Next(-40, 41);
                                    float num78 = (float) Math.Sqrt((double) (num75*num75 + num77*num77));
                                    float num79 = 700f;
                                    if (this.type == 214)
                                    {
                                        num79 = 550f;
                                    }
                                    if (this.type == 215)
                                    {
                                        num79 = 800f;
                                    }
                                    if (num78 < num79)
                                    {
                                        this.netUpdate = true;
                                        this.velocity.X = this.velocity.X*0.5f;
                                        num78 = num74/num78;
                                        num75 *= num78;
                                        num77 *= num78;
                                        this.ai[2] = 3f;
                                        this.ai[1] = (float) num65;
                                        if (Math.Abs(num77) > Math.Abs(num75)*2f)
                                        {
                                            if (num77 > 0f)
                                            {
                                                this.ai[2] = 1f;
                                            }
                                            else
                                            {
                                                this.ai[2] = 5f;
                                            }
                                        }
                                        else
                                        {
                                            if (Math.Abs(num75) > Math.Abs(num77)*2f)
                                            {
                                                this.ai[2] = 3f;
                                            }
                                            else
                                            {
                                                if (num77 > 0f)
                                                {
                                                    this.ai[2] = 2f;
                                                }
                                                else
                                                {
                                                    this.ai[2] = 4f;
                                                }
                                            }
                                        }
                                    }
                                }
                                if (this.ai[2] <= 0f)
                                {
                                    float num80 = 1f;
                                    float num81 = 0.07f;
                                    if (this.type == 214)
                                    {
                                        num80 = 2f;
                                        num81 = 0.09f;
                                    }
                                    else
                                    {
                                        if (this.type == 215)
                                        {
                                            num80 = 1.5f;
                                            num81 = 0.08f;
                                        }
                                    }
                                    if (this.velocity.X < -num80 || this.velocity.X > num80)
                                    {
                                        if (this.velocity.Y == 0f)
                                        {
                                            this.velocity *= 0.8f;
                                        }
                                    }
                                    else
                                    {
                                        if (this.velocity.X < num80 && this.direction == 1)
                                        {
                                            this.velocity.X = this.velocity.X + num81;
                                            if (this.velocity.X > num80)
                                            {
                                                this.velocity.X = num80;
                                            }
                                        }
                                        else
                                        {
                                            if (this.velocity.X > -1f && this.direction == -1)
                                            {
                                                this.velocity.X = this.velocity.X - num81;
                                                if (this.velocity.X < -num80)
                                                {
                                                    this.velocity.X = -num80;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        if (this.type == 109 && Main.netMode != 1 && !Main.player[this.target].dead)
                        {
                            if (this.justHit)
                            {
                                this.ai[2] = 0f;
                            }
                            this.ai[2] += 1f;
                            if (this.ai[2] > 450f)
                            {
                                Vector2 vector9 = new Vector2(this.position.X + (float) this.width*0.5f - (float) (this.direction*24), this.position.Y + 4f);
                                int num82 = 3*this.direction;
                                int num83 = -5;
                                int num84 = Projectile.NewProjectile(vector9.X, vector9.Y, (float) num82, (float) num83, 75, 0, 0f, Main.myPlayer, 0f, 0f);
                                Main.projectile[num84].timeLeft = 300;
                                this.ai[2] = 0f;
                            }
                        }
                        bool flag10 = false;
                        if (this.velocity.Y == 0f)
                        {
                            int num85 = (int) (this.position.Y + (float) this.height + 7f)/16;
                            int num86 = (int) this.position.X/16;
                            int num87 = (int) (this.position.X + (float) this.width)/16;
                            for (int num88 = num86; num88 <= num87; num88++)
                            {
                                if (Main.tile[num88, num85] == null)
                                {
                                    return;
                                }
                                if (Main.tile[num88, num85].nactive() && Main.tileSolid[(int) Main.tile[num88, num85].type])
                                {
                                    flag10 = true;
                                    break;
                                }
                            }
                        }
                        if (this.velocity.Y >= 0f)
                        {
                            int num89 = 0;
                            if (this.velocity.X < 0f)
                            {
                                num89 = -1;
                            }
                            if (this.velocity.X > 0f)
                            {
                                num89 = 1;
                            }
                            Vector2 vector10 = this.position;
                            vector10.X += this.velocity.X;
                            int num90 = (int) ((vector10.X + (float) (this.width/2) + (float) ((this.width/2 + 1)*num89))/16f);
                            int num91 = (int) ((vector10.Y + (float) this.height - 1f)/16f);
                            if (Main.tile[num90, num91] == null)
                            {
                                Main.tile[num90, num91] = new Tile();
                            }
                            if (Main.tile[num90, num91 - 1] == null)
                            {
                                Main.tile[num90, num91 - 1] = new Tile();
                            }
                            if (Main.tile[num90, num91 - 2] == null)
                            {
                                Main.tile[num90, num91 - 2] = new Tile();
                            }
                            if (Main.tile[num90, num91 - 3] == null)
                            {
                                Main.tile[num90, num91 - 3] = new Tile();
                            }
                            if (Main.tile[num90, num91 + 1] == null)
                            {
                                Main.tile[num90, num91 + 1] = new Tile();
                            }
                            if (Main.tile[num90 - num89, num91 - 3] == null)
                            {
                                Main.tile[num90 - num89, num91 - 3] = new Tile();
                            }
                            if ((float) (num90*16) < vector10.X + (float) this.width && (float) (num90*16 + 16) > vector10.X && ((Main.tile[num90, num91].nactive() && Main.tile[num90, num91].slope() == 0 && Main.tile[num90, num91 - 1].slope() == 0 && Main.tileSolid[(int) Main.tile[num90, num91].type] && !Main.tileSolidTop[(int) Main.tile[num90, num91].type]) || (Main.tile[num90, num91 - 1].halfBrick() && Main.tile[num90, num91 - 1].nactive())) && (!Main.tile[num90, num91 - 1].nactive() || !Main.tileSolid[(int) Main.tile[num90, num91 - 1].type] || Main.tileSolidTop[(int) Main.tile[num90, num91 - 1].type] || (Main.tile[num90, num91 - 1].halfBrick() && (!Main.tile[num90, num91 - 4].nactive() || !Main.tileSolid[(int) Main.tile[num90, num91 - 4].type] || Main.tileSolidTop[(int) Main.tile[num90, num91 - 4].type]))) && (!Main.tile[num90, num91 - 2].nactive() || !Main.tileSolid[(int) Main.tile[num90, num91 - 2].type] || Main.tileSolidTop[(int) Main.tile[num90, num91 - 2].type]) && (!Main.tile[num90, num91 - 3].nactive() || !Main.tileSolid[(int) Main.tile[num90, num91 - 3].type] || Main.tileSolidTop[(int) Main.tile[num90, num91 - 3].type]) && (!Main.tile[num90 - num89, num91 - 3].nactive() || !Main.tileSolid[(int) Main.tile[num90 - num89, num91 - 3].type]))
                            {
                                float num92 = (float) (num91*16);
                                if (Main.tile[num90, num91].halfBrick())
                                {
                                    num92 += 8f;
                                }
                                if (Main.tile[num90, num91 - 1].halfBrick())
                                {
                                    num92 -= 8f;
                                }
                                if (num92 < vector10.Y + (float) this.height)
                                {
                                    float num93 = vector10.Y + (float) this.height - num92;
                                    float num94 = 16.1f;
                                    if (this.type == 163 || this.type == 164 || this.type == 236 || this.type == 239)
                                    {
                                        num94 += 8f;
                                    }
                                    if (num93 <= num94)
                                    {
                                        this.gfxOffY += this.position.Y + (float) this.height - num92;
                                        this.position.Y = num92 - (float) this.height;
                                        if (num93 < 9f)
                                        {
                                            this.stepSpeed = 1f;
                                        }
                                        else
                                        {
                                            this.stepSpeed = 2f;
                                        }
                                    }
                                }
                            }
                        }
                        if (flag10)
                        {
                            int num95 = (int) ((this.position.X + (float) (this.width/2) + (float) (15*this.direction))/16f);
                            int num96 = (int) ((this.position.Y + (float) this.height - 15f)/16f);
                            if (this.type == 109 || this.type == 163 || this.type == 164 || this.type == 199 || this.type == 236 || this.type == 239 || this.type == 257 || this.type == 258 || this.type == 290)
                            {
                                num95 = (int) ((this.position.X + (float) (this.width/2) + (float) ((this.width/2 + 16)*this.direction))/16f);
                            }
                            if (Main.tile[num95, num96] == null)
                            {
                                Main.tile[num95, num96] = new Tile();
                            }
                            if (Main.tile[num95, num96 - 1] == null)
                            {
                                Main.tile[num95, num96 - 1] = new Tile();
                            }
                            if (Main.tile[num95, num96 - 2] == null)
                            {
                                Main.tile[num95, num96 - 2] = new Tile();
                            }
                            if (Main.tile[num95, num96 - 3] == null)
                            {
                                Main.tile[num95, num96 - 3] = new Tile();
                            }
                            if (Main.tile[num95, num96 + 1] == null)
                            {
                                Main.tile[num95, num96 + 1] = new Tile();
                            }
                            if (Main.tile[num95 + this.direction, num96 - 1] == null)
                            {
                                Main.tile[num95 + this.direction, num96 - 1] = new Tile();
                            }
                            if (Main.tile[num95 + this.direction, num96 + 1] == null)
                            {
                                Main.tile[num95 + this.direction, num96 + 1] = new Tile();
                            }
                            if (Main.tile[num95 - this.direction, num96 + 1] == null)
                            {
                                Main.tile[num95 - this.direction, num96 + 1] = new Tile();
                            }
                            Main.tile[num95, num96 + 1].halfBrick();
                            if (Main.tile[num95, num96 - 1].nactive() && Main.tile[num95, num96 - 1].type == 10 && flag4)
                            {
                                this.ai[2] += 1f;
                                this.ai[3] = 0f;
                                if (this.ai[2] >= 60f)
                                {
                                    if (!Main.bloodMoon && (this.type == 3 || this.type == 132 || this.type == 161 || this.type == 186 || this.type == 187 || this.type == 188 || this.type == 189 || this.type == 200 || this.type == 223))
                                    {
                                        this.ai[1] = 0f;
                                    }
                                    this.velocity.X = 0.5f*(float) (-(float) this.direction);
                                    this.ai[1] += 5f;
                                    if (this.type == 27)
                                    {
                                        this.ai[1] += 1f;
                                    }
                                    if (this.type == 31 || this.type == 294 || this.type == 295 || this.type == 296)
                                    {
                                        this.ai[1] += 6f;
                                    }
                                    this.ai[2] = 0f;
                                    bool flag11 = false;
                                    if (this.ai[1] >= 10f)
                                    {
                                        flag11 = true;
                                        this.ai[1] = 10f;
                                    }
                                    WorldGen.KillTile(num95, num96 - 1, true, false, false);
                                    if ((Main.netMode != 1 || !flag11) && flag11 && Main.netMode != 1)
                                    {
                                        if (this.type == 26)
                                        {
                                            WorldGen.KillTile(num95, num96 - 1, false, false, false);
                                            if (Main.netMode == 2)
                                            {
                                                NetMessage.SendData(17, -1, -1, "", 0, (float) num95, (float) (num96 - 1), 0f, 0);
                                            }
                                        }
                                        else
                                        {
                                            bool flag12 = WorldGen.OpenDoor(num95, num96 - 1, this.direction);
                                            if (!flag12)
                                            {
                                                this.ai[3] = (float) num18;
                                                this.netUpdate = true;
                                            }
                                            if (Main.netMode == 2 && flag12)
                                            {
                                                NetMessage.SendData(19, -1, -1, "", 0, (float) num95, (float) (num96 - 1), (float) this.direction, 0);
                                            }
                                        }
                                    }
                                }
                            }
                            else
                            {
                                if ((this.velocity.X < 0f && this.spriteDirection == -1) || (this.velocity.X > 0f && this.spriteDirection == 1))
                                {
                                    if (Main.tile[num95, num96 - 2].nactive() && Main.tileSolid[(int) Main.tile[num95, num96 - 2].type])
                                    {
                                        if (Main.tile[num95, num96 - 3].nactive() && Main.tileSolid[(int) Main.tile[num95, num96 - 3].type] && (this.type == 276 || this.type == 277))
                                        {
                                            //this.velocity.Y = -30f;
                                            //this.netUpdate = true;
                                        }
                                        else
                                        {
                                            //this.velocity.Y = -7f;
                                            //this.netUpdate = true;
                                        }
                                    }
                                    else
                                    {
                                        if (Main.tile[num95, num96 - 1].nactive() && Main.tileSolid[(int) Main.tile[num95, num96 - 1].type])
                                        {
                                            this.velocity.Y = -6f;
                                            this.netUpdate = true;
                                        }
                                        else
                                        {
                                            if (this.position.Y + (float) this.height - (float) (num96*16) > 20f && Main.tile[num95, num96].nactive() && Main.tile[num95, num96].slope() == 0 && Main.tileSolid[(int) Main.tile[num95, num96].type])
                                            {
                                                this.velocity.Y = -5f;
                                                this.netUpdate = true;
                                            }
                                            else
                                            {
                                                if (this.directionY < 0 && this.type != 67 && (!Main.tile[num95, num96 + 1].nactive() || !Main.tileSolid[(int) Main.tile[num95, num96 + 1].type]) && (!Main.tile[num95 + this.direction, num96 + 1].nactive() || !Main.tileSolid[(int) Main.tile[num95 + this.direction, num96 + 1].type]))
                                                {
                                                    //this.velocity.Y = -8f;
                                                    //this.velocity.X = this.velocity.X * 1.5f;
                                                    //this.netUpdate = true;
                                                }
                                                else
                                                {
                                                    if (flag4)
                                                    {
                                                        this.ai[1] = 0f;
                                                        this.ai[2] = 0f;
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    if (this.velocity.Y == 0f && flag2 && this.ai[3] == 1f && (this.type == 276 || this.type == 277))
                                    {
                                        //this.velocity.Y = -15f; //-5f
                                    }
                                }
                                if ((this.type == 31 || this.type == 294 || this.type == 295 || this.type == 296 || this.type == 47 || this.type == 77 || this.type == 104 || this.type == 168 || this.type == 196) && this.velocity.Y == 0f && Math.Abs(this.position.X + (float) (this.width/2) - (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))) < 100f && Math.Abs(this.position.Y + (float) (this.height/2) - (Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2))) < 50f && ((this.direction > 0 && this.velocity.X >= 1f) || (this.direction < 0 && this.velocity.X <= -1f)))
                                {
                                    this.velocity.X = this.velocity.X*2f;
                                    if (this.velocity.X > 3f)
                                    {
                                        this.velocity.X = 3f;
                                    }
                                    if (this.velocity.X < -3f)
                                    {
                                        this.velocity.X = -3f;
                                    }
                                    this.velocity.Y = -4f;
                                    this.netUpdate = true;
                                }
                                if (this.type == 120 && this.velocity.Y < 0f)
                                {
                                    this.velocity.Y = this.velocity.Y*1.1f;
                                }
                                if (this.type == 287 && this.velocity.Y == 0f && Math.Abs(this.position.X + (float) (this.width/2) - (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))) < 150f && Math.Abs(this.position.Y + (float) (this.height/2) - (Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2))) < 50f && ((this.direction > 0 && this.velocity.X >= 1f) || (this.direction < 0 && this.velocity.X <= -1f)))
                                {
                                    this.velocity.X = (float) (8*this.direction);
                                    this.velocity.Y = -4f;
                                    this.netUpdate = true;
                                }
                                if (this.type == 287 && this.velocity.Y < 0f)
                                {
                                    this.velocity.X = this.velocity.X*1.2f;
                                    this.velocity.Y = this.velocity.Y*1.1f;
                                }
                            }
                        }
                        else
                        {
                            if (flag4)
                            {
                                this.ai[1] = 0f;
                                this.ai[2] = 0f;
                            }
                        }
                        if (Main.netMode != 1 && this.type == 120 && this.ai[3] >= (float) num18)
                        {
                            int num97 = (int) Main.player[this.target].position.X/16;
                            int num98 = (int) Main.player[this.target].position.Y/16;
                            int num99 = (int) this.position.X/16;
                            int num100 = (int) this.position.Y/16;
                            int num101 = 20;
                            int num102 = 0;
                            bool flag13 = false;
                            if (Math.Abs(this.position.X - Main.player[this.target].position.X) + Math.Abs(this.position.Y - Main.player[this.target].position.Y) > 2000f)
                            {
                                num102 = 100;
                                flag13 = true;
                            }
                            while (!flag13)
                            {
                                if (num102 >= 100)
                                {
                                    return;
                                }
                                num102++;
                                int num103 = Main.rand.Next(num97 - num101, num97 + num101);
                                int num104 = Main.rand.Next(num98 - num101, num98 + num101);
                                for (int num105 = num104; num105 < num98 + num101; num105++)
                                {
                                    if ((num105 < num98 - 4 || num105 > num98 + 4 || num103 < num97 - 4 || num103 > num97 + 4) && (num105 < num100 - 1 || num105 > num100 + 1 || num103 < num99 - 1 || num103 > num99 + 1) && Main.tile[num103, num105].nactive())
                                    {
                                        bool flag14 = true;
                                        if (this.type == 32 && Main.tile[num103, num105 - 1].wall == 0)
                                        {
                                            flag14 = false;
                                        }
                                        else
                                        {
                                            if (Main.tile[num103, num105 - 1].lava())
                                            {
                                                flag14 = false;
                                            }
                                        }
                                        if (flag14 && Main.tileSolid[(int) Main.tile[num103, num105].type] && !Collision.SolidTiles(num103 - 1, num103 + 1, num105 - 4, num105 - 1))
                                        {
                                            this.position.X = (float) (num103*16 - this.width/2);
                                            this.position.Y = (float) (num105*16 - this.height);
                                            this.netUpdate = true;
                                            this.ai[3] = -120f;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                        if (this.aiStyle == 4)
                        {
                            if (this.target < 0 || this.target == 255 || Main.player[this.target].dead || !Main.player[this.target].active)
                            {
                                this.TargetClosest(true);
                            }
                            bool dead = Main.player[this.target].dead;
                            float num106 = this.position.X + (float) (this.width/2) - Main.player[this.target].position.X - (float) (Main.player[this.target].width/2);
                            float num107 = this.position.Y + (float) this.height - 59f - Main.player[this.target].position.Y - (float) (Main.player[this.target].height/2);
                            float num108 = (float) Math.Atan2((double) num107, (double) num106) + 1.57f;
                            if (num108 < 0f)
                            {
                                num108 += 6.283f;
                            }
                            else
                            {
                                if ((double) num108 > 6.283)
                                {
                                    num108 -= 6.283f;
                                }
                            }
                            float num109 = 0f;
                            if (this.ai[0] == 0f && this.ai[1] == 0f)
                            {
                                num109 = 0.02f;
                            }
                            if (this.ai[0] == 0f && this.ai[1] == 2f && this.ai[2] > 40f)
                            {
                                num109 = 0.05f;
                            }
                            if (this.ai[0] == 3f && this.ai[1] == 0f)
                            {
                                num109 = 0.05f;
                            }
                            if (this.ai[0] == 3f && this.ai[1] == 2f && this.ai[2] > 40f)
                            {
                                num109 = 0.08f;
                            }
                            if (this.rotation < num108)
                            {
                                if ((double) (num108 - this.rotation) > 3.1415)
                                {
                                    this.rotation -= num109;
                                }
                                else
                                {
                                    this.rotation += num109;
                                }
                            }
                            else
                            {
                                if (this.rotation > num108)
                                {
                                    if ((double) (this.rotation - num108) > 3.1415)
                                    {
                                        this.rotation += num109;
                                    }
                                    else
                                    {
                                        this.rotation -= num109;
                                    }
                                }
                            }
                            if (this.rotation > num108 - num109 && this.rotation < num108 + num109)
                            {
                                this.rotation = num108;
                            }
                            if (this.rotation < 0f)
                            {
                                this.rotation += 6.283f;
                            }
                            else
                            {
                                if ((double) this.rotation > 6.283)
                                {
                                    this.rotation -= 6.283f;
                                }
                            }
                            if (this.rotation > num108 - num109 && this.rotation < num108 + num109)
                            {
                                this.rotation = num108;
                            }
                            if (Main.rand.Next(5) == 0)
                            {
                                int num110 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + (float) this.height*0.25f), this.width, (int) ((float) this.height*0.5f), 5, this.velocity.X, 2f, 0, default(Color), 1f);
                                Dust expr_7973_cp_0 = Main.dust[num110];
                                expr_7973_cp_0.velocity.X = expr_7973_cp_0.velocity.X*0.5f;
                                Dust expr_7991_cp_0 = Main.dust[num110];
                                expr_7991_cp_0.velocity.Y = expr_7991_cp_0.velocity.Y*0.1f;
                            }
                            else
                            {
                                if (this.ai[0] == 0f)
                                {
                                    if (this.ai[1] == 0f)
                                    {
                                        float num111 = 5f;
                                        float num112 = 0.04f;
                                        Vector2 vector11 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                        float num113 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector11.X;
                                        float num114 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - 200f - vector11.Y;
                                        float num115 = (float) Math.Sqrt((double) (num113*num113 + num114*num114));
                                        float num116 = num115;
                                        num115 = num111/num115;
                                        num113 *= num115;
                                        num114 *= num115;
                                        if (this.velocity.X < num113)
                                        {
                                            this.velocity.X = this.velocity.X + num112;
                                            if (this.velocity.X < 0f && num113 > 0f)
                                            {
                                                this.velocity.X = this.velocity.X + num112;
                                            }
                                        }
                                        else
                                        {
                                            if (this.velocity.X > num113)
                                            {
                                                this.velocity.X = this.velocity.X - num112;
                                                if (this.velocity.X > 0f && num113 < 0f)
                                                {
                                                    this.velocity.X = this.velocity.X - num112;
                                                }
                                            }
                                        }
                                        if (this.velocity.Y < num114)
                                        {
                                            this.velocity.Y = this.velocity.Y + num112;
                                            if (this.velocity.Y < 0f && num114 > 0f)
                                            {
                                                this.velocity.Y = this.velocity.Y + num112;
                                            }
                                        }
                                        else
                                        {
                                            if (this.velocity.Y > num114)
                                            {
                                                this.velocity.Y = this.velocity.Y - num112;
                                                if (this.velocity.Y > 0f && num114 < 0f)
                                                {
                                                    this.velocity.Y = this.velocity.Y - num112;
                                                }
                                            }
                                        }
                                        this.ai[2] += 1f;
                                        if (this.ai[2] >= 600f)
                                        {
                                            this.ai[1] = 1f;
                                            this.ai[2] = 0f;
                                            this.ai[3] = 0f;
                                            this.target = 255;
                                            this.netUpdate = true;
                                        }
                                        else
                                        {
                                            if (this.position.Y + (float) this.height < Main.player[this.target].position.Y && num116 < 500f)
                                            {
                                                if (!Main.player[this.target].dead)
                                                {
                                                    this.ai[3] += 1f;
                                                }
                                                if (this.ai[3] >= 110f)
                                                {
                                                    this.ai[3] = 0f;
                                                    this.rotation = num108;
                                                    float num117 = 5f;
                                                    float num118 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector11.X;
                                                    float num119 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector11.Y;
                                                    float num120 = (float) Math.Sqrt((double) (num118*num118 + num119*num119));
                                                    num120 = num117/num120;
                                                    Vector2 vector12 = vector11;
                                                    Vector2 vector13;
                                                    vector13.X = num118*num120;
                                                    vector13.Y = num119*num120;
                                                    vector12.X += vector13.X*10f;
                                                    vector12.Y += vector13.Y*10f;
                                                    if (Main.netMode != 1)
                                                    {
                                                        int num121 = NPC.NewNPC((int) vector12.X, (int) vector12.Y, 5, 0);
                                                        Main.npc[num121].velocity.X = vector13.X;
                                                        Main.npc[num121].velocity.Y = vector13.Y;
                                                        if (Main.netMode == 2 && num121 < 200)
                                                        {
                                                            NetMessage.SendData(23, -1, -1, "", num121, 0f, 0f, 0f, 0);
                                                        }
                                                    }
                                                    Main.PlaySound(3, (int) vector12.X, (int) vector12.Y, 1);
                                                    for (int num122 = 0; num122 < 10; num122++)
                                                    {
                                                        Dust.NewDust(vector12, 20, 20, 5, vector13.X*0.4f, vector13.Y*0.4f, 0, default(Color), 1f);
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    else
                                    {
                                        if (this.ai[1] == 1f)
                                        {
                                            this.rotation = num108;
                                            float num123 = 6f;
                                            Vector2 vector14 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                            float num124 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector14.X;
                                            float num125 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector14.Y;
                                            float num126 = (float) Math.Sqrt((double) (num124*num124 + num125*num125));
                                            num126 = num123/num126;
                                            this.velocity.X = num124*num126;
                                            this.velocity.Y = num125*num126;
                                            this.ai[1] = 2f;
                                        }
                                        else
                                        {
                                            if (this.ai[1] == 2f)
                                            {
                                                this.ai[2] += 1f;
                                                if (this.ai[2] >= 40f)
                                                {
                                                    this.velocity.X = this.velocity.X*0.98f;
                                                    this.velocity.Y = this.velocity.Y*0.98f;
                                                    if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                                    {
                                                        this.velocity.X = 0f;
                                                    }
                                                    if ((double) this.velocity.Y > -0.1 && (double) this.velocity.Y < 0.1)
                                                    {
                                                        this.velocity.Y = 0f;
                                                    }
                                                }
                                                else
                                                {
                                                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) - 1.57f;
                                                }
                                                if (this.ai[2] >= 150f)
                                                {
                                                    this.ai[3] += 1f;
                                                    this.ai[2] = 0f;
                                                    this.target = 255;
                                                    this.rotation = num108;
                                                    if (this.ai[3] >= 3f)
                                                    {
                                                        this.ai[1] = 0f;
                                                        this.ai[3] = 0f;
                                                    }
                                                    else
                                                    {
                                                        this.ai[1] = 1f;
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    if ((double) this.life < (double) this.lifeMax*0.5)
                                    {
                                        this.ai[0] = 1f;
                                        this.ai[1] = 0f;
                                        this.ai[2] = 0f;
                                        this.ai[3] = 0f;
                                        this.netUpdate = true;
                                        return;
                                    }
                                }
                                else
                                {
                                    if (this.ai[0] == 1f || this.ai[0] == 2f)
                                    {
                                        if (this.ai[0] == 1f)
                                        {
                                            this.ai[2] += 0.005f;
                                            if ((double) this.ai[2] > 0.5)
                                            {
                                                this.ai[2] = 0.5f;
                                            }
                                        }
                                        else
                                        {
                                            this.ai[2] -= 0.005f;
                                            if (this.ai[2] < 0f)
                                            {
                                                this.ai[2] = 0f;
                                            }
                                        }
                                        this.rotation += this.ai[2];
                                        this.ai[1] += 1f;
                                        if (this.ai[1] == 100f)
                                        {
                                            this.ai[0] += 1f;
                                            this.ai[1] = 0f;
                                            if (this.ai[0] == 3f)
                                            {
                                                this.ai[2] = 0f;
                                            }
                                            else
                                            {
                                                Main.PlaySound(3, (int) this.position.X, (int) this.position.Y, 1);
                                                for (int num127 = 0; num127 < 2; num127++)
                                                {
                                                    Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 8, 1f);
                                                    Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 7, 1f);
                                                    Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 6, 1f);
                                                }
                                                for (int num128 = 0; num128 < 20; num128++)
                                                {
                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f, 0, default(Color), 1f);
                                                }
                                                Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                            }
                                        }
                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f, 0, default(Color), 1f);
                                        this.velocity.X = this.velocity.X*0.98f;
                                        this.velocity.Y = this.velocity.Y*0.98f;
                                        if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                        {
                                            this.velocity.X = 0f;
                                        }
                                        if ((double) this.velocity.Y > -0.1 && (double) this.velocity.Y < 0.1)
                                        {
                                            this.velocity.Y = 0f;
                                            return;
                                        }
                                    }
                                    else
                                    {
                                        this.damage = 23;
                                        this.defense = 0;
                                        if (this.ai[1] == 0f)
                                        {
                                            float num129 = 6f;
                                            float num130 = 0.07f;
                                            Vector2 vector15 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                            float num131 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector15.X;
                                            float num132 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - 120f - vector15.Y;
                                            float num133 = (float) Math.Sqrt((double) (num131*num131 + num132*num132));
                                            num133 = num129/num133;
                                            num131 *= num133;
                                            num132 *= num133;
                                            if (this.velocity.X < num131)
                                            {
                                                this.velocity.X = this.velocity.X + num130;
                                                if (this.velocity.X < 0f && num131 > 0f)
                                                {
                                                    this.velocity.X = this.velocity.X + num130;
                                                }
                                            }
                                            else
                                            {
                                                if (this.velocity.X > num131)
                                                {
                                                    this.velocity.X = this.velocity.X - num130;
                                                    if (this.velocity.X > 0f && num131 < 0f)
                                                    {
                                                        this.velocity.X = this.velocity.X - num130;
                                                    }
                                                }
                                            }
                                            if (this.velocity.Y < num132)
                                            {
                                                this.velocity.Y = this.velocity.Y + num130;
                                                if (this.velocity.Y < 0f && num132 > 0f)
                                                {
                                                    this.velocity.Y = this.velocity.Y + num130;
                                                }
                                            }
                                            else
                                            {
                                                if (this.velocity.Y > num132)
                                                {
                                                    this.velocity.Y = this.velocity.Y - num130;
                                                    if (this.velocity.Y > 0f && num132 < 0f)
                                                    {
                                                        this.velocity.Y = this.velocity.Y - num130;
                                                    }
                                                }
                                            }
                                            this.ai[2] += 1f;
                                            if (this.ai[2] >= 200f)
                                            {
                                                this.ai[1] = 1f;
                                                this.ai[2] = 0f;
                                                this.ai[3] = 0f;
                                                this.target = 255;
                                                this.netUpdate = true;
                                                return;
                                            }
                                        }
                                        else
                                        {
                                            if (this.ai[1] == 1f)
                                            {
                                                Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                this.rotation = num108;
                                                float num134 = 6.8f;
                                                Vector2 vector16 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                float num135 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector16.X;
                                                float num136 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector16.Y;
                                                float num137 = (float) Math.Sqrt((double) (num135*num135 + num136*num136));
                                                num137 = num134/num137;
                                                this.velocity.X = num135*num137;
                                                this.velocity.Y = num136*num137;
                                                this.ai[1] = 2f;
                                                return;
                                            }
                                            if (this.ai[1] == 2f)
                                            {
                                                this.ai[2] += 1f;
                                                if (this.ai[2] >= 40f)
                                                {
                                                    this.velocity.X = this.velocity.X*0.97f;
                                                    this.velocity.Y = this.velocity.Y*0.97f;
                                                    if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                                    {
                                                        this.velocity.X = 0f;
                                                    }
                                                    if ((double) this.velocity.Y > -0.1 && (double) this.velocity.Y < 0.1)
                                                    {
                                                        this.velocity.Y = 0f;
                                                    }
                                                }
                                                else
                                                {
                                                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) - 1.57f;
                                                }
                                                if (this.ai[2] >= 130f)
                                                {
                                                    this.ai[3] += 1f;
                                                    this.ai[2] = 0f;
                                                    this.target = 255;
                                                    this.rotation = num108;
                                                    if (this.ai[3] >= 3f)
                                                    {
                                                        this.ai[1] = 0f;
                                                        this.ai[3] = 0f;
                                                        return;
                                                    }
                                                    this.ai[1] = 1f;
                                                    return;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        else
                        {
                            if (this.aiStyle == 5)
                            {
                                if (this.target < 0 || this.target == 255) // || Main.player[this.target].dead)
                                {
                                    this.TargetClosest(true);
                                }
                                float num138 = 6f;
                                float num139 = 0.05f;
                                if (this.type == 6 || this.type == 173)
                                {
                                    num138 = 4f;
                                    num139 = 0.02f;
                                }
                                else
                                {
                                    if (this.type == 94)
                                    {
                                        num138 = 4.2f;
                                        num139 = 0.022f;
                                    }
                                    else
                                    {
                                        if (this.type == 252)
                                        {
                                            if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                            {
                                                num138 = 6f;
                                                num139 = 0.1f;
                                            }
                                            else
                                            {
                                                num139 = 0.01f;
                                                num138 = 2f;
                                            }
                                        }
                                        else
                                        {
                                            if (this.type == 42 || (this.type >= 231 && this.type <= 235))
                                            {
                                                num138 = 30.5f;
                                                num139 = 0.21f;
                                                if (this.type == 231)
                                                {
                                                    num138 = 3f;
                                                    num139 = 0.017f;
                                                }
                                                num138 *= 1f - this.scale;
                                                num139 *= 1f - this.scale;
                                            }
                                            else
                                            {
                                                if (this.type == 205)
                                                {
                                                    num138 = 3.25f;
                                                    num139 = 0.018f;
                                                }
                                                else
                                                {
                                                    if (this.type == 176)
                                                    {
                                                        num138 = 4f;
                                                        num139 = 0.017f;
                                                    }
                                                    else
                                                    {
                                                        if (this.type == 23)
                                                        {
                                                            num138 = 1f;
                                                            num139 = 0.03f;
                                                        }
                                                        else
                                                        {
                                                            if (this.type == 5)
                                                            {
                                                                num138 = 5f;
                                                                num139 = 0.03f;
                                                            }
                                                            else
                                                            {
                                                                if (this.type == 210 || this.type == 211)
                                                                {
                                                                    this.localAI[0] += 1f;
                                                                    float num140 = (this.localAI[0] - 60f)/60f;
                                                                    if (num140 > 1f)
                                                                    {
                                                                        num140 = 1f;
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.velocity.X > 6f)
                                                                        {
                                                                            this.velocity.X = 6f;
                                                                        }
                                                                        if (this.velocity.X < -6f)
                                                                        {
                                                                            this.velocity.X = -6f;
                                                                        }
                                                                        if (this.velocity.Y > 6f)
                                                                        {
                                                                            this.velocity.Y = 6f;
                                                                        }
                                                                        if (this.velocity.Y < -6f)
                                                                        {
                                                                            this.velocity.Y = -6f;
                                                                        }
                                                                    }
                                                                    num138 = 5f;
                                                                    num139 = 0.1f;
                                                                    num139 *= num140;
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                                Vector2 vector17 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                float num141 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2);
                                float num142 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2);
                                num141 = (float) ((int) (num141/8f)*8);
                                num142 = (float) ((int) (num142/8f)*8);
                                vector17.X = (float) ((int) (vector17.X/8f)*8);
                                vector17.Y = (float) ((int) (vector17.Y/8f)*8);
                                num141 -= vector17.X;
                                num142 -= vector17.Y;
                                float num143 = (float) Math.Sqrt((double) (num141*num141 + num142*num142));
                                float num144 = num143;
                                bool flag15 = false;
                                if (num143 > 600f)
                                {
                                    flag15 = true;
                                }
                                if (num143 == 0f)
                                {
                                    num141 = this.velocity.X;
                                    num142 = this.velocity.Y;
                                }
                                else
                                {
                                    num143 = num138/num143;
                                    num141 *= num143;
                                    num142 *= num143;
                                }
                                if (this.type == 261 || this.type == 6 || this.type == 42 || this.type == 94 || this.type == 139 || this.type == 140 || this.type == 173 || this.type == 176 || this.type == 205 || this.type == 210 || this.type == 211 || (this.type >= 231 && this.type <= 235))
                                {
                                    if (num144 > 100f || this.type == 261 || this.type == 42 || this.type == 94 || this.type == 176 || this.type == 210 || this.type == 211 || (this.type >= 231 && this.type <= 235))
                                    {
                                        this.ai[0] += 1f;
                                        if (this.ai[0] > 0f)
                                        {
                                            this.velocity.Y = this.velocity.Y + 0.023f;
                                        }
                                        else
                                        {
                                            this.velocity.Y = this.velocity.Y - 0.023f;
                                        }
                                        if (this.ai[0] < -100f || this.ai[0] > 100f)
                                        {
                                            this.velocity.X = this.velocity.X + 0.023f;
                                        }
                                        else
                                        {
                                            this.velocity.X = this.velocity.X - 0.023f;
                                        }
                                        if (this.ai[0] > 200f)
                                        {
                                            this.ai[0] = -200f;
                                        }
                                    }
                                    if (num144 < 150f && (this.type == 6 || this.type == 261 || this.type == 94 || this.type == 173))
                                    {
                                        this.velocity.X = this.velocity.X + num141*0.007f;
                                        this.velocity.Y = this.velocity.Y + num142*0.007f;
                                    }
                                }
                                if (Main.player[this.target].dead)
                                {
                                    num141 = (float) this.direction*num138/2f;
                                    num142 = -num138/2f;
                                }
                                if (this.velocity.X < num141)
                                {
                                    this.velocity.X = this.velocity.X + num139;
                                    if (this.type != 173 && this.type != 6 && this.type != 42 && (this.type < 231 || this.type > 235) && this.type != 94 && this.type != 139 && this.velocity.X < 0f && num141 > 0f)
                                    {
                                        this.velocity.X = this.velocity.X + num139;
                                    }
                                }
                                else
                                {
                                    if (this.velocity.X > num141)
                                    {
                                        this.velocity.X = this.velocity.X - num139;
                                        if (this.type != 173 && this.type != 6 && this.type != 42 && (this.type < 231 || this.type > 235) && this.type != 94 && this.type != 139 && this.velocity.X > 0f && num141 < 0f)
                                        {
                                            this.velocity.X = this.velocity.X - num139;
                                        }
                                    }
                                }
                                if (this.velocity.Y < num142)
                                {
                                    this.velocity.Y = this.velocity.Y + num139;
                                    if (this.type != 173 && this.type != 6 && this.type != 42 && (this.type < 231 || this.type > 235) && this.type != 94 && this.type != 139 && this.velocity.Y < 0f && num142 > 0f)
                                    {
                                        this.velocity.Y = this.velocity.Y + num139;
                                    }
                                }
                                else
                                {
                                    if (this.velocity.Y > num142)
                                    {
                                        this.velocity.Y = this.velocity.Y - num139;
                                        if (this.type != 173 && this.type != 6 && this.type != 42 && (this.type < 231 || this.type > 235) && this.type != 94 && this.type != 139 && this.velocity.Y > 0f && num142 < 0f)
                                        {
                                            this.velocity.Y = this.velocity.Y - num139;
                                        }
                                    }
                                }
                                if (this.type == 23)
                                {
                                    if (num141 > 0f)
                                    {
                                        this.spriteDirection = 1;
                                        this.rotation = (float) Math.Atan2((double) num142, (double) num141);
                                    }
                                    else
                                    {
                                        if (num141 < 0f)
                                        {
                                            this.spriteDirection = -1;
                                            this.rotation = (float) Math.Atan2((double) num142, (double) num141) + 3.14f;
                                        }
                                    }
                                }
                                else
                                {
                                    if (this.type == 139 || this.type == 140)
                                    {
                                        this.localAI[0] += 1f;
                                        if (this.justHit)
                                        {
                                            this.localAI[0] = 0f;
                                        }
                                        if (Main.netMode != 1 && this.localAI[0] >= 120f)
                                        {
                                            this.localAI[0] = 0f;
                                            if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                            {
                                                int num145 = 20 + (Main.bossLevel * 5);
                                                int num146 = 84;
                                                int laser = Projectile.NewProjectile(vector17.X, vector17.Y, num141, num142, num146, num145, 0f, Main.myPlayer, 0f, 0f);
                                                Main.projectile[laser].team = this.team;
                                            }
                                        }
                                        int num147 = (int) this.position.X + this.width/2;
                                        int num148 = (int) this.position.Y + this.height/2;
                                        num147 /= 16;
                                        num148 /= 16;
                                        if (!WorldGen.SolidTile(num147, num148))
                                        {
                                            Lighting.addLight((int) ((this.position.X + (float) (this.width/2))/16f), (int) ((this.position.Y + (float) (this.height/2))/16f), 0.3f, 0.1f, 0.05f);
                                        }
                                        if (num141 > 0f)
                                        {
                                            this.spriteDirection = 1;
                                            this.rotation = (float) Math.Atan2((double) num142, (double) num141);
                                        }
                                        if (num141 < 0f)
                                        {
                                            this.spriteDirection = -1;
                                            this.rotation = (float) Math.Atan2((double) num142, (double) num141) + 3.14f;
                                        }
                                    }
                                    else
                                    {
                                        if (this.type == 6 || this.type == 261 || this.type == 94 || this.type == 173)
                                        {
                                            this.rotation = (float) Math.Atan2((double) num142, (double) num141) - 1.57f;
                                        }
                                        else
                                        {
                                            if (this.type == 42 || this.type == 176 || this.type == 205 || (this.type >= 231 && this.type <= 235))
                                            {
                                                if (this.velocity.X > 0f)
                                                {
                                                    this.spriteDirection = 1;
                                                }
                                                if (this.velocity.X < 0f)
                                                {
                                                    this.spriteDirection = -1;
                                                }
                                                this.rotation = this.velocity.X*0.1f;
                                            }
                                            else
                                            {
                                                this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) - 1.57f;
                                            }
                                        }
                                    }
                                }
                                if (this.type == 6 || this.type == 261 || this.type == 23 || this.type == 42 || this.type == 94 || this.type == 139 || this.type == 140 || this.type == 173 || this.type == 176 || this.type == 205 || this.type == 210 || this.type == 211 || (this.type >= 231 && this.type <= 235))
                                {
                                    float num149 = 0.7f;
                                    if (this.type == 6 || this.type == 173)
                                    {
                                        num149 = 0.4f;
                                    }
                                    if (this.collideX)
                                    {
                                        this.netUpdate = true;
                                        this.velocity.X = this.oldVelocity.X*-num149;
                                        if (this.direction == -1 && this.velocity.X > 0f && this.velocity.X < 2f)
                                        {
                                            this.velocity.X = 2f;
                                        }
                                        if (this.direction == 1 && this.velocity.X < 0f && this.velocity.X > -2f)
                                        {
                                            this.velocity.X = -2f;
                                        }
                                    }
                                    if (this.collideY)
                                    {
                                        this.netUpdate = true;
                                        this.velocity.Y = this.oldVelocity.Y*-num149;
                                        if (this.velocity.Y > 0f && (double) this.velocity.Y < 1.5)
                                        {
                                            this.velocity.Y = 2f;
                                        }
                                        if (this.velocity.Y < 0f && (double) this.velocity.Y > -1.5)
                                        {
                                            this.velocity.Y = -2f;
                                        }
                                    }
                                    if (this.type == 23)
                                    {
                                        int num150 = Dust.NewDust(new Vector2(this.position.X - this.velocity.X, this.position.Y - this.velocity.Y), this.width, this.height, 6, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 2f);
                                        Main.dust[num150].noGravity = true;
                                        Dust expr_9A75_cp_0 = Main.dust[num150];
                                        expr_9A75_cp_0.velocity.X = expr_9A75_cp_0.velocity.X*0.3f;
                                        Dust expr_9A93_cp_0 = Main.dust[num150];
                                        expr_9A93_cp_0.velocity.Y = expr_9A93_cp_0.velocity.Y*0.3f;
                                    }
                                    else
                                    {
                                        if (this.type != 42 && this.type != 139 && this.type != 176 && this.type != 205 && this.type != 210 && this.type != 211 && this.type != 252 && (this.type < 231 || this.type > 235) && Main.rand.Next(20) == 0)
                                        {
                                            int num151 = 18;
                                            if (this.type == 173)
                                            {
                                                num151 = 5;
                                            }
                                            int num152 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + (float) this.height*0.25f), this.width, (int) ((float) this.height*0.5f), num151, this.velocity.X, 2f, 75, this.color, this.scale);
                                            Dust expr_9BC9_cp_0 = Main.dust[num152];
                                            expr_9BC9_cp_0.velocity.X = expr_9BC9_cp_0.velocity.X*0.5f;
                                            Dust expr_9BE7_cp_0 = Main.dust[num152];
                                            expr_9BE7_cp_0.velocity.Y = expr_9BE7_cp_0.velocity.Y*0.1f;
                                        }
                                    }
                                }
                                else
                                {
                                    if (this.type != 252 && Main.rand.Next(40) == 0)
                                    {
                                        int num153 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + (float) this.height*0.25f), this.width, (int) ((float) this.height*0.5f), 5, this.velocity.X, 2f, 0, default(Color), 1f);
                                        Dust expr_9C94_cp_0 = Main.dust[num153];
                                        expr_9C94_cp_0.velocity.X = expr_9C94_cp_0.velocity.X*0.5f;
                                        Dust expr_9CB2_cp_0 = Main.dust[num153];
                                        expr_9CB2_cp_0.velocity.Y = expr_9CB2_cp_0.velocity.Y*0.1f;
                                    }
                                }
                                if ((this.type == 6 || this.type == 94 || this.type == 261 || this.type == 173) && this.wet)
                                {
                                    if (this.velocity.Y > 0f)
                                    {
                                        this.velocity.Y = this.velocity.Y*0.95f;
                                    }
                                    this.velocity.Y = this.velocity.Y - 0.3f;
                                    if (this.velocity.Y < -2f)
                                    {
                                        this.velocity.Y = -2f;
                                    }
                                }
                                if (this.type == 205 && this.wet)
                                {
                                    if (this.velocity.Y > 0f)
                                    {
                                        this.velocity.Y = this.velocity.Y*0.95f;
                                    }
                                    this.velocity.Y = this.velocity.Y - 0.5f;
                                    if (this.velocity.Y < -4f)
                                    {
                                        this.velocity.Y = -4f;
                                    }
                                    this.TargetClosest(true);
                                }
                                if (this.type == 42 || this.type == 176 || (this.type >= 231 && this.type <= 235))
                                {
                                    if (this.wet)
                                    {
                                        if (this.velocity.Y > 0f)
                                        {
                                            this.velocity.Y = this.velocity.Y*0.95f;
                                        }
                                        this.velocity.Y = this.velocity.Y - 0.5f;
                                        if (this.velocity.Y < -4f)
                                        {
                                            this.velocity.Y = -4f;
                                        }
                                        this.TargetClosest(true);
                                    }
                                    if (this.ai[1] == 101f)
                                    {
                                        Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 17);
                                        this.ai[1] = 0f;
                                    }
                                    if (Main.netMode != 1)
                                    {
                                        this.ai[1] += (float) Main.rand.Next(5, 20)*0.1f*this.scale;
                                        if (this.type == 176)
                                        {
                                            this.ai[1] += (float) Main.rand.Next(5, 20)*0.1f*this.scale;
                                        }
                                        if (this.ai[1] >= 130f)
                                        {
                                            if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                            {
                                                float num154 = 8f;
                                                Vector2 vector18 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) (this.height/2));
                                                float num155 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector18.X + (float) Main.rand.Next(-20, 21);
                                                float num156 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector18.Y + (float) Main.rand.Next(-20, 21);
                                                if ((num155 < 0f && this.velocity.X < 0f) || (num155 > 0f && this.velocity.X > 0f))
                                                {
                                                    float num157 = (float) Math.Sqrt((double) (num155*num155 + num156*num156));
                                                    num157 = num154/num157;
                                                    num155 *= num157;
                                                    num156 *= num157;
                                                    int num158 = (int) (10f*this.scale);
                                                    if (this.type == 176)
                                                    {
                                                        num158 = (int) (30f*this.scale);
                                                    }
                                                    int num159 = 55;
                                                    int num160 = Projectile.NewProjectile(vector18.X, vector18.Y, num155, num156, num159, num158, 0f, Main.myPlayer, 0f, 0f);
                                                    Main.projectile[num160].timeLeft = 300;
                                                    this.ai[1] = 101f;
                                                    this.netUpdate = true;
                                                }
                                                else
                                                {
                                                    this.ai[1] = 0f;
                                                }
                                            }
                                            else
                                            {
                                                this.ai[1] = 0f;
                                            }
                                        }
                                    }
                                }
                                if ((this.type == 139 || this.type == 140) && flag15)
                                {
                                    if ((this.velocity.X > 0f && num141 > 0f) || (this.velocity.X < 0f && num141 < 0f))
                                    {
                                        if (Math.Abs(this.velocity.X) < 12f)
                                        {
                                            this.velocity.X = this.velocity.X*1.05f;
                                        }
                                    }
                                    else
                                    {
                                        this.velocity.X = this.velocity.X*0.9f;
                                    }
                                }
                                if (Main.netMode != 1 && this.type == 94 && !Main.player[this.target].dead)
                                {
                                    if (this.justHit)
                                    {
                                        this.localAI[0] = 0f;
                                    }
                                    this.localAI[0] += 1f;
                                    if (this.localAI[0] == 180f)
                                    {
                                        if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                        {
                                            NPC.NewNPC((int) (this.position.X + (float) (this.width/2) + this.velocity.X), (int) (this.position.Y + (float) (this.height/2) + this.velocity.Y), 112, 0);
                                        }
                                        this.localAI[0] = 0f;
                                    }
                                }
                                if ((Main.dayTime && this.type != 173 && this.type != 6 && this.type != 23 && this.type != 42 && this.type != 94 && this.type != 176 && this.type != 205 && this.type != 210 && this.type != 211 && this.type != 252 && (this.type < 231 || this.type > 235)) || Main.player[this.target].dead)
                                {
                                    //this.velocity.Y = this.velocity.Y - num139*2f;
                                    if (this.timeLeft > 10)
                                    {
                                        //this.timeLeft = 10;
                                    }
                                }
                                if (((this.velocity.X > 0f && this.oldVelocity.X < 0f) || (this.velocity.X < 0f && this.oldVelocity.X > 0f) || (this.velocity.Y > 0f && this.oldVelocity.Y < 0f) || (this.velocity.Y < 0f && this.oldVelocity.Y > 0f)) && !this.justHit)
                                {
                                    this.netUpdate = true;
                                    return;
                                }
                            }
                            else
                            {
                                if (this.aiStyle == 6)
                                {
                                    if (this.type == 117 && this.localAI[1] == 0f)
                                    {
                                        this.localAI[1] = 1f;
                                        Main.PlaySound(4, (int) this.position.X, (int) this.position.Y, 13);
                                        int num161 = 1;
                                        if (this.velocity.X < 0f)
                                        {
                                            num161 = -1;
                                        }
                                        for (int num162 = 0; num162 < 20; num162++)
                                        {
                                            Dust.NewDust(new Vector2(this.position.X - 20f, this.position.Y - 20f), this.width + 40, this.height + 40, 5, (float) (num161*8), -1f, 0, default(Color), 1f);
                                        }
                                    }
                                    if (this.type >= 13 && this.type <= 15)
                                    {
                                        this.realLife = -1;
                                    }
                                    else
                                    {
                                        if (this.ai[3] > 0f)
                                        {
                                            this.realLife = (int) this.ai[3];
                                        }
                                    }
                                    if (this.target < 0 || this.target == 255 || Main.player[this.target].dead)
                                    {
                                        this.TargetClosest(true);
                                    }
                                    if (Main.player[this.target].dead && this.timeLeft > 300)
                                    {
                                        this.timeLeft = 300;
                                    }
                                    if (Main.netMode != 1)
                                    {
                                        if (this.type == 87 && this.ai[0] == 0f)
                                        {
                                            this.ai[3] = (float) this.whoAmI;
                                            this.realLife = this.whoAmI;
                                            int num163 = this.whoAmI;
                                            for (int num164 = 0; num164 < 14; num164++)
                                            {
                                                int num165 = 89;
                                                if (num164 == 1 || num164 == 8)
                                                {
                                                    num165 = 88;
                                                }
                                                else
                                                {
                                                    if (num164 == 11)
                                                    {
                                                        num165 = 90;
                                                    }
                                                    else
                                                    {
                                                        if (num164 == 12)
                                                        {
                                                            num165 = 91;
                                                        }
                                                        else
                                                        {
                                                            if (num164 == 13)
                                                            {
                                                                num165 = 92;
                                                            }
                                                        }
                                                    }
                                                }
                                                int num166 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), num165, this.whoAmI);
                                                Main.npc[num166].ai[3] = (float) this.whoAmI;
                                                Main.npc[num166].realLife = this.whoAmI;
                                                Main.npc[num166].ai[1] = (float) num163;
                                                Main.npc[num163].ai[0] = (float) num166;
                                                NetMessage.SendData(23, -1, -1, "", num166, 0f, 0f, 0f, 0);
                                                num163 = num166;
                                            }
                                        }
                                        if ((this.type == 7 || this.type == 8 || this.type == 10 || this.type == 11 || this.type == 13 || this.type == 14 || this.type == 39 || this.type == 40 || this.type == 95 || this.type == 96 || this.type == 98 || this.type == 99 || this.type == 117 || this.type == 118) && this.ai[0] == 0f)
                                        {
                                            if (this.type == 7 || this.type == 10 || this.type == 13 || this.type == 39 || this.type == 95 || this.type == 98 || this.type == 117)
                                            {
                                                if (this.type < 13 || this.type > 15)
                                                {
                                                    this.ai[3] = (float) this.whoAmI;
                                                    this.realLife = this.whoAmI;
                                                }
                                                this.ai[2] = (float) Main.rand.Next(8, 13);
                                                if (this.type == 10)
                                                {
                                                    this.ai[2] = (float) Main.rand.Next(4, 7);
                                                }
                                                if (this.type == 13)
                                                {
                                                    this.ai[2] = (float) Main.rand.Next(45, 56);
                                                }
                                                if (this.type == 39)
                                                {
                                                    this.ai[2] = (float) Main.rand.Next(12, 19);
                                                }
                                                if (this.type == 95)
                                                {
                                                    this.ai[2] = (float) Main.rand.Next(6, 12);
                                                }
                                                if (this.type == 98)
                                                {
                                                    this.ai[2] = (float) Main.rand.Next(20, 26);
                                                }
                                                if (this.type == 117)
                                                {
                                                    this.ai[2] = (float) Main.rand.Next(3, 6);
                                                }
                                                this.ai[0] = (float) NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), this.type + 1, this.whoAmI);
                                            }
                                            else
                                            {
                                                if ((this.type == 8 || this.type == 11 || this.type == 14 || this.type == 40 || this.type == 96 || this.type == 99 || this.type == 118) && this.ai[2] > 0f)
                                                {
                                                    this.ai[0] = (float) NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), this.type, this.whoAmI);
                                                }
                                                else
                                                {
                                                    this.ai[0] = (float) NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), this.type + 1, this.whoAmI);
                                                }
                                            }
                                            if (this.type < 13 || this.type > 15)
                                            {
                                                Main.npc[(int) this.ai[0]].ai[3] = this.ai[3];
                                                Main.npc[(int) this.ai[0]].realLife = this.realLife;
                                            }
                                            Main.npc[(int) this.ai[0]].ai[1] = (float) this.whoAmI;
                                            Main.npc[(int) this.ai[0]].ai[2] = this.ai[2] - 1f;
                                            this.netUpdate = true;
                                        }
                                        if ((this.type == 8 || this.type == 9 || this.type == 11 || this.type == 12 || this.type == 40 || this.type == 41 || this.type == 96 || this.type == 97 || this.type == 99 || this.type == 100 || (this.type > 87 && this.type <= 92) || this.type == 118 || this.type == 119) && (!Main.npc[(int) this.ai[1]].active || Main.npc[(int) this.ai[1]].aiStyle != this.aiStyle))
                                        {
                                            this.life = 0;
                                            this.HitEffect(0, 10.0);
                                            this.active = false;
                                        }
                                        if ((this.type == 7 || this.type == 8 || this.type == 10 || this.type == 11 || this.type == 39 || this.type == 40 || this.type == 95 || this.type == 96 || this.type == 98 || this.type == 99 || (this.type >= 87 && this.type < 92) || this.type == 117 || this.type == 118) && (!Main.npc[(int) this.ai[0]].active || Main.npc[(int) this.ai[0]].aiStyle != this.aiStyle))
                                        {
                                            this.life = 0;
                                            this.HitEffect(0, 10.0);
                                            this.active = false;
                                        }
                                        if (this.type == 13 || this.type == 14 || this.type == 15)
                                        {
                                            if (!Main.npc[(int) this.ai[1]].active && !Main.npc[(int) this.ai[0]].active)
                                            {
                                                this.life = 0;
                                                this.HitEffect(0, 10.0);
                                                this.active = false;
                                            }
                                            if (this.type == 13 && !Main.npc[(int) this.ai[0]].active)
                                            {
                                                this.life = 0;
                                                this.HitEffect(0, 10.0);
                                                this.active = false;
                                            }
                                            if (this.type == 15 && !Main.npc[(int) this.ai[1]].active)
                                            {
                                                this.life = 0;
                                                this.HitEffect(0, 10.0);
                                                this.active = false;
                                            }
                                            if (this.type == 14 && (!Main.npc[(int) this.ai[1]].active || Main.npc[(int) this.ai[1]].aiStyle != this.aiStyle))
                                            {
                                                this.type = 13;
                                                int num167 = this.whoAmI;
                                                float num168 = (float) this.life/(float) this.lifeMax;
                                                float num169 = this.ai[0];
                                                this.SetDefaults(this.type, -1f);
                                                this.life = (int) ((float) this.lifeMax*num168);
                                                this.ai[0] = num169;
                                                this.TargetClosest(true);
                                                this.netUpdate = true;
                                                this.whoAmI = num167;
                                            }
                                            if (this.type == 14 && (!Main.npc[(int) this.ai[0]].active || Main.npc[(int) this.ai[0]].aiStyle != this.aiStyle))
                                            {
                                                int num170 = this.whoAmI;
                                                float num171 = (float) this.life/(float) this.lifeMax;
                                                float num172 = this.ai[1];
                                                this.SetDefaults(this.type, -1f);
                                                this.life = (int) ((float) this.lifeMax*num171);
                                                this.ai[1] = num172;
                                                this.TargetClosest(true);
                                                this.netUpdate = true;
                                                this.whoAmI = num170;
                                            }
                                            if (this.life == 0)
                                            {
                                                bool flag16 = true;
                                                for (int num173 = 0; num173 < 200; num173++)
                                                {
                                                    if (Main.npc[num173].active && (Main.npc[num173].type == 13 || Main.npc[num173].type == 14 || Main.npc[num173].type == 15))
                                                    {
                                                        flag16 = false;
                                                        break;
                                                    }
                                                }
                                                if (flag16)
                                                {
                                                    this.boss = true;
                                                    this.NPCLoot();
                                                }
                                            }
                                        }
                                        if (!this.active && Main.netMode == 2)
                                        {
                                            NetMessage.SendData(28, -1, -1, "", this.whoAmI, -1f, 0f, 0f, 0);
                                        }
                                    }
                                    int num174 = (int) (this.position.X/16f) - 1;
                                    int num175 = (int) ((this.position.X + (float) this.width)/16f) + 2;
                                    int num176 = (int) (this.position.Y/16f) - 1;
                                    int num177 = (int) ((this.position.Y + (float) this.height)/16f) + 2;
                                    if (num174 < 0)
                                    {
                                        num174 = 0;
                                    }
                                    if (num175 > Main.maxTilesX)
                                    {
                                        num175 = Main.maxTilesX;
                                    }
                                    if (num176 < 0)
                                    {
                                        num176 = 0;
                                    }
                                    if (num177 > Main.maxTilesY)
                                    {
                                        num177 = Main.maxTilesY;
                                    }
                                    bool flag17 = false;
                                    if (this.type >= 87 && this.type <= 92)
                                    {
                                        flag17 = true;
                                    }
                                    if (!flag17)
                                    {
                                        for (int num178 = num174; num178 < num175; num178++)
                                        {
                                            for (int num179 = num176; num179 < num177; num179++)
                                            {
                                                if (Main.tile[num178, num179] != null && ((Main.tile[num178, num179].nactive() && (Main.tileSolid[(int) Main.tile[num178, num179].type] || (Main.tileSolidTop[(int) Main.tile[num178, num179].type] && Main.tile[num178, num179].frameY == 0))) || Main.tile[num178, num179].liquid > 64))
                                                {
                                                    Vector2 vector19;
                                                    vector19.X = (float) (num178*16);
                                                    vector19.Y = (float) (num179*16);
                                                    if (this.position.X + (float) this.width > vector19.X && this.position.X < vector19.X + 16f && this.position.Y + (float) this.height > vector19.Y && this.position.Y < vector19.Y + 16f)
                                                    {
                                                        flag17 = true;
                                                        if (Main.rand.Next(100) == 0 && this.type != 117 && Main.tile[num178, num179].nactive())
                                                        {
                                                            WorldGen.KillTile(num178, num179, true, true, false);
                                                        }
                                                        if (Main.netMode != 1 && Main.tile[num178, num179].type == 2)
                                                        {
                                                            byte arg_B1F3_0 = Main.tile[num178, num179 - 1].type;
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    if (!flag17 && (this.type == 7 || this.type == 10 || this.type == 13 || this.type == 39 || this.type == 95 || this.type == 98 || this.type == 117))
                                    {
                                        Rectangle rectangle = new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
                                        int num180 = 1000;
                                        bool flag18 = true;
                                        for (int num181 = 0; num181 < 255; num181++)
                                        {
                                            if (Main.player[num181].active)
                                            {
                                                Rectangle rectangle2 = new Rectangle((int) Main.player[num181].position.X - num180, (int) Main.player[num181].position.Y - num180, num180*2, num180*2);
                                                if (rectangle.Intersects(rectangle2))
                                                {
                                                    flag18 = false;
                                                    break;
                                                }
                                            }
                                        }
                                        if (flag18)
                                        {
                                            flag17 = true;
                                        }
                                    }
                                    if (this.type >= 87 && this.type <= 92)
                                    {
                                        if (this.velocity.X < 0f)
                                        {
                                            this.spriteDirection = 1;
                                        }
                                        else
                                        {
                                            if (this.velocity.X > 0f)
                                            {
                                                this.spriteDirection = -1;
                                            }
                                        }
                                    }
                                    float num182 = 8f;
                                    float num183 = 0.07f;
                                    if (this.type == 95)
                                    {
                                        num182 = 5.5f;
                                        num183 = 0.045f;
                                    }
                                    if (this.type == 10)
                                    {
                                        num182 = 6f;
                                        num183 = 0.05f;
                                    }
                                    if (this.type == 13)
                                    {
                                        num182 = 10f;
                                        num183 = 0.07f;
                                    }
                                    if (this.type == 87)
                                    {
                                        num182 = 11f;
                                        num183 = 0.25f;
                                    }
                                    if (this.type == 117 && Main.wof >= 0)
                                    {
                                        float num184 = (float) Main.npc[Main.wof].life/(float) Main.npc[Main.wof].lifeMax;
                                        if ((double) num184 < 0.5)
                                        {
                                            num182 += 1f;
                                            num183 += 0.1f;
                                        }
                                        if ((double) num184 < 0.25)
                                        {
                                            num182 += 1f;
                                            num183 += 0.1f;
                                        }
                                        if ((double) num184 < 0.1)
                                        {
                                            num182 += 2f;
                                            num183 += 0.1f;
                                        }
                                    }
                                    Vector2 vector20 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                    float num185 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2);
                                    float num186 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2);
                                    num185 = (float) ((int) (num185/16f)*16);
                                    num186 = (float) ((int) (num186/16f)*16);
                                    vector20.X = (float) ((int) (vector20.X/16f)*16);
                                    vector20.Y = (float) ((int) (vector20.Y/16f)*16);
                                    num185 -= vector20.X;
                                    num186 -= vector20.Y;
                                    float num187 = (float) Math.Sqrt((double) (num185*num185 + num186*num186));
                                    if (this.ai[1] > 0f && this.ai[1] < (float) Main.npc.Length)
                                    {
                                        try
                                        {
                                            vector20 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                            num185 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - vector20.X;
                                            num186 = Main.npc[(int) this.ai[1]].position.Y + (float) (Main.npc[(int) this.ai[1]].height/2) - vector20.Y;
                                        }
                                        catch
                                        {
                                        }
                                        this.rotation = (float) Math.Atan2((double) num186, (double) num185) + 1.57f;
                                        num187 = (float) Math.Sqrt((double) (num185*num185 + num186*num186));
                                        int num188 = this.width;
                                        if (this.type >= 87 && this.type <= 92)
                                        {
                                            num188 = 42;
                                        }
                                        num187 = (num187 - (float) num188)/num187;
                                        num185 *= num187;
                                        num186 *= num187;
                                        this.velocity = default(Vector2);
                                        this.position.X = this.position.X + num185;
                                        this.position.Y = this.position.Y + num186;
                                        if (this.type >= 87 && this.type <= 92)
                                        {
                                            if (num185 < 0f)
                                            {
                                                this.spriteDirection = 1;
                                                return;
                                            }
                                            if (num185 > 0f)
                                            {
                                                this.spriteDirection = -1;
                                                return;
                                            }
                                        }
                                    }
                                    else
                                    {
                                        if (!flag17)
                                        {
                                            this.TargetClosest(true);
                                            this.velocity.Y = this.velocity.Y + 0.11f;
                                            if (this.velocity.Y > num182)
                                            {
                                                this.velocity.Y = num182;
                                            }
                                            if ((double) (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y)) < (double) num182*0.4)
                                            {
                                                if (this.velocity.X < 0f)
                                                {
                                                    this.velocity.X = this.velocity.X - num183*1.1f;
                                                }
                                                else
                                                {
                                                    this.velocity.X = this.velocity.X + num183*1.1f;
                                                }
                                            }
                                            else
                                            {
                                                if (this.velocity.Y == num182)
                                                {
                                                    if (this.velocity.X < num185)
                                                    {
                                                        this.velocity.X = this.velocity.X + num183;
                                                    }
                                                    else
                                                    {
                                                        if (this.velocity.X > num185)
                                                        {
                                                            this.velocity.X = this.velocity.X - num183;
                                                        }
                                                    }
                                                }
                                                else
                                                {
                                                    if (this.velocity.Y > 4f)
                                                    {
                                                        if (this.velocity.X < 0f)
                                                        {
                                                            this.velocity.X = this.velocity.X + num183*0.9f;
                                                        }
                                                        else
                                                        {
                                                            this.velocity.X = this.velocity.X - num183*0.9f;
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else
                                        {
                                            if (this.type != 87 && this.type != 117 && this.soundDelay == 0)
                                            {
                                                float num189 = num187/40f;
                                                if (num189 < 10f)
                                                {
                                                    num189 = 10f;
                                                }
                                                if (num189 > 20f)
                                                {
                                                    num189 = 20f;
                                                }
                                                this.soundDelay = (int) num189;
                                                Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 1);
                                            }
                                            num187 = (float) Math.Sqrt((double) (num185*num185 + num186*num186));
                                            float num190 = Math.Abs(num185);
                                            float num191 = Math.Abs(num186);
                                            float num192 = num182/num187;
                                            num185 *= num192;
                                            num186 *= num192;
                                            if ((this.type == 13 || this.type == 7) && !Main.player[this.target].zoneEvil && !Main.player[this.target].zoneBlood)
                                            {
                                                bool flag19 = true;
                                                for (int num193 = 0; num193 < 255; num193++)
                                                {
                                                    if (Main.player[num193].active && !Main.player[num193].dead && Main.player[num193].zoneEvil)
                                                    {
                                                        flag19 = false;
                                                    }
                                                }
                                                if (flag19)
                                                {
                                                    if (Main.netMode != 1 && (double) (this.position.Y/16f) > (Main.rockLayer + (double) Main.maxTilesY)/2.0)
                                                    {
                                                        this.active = false;
                                                        int num194 = (int) this.ai[0];
                                                        while (num194 > 0 && num194 < 200 && Main.npc[num194].active && Main.npc[num194].aiStyle == this.aiStyle)
                                                        {
                                                            int num195 = (int) Main.npc[num194].ai[0];
                                                            Main.npc[num194].active = false;
                                                            this.life = 0;
                                                            if (Main.netMode == 2)
                                                            {
                                                                NetMessage.SendData(23, -1, -1, "", num194, 0f, 0f, 0f, 0);
                                                            }
                                                            num194 = num195;
                                                        }
                                                        if (Main.netMode == 2)
                                                        {
                                                            NetMessage.SendData(23, -1, -1, "", this.whoAmI, 0f, 0f, 0f, 0);
                                                        }
                                                    }
                                                    num185 = 0f;
                                                    num186 = num182;
                                                }
                                            }
                                            bool flag20 = false;
                                            if (this.type == 87)
                                            {
                                                if (((this.velocity.X > 0f && num185 < 0f) || (this.velocity.X < 0f && num185 > 0f) || (this.velocity.Y > 0f && num186 < 0f) || (this.velocity.Y < 0f && num186 > 0f)) && Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y) > num183/2f && num187 < 300f)
                                                {
                                                    flag20 = true;
                                                    if (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y) < num182)
                                                    {
                                                        this.velocity *= 1.1f;
                                                    }
                                                }
                                                if (this.position.Y > Main.player[this.target].position.Y || (double) (Main.player[this.target].position.Y/16f) > Main.worldSurface || Main.player[this.target].dead)
                                                {
                                                    flag20 = true;
                                                    if (Math.Abs(this.velocity.X) < num182/2f)
                                                    {
                                                        if (this.velocity.X == 0f)
                                                        {
                                                            this.velocity.X = this.velocity.X - (float) this.direction;
                                                        }
                                                        this.velocity.X = this.velocity.X*1.1f;
                                                    }
                                                    else
                                                    {
                                                        if (this.velocity.Y > -num182)
                                                        {
                                                            this.velocity.Y = this.velocity.Y - num183;
                                                        }
                                                    }
                                                }
                                            }
                                            if (!flag20)
                                            {
                                                if ((this.velocity.X > 0f && num185 > 0f) || (this.velocity.X < 0f && num185 < 0f) || (this.velocity.Y > 0f && num186 > 0f) || (this.velocity.Y < 0f && num186 < 0f))
                                                {
                                                    if (this.velocity.X < num185)
                                                    {
                                                        this.velocity.X = this.velocity.X + num183;
                                                    }
                                                    else
                                                    {
                                                        if (this.velocity.X > num185)
                                                        {
                                                            this.velocity.X = this.velocity.X - num183;
                                                        }
                                                    }
                                                    if (this.velocity.Y < num186)
                                                    {
                                                        this.velocity.Y = this.velocity.Y + num183;
                                                    }
                                                    else
                                                    {
                                                        if (this.velocity.Y > num186)
                                                        {
                                                            this.velocity.Y = this.velocity.Y - num183;
                                                        }
                                                    }
                                                    if ((double) Math.Abs(num186) < (double) num182*0.2 && ((this.velocity.X > 0f && num185 < 0f) || (this.velocity.X < 0f && num185 > 0f)))
                                                    {
                                                        if (this.velocity.Y > 0f)
                                                        {
                                                            this.velocity.Y = this.velocity.Y + num183*2f;
                                                        }
                                                        else
                                                        {
                                                            this.velocity.Y = this.velocity.Y - num183*2f;
                                                        }
                                                    }
                                                    if ((double) Math.Abs(num185) < (double) num182*0.2 && ((this.velocity.Y > 0f && num186 < 0f) || (this.velocity.Y < 0f && num186 > 0f)))
                                                    {
                                                        if (this.velocity.X > 0f)
                                                        {
                                                            this.velocity.X = this.velocity.X + num183*2f;
                                                        }
                                                        else
                                                        {
                                                            this.velocity.X = this.velocity.X - num183*2f;
                                                        }
                                                    }
                                                }
                                                else
                                                {
                                                    if (num190 > num191)
                                                    {
                                                        if (this.velocity.X < num185)
                                                        {
                                                            this.velocity.X = this.velocity.X + num183*1.1f;
                                                        }
                                                        else
                                                        {
                                                            if (this.velocity.X > num185)
                                                            {
                                                                this.velocity.X = this.velocity.X - num183*1.1f;
                                                            }
                                                        }
                                                        if ((double) (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y)) < (double) num182*0.5)
                                                        {
                                                            if (this.velocity.Y > 0f)
                                                            {
                                                                this.velocity.Y = this.velocity.Y + num183;
                                                            }
                                                            else
                                                            {
                                                                this.velocity.Y = this.velocity.Y - num183;
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.velocity.Y < num186)
                                                        {
                                                            this.velocity.Y = this.velocity.Y + num183*1.1f;
                                                        }
                                                        else
                                                        {
                                                            if (this.velocity.Y > num186)
                                                            {
                                                                this.velocity.Y = this.velocity.Y - num183*1.1f;
                                                            }
                                                        }
                                                        if ((double) (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y)) < (double) num182*0.5)
                                                        {
                                                            if (this.velocity.X > 0f)
                                                            {
                                                                this.velocity.X = this.velocity.X + num183;
                                                            }
                                                            else
                                                            {
                                                                this.velocity.X = this.velocity.X - num183;
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) + 1.57f;
                                        if (this.type == 7 || this.type == 10 || this.type == 13 || this.type == 39 || this.type == 95 || this.type == 98 || this.type == 117)
                                        {
                                            if (flag17)
                                            {
                                                if (this.localAI[0] != 1f)
                                                {
                                                    this.netUpdate = true;
                                                }
                                                this.localAI[0] = 1f;
                                            }
                                            else
                                            {
                                                if (this.localAI[0] != 0f)
                                                {
                                                    this.netUpdate = true;
                                                }
                                                this.localAI[0] = 0f;
                                            }
                                            if (((this.velocity.X > 0f && this.oldVelocity.X < 0f) || (this.velocity.X < 0f && this.oldVelocity.X > 0f) || (this.velocity.Y > 0f && this.oldVelocity.Y < 0f) || (this.velocity.Y < 0f && this.oldVelocity.Y > 0f)) && !this.justHit)
                                            {
                                                this.netUpdate = true;
                                                return;
                                            }
                                        }
                                    }
                                }
                                else
                                {
                                    if (this.aiStyle == 7)
                                    {
                                        bool flag21 = Main.raining;
                                        if (!Main.dayTime)
                                        {
                                            flag21 = true;
                                        }
                                        if (this.type == 142 && Main.netMode != 1 && !Main.xMas)
                                        {
                                            this.StrikeNPC(9999, 0f, 0, false, false);
                                            if (Main.netMode == 2)
                                            {
                                                NetMessage.SendData(28, -1, -1, "", this.whoAmI, 9999f, 0f, 0f, 0);
                                            }
                                        }
                                        if ((this.type == 148 || this.type == 149) && this.localAI[0] == 0f)
                                        {
                                            this.localAI[0] = (float) Main.rand.Next(1, 5);
                                        }
                                        int num196 = (int) (this.position.X + (float) (this.width/2))/16;
                                        int num197 = (int) (this.position.Y + (float) this.height + 1f)/16;
                                        if (this.type == 107)
                                        {
                                            NPC.savedGoblin = true;
                                        }
                                        if (this.type == 108)
                                        {
                                            NPC.savedWizard = true;
                                        }
                                        if (this.type == 124)
                                        {
                                            NPC.savedMech = true;
                                        }
                                        if ((this.type == 46 || this.type == 148 || this.type == 149 || this.type == 230) && this.target == 255)
                                        {
                                            this.TargetClosest(true);
                                            if (this.position.X < Main.player[this.target].position.X)
                                            {
                                                this.direction = 1;
                                                this.spriteDirection = this.direction;
                                            }
                                            if (this.position.X > Main.player[this.target].position.X)
                                            {
                                                this.direction = -1;
                                                this.spriteDirection = this.direction;
                                            }
                                            if (this.homeTileX == -1)
                                            {
                                                this.homeTileX = (int) ((this.position.X + (float) (this.width/2))/16f);
                                            }
                                        }
                                        bool flag22 = false;
                                        this.directionY = -1;
                                        if (this.direction == 0)
                                        {
                                            this.direction = 1;
                                        }
                                        for (int num198 = 0; num198 < 255; num198++)
                                        {
                                            if (Main.player[num198].active && Main.player[num198].talkNPC == this.whoAmI)
                                            {
                                                flag22 = true;
                                                if (this.ai[0] != 0f)
                                                {
                                                    this.netUpdate = true;
                                                }
                                                this.ai[0] = 0f;
                                                this.ai[1] = 300f;
                                                this.ai[2] = 100f;
                                                if (Main.player[num198].position.X + (float) (Main.player[num198].width/2) < this.position.X + (float) (this.width/2))
                                                {
                                                    this.direction = -1;
                                                }
                                                else
                                                {
                                                    this.direction = 1;
                                                }
                                            }
                                        }
                                        if (this.ai[3] > 0f)
                                        {
                                            this.life = -1;
                                            this.HitEffect(0, 10.0);
                                            this.active = false;
                                            if (this.type == 37)
                                            {
                                                Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                            }
                                        }
                                        if (this.type == 37 && Main.netMode != 1)
                                        {
                                            this.homeless = false;
                                            this.homeTileX = Main.dungeonX;
                                            this.homeTileY = Main.dungeonY;
                                            if (NPC.downedBoss3)
                                            {
                                                this.ai[3] = 1f;
                                                this.netUpdate = true;
                                            }
                                        }
                                        int num199 = this.homeTileY;
                                        if (Main.netMode != 1 && this.homeTileY > 0)
                                        {
                                            while (!WorldGen.SolidTile(this.homeTileX, num199) && num199 < Main.maxTilesY - 20)
                                            {
                                                num199++;
                                            }
                                        }
                                        if (Main.netMode != 1 && this.townNPC && (flag21 || Main.tileDungeon[(int) Main.tile[num196, num197].type]) && (num196 != this.homeTileX || num197 != num199) && !this.homeless)
                                        {
                                            bool flag23 = true;
                                            for (int num200 = 0; num200 < 2; num200++)
                                            {
                                                Rectangle rectangle3 = new Rectangle((int) (this.position.X + (float) (this.width/2) - (float) (NPC.sWidth/2) - (float) NPC.safeRangeX), (int) (this.position.Y + (float) (this.height/2) - (float) (NPC.sHeight/2) - (float) NPC.safeRangeY), NPC.sWidth + NPC.safeRangeX*2, NPC.sHeight + NPC.safeRangeY*2);
                                                if (num200 == 1)
                                                {
                                                    rectangle3 = new Rectangle(this.homeTileX*16 + 8 - NPC.sWidth/2 - NPC.safeRangeX, num199*16 + 8 - NPC.sHeight/2 - NPC.safeRangeY, NPC.sWidth + NPC.safeRangeX*2, NPC.sHeight + NPC.safeRangeY*2);
                                                }
                                                for (int num201 = 0; num201 < 255; num201++)
                                                {
                                                    if (Main.player[num201].active)
                                                    {
                                                        Rectangle rectangle4 = new Rectangle((int) Main.player[num201].position.X, (int) Main.player[num201].position.Y, Main.player[num201].width, Main.player[num201].height);
                                                        if (rectangle4.Intersects(rectangle3))
                                                        {
                                                            flag23 = false;
                                                            break;
                                                        }
                                                    }
                                                    if (!flag23)
                                                    {
                                                        break;
                                                    }
                                                }
                                            }
                                            if (flag23)
                                            {
                                                if (this.type == 37 || !Collision.SolidTiles(this.homeTileX - 1, this.homeTileX + 1, num199 - 3, num199 - 1))
                                                {
                                                    this.velocity.X = 0f;
                                                    this.velocity.Y = 0f;
                                                    this.position.X = (float) (this.homeTileX*16 + 8 - this.width/2);
                                                    this.position.Y = (float) (num199*16 - this.height) - 0.1f;
                                                    this.netUpdate = true;
                                                }
                                                else
                                                {
                                                    this.homeless = true;
                                                    WorldGen.QuickFindHome(this.whoAmI);
                                                }
                                            }
                                        }
                                        if (this.ai[0] == 0f)
                                        {
                                            if (this.ai[2] > 0f)
                                            {
                                                this.ai[2] -= 1f;
                                            }
                                            if (flag21 && !flag22 && this.type != 46 && this.type != 148 && this.type != 149 && this.type != 230)
                                            {
                                                if (Main.netMode != 1)
                                                {
                                                    if (num196 == this.homeTileX && num197 == num199)
                                                    {
                                                        if (this.velocity.X != 0f)
                                                        {
                                                            this.netUpdate = true;
                                                        }
                                                        if ((double) this.velocity.X > 0.1)
                                                        {
                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                        }
                                                        else
                                                        {
                                                            if ((double) this.velocity.X < -0.1)
                                                            {
                                                                this.velocity.X = this.velocity.X + 0.1f;
                                                            }
                                                            else
                                                            {
                                                                this.velocity.X = 0f;
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (!flag22)
                                                        {
                                                            if (num196 > this.homeTileX)
                                                            {
                                                                this.direction = -1;
                                                            }
                                                            else
                                                            {
                                                                this.direction = 1;
                                                            }
                                                            this.ai[0] = 1f;
                                                            this.ai[1] = (float) (200 + Main.rand.Next(200));
                                                            this.ai[2] = 0f;
                                                            this.netUpdate = true;
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if ((double) this.velocity.X > 0.1)
                                                {
                                                    this.velocity.X = this.velocity.X - 0.1f;
                                                }
                                                else
                                                {
                                                    if ((double) this.velocity.X < -0.1)
                                                    {
                                                        this.velocity.X = this.velocity.X + 0.1f;
                                                    }
                                                    else
                                                    {
                                                        this.velocity.X = 0f;
                                                    }
                                                }
                                                if (Main.netMode != 1)
                                                {
                                                    if (this.ai[1] > 0f)
                                                    {
                                                        this.ai[1] -= 1f;
                                                    }
                                                    if (this.ai[1] <= 0f)
                                                    {
                                                        this.ai[0] = 1f;
                                                        this.ai[1] = (float) (200 + Main.rand.Next(200));
                                                        if (this.type == 46 || this.type == 148 || this.type == 149 || this.type == 230)
                                                        {
                                                            this.ai[1] += (float) Main.rand.Next(200, 400);
                                                        }
                                                        this.ai[2] = 0f;
                                                        this.netUpdate = true;
                                                    }
                                                }
                                            }
                                            if (Main.netMode != 1 && (!flag21 || (num196 == this.homeTileX && num197 == num199)))
                                            {
                                                if (num196 < this.homeTileX - 25 || num196 > this.homeTileX + 25)
                                                {
                                                    if (this.ai[2] == 0f)
                                                    {
                                                        if (num196 < this.homeTileX - 50 && this.direction == -1)
                                                        {
                                                            this.direction = 1;
                                                            this.netUpdate = true;
                                                            return;
                                                        }
                                                        if (num196 > this.homeTileX + 50 && this.direction == 1)
                                                        {
                                                            this.direction = -1;
                                                            this.netUpdate = true;
                                                            return;
                                                        }
                                                    }
                                                }
                                                else
                                                {
                                                    if (Main.rand.Next(80) == 0 && this.ai[2] == 0f)
                                                    {
                                                        this.ai[2] = 200f;
                                                        this.direction *= -1;
                                                        this.netUpdate = true;
                                                        return;
                                                    }
                                                }
                                            }
                                        }
                                        else
                                        {
                                            if (this.ai[0] == 1f)
                                            {
                                                if (Main.netMode != 1 && flag21 && num196 == this.homeTileX && num197 == this.homeTileY && this.type != 46 && this.type != 148 && this.type != 149 && this.type != 230)
                                                {
                                                    this.ai[0] = 0f;
                                                    this.ai[1] = (float) (200 + Main.rand.Next(200));
                                                    this.ai[2] = 60f;
                                                    this.netUpdate = true;
                                                    return;
                                                }
                                                if (Main.netMode != 1 && !this.homeless && !Main.tileDungeon[(int) Main.tile[num196, num197].type] && (num196 < this.homeTileX - 35 || num196 > this.homeTileX + 35))
                                                {
                                                    if (this.position.X < (float) (this.homeTileX*16) && this.direction == -1)
                                                    {
                                                        this.ai[1] -= 5f;
                                                    }
                                                    else
                                                    {
                                                        if (this.position.X > (float) (this.homeTileX*16) && this.direction == 1)
                                                        {
                                                            this.ai[1] -= 5f;
                                                        }
                                                    }
                                                }
                                                this.ai[1] -= 1f;
                                                if (this.ai[1] <= 0f)
                                                {
                                                    this.ai[0] = 0f;
                                                    this.ai[1] = (float) (300 + Main.rand.Next(300));
                                                    if (this.type == 46 || this.type == 148 || this.type == 149 || this.type == 230)
                                                    {
                                                        this.ai[1] -= (float) Main.rand.Next(100);
                                                    }
                                                    this.ai[2] = 60f;
                                                    this.netUpdate = true;
                                                }
                                                if (this.closeDoor && ((this.position.X + (float) (this.width/2))/16f > (float) (this.doorX + 2) || (this.position.X + (float) (this.width/2))/16f < (float) (this.doorX - 2)))
                                                {
                                                    bool flag24 = WorldGen.CloseDoor(this.doorX, this.doorY, false);
                                                    if (flag24)
                                                    {
                                                        this.closeDoor = false;
                                                        NetMessage.SendData(19, -1, -1, "", 1, (float) this.doorX, (float) this.doorY, (float) this.direction, 0);
                                                    }
                                                    if ((this.position.X + (float) (this.width/2))/16f > (float) (this.doorX + 4) || (this.position.X + (float) (this.width/2))/16f < (float) (this.doorX - 4) || (this.position.Y + (float) (this.height/2))/16f > (float) (this.doorY + 4) || (this.position.Y + (float) (this.height/2))/16f < (float) (this.doorY - 4))
                                                    {
                                                        this.closeDoor = false;
                                                    }
                                                }
                                                if (this.velocity.X < -1f || this.velocity.X > 1f)
                                                {
                                                    if (this.velocity.Y == 0f)
                                                    {
                                                        this.velocity *= 0.8f;
                                                    }
                                                }
                                                else
                                                {
                                                    if ((double) this.velocity.X < 1.15 && this.direction == 1)
                                                    {
                                                        this.velocity.X = this.velocity.X + 0.07f;
                                                        if (this.velocity.X > 1f)
                                                        {
                                                            this.velocity.X = 1f;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.velocity.X > -1f && this.direction == -1)
                                                        {
                                                            this.velocity.X = this.velocity.X - 0.07f;
                                                            if (this.velocity.X > 1f)
                                                            {
                                                                this.velocity.X = 1f;
                                                            }
                                                        }
                                                    }
                                                }
                                                bool flag25 = (float) ((this.homeTileY - 2)*16) <= this.position.Y;
                                                if ((this.direction == 1 && this.position.Y + (float) (this.width/2) > (float) (this.homeTileX*16)) || (this.direction == -1 && this.position.Y + (float) (this.width/2) < (float) (this.homeTileX*16)))
                                                {
                                                    flag25 = true;
                                                }
                                                if (this.velocity.Y >= 0f)
                                                {
                                                    int num202 = 0;
                                                    if (this.velocity.X < 0f)
                                                    {
                                                        num202 = -1;
                                                    }
                                                    if (this.velocity.X > 0f)
                                                    {
                                                        num202 = 1;
                                                    }
                                                    Vector2 vector21 = this.position;
                                                    vector21.X += this.velocity.X;
                                                    int num203 = (int) ((vector21.X + (float) (this.width/2) + (float) ((this.width/2 + 1)*num202))/16f);
                                                    int num204 = (int) ((vector21.Y + (float) this.height - 1f)/16f);
                                                    if ((float) (num203*16) < vector21.X + (float) this.width && (float) (num203*16 + 16) > vector21.X)
                                                    {
                                                        if (Main.tile[num203, num204] == null)
                                                        {
                                                            Main.tile[num203, num204] = new Tile();
                                                        }
                                                        if (Main.tile[num203, num204 - 1] == null)
                                                        {
                                                            Main.tile[num203, num204 - 1] = new Tile();
                                                        }
                                                        if (Main.tile[num203, num204 - 2] == null)
                                                        {
                                                            Main.tile[num203, num204 - 2] = new Tile();
                                                        }
                                                        if (Main.tile[num203, num204 - 3] == null)
                                                        {
                                                            Main.tile[num203, num204 - 3] = new Tile();
                                                        }
                                                        if (Main.tile[num203, num204 + 1] == null)
                                                        {
                                                            Main.tile[num203, num204 + 1] = new Tile();
                                                        }
                                                        if (((Main.tile[num203, num204].nactive() && Main.tile[num203, num204].slope() == 0 && Main.tile[num203, num204 - 1].slope() == 0 && ((Main.tileSolid[(int) Main.tile[num203, num204].type] && !Main.tileSolidTop[(int) Main.tile[num203, num204].type]) || (flag25 && Main.tileSolidTop[(int) Main.tile[num203, num204].type] && Main.tile[num203, num204].frameY == 0 && (!Main.tileSolid[(int) Main.tile[num203, num204 - 1].type] || !Main.tile[num203, num204 - 1].nactive()) && Main.tile[num203, num204].type != 16 && Main.tile[num203, num204].type != 18 && Main.tile[num203, num204].type != 134))) || (Main.tile[num203, num204 - 1].halfBrick() && Main.tile[num203, num204 - 1].nactive())) && (!Main.tile[num203, num204 - 1].nactive() || !Main.tileSolid[(int) Main.tile[num203, num204 - 1].type] || Main.tileSolidTop[(int) Main.tile[num203, num204 - 1].type] || (Main.tile[num203, num204 - 1].halfBrick() && (!Main.tile[num203, num204 - 4].nactive() || !Main.tileSolid[(int) Main.tile[num203, num204 - 4].type] || Main.tileSolidTop[(int) Main.tile[num203, num204 - 4].type]))) && (!Main.tile[num203, num204 - 2].nactive() || !Main.tileSolid[(int) Main.tile[num203, num204 - 2].type] || Main.tileSolidTop[(int) Main.tile[num203, num204 - 2].type]) && (!Main.tile[num203, num204 - 3].nactive() || !Main.tileSolid[(int) Main.tile[num203, num204 - 3].type] || Main.tileSolidTop[(int) Main.tile[num203, num204 - 3].type]) && (!Main.tile[num203 - num202, num204 - 3].nactive() || !Main.tileSolid[(int) Main.tile[num203 - num202, num204 - 3].type] || Main.tileSolidTop[(int) Main.tile[num203 - num202, num204 - 3].type]))
                                                        {
                                                            float num205 = (float) (num204*16);
                                                            if (Main.tile[num203, num204].halfBrick())
                                                            {
                                                                num205 += 8f;
                                                            }
                                                            if (Main.tile[num203, num204 - 1].halfBrick())
                                                            {
                                                                num205 -= 8f;
                                                            }
                                                            if (num205 < vector21.Y + (float) this.height)
                                                            {
                                                                float num206 = vector21.Y + (float) this.height - num205;
                                                                if ((double) num206 <= 16.1)
                                                                {
                                                                    this.gfxOffY += this.position.Y + (float) this.height - num205;
                                                                    this.position.Y = num205 - (float) this.height;
                                                                    if (num206 < 9f)
                                                                    {
                                                                        this.stepSpeed = 1f;
                                                                    }
                                                                    else
                                                                    {
                                                                        this.stepSpeed = 2f;
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                if (this.velocity.Y == 0f)
                                                {
                                                    if (this.position.X == this.ai[2])
                                                    {
                                                        this.direction *= -1;
                                                    }
                                                    this.ai[2] = -1f;
                                                    int num207 = (int) ((this.position.X + (float) (this.width/2) + (float) (15*this.direction))/16f);
                                                    int num208 = (int) ((this.position.Y + (float) this.height - 16f)/16f);
                                                    if (Main.tile[num207, num208] == null)
                                                    {
                                                        Main.tile[num207, num208] = new Tile();
                                                    }
                                                    if (Main.tile[num207, num208 - 1] == null)
                                                    {
                                                        Main.tile[num207, num208 - 1] = new Tile();
                                                    }
                                                    if (Main.tile[num207, num208 - 2] == null)
                                                    {
                                                        Main.tile[num207, num208 - 2] = new Tile();
                                                    }
                                                    if (Main.tile[num207, num208 - 3] == null)
                                                    {
                                                        Main.tile[num207, num208 - 3] = new Tile();
                                                    }
                                                    if (Main.tile[num207, num208 + 1] == null)
                                                    {
                                                        Main.tile[num207, num208 + 1] = new Tile();
                                                    }
                                                    if (Main.tile[num207 - this.direction, num208 + 1] == null)
                                                    {
                                                        Main.tile[num207 - this.direction, num208 + 1] = new Tile();
                                                    }
                                                    if (Main.tile[num207 + this.direction, num208 - 1] == null)
                                                    {
                                                        Main.tile[num207 + this.direction, num208 - 1] = new Tile();
                                                    }
                                                    if (Main.tile[num207 + this.direction, num208 + 1] == null)
                                                    {
                                                        Main.tile[num207 + this.direction, num208 + 1] = new Tile();
                                                    }
                                                    Main.tile[num207 - this.direction, num208 + 1].halfBrick();
                                                    if (this.townNPC && Main.tile[num207, num208 - 2].nactive() && Main.tile[num207, num208 - 2].type == 10 && (Main.rand.Next(10) == 0 || flag21))
                                                    {
                                                        if (Main.netMode != 1)
                                                        {
                                                            bool flag26 = WorldGen.OpenDoor(num207, num208 - 2, this.direction);
                                                            if (flag26)
                                                            {
                                                                this.closeDoor = true;
                                                                this.doorX = num207;
                                                                this.doorY = num208 - 2;
                                                                NetMessage.SendData(19, -1, -1, "", 0, (float) num207, (float) (num208 - 2), (float) this.direction, 0);
                                                                this.netUpdate = true;
                                                                this.ai[1] += 80f;
                                                                return;
                                                            }
                                                            if (WorldGen.OpenDoor(num207, num208 - 2, -this.direction))
                                                            {
                                                                this.closeDoor = true;
                                                                this.doorX = num207;
                                                                this.doorY = num208 - 2;
                                                                NetMessage.SendData(19, -1, -1, "", 0, (float) num207, (float) (num208 - 2), (float) (-(float) this.direction), 0);
                                                                this.netUpdate = true;
                                                                this.ai[1] += 80f;
                                                                return;
                                                            }
                                                            this.direction *= -1;
                                                            this.netUpdate = true;
                                                            return;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if ((this.velocity.X < 0f && this.spriteDirection == -1) || (this.velocity.X > 0f && this.spriteDirection == 1))
                                                        {
                                                            if (Main.tile[num207, num208 - 2].nactive() && Main.tileSolid[(int) Main.tile[num207, num208 - 2].type] && !Main.tileSolidTop[(int) Main.tile[num207, num208 - 2].type])
                                                            {
                                                                if ((this.direction == 1 && !Collision.SolidTiles(num207 - 2, num207 - 1, num208 - 5, num208 - 1)) || (this.direction == -1 && !Collision.SolidTiles(num207 + 1, num207 + 2, num208 - 5, num208 - 1)))
                                                                {
                                                                    if (!Collision.SolidTiles(num207, num207, num208 - 5, num208 - 3))
                                                                    {
                                                                        this.velocity.Y = -6f;
                                                                        this.netUpdate = true;
                                                                    }
                                                                    else
                                                                    {
                                                                        this.direction *= -1;
                                                                        this.netUpdate = true;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    this.direction *= -1;
                                                                    this.netUpdate = true;
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (Main.tile[num207, num208 - 1].nactive() && Main.tileSolid[(int) Main.tile[num207, num208 - 1].type] && !Main.tileSolidTop[(int) Main.tile[num207, num208 - 1].type])
                                                                {
                                                                    if ((this.direction == 1 && !Collision.SolidTiles(num207 - 2, num207 - 1, num208 - 4, num208 - 1)) || (this.direction == -1 && !Collision.SolidTiles(num207 + 1, num207 + 2, num208 - 4, num208 - 1)))
                                                                    {
                                                                        if (!Collision.SolidTiles(num207, num207, num208 - 4, num208 - 2))
                                                                        {
                                                                            this.velocity.Y = -5f;
                                                                            this.netUpdate = true;
                                                                        }
                                                                        else
                                                                        {
                                                                            this.direction *= -1;
                                                                            this.netUpdate = true;
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        this.direction *= -1;
                                                                        this.netUpdate = true;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.position.Y + (float) this.height - (float) (num208*16) > 20f && Main.tile[num207, num208].nactive() && Main.tileSolid[(int) Main.tile[num207, num208].type] && Main.tile[num207, num208].slope() == 0)
                                                                    {
                                                                        if ((this.direction == 1 && !Collision.SolidTiles(num207 - 2, num207, num208 - 3, num208 - 1)) || (this.direction == -1 && !Collision.SolidTiles(num207, num207 + 2, num208 - 3, num208 - 1)))
                                                                        {
                                                                            this.velocity.Y = -4.4f;
                                                                            this.netUpdate = true;
                                                                        }
                                                                        else
                                                                        {
                                                                            this.direction *= -1;
                                                                            this.netUpdate = true;
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            try
                                                            {
                                                                if (Main.tile[num207, num208 + 1] == null)
                                                                {
                                                                    Main.tile[num207, num208 + 1] = new Tile();
                                                                }
                                                                if (Main.tile[num207 - this.direction, num208 + 1] == null)
                                                                {
                                                                    Main.tile[num207 - this.direction, num208 + 1] = new Tile();
                                                                }
                                                                if (Main.tile[num207, num208 + 2] == null)
                                                                {
                                                                    Main.tile[num207, num208 + 2] = new Tile();
                                                                }
                                                                if (Main.tile[num207 - this.direction, num208 + 2] == null)
                                                                {
                                                                    Main.tile[num207 - this.direction, num208 + 2] = new Tile();
                                                                }
                                                                if (Main.tile[num207, num208 + 3] == null)
                                                                {
                                                                    Main.tile[num207, num208 + 3] = new Tile();
                                                                }
                                                                if (Main.tile[num207 - this.direction, num208 + 3] == null)
                                                                {
                                                                    Main.tile[num207 - this.direction, num208 + 3] = new Tile();
                                                                }
                                                                if (Main.tile[num207, num208 + 4] == null)
                                                                {
                                                                    Main.tile[num207, num208 + 4] = new Tile();
                                                                }
                                                                if (Main.tile[num207 - this.direction, num208 + 4] == null)
                                                                {
                                                                    Main.tile[num207 - this.direction, num208 + 4] = new Tile();
                                                                }
                                                                else
                                                                {
                                                                    if (num196 >= this.homeTileX - 35 && num196 <= this.homeTileX + 35 && (!Main.tile[num207, num208 + 1].nactive() || !Main.tileSolid[(int) Main.tile[num207, num208 + 1].type]) && (!Main.tile[num207 - this.direction, num208 + 1].active() || !Main.tileSolid[(int) Main.tile[num207 - this.direction, num208 + 1].type]) && (!Main.tile[num207, num208 + 2].nactive() || !Main.tileSolid[(int) Main.tile[num207, num208 + 2].type]) && (!Main.tile[num207 - this.direction, num208 + 2].active() || !Main.tileSolid[(int) Main.tile[num207 - this.direction, num208 + 2].type]) && (!Main.tile[num207, num208 + 3].nactive() || !Main.tileSolid[(int) Main.tile[num207, num208 + 3].type]) && (!Main.tile[num207 - this.direction, num208 + 3].active() || !Main.tileSolid[(int) Main.tile[num207 - this.direction, num208 + 3].type]) && (!Main.tile[num207, num208 + 4].nactive() || !Main.tileSolid[(int) Main.tile[num207, num208 + 4].type]) && (!Main.tile[num207 - this.direction, num208 + 4].nactive() || !Main.tileSolid[(int) Main.tile[num207 - this.direction, num208 + 4].type]) && this.type != 46 && this.type != 148 && this.type != 149 && this.type != 230)
                                                                    {
                                                                        this.direction *= -1;
                                                                        this.velocity.X = this.velocity.X*-1f;
                                                                        this.netUpdate = true;
                                                                    }
                                                                }
                                                            }
                                                            catch
                                                            {
                                                            }
                                                            if (this.velocity.Y < 0f)
                                                            {
                                                                this.ai[2] = this.position.X;
                                                            }
                                                        }
                                                        if (this.velocity.Y < 0f && this.wet)
                                                        {
                                                            this.velocity.Y = this.velocity.Y*1.2f;
                                                        }
                                                        if (this.velocity.Y < 0f && this.type == 46)
                                                        {
                                                            this.velocity.Y = this.velocity.Y*1.2f;
                                                            return;
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    else
                                    {
                                        if (this.aiStyle == 8)
                                        {
                                            this.TargetClosestTopLane(true);
                                            this.velocity.X = this.velocity.X*0.93f;
                                            if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                            {
                                                this.velocity.X = 0f;
                                            }
                                            if (this.ai[0] == 0f)
                                            {
                                                this.ai[0] = 500f;
                                            }
                                            if (this.type == 172)
                                            {
                                                if (this.alpha < 255)
                                                {
                                                    this.alpha++;
                                                }
                                                if (this.justHit)
                                                {
                                                    this.alpha = 0;
                                                }
                                            }
                                            if (this.ai[2] != 0f && this.ai[3] != 0f)
                                            {
                                                if (this.type == 172)
                                                {
                                                    this.alpha = 255;
                                                }
                                                Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 8);
                                                for (int num209 = 0; num209 < 50; num209++)
                                                {
                                                    if (this.type == 29 || this.type == 45)
                                                    {
                                                        int num210 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 27, 0f, 0f, 100, default(Color), (float) Main.rand.Next(1, 3));
                                                        Main.dust[num210].velocity *= 3f;
                                                        if (Main.dust[num210].scale > 1f)
                                                        {
                                                            Main.dust[num210].noGravity = true;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.type == 32)
                                                        {
                                                            int num211 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 172, 0f, 0f, 100, default(Color), 1.5f);
                                                            Main.dust[num211].velocity *= 3f;
                                                            Main.dust[num211].noGravity = true;
                                                        }
                                                        else
                                                        {
                                                            if (this.type == 283 || this.type == 284)
                                                            {
                                                                int num212 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 173, 0f, 0f, 0, default(Color), 1f);
                                                                Main.dust[num212].velocity *= 2f;
                                                                Main.dust[num212].scale = 1.4f;
                                                            }
                                                            else
                                                            {
                                                                if (this.type == 285 || this.type == 286)
                                                                {
                                                                    int num213 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 174, 0f, 0f, 100, default(Color), 1.5f);
                                                                    Main.dust[num213].velocity *= 3f;
                                                                    Main.dust[num213].noGravity = true;
                                                                }
                                                                else
                                                                {
                                                                    if (this.type == 281 || this.type == 282)
                                                                    {
                                                                        int num214 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 175, 0f, 0f, 100, default(Color), 1.5f);
                                                                        Main.dust[num214].velocity *= 3f;
                                                                        Main.dust[num214].noGravity = true;
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.type == 172)
                                                                        {
                                                                            int num215 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 106, 0f, 0f, 100, default(Color), 2.5f);
                                                                            Main.dust[num215].velocity *= 3f;
                                                                            Main.dust[num215].noGravity = true;
                                                                        }
                                                                        else
                                                                        {
                                                                            int num216 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 2.5f);
                                                                            Main.dust[num216].velocity *= 3f;
                                                                            Main.dust[num216].noGravity = true;
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                this.position.X = this.ai[2]*16f - (float) (this.width/2) + 8f;
                                                this.position.Y = this.ai[3]*16f - (float) this.height;
                                                this.velocity.X = 0f;
                                                this.velocity.Y = 0f;
                                                this.ai[2] = 0f;
                                                this.ai[3] = 0f;
                                                Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 8);
                                                for (int num217 = 0; num217 < 50; num217++)
                                                {
                                                    if (this.type == 29 || this.type == 45)
                                                    {
                                                        int num218 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 27, 0f, 0f, 100, default(Color), (float) Main.rand.Next(1, 3));
                                                        Main.dust[num218].velocity *= 3f;
                                                        if (Main.dust[num218].scale > 1f)
                                                        {
                                                            Main.dust[num218].noGravity = true;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.type == 32)
                                                        {
                                                            int num219 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 172, 0f, 0f, 100, default(Color), 1.5f);
                                                            Main.dust[num219].velocity *= 3f;
                                                            Main.dust[num219].noGravity = true;
                                                        }
                                                        else
                                                        {
                                                            if (this.type == 172)
                                                            {
                                                                int num220 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 106, 0f, 0f, 100, default(Color), 2.5f);
                                                                Main.dust[num220].velocity *= 3f;
                                                                Main.dust[num220].noGravity = true;
                                                            }
                                                            else
                                                            {
                                                                if (this.type == 283 || this.type == 284)
                                                                {
                                                                    int num221 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 173, 0f, 0f, 0, default(Color), 1f);
                                                                    Main.dust[num221].velocity *= 2f;
                                                                    Main.dust[num221].scale = 1.4f;
                                                                }
                                                                else
                                                                {
                                                                    if (this.type == 285 || this.type == 286)
                                                                    {
                                                                        int num222 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 174, 0f, 0f, 100, default(Color), 1.5f);
                                                                        Main.dust[num222].velocity *= 3f;
                                                                        Main.dust[num222].noGravity = true;
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.type == 281 || this.type == 282)
                                                                        {
                                                                            int num223 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 175, 0f, 0f, 100, default(Color), 1.5f);
                                                                            Main.dust[num223].velocity *= 3f;
                                                                            Main.dust[num223].noGravity = true;
                                                                        }
                                                                        else
                                                                        {
                                                                            int num224 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 2.5f);
                                                                            Main.dust[num224].velocity *= 3f;
                                                                            Main.dust[num224].noGravity = true;
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            this.ai[0] += 1f;
                                            if (this.type == 283 || this.type == 284)
                                            {
                                                if (this.ai[0] == 50f || this.ai[0] == 100f || this.ai[0] == 150f || this.ai[0] == 200f || this.ai[0] == 250f)
                                                {
                                                    this.ai[1] = 30f;
                                                    this.netUpdate = true;
                                                }
                                                if (this.ai[0] >= 400f)
                                                {
                                                    this.ai[0] = 700f;
                                                }
                                            }
                                            else
                                            {
                                                if (this.type == 172 && (this.ai[0] == 75f || this.ai[0] == 150f || this.ai[0] == 225f || this.ai[0] == 300f || this.ai[0] == 375f || this.ai[0] == 450f))
                                                {
                                                    this.ai[1] = 30f;
                                                    this.netUpdate = true;
                                                }
                                            }
                                            if (this.type == 281 || this.type == 282)
                                            {
                                                if (this.ai[0] == 20f || this.ai[0] == 40f || this.ai[0] == 60f || this.ai[0] == 120f || this.ai[0] == 140f || this.ai[0] == 160f || this.ai[0] == 220f || this.ai[0] == 240f || this.ai[0] == 260f)
                                                {
                                                    this.ai[1] = 30f;
                                                    this.netUpdate = true;
                                                }
                                                if (this.ai[0] >= 460f)
                                                {
                                                    this.ai[0] = 700f;
                                                }
                                            }
                                            else
                                            {
                                                if (this.ai[0] == 100f || this.ai[0] == 200f || this.ai[0] == 300f)
                                                {
                                                    this.ai[1] = 30f;
                                                    this.netUpdate = true;
                                                }
                                            }
                                            if ((this.type == 285 || this.type == 286) && this.ai[0] > 400f)
                                            {
                                                this.ai[0] = 650f;
                                            }
                                            if (this.ai[0] >= 650f && Main.netMode != 1)
                                            {
                                                this.ai[0] = 1f;
                                                int num225 = (int) Main.player[this.target].position.X/16;
                                                int num226 = (int) Main.player[this.target].position.Y/16;
                                                int num227 = (int) this.position.X/16;
                                                int num228 = (int) this.position.Y/16;
                                                int num229 = 20;
                                                int num230 = 0;
                                                bool flag27 = false;
                                                if (Math.Abs(this.position.X - Main.player[this.target].position.X) + Math.Abs(this.position.Y - Main.player[this.target].position.Y) > 2000f)
                                                {
                                                    num230 = 100;
                                                    flag27 = true;
                                                }
                                                while (!flag27 && num230 < 100)
                                                {
                                                    num230++;
                                                    int num231 = Main.rand.Next(num225 - num229, num225 + num229);
                                                    int num232 = Main.rand.Next(num226 - num229, num226 + num229);
                                                    for (int num233 = num232; num233 < num226 + num229; num233++)
                                                    {
                                                        if ((num233 < num226 - 4 || num233 > num226 + 4 || num231 < num225 - 4 || num231 > num225 + 4) && (num233 < num228 - 1 || num233 > num228 + 1 || num231 < num227 - 1 || num231 > num227 + 1) && Main.tile[num231, num233].nactive())
                                                        {
                                                            bool flag28 = true;
                                                            if ((this.type == 32 || (this.type >= 281 && this.type <= 286)) && !Main.wallDungeon[(int) Main.tile[num231, num233 - 1].wall])
                                                            {
                                                                flag28 = false;
                                                            }
                                                            else
                                                            {
                                                                if (Main.tile[num231, num233 - 1].lava())
                                                                {
                                                                    flag28 = false;
                                                                }
                                                            }
                                                            if (flag28 && Main.tileSolid[(int) Main.tile[num231, num233].type] && !Collision.SolidTiles(num231 - 1, num231 + 1, num233 - 4, num233 - 1))
                                                            {
                                                                this.ai[1] = 20f;
                                                                this.ai[2] = (float) num231;
                                                                this.ai[3] = (float) num233;
                                                                flag27 = true;
                                                                break;
                                                            }
                                                        }
                                                    }
                                                }
                                                this.netUpdate = true;
                                            }
                                            if (this.ai[1] > 0f)
                                            {
                                                this.ai[1] -= 1f;
                                                if (this.ai[1] == 25f)
                                                {
                                                    if (this.type >= 281 && this.type <= 286)
                                                    {
                                                        float num234 = 6f;
                                                        if (this.type == 285 || this.type == 286)
                                                        {
                                                            num234 = 8f;
                                                        }
                                                        if (this.type == 281 || this.type == 282)
                                                        {
                                                            num234 = 4f;
                                                        }
                                                        Vector2 vector22 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y);
                                                        float num235 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector22.X;
                                                        float num236 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector22.Y;
                                                        if (this.type == 283 || this.type == 284)
                                                        {
                                                            num235 += (float) Main.rand.Next(-30, 31);
                                                            num236 += (float) Main.rand.Next(-30, 31);
                                                            num235 -= Main.player[this.target].velocity.X*10f;
                                                            num236 -= Main.player[this.target].velocity.Y*10f;
                                                        }
                                                        float num237 = (float) Math.Sqrt((double) (num235*num235 + num236*num236));
                                                        num237 = num234/num237;
                                                        num235 *= num237;
                                                        num236 *= num237;
                                                        int num238 = 30;
                                                        int num239 = 290;
                                                        if (this.type == 285 || this.type == 286)
                                                        {
                                                            num239 = 291;
                                                            num238 = 10 + (1*(Main.gameTime/7200));
                                                        }
                                                        if (this.type == 281 || this.type == 282)
                                                        {
                                                            num239 = 293;
                                                            num238 = 5 + (int) (0.5f*(float) (Main.gameTime/7200));
                                                        }
                                                        if (Main.player[this.target].getRect().Intersects(NPC.TOP_AREA))
                                                        {
                                                            int num240 = Projectile.NewProjectile(vector22.X, vector22.Y, num235, num236, num239, num238, 0f, Main.myPlayer, 0f, 0f);
                                                            Main.projectile[num240].timeLeft = 300;
                                                            if (num239 == 291)
                                                            {
                                                                Main.projectile[num240].ai[0] = Main.player[this.target].center().X;
                                                                Main.projectile[num240].ai[1] = Main.player[this.target].center().Y;
                                                                Main.projectile[num240].netUpdate = true;
                                                            }
                                                            this.localAI[0] = 0f;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.type != 172)
                                                        {
                                                            Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 8);
                                                        }
                                                        if (Main.netMode != 1)
                                                        {
                                                            if (this.type == 29 || this.type == 45)
                                                            {
                                                                NPC.NewNPC((int) this.position.X + this.width/2, (int) this.position.Y - 8, 30, 0);
                                                            }
                                                            else
                                                            {
                                                                if (this.type == 32)
                                                                {
                                                                    NPC.NewNPC((int) this.position.X + this.width/2, (int) this.position.Y - 8, 33, 0); //dark spawn
                                                                }
                                                                else
                                                                {
                                                                    if (this.type == 172)
                                                                    {
                                                                        float num241 = 10f;
                                                                        Vector2 vector23 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                        float num242 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector23.X + (float) Main.rand.Next(-10, 11);
                                                                        float num243 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector23.Y + (float) Main.rand.Next(-10, 11);
                                                                        float num244 = (float) Math.Sqrt((double) (num242*num242 + num243*num243));
                                                                        num244 = num241/num244;
                                                                        num242 *= num244;
                                                                        num243 *= num244;
                                                                        int num245 = 40;
                                                                        int num246 = 129;
                                                                        int num247 = Projectile.NewProjectile(vector23.X, vector23.Y, num242, num243, num246, num245, 0f, Main.myPlayer, 0f, 0f);
                                                                        Main.projectile[num247].timeLeft = 300;
                                                                        this.localAI[0] = 0f;
                                                                    }
                                                                    else
                                                                    {
                                                                        NPC.NewNPC((int) this.position.X + this.width/2 + this.direction*8, (int) this.position.Y + 20, 25, 0);
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            if (this.type == 29 || this.type == 45)
                                            {
                                                if (Main.rand.Next(5) == 0)
                                                {
                                                    int num248 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 27, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 1.5f);
                                                    Main.dust[num248].noGravity = true;
                                                    Dust expr_FA8D_cp_0 = Main.dust[num248];
                                                    expr_FA8D_cp_0.velocity.X = expr_FA8D_cp_0.velocity.X*0.5f;
                                                    Main.dust[num248].velocity.Y = -2f;
                                                    return;
                                                }
                                            }
                                            else
                                            {
                                                if (this.type == 32)
                                                {
                                                    if (Main.rand.Next(3) != 0)
                                                    {
                                                        int num249 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 172, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 0.9f);
                                                        Main.dust[num249].noGravity = true;
                                                        Dust expr_FB66_cp_0 = Main.dust[num249];
                                                        expr_FB66_cp_0.velocity.X = expr_FB66_cp_0.velocity.X*0.3f;
                                                        Dust expr_FB86_cp_0 = Main.dust[num249];
                                                        expr_FB86_cp_0.velocity.Y = expr_FB86_cp_0.velocity.Y*0.2f;
                                                        Dust expr_FBA6_cp_0 = Main.dust[num249];
                                                        expr_FBA6_cp_0.velocity.Y = expr_FBA6_cp_0.velocity.Y - 1f;
                                                        return;
                                                    }
                                                }
                                                else
                                                {
                                                    if (this.type == 172)
                                                    {
                                                        int num250 = 1;
                                                        if (this.alpha == 255)
                                                        {
                                                            num250 = 2;
                                                        }
                                                        for (int num251 = 0; num251 < num250; num251++)
                                                        {
                                                            if (Main.rand.Next(255) > 255 - this.alpha)
                                                            {
                                                                int num252 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 106, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 1.2f);
                                                                Main.dust[num252].noGravity = true;
                                                                Dust expr_FC97_cp_0 = Main.dust[num252];
                                                                expr_FC97_cp_0.velocity.X = expr_FC97_cp_0.velocity.X*(0.1f + (float) Main.rand.Next(30)*0.01f);
                                                                Dust expr_FCCB_cp_0 = Main.dust[num252];
                                                                expr_FCCB_cp_0.velocity.Y = expr_FCCB_cp_0.velocity.Y*(0.1f + (float) Main.rand.Next(30)*0.01f);
                                                                Main.dust[num252].scale *= 1f + (float) Main.rand.Next(6)*0.1f;
                                                            }
                                                        }
                                                        return;
                                                    }
                                                    if (this.type == 283 || this.type == 284)
                                                    {
                                                        if (Main.rand.Next(2) == 0)
                                                        {
                                                            int num253 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 173, 0f, 0f, 0, default(Color), 1f);
                                                            Dust expr_FDCB_cp_0 = Main.dust[num253];
                                                            expr_FDCB_cp_0.velocity.X = expr_FDCB_cp_0.velocity.X*0.5f;
                                                            Dust expr_FDEB_cp_0 = Main.dust[num253];
                                                            expr_FDEB_cp_0.velocity.Y = expr_FDEB_cp_0.velocity.Y*0.5f;
                                                            return;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.type == 285 || this.type == 286)
                                                        {
                                                            if (Main.rand.Next(2) == 0)
                                                            {
                                                                int num254 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 174, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 1f);
                                                                Main.dust[num254].noGravity = true;
                                                                Main.dust[num254].velocity *= 0.4f;
                                                                Dust expr_FEDA_cp_0 = Main.dust[num254];
                                                                expr_FEDA_cp_0.velocity.Y = expr_FEDA_cp_0.velocity.Y - 0.7f;
                                                                return;
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (this.type == 281 || this.type == 282)
                                                            {
                                                                if (Main.rand.Next(2) == 0)
                                                                {
                                                                    int num255 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 175, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 0.1f);
                                                                    Main.dust[num255].noGravity = true;
                                                                    Main.dust[num255].velocity *= 0.5f;
                                                                    Main.dust[num255].fadeIn = 1.2f;
                                                                    return;
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (Main.rand.Next(2) == 0)
                                                                {
                                                                    int num256 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 6, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 2f);
                                                                    Main.dust[num256].noGravity = true;
                                                                    Dust expr_1006C_cp_0 = Main.dust[num256];
                                                                    expr_1006C_cp_0.velocity.X = expr_1006C_cp_0.velocity.X*1f;
                                                                    Dust expr_1008C_cp_0 = Main.dust[num256];
                                                                    expr_1008C_cp_0.velocity.Y = expr_1008C_cp_0.velocity.Y*1f;
                                                                    return;
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else
                                        {
                                            if (this.aiStyle == 9)
                                            {
                                                if (this.target == 255)
                                                {
                                                    this.TargetClosest(true);
                                                    float num257 = 6f;
                                                    if (this.type == 25)
                                                    {
                                                        num257 = 5f;
                                                    }
                                                    if (this.type == 112)
                                                    {
                                                        num257 = 7f;
                                                    }
                                                    Vector2 vector24 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                    float num258 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector24.X;
                                                    float num259 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector24.Y;
                                                    float num260 = (float) Math.Sqrt((double) (num258*num258 + num259*num259));
                                                    num260 = num257/num260;
                                                    this.velocity.X = num258*num260;
                                                    this.velocity.Y = num259*num260;
                                                }
                                                if (this.type == 112)
                                                {
                                                    this.ai[0] += 1f;
                                                    if (this.ai[0] > 3f)
                                                    {
                                                        this.ai[0] = 3f;
                                                    }
                                                    if (this.ai[0] == 2f)
                                                    {
                                                        this.position += this.velocity;
                                                        Main.PlaySound(4, (int) this.position.X, (int) this.position.Y, 9);
                                                        for (int num261 = 0; num261 < 20; num261++)
                                                        {
                                                            int num262 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 18, 0f, 0f, 100, default(Color), 1.8f);
                                                            Main.dust[num262].velocity *= 1.3f;
                                                            Main.dust[num262].velocity += this.velocity;
                                                            Main.dust[num262].noGravity = true;
                                                        }
                                                    }
                                                }
                                                if (this.type == 112 && Collision.SolidCollision(this.position, this.width, this.height))
                                                {
                                                    int arg_1036D_0 = Main.netMode;
                                                    this.StrikeNPC(999, 0f, 0, false, false);
                                                }
                                                if (this.timeLeft > 100)
                                                {
                                                    this.timeLeft = 100;
                                                }
                                                for (int num263 = 0; num263 < 2; num263++)
                                                {
                                                    if (this.type == 30)
                                                    {
                                                        int num264 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 27, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 2f);
                                                        Main.dust[num264].noGravity = true;
                                                        Main.dust[num264].velocity *= 0.3f;
                                                        Dust expr_10458_cp_0 = Main.dust[num264];
                                                        expr_10458_cp_0.velocity.X = expr_10458_cp_0.velocity.X - this.velocity.X*0.2f;
                                                        Dust expr_10484_cp_0 = Main.dust[num264];
                                                        expr_10484_cp_0.velocity.Y = expr_10484_cp_0.velocity.Y - this.velocity.Y*0.2f;
                                                    }
                                                    else
                                                    {
                                                        if (this.type == 33)
                                                        {
                                                            this.timeLeft--;
                                                            if (this.timeLeft <= 0)
                                                            {
                                                                this.active = false;
                                                            }
                                                            for (int num265 = 0; num265 < 3; num265++)
                                                            {
                                                                float num266 = this.velocity.X/3f*(float) num263;
                                                                float num267 = this.velocity.Y/3f*(float) num263;
                                                                int num268 = 2;
                                                                int num269 = Dust.NewDust(new Vector2(this.position.X + (float) num268, this.position.Y + (float) num268), this.width - num268*2, this.height - num268*2, 172, 0f, 0f, 100, default(Color), 1.2f);
                                                                Main.dust[num269].noGravity = true;
                                                                Main.dust[num269].velocity *= 0.1f;
                                                                Main.dust[num269].velocity += this.velocity*0.5f;
                                                                Dust expr_105CE_cp_0 = Main.dust[num269];
                                                                expr_105CE_cp_0.position.X = expr_105CE_cp_0.position.X - num266;
                                                                Dust expr_105ED_cp_0 = Main.dust[num269];
                                                                expr_105ED_cp_0.position.Y = expr_105ED_cp_0.position.Y - num267;
                                                            }
                                                            if (Main.rand.Next(5) == 0)
                                                            {
                                                                int num270 = 2;
                                                                int num271 = Dust.NewDust(new Vector2(this.position.X + (float) num270, this.position.Y + (float) num270), this.width - num270*2, this.height - num270*2, 172, 0f, 0f, 100, default(Color), 0.6f);
                                                                Main.dust[num271].velocity *= 0.25f;
                                                                Main.dust[num271].velocity += this.velocity*0.5f;
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (this.type == 112)
                                                            {
                                                                int num272 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 18, this.velocity.X*0.1f, this.velocity.Y*0.1f, 80, default(Color), 1.3f);
                                                                Main.dust[num272].velocity *= 0.3f;
                                                                Main.dust[num272].noGravity = true;
                                                            }
                                                            else
                                                            {
                                                                Lighting.addLight((int) ((this.position.X + (float) (this.width/2))/16f), (int) ((this.position.Y + (float) (this.height/2))/16f), 1f, 0.3f, 0.1f);
                                                                int num273 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 6, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 2f);
                                                                Main.dust[num273].noGravity = true;
                                                                Dust expr_1086B_cp_0 = Main.dust[num273];
                                                                expr_1086B_cp_0.velocity.X = expr_1086B_cp_0.velocity.X*0.3f;
                                                                Dust expr_1088B_cp_0 = Main.dust[num273];
                                                                expr_1088B_cp_0.velocity.Y = expr_1088B_cp_0.velocity.Y*0.3f;
                                                            }
                                                        }
                                                    }
                                                }
                                                this.rotation += 0.4f*(float) this.direction;
                                                return;
                                            }
                                            if (this.aiStyle == 10)
                                            {
                                                float num274 = 1f;
                                                float num275 = 0.011f;
                                                this.TargetClosest(true);
                                                Vector2 vector25 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                float num276 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector25.X;
                                                float num277 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector25.Y;
                                                float num278 = (float) Math.Sqrt((double) (num276*num276 + num277*num277));
                                                float num279 = num278;
                                                this.ai[1] += 1f;
                                                if (this.ai[1] > 600f)
                                                {
                                                    num275 *= 8f;
                                                    num274 = 4f;
                                                    if (this.ai[1] > 650f)
                                                    {
                                                        this.ai[1] = 0f;
                                                    }
                                                }
                                                else
                                                {
                                                    if (num279 < 250f)
                                                    {
                                                        this.ai[0] += 0.9f;
                                                        if (this.ai[0] > 0f)
                                                        {
                                                            this.velocity.Y = this.velocity.Y + 0.019f;
                                                        }
                                                        else
                                                        {
                                                            this.velocity.Y = this.velocity.Y - 0.019f;
                                                        }
                                                        if (this.ai[0] < -100f || this.ai[0] > 100f)
                                                        {
                                                            this.velocity.X = this.velocity.X + 0.019f;
                                                        }
                                                        else
                                                        {
                                                            this.velocity.X = this.velocity.X - 0.019f;
                                                        }
                                                        if (this.ai[0] > 200f)
                                                        {
                                                            this.ai[0] = -200f;
                                                        }
                                                    }
                                                }
                                                if (num279 > 350f)
                                                {
                                                    num274 = 5f;
                                                    num275 = 0.3f;
                                                }
                                                else
                                                {
                                                    if (num279 > 300f)
                                                    {
                                                        num274 = 3f;
                                                        num275 = 0.2f;
                                                    }
                                                    else
                                                    {
                                                        if (num279 > 250f)
                                                        {
                                                            num274 = 1.5f;
                                                            num275 = 0.1f;
                                                        }
                                                    }
                                                }
                                                num278 = num274/num278;
                                                num276 *= num278;
                                                num277 *= num278;
                                                if (Main.player[this.target].dead)
                                                {
                                                    num276 = (float) this.direction*num274/2f;
                                                    num277 = -num274/2f;
                                                }
                                                if (this.velocity.X < num276)
                                                {
                                                    this.velocity.X = this.velocity.X + num275;
                                                }
                                                else
                                                {
                                                    if (this.velocity.X > num276)
                                                    {
                                                        this.velocity.X = this.velocity.X - num275;
                                                    }
                                                }
                                                if (this.velocity.Y < num277)
                                                {
                                                    this.velocity.Y = this.velocity.Y + num275;
                                                }
                                                else
                                                {
                                                    if (this.velocity.Y > num277)
                                                    {
                                                        this.velocity.Y = this.velocity.Y - num275;
                                                    }
                                                }
                                                if (num276 > 0f)
                                                {
                                                    this.spriteDirection = -1;
                                                    this.rotation = (float) Math.Atan2((double) num277, (double) num276);
                                                }
                                                if (num276 < 0f)
                                                {
                                                    this.spriteDirection = 1;
                                                    this.rotation = (float) Math.Atan2((double) num277, (double) num276) + 3.14f;
                                                }
                                                if (this.type == 289)
                                                {
                                                    if (this.justHit)
                                                    {
                                                        this.ai[2] = 0f;
                                                        this.ai[3] = 0f;
                                                    }
                                                    vector25 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                    num276 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector25.X;
                                                    num277 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector25.Y;
                                                    num278 = (float) Math.Sqrt((double) (num276*num276 + num277*num277));
                                                    if (num278 > 500f)
                                                    {
                                                        this.ai[2] = 0f;
                                                        this.ai[3] = 0f;
                                                        return;
                                                    }
                                                    this.ai[2] += 1f;
                                                    if (this.ai[3] == 0f)
                                                    {
                                                        if (this.ai[2] > 120f)
                                                        {
                                                            this.ai[2] = 0f;
                                                            this.ai[3] = 1f;
                                                            this.netUpdate = true;
                                                            return;
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.ai[2] > 40f)
                                                        {
                                                            this.ai[3] = 0f;
                                                        }
                                                        if (Main.netMode != 1 && this.ai[2] == 20f)
                                                        {
                                                            float num280 = 6f;
                                                            int num281 = 25;
                                                            int num282 = 299;
                                                            num278 = num280/num278;
                                                            num276 *= num278;
                                                            num277 *= num278;
                                                            Projectile.NewProjectile(vector25.X, vector25.Y, num276, num277, num282, num281, 0f, Main.myPlayer, 0f, 0f);
                                                            return;
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (this.aiStyle == 11)
                                                {
                                                    if (this.ai[0] == 0f && Main.netMode != 1)
                                                    {
                                                        this.TargetClosest(true);
                                                        this.ai[0] = 1f;
                                                        if (this.type != 68)
                                                        {
                                                            int num283 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) this.position.Y + this.height/2, 36, this.whoAmI);
                                                            Main.npc[num283].ai[0] = -1f;
                                                            Main.npc[num283].ai[1] = (float) this.whoAmI;
                                                            Main.npc[num283].target = this.target;
                                                            Main.npc[num283].netUpdate = true;
                                                            num283 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) this.position.Y + this.height/2, 36, this.whoAmI);
                                                            Main.npc[num283].ai[0] = 1f;
                                                            Main.npc[num283].ai[1] = (float) this.whoAmI;
                                                            Main.npc[num283].ai[3] = 150f;
                                                            Main.npc[num283].target = this.target;
                                                            Main.npc[num283].netUpdate = true;
                                                        }
                                                    }
                                                    if (this.type == 68 && this.ai[1] != 3f && this.ai[1] != 2f)
                                                    {
                                                        Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                        this.ai[1] = 2f;
                                                    }
                                                    if (Main.player[this.target].dead || Math.Abs(this.position.X - Main.player[this.target].position.X) > 2000f || Math.Abs(this.position.Y - Main.player[this.target].position.Y) > 2000f)
                                                    {
                                                        this.TargetClosest(true);
                                                        if (Main.player[this.target].dead || Math.Abs(this.position.X - Main.player[this.target].position.X) > 2000f || Math.Abs(this.position.Y - Main.player[this.target].position.Y) > 2000f)
                                                        {
                                                            this.ai[1] = 3f;
                                                        }
                                                    }
                                                    if (Main.dayTime && this.ai[1] != 3f && this.ai[1] != 2f)
                                                    {
                                                        this.ai[1] = 2f;
                                                        Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                    }
                                                    if (this.ai[1] == 0f)
                                                    {
                                                        this.defense = 10;
                                                        this.ai[2] += 1f;
                                                        if (this.ai[2] >= 800f)
                                                        {
                                                            this.ai[2] = 0f;
                                                            this.ai[1] = 1f;
                                                            this.TargetClosest(true);
                                                            this.netUpdate = true;
                                                        }
                                                        this.rotation = this.velocity.X/15f;
                                                        if (this.position.Y > Main.player[this.target].position.Y - 250f)
                                                        {
                                                            if (this.velocity.Y > 0f)
                                                            {
                                                                this.velocity.Y = this.velocity.Y*0.98f;
                                                            }
                                                            this.velocity.Y = this.velocity.Y - 0.02f;
                                                            if (this.velocity.Y > 2f)
                                                            {
                                                                this.velocity.Y = 2f;
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (this.position.Y < Main.player[this.target].position.Y - 250f)
                                                            {
                                                                if (this.velocity.Y < 0f)
                                                                {
                                                                    this.velocity.Y = this.velocity.Y*0.98f;
                                                                }
                                                                this.velocity.Y = this.velocity.Y + 0.02f;
                                                                if (this.velocity.Y < -2f)
                                                                {
                                                                    this.velocity.Y = -2f;
                                                                }
                                                            }
                                                        }
                                                        if (this.position.X + (float) (this.width/2) > Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))
                                                        {
                                                            if (this.velocity.X > 0f)
                                                            {
                                                                this.velocity.X = this.velocity.X*0.98f;
                                                            }
                                                            this.velocity.X = this.velocity.X - 0.05f;
                                                            if (this.velocity.X > 8f)
                                                            {
                                                                this.velocity.X = 8f;
                                                            }
                                                        }
                                                        if (this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))
                                                        {
                                                            if (this.velocity.X < 0f)
                                                            {
                                                                this.velocity.X = this.velocity.X*0.98f;
                                                            }
                                                            this.velocity.X = this.velocity.X + 0.05f;
                                                            if (this.velocity.X < -8f)
                                                            {
                                                                this.velocity.X = -8f;
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.ai[1] == 1f)
                                                        {
                                                            this.defense = 0;
                                                            this.ai[2] += 1f;
                                                            if (this.ai[2] == 2f)
                                                            {
                                                                Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                            }
                                                            if (this.ai[2] >= 400f)
                                                            {
                                                                this.ai[2] = 0f;
                                                                this.ai[1] = 0f;
                                                            }
                                                            this.rotation += (float) this.direction*0.3f;
                                                            Vector2 vector26 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                            float num284 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector26.X;
                                                            float num285 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector26.Y;
                                                            float num286 = (float) Math.Sqrt((double) (num284*num284 + num285*num285));
                                                            num286 = 1.5f/num286;
                                                            this.velocity.X = num284*num286;
                                                            this.velocity.Y = num285*num286;
                                                        }
                                                        else
                                                        {
                                                            if (this.ai[1] == 2f)
                                                            {
                                                                this.damage = 9999;
                                                                this.defense = 9999;
                                                                this.rotation += (float) this.direction*0.3f;
                                                                Vector2 vector27 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                float num287 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector27.X;
                                                                float num288 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector27.Y;
                                                                float num289 = (float) Math.Sqrt((double) (num287*num287 + num288*num288));
                                                                num289 = 8f/num289;
                                                                this.velocity.X = num287*num289;
                                                                this.velocity.Y = num288*num289;
                                                            }
                                                            else
                                                            {
                                                                if (this.ai[1] == 3f)
                                                                {
                                                                    this.velocity.Y = this.velocity.Y + 0.1f;
                                                                    if (this.velocity.Y < 0f)
                                                                    {
                                                                        this.velocity.Y = this.velocity.Y*0.95f;
                                                                    }
                                                                    this.velocity.X = this.velocity.X*0.95f;
                                                                    if (this.timeLeft > 500)
                                                                    {
                                                                        this.timeLeft = 500;
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    if (this.ai[1] != 2f && this.ai[1] != 3f && this.type != 68)
                                                    {
                                                        int num290 = Dust.NewDust(new Vector2(this.position.X + (float) (this.width/2) - 15f - this.velocity.X*5f, this.position.Y + (float) this.height - 2f), 30, 10, 5, -this.velocity.X*0.2f, 3f, 0, default(Color), 2f);
                                                        Main.dust[num290].noGravity = true;
                                                        Dust expr_11940_cp_0 = Main.dust[num290];
                                                        expr_11940_cp_0.velocity.X = expr_11940_cp_0.velocity.X*1.3f;
                                                        Dust expr_11960_cp_0 = Main.dust[num290];
                                                        expr_11960_cp_0.velocity.X = expr_11960_cp_0.velocity.X + this.velocity.X*0.4f;
                                                        Dust expr_1198C_cp_0 = Main.dust[num290];
                                                        expr_1198C_cp_0.velocity.Y = expr_1198C_cp_0.velocity.Y + (2f + this.velocity.Y);
                                                        for (int num291 = 0; num291 < 2; num291++)
                                                        {
                                                            num290 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 120f), this.width, 60, 5, this.velocity.X, this.velocity.Y, 0, default(Color), 2f);
                                                            Main.dust[num290].noGravity = true;
                                                            Main.dust[num290].velocity -= this.velocity;
                                                            Dust expr_11A4F_cp_0 = Main.dust[num290];
                                                            expr_11A4F_cp_0.velocity.Y = expr_11A4F_cp_0.velocity.Y + 5f;
                                                        }
                                                        return;
                                                    }
                                                }
                                                else
                                                {
                                                    if (this.aiStyle == 12)
                                                    {
                                                        this.spriteDirection = -(int) this.ai[0];
                                                        if (!Main.npc[(int) this.ai[1]].active || Main.npc[(int) this.ai[1]].aiStyle != 11)
                                                        {
                                                            this.ai[2] += 10f;
                                                            if (this.ai[2] > 50f || Main.netMode != 2)
                                                            {
                                                                this.life = -1;
                                                                this.HitEffect(0, 10.0);
                                                                this.active = false;
                                                            }
                                                        }
                                                        if (this.ai[2] == 0f || this.ai[2] == 3f)
                                                        {
                                                            if (Main.npc[(int) this.ai[1]].ai[1] == 3f && this.timeLeft > 10)
                                                            {
                                                                this.timeLeft = 10;
                                                            }
                                                            if (Main.npc[(int) this.ai[1]].ai[1] != 0f)
                                                            {
                                                                if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y - 100f)
                                                                {
                                                                    if (this.velocity.Y > 0f)
                                                                    {
                                                                        this.velocity.Y = this.velocity.Y*0.96f;
                                                                    }
                                                                    this.velocity.Y = this.velocity.Y - 0.07f;
                                                                    if (this.velocity.Y > 6f)
                                                                    {
                                                                        this.velocity.Y = 6f;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y - 100f)
                                                                    {
                                                                        if (this.velocity.Y < 0f)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y*0.96f;
                                                                        }
                                                                        this.velocity.Y = this.velocity.Y + 0.07f;
                                                                        if (this.velocity.Y < -6f)
                                                                        {
                                                                            this.velocity.Y = -6f;
                                                                        }
                                                                    }
                                                                }
                                                                if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 120f*this.ai[0])
                                                                {
                                                                    if (this.velocity.X > 0f)
                                                                    {
                                                                        this.velocity.X = this.velocity.X*0.96f;
                                                                    }
                                                                    this.velocity.X = this.velocity.X - 0.1f;
                                                                    if (this.velocity.X > 8f)
                                                                    {
                                                                        this.velocity.X = 8f;
                                                                    }
                                                                }
                                                                if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 120f*this.ai[0])
                                                                {
                                                                    if (this.velocity.X < 0f)
                                                                    {
                                                                        this.velocity.X = this.velocity.X*0.96f;
                                                                    }
                                                                    this.velocity.X = this.velocity.X + 0.1f;
                                                                    if (this.velocity.X < -8f)
                                                                    {
                                                                        this.velocity.X = -8f;
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                this.ai[3] += 1f;
                                                                if (this.ai[3] >= 300f)
                                                                {
                                                                    this.ai[2] += 1f;
                                                                    this.ai[3] = 0f;
                                                                    this.netUpdate = true;
                                                                }
                                                                if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y + 230f)
                                                                {
                                                                    if (this.velocity.Y > 0f)
                                                                    {
                                                                        this.velocity.Y = this.velocity.Y*0.96f;
                                                                    }
                                                                    this.velocity.Y = this.velocity.Y - 0.04f;
                                                                    if (this.velocity.Y > 3f)
                                                                    {
                                                                        this.velocity.Y = 3f;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y + 230f)
                                                                    {
                                                                        if (this.velocity.Y < 0f)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y*0.96f;
                                                                        }
                                                                        this.velocity.Y = this.velocity.Y + 0.04f;
                                                                        if (this.velocity.Y < -3f)
                                                                        {
                                                                            this.velocity.Y = -3f;
                                                                        }
                                                                    }
                                                                }
                                                                if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0])
                                                                {
                                                                    if (this.velocity.X > 0f)
                                                                    {
                                                                        this.velocity.X = this.velocity.X*0.96f;
                                                                    }
                                                                    this.velocity.X = this.velocity.X - 0.07f;
                                                                    if (this.velocity.X > 8f)
                                                                    {
                                                                        this.velocity.X = 8f;
                                                                    }
                                                                }
                                                                if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0])
                                                                {
                                                                    if (this.velocity.X < 0f)
                                                                    {
                                                                        this.velocity.X = this.velocity.X*0.96f;
                                                                    }
                                                                    this.velocity.X = this.velocity.X + 0.07f;
                                                                    if (this.velocity.X < -8f)
                                                                    {
                                                                        this.velocity.X = -8f;
                                                                    }
                                                                }
                                                            }
                                                            Vector2 vector28 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                            float num292 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector28.X;
                                                            float num293 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector28.Y;
                                                            Math.Sqrt((double) (num292*num292 + num293*num293));
                                                            this.rotation = (float) Math.Atan2((double) num293, (double) num292) + 1.57f;
                                                            return;
                                                        }
                                                        if (this.ai[2] == 1f)
                                                        {
                                                            Vector2 vector29 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                            float num294 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector29.X;
                                                            float num295 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector29.Y;
                                                            float num296 = (float) Math.Sqrt((double) (num294*num294 + num295*num295));
                                                            this.rotation = (float) Math.Atan2((double) num295, (double) num294) + 1.57f;
                                                            this.velocity.X = this.velocity.X*0.95f;
                                                            this.velocity.Y = this.velocity.Y - 0.1f;
                                                            if (this.velocity.Y < -8f)
                                                            {
                                                                this.velocity.Y = -8f;
                                                            }
                                                            if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y - 200f)
                                                            {
                                                                this.TargetClosest(true);
                                                                this.ai[2] = 2f;
                                                                vector29 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                num294 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector29.X;
                                                                num295 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector29.Y;
                                                                num296 = (float) Math.Sqrt((double) (num294*num294 + num295*num295));
                                                                num296 = 18f/num296;
                                                                this.velocity.X = num294*num296;
                                                                this.velocity.Y = num295*num296;
                                                                this.netUpdate = true;
                                                                return;
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (this.ai[2] == 2f)
                                                            {
                                                                if (this.position.Y > Main.player[this.target].position.Y || this.velocity.Y < 0f)
                                                                {
                                                                    this.ai[2] = 3f;
                                                                    return;
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.ai[2] == 4f)
                                                                {
                                                                    Vector2 vector30 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                    float num297 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector30.X;
                                                                    float num298 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector30.Y;
                                                                    float num299 = (float) Math.Sqrt((double) (num297*num297 + num298*num298));
                                                                    this.rotation = (float) Math.Atan2((double) num298, (double) num297) + 1.57f;
                                                                    this.velocity.Y = this.velocity.Y*0.95f;
                                                                    this.velocity.X = this.velocity.X + 0.1f*-this.ai[0];
                                                                    if (this.velocity.X < -8f)
                                                                    {
                                                                        this.velocity.X = -8f;
                                                                    }
                                                                    if (this.velocity.X > 8f)
                                                                    {
                                                                        this.velocity.X = 8f;
                                                                    }
                                                                    if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 500f || this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) + 500f)
                                                                    {
                                                                        this.TargetClosest(true);
                                                                        this.ai[2] = 5f;
                                                                        vector30 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                        num297 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector30.X;
                                                                        num298 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector30.Y;
                                                                        num299 = (float) Math.Sqrt((double) (num297*num297 + num298*num298));
                                                                        num299 = 17f/num299;
                                                                        this.velocity.X = num297*num299;
                                                                        this.velocity.Y = num298*num299;
                                                                        this.netUpdate = true;
                                                                        return;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.ai[2] == 5f && ((this.velocity.X > 0f && this.position.X + (float) (this.width/2) > Main.player[this.target].position.X + (float) (Main.player[this.target].width/2)) || (this.velocity.X < 0f && this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))))
                                                                    {
                                                                        this.ai[2] = 0f;
                                                                        return;
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.aiStyle == 13)
                                                        {
                                                            if (this.ai[0] < 0f || this.ai[0] >= (float) Main.maxTilesX || this.ai[1] < 0f || this.ai[1] >= (float) Main.maxTilesX)
                                                            {
                                                                return;
                                                            }
                                                            if (Main.tile[(int) this.ai[0], (int) this.ai[1]] == null)
                                                            {
                                                                Main.tile[(int) this.ai[0], (int) this.ai[1]] = new Tile();
                                                            }
                                                            if (!Main.tile[(int) this.ai[0], (int) this.ai[1]].active())
                                                            {
                                                                this.life = -1;
                                                                this.HitEffect(0, 10.0);
                                                                this.active = false;
                                                                return;
                                                            }
                                                            this.TargetClosest(true);
                                                            float num300 = 0.035f;
                                                            float num301 = 150f;
                                                            if (this.type == 43)
                                                            {
                                                                num301 = 250f;
                                                            }
                                                            if (this.type == 101)
                                                            {
                                                                num301 = 175f;
                                                            }
                                                            if (this.type == 259)
                                                            {
                                                                num301 = 100f;
                                                            }
                                                            if (this.type == 175)
                                                            {
                                                                num301 = 500f;
                                                                num300 = 0.05f;
                                                            }
                                                            if (this.type == 260)
                                                            {
                                                                num301 = 350f;
                                                                num300 = 0.15f;
                                                            }
                                                            this.ai[2] += 1f;
                                                            if (this.ai[2] > 300f)
                                                            {
                                                                num301 = (float) ((int) ((double) num301*1.3));
                                                                if (this.ai[2] > 450f)
                                                                {
                                                                    this.ai[2] = 0f;
                                                                }
                                                            }
                                                            Vector2 vector31 = new Vector2(this.ai[0]*16f + 8f, this.ai[1]*16f + 8f);
                                                            float num302 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - (float) (this.width/2) - vector31.X;
                                                            float num303 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - (float) (this.height/2) - vector31.Y;
                                                            float num304 = (float) Math.Sqrt((double) (num302*num302 + num303*num303));
                                                            if (num304 > num301)
                                                            {
                                                                num304 = num301/num304;
                                                                num302 *= num304;
                                                                num303 *= num304;
                                                            }
                                                            if (this.position.X < this.ai[0]*16f + 8f + num302)
                                                            {
                                                                this.velocity.X = this.velocity.X + num300;
                                                                if (this.velocity.X < 0f && num302 > 0f)
                                                                {
                                                                    this.velocity.X = this.velocity.X + num300*1.5f;
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.position.X > this.ai[0]*16f + 8f + num302)
                                                                {
                                                                    this.velocity.X = this.velocity.X - num300;
                                                                    if (this.velocity.X > 0f && num302 < 0f)
                                                                    {
                                                                        this.velocity.X = this.velocity.X - num300*1.5f;
                                                                    }
                                                                }
                                                            }
                                                            if (this.position.Y < this.ai[1]*16f + 8f + num303)
                                                            {
                                                                this.velocity.Y = this.velocity.Y + num300;
                                                                if (this.velocity.Y < 0f && num303 > 0f)
                                                                {
                                                                    this.velocity.Y = this.velocity.Y + num300*1.5f;
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.position.Y > this.ai[1]*16f + 8f + num303)
                                                                {
                                                                    this.velocity.Y = this.velocity.Y - num300;
                                                                    if (this.velocity.Y > 0f && num303 < 0f)
                                                                    {
                                                                        this.velocity.Y = this.velocity.Y - num300*1.5f;
                                                                    }
                                                                }
                                                            }
                                                            if (this.type == 43)
                                                            {
                                                                if (this.velocity.X > 5f)
                                                                {
                                                                    this.velocity.X = 5f;
                                                                }
                                                                if (this.velocity.X < -5f)
                                                                {
                                                                    this.velocity.X = -5f;
                                                                }
                                                                if (this.velocity.Y > 5f)
                                                                {
                                                                    this.velocity.Y = 5f;
                                                                }
                                                                if (this.velocity.Y < -5f)
                                                                {
                                                                    this.velocity.Y = -5f;
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.type == 175)
                                                                {
                                                                    if (this.velocity.X > 6f)
                                                                    {
                                                                        this.velocity.X = 6f;
                                                                    }
                                                                    if (this.velocity.X < -6f)
                                                                    {
                                                                        this.velocity.X = -6f;
                                                                    }
                                                                    if (this.velocity.Y > 6f)
                                                                    {
                                                                        this.velocity.Y = 6f;
                                                                    }
                                                                    if (this.velocity.Y < -6f)
                                                                    {
                                                                        this.velocity.Y = -6f;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.velocity.X > 3f)
                                                                    {
                                                                        this.velocity.X = 3f;
                                                                    }
                                                                    if (this.velocity.X < -3f)
                                                                    {
                                                                        this.velocity.X = -3f;
                                                                    }
                                                                    if (this.velocity.Y > 3f)
                                                                    {
                                                                        this.velocity.Y = 3f;
                                                                    }
                                                                    if (this.velocity.Y < -3f)
                                                                    {
                                                                        this.velocity.Y = -3f;
                                                                    }
                                                                }
                                                            }
                                                            if (this.type == 259 || this.type == 260)
                                                            {
                                                                this.rotation = (float) Math.Atan2((double) num303, (double) num302) + 1.57f;
                                                            }
                                                            else
                                                            {
                                                                if (num302 > 0f)
                                                                {
                                                                    this.spriteDirection = 1;
                                                                    this.rotation = (float) Math.Atan2((double) num303, (double) num302);
                                                                }
                                                                if (num302 < 0f)
                                                                {
                                                                    this.spriteDirection = -1;
                                                                    this.rotation = (float) Math.Atan2((double) num303, (double) num302) + 3.14f;
                                                                }
                                                            }
                                                            if (this.collideX)
                                                            {
                                                                this.netUpdate = true;
                                                                this.velocity.X = this.oldVelocity.X*-0.7f;
                                                                if (this.velocity.X > 0f && this.velocity.X < 2f)
                                                                {
                                                                    this.velocity.X = 2f;
                                                                }
                                                                if (this.velocity.X < 0f && this.velocity.X > -2f)
                                                                {
                                                                    this.velocity.X = -2f;
                                                                }
                                                            }
                                                            if (this.collideY)
                                                            {
                                                                this.netUpdate = true;
                                                                this.velocity.Y = this.oldVelocity.Y*-0.7f;
                                                                if (this.velocity.Y > 0f && this.velocity.Y < 2f)
                                                                {
                                                                    this.velocity.Y = 2f;
                                                                }
                                                                if (this.velocity.Y < 0f && this.velocity.Y > -2f)
                                                                {
                                                                    this.velocity.Y = -2f;
                                                                }
                                                            }
                                                            if (Main.netMode != 1)
                                                            {
                                                                if (this.type == 101 && !Main.player[this.target].dead)
                                                                {
                                                                    if (this.justHit)
                                                                    {
                                                                        this.localAI[0] = 40f;
                                                                    }
                                                                    this.localAI[0] += 1f;
                                                                    if (this.localAI[0] >= 120f)
                                                                    {
                                                                        if (!Collision.SolidCollision(this.position, this.width, this.height) && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                        {
                                                                            float num305 = 10f;
                                                                            vector31 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                            num302 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector31.X + (float) Main.rand.Next(-10, 11);
                                                                            num303 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector31.Y + (float) Main.rand.Next(-10, 11);
                                                                            num304 = (float) Math.Sqrt((double) (num302*num302 + num303*num303));
                                                                            num304 = num305/num304;
                                                                            num302 *= num304;
                                                                            num303 *= num304;
                                                                            int num306 = this.damage;
                                                                            int num307 = 96;
                                                                            int num308 = Projectile.NewProjectile(vector31.X, vector31.Y, num302, num303, num307, num306, 0f, Main.myPlayer, 0f, 0f);
                                                                            Main.projectile[num308].timeLeft = 60;
                                                                            this.localAI[0] = 0f;
                                                                        }
                                                                        else
                                                                        {
                                                                            this.localAI[0] = 100f;
                                                                        }
                                                                    }
                                                                }
                                                                if (this.type == 260 && !Main.player[this.target].dead)
                                                                {
                                                                    if (this.justHit)
                                                                    {
                                                                        this.localAI[0] = 0f;
                                                                    }
                                                                    this.localAI[0] += 1f;
                                                                    if (this.localAI[0] >= 75)
                                                                    {
                                                                        if (!Collision.SolidCollision(this.position, this.width, this.height))
                                                                        {
                                                                            float num309 = 14f;
                                                                            vector31 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                            num302 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector31.X + (float) Main.rand.Next(-10, 11);
                                                                            float num310 = Math.Abs(num302*0.1f);
                                                                            if (num303 > 0f)
                                                                            {
                                                                                num310 = 0f;
                                                                            }
                                                                            num303 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector31.Y + (float) Main.rand.Next(-10, 11) - num310;
                                                                            num304 = (float) Math.Sqrt((double) (num302*num302 + num303*num303));
                                                                            num304 = num309/num304;
                                                                            num302 *= num304;
                                                                            num303 *= num304;
                                                                            int num311 = NPC.NewNPC((int) this.center().X, (int) this.center().Y, 33, 0);
                                                                            //fungi spawn
                                                                            //Main.npc[num311].target = this.target;
                                                                            //Main.npc[num311].velocity.X = num302;
                                                                            //Main.npc[num311].velocity.Y = num303;
                                                                            Main.npc[num311].netUpdate = true;
                                                                            this.localAI[0] = 0f;
                                                                            return;
                                                                        }
                                                                        this.localAI[0] = 250f;
                                                                        return;
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (this.aiStyle == 14)
                                                            {
                                                                if (this.type == 60 || this.type == 151)
                                                                {
                                                                    int num312 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 2f);
                                                                    Main.dust[num312].noGravity = true;
                                                                }
                                                                if (this.type == 150 && Main.rand.Next(10) == 0)
                                                                {
                                                                    int num313 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 67, this.velocity.X*0.5f, this.velocity.Y*0.5f, 90, default(Color), 1.5f);
                                                                    Main.dust[num313].noGravity = true;
                                                                    Main.dust[num313].velocity *= 0.2f;
                                                                    Main.dust[num313].noLight = true;
                                                                }
                                                                this.noGravity = true;
                                                                if (this.collideX)
                                                                {
                                                                    this.velocity.X = this.oldVelocity.X*-0.5f;
                                                                    if (this.direction == -1 && this.velocity.X > 0f && this.velocity.X < 2f)
                                                                    {
                                                                        this.velocity.X = 2f;
                                                                    }
                                                                    if (this.direction == 1 && this.velocity.X < 0f && this.velocity.X > -2f)
                                                                    {
                                                                        this.velocity.X = -2f;
                                                                    }
                                                                }
                                                                if (this.collideY)
                                                                {
                                                                    this.velocity.Y = this.oldVelocity.Y*-0.5f;
                                                                    if (this.velocity.Y > 0f && this.velocity.Y < 1f)
                                                                    {
                                                                        this.velocity.Y = 1f;
                                                                    }
                                                                    if (this.velocity.Y < 0f && this.velocity.Y > -1f)
                                                                    {
                                                                        this.velocity.Y = -1f;
                                                                    }
                                                                }
                                                                if (this.type == 226)
                                                                {
                                                                    int num314 = 1;
                                                                    int num315 = 1;
                                                                    if (this.velocity.X < 0f)
                                                                    {
                                                                        num314 = -1;
                                                                    }
                                                                    if (this.velocity.Y < 0f)
                                                                    {
                                                                        num315 = -1;
                                                                    }
                                                                    this.TargetClosest(true);
                                                                    if (!Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                    {
                                                                        this.direction = num314;
                                                                        this.directionY = num315;
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    this.TargetClosest(true);
                                                                }
                                                                if (this.type == 158)
                                                                {
                                                                    if ((double) this.position.Y < Main.worldSurface*16.0 && Main.dayTime && !Main.eclipse)
                                                                    {
                                                                        this.directionY = -1;
                                                                        this.direction *= -1;
                                                                    }
                                                                    if (this.direction == -1 && this.velocity.X > -7f)
                                                                    {
                                                                        this.velocity.X = this.velocity.X - 0.2f;
                                                                        if (this.velocity.X > 4f)
                                                                        {
                                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.velocity.X > 0f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X + 0.05f;
                                                                            }
                                                                        }
                                                                        if (this.velocity.X < -7f)
                                                                        {
                                                                            this.velocity.X = -7f;
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.direction == 1 && this.velocity.X < 7f)
                                                                        {
                                                                            this.velocity.X = this.velocity.X + 0.2f;
                                                                            if (this.velocity.X < -4f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X + 0.1f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.X < 0f)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X - 0.05f;
                                                                                }
                                                                            }
                                                                            if (this.velocity.X > 7f)
                                                                            {
                                                                                this.velocity.X = 7f;
                                                                            }
                                                                        }
                                                                    }
                                                                    if (this.directionY == -1 && this.velocity.Y > -7f)
                                                                    {
                                                                        this.velocity.Y = this.velocity.Y - 0.2f;
                                                                        if (this.velocity.Y > 4f)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y - 0.1f;
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.velocity.Y > 0f)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y + 0.05f;
                                                                            }
                                                                        }
                                                                        if (this.velocity.Y < -7f)
                                                                        {
                                                                            this.velocity.Y = -7f;
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.directionY == 1 && this.velocity.Y < 7f)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y + 0.2f;
                                                                            if (this.velocity.Y < -4f)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y + 0.1f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.Y < 0f)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y - 0.05f;
                                                                                }
                                                                            }
                                                                            if (this.velocity.Y > 7f)
                                                                            {
                                                                                this.velocity.Y = 7f;
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.type == 226)
                                                                    {
                                                                        if (this.direction == -1 && this.velocity.X > -4f)
                                                                        {
                                                                            this.velocity.X = this.velocity.X - 0.2f;
                                                                            if (this.velocity.X > 4f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X - 0.1f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.X > 0f)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + 0.05f;
                                                                                }
                                                                            }
                                                                            if (this.velocity.X < -4f)
                                                                            {
                                                                                this.velocity.X = -4f;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.direction == 1 && this.velocity.X < 4f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X + 0.2f;
                                                                                if (this.velocity.X < -4f)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + 0.1f;
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.velocity.X < 0f)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X - 0.05f;
                                                                                    }
                                                                                }
                                                                                if (this.velocity.X > 4f)
                                                                                {
                                                                                    this.velocity.X = 4f;
                                                                                }
                                                                            }
                                                                        }
                                                                        if (this.directionY == -1 && (double) this.velocity.Y > -2.5)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y - 0.1f;
                                                                            if ((double) this.velocity.Y > 2.5)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y - 0.05f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.Y > 0f)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y + 0.03f;
                                                                                }
                                                                            }
                                                                            if ((double) this.velocity.Y < -2.5)
                                                                            {
                                                                                this.velocity.Y = -2.5f;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.directionY == 1 && (double) this.velocity.Y < 2.5)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                if ((double) this.velocity.Y < -2.5)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y + 0.05f;
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.velocity.Y < 0f)
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y - 0.03f;
                                                                                    }
                                                                                }
                                                                                if ((double) this.velocity.Y > 2.5)
                                                                                {
                                                                                    this.velocity.Y = 2.5f;
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.direction == -1 && this.velocity.X > -4f)
                                                                        {
                                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                                            if (this.velocity.X > 4f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X - 0.1f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.X > 0f)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + 0.05f;
                                                                                }
                                                                            }
                                                                            if (this.velocity.X < -4f)
                                                                            {
                                                                                this.velocity.X = -4f;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.direction == 1 && this.velocity.X < 4f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X + 0.1f;
                                                                                if (this.velocity.X < -4f)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + 0.1f;
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.velocity.X < 0f)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X - 0.05f;
                                                                                    }
                                                                                }
                                                                                if (this.velocity.X > 4f)
                                                                                {
                                                                                    this.velocity.X = 4f;
                                                                                }
                                                                            }
                                                                        }
                                                                        if (this.directionY == -1 && (double) this.velocity.Y > -1.5)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y - 0.04f;
                                                                            if ((double) this.velocity.Y > 1.5)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y - 0.05f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.Y > 0f)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y + 0.03f;
                                                                                }
                                                                            }
                                                                            if ((double) this.velocity.Y < -1.5)
                                                                            {
                                                                                this.velocity.Y = -1.5f;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.directionY == 1 && (double) this.velocity.Y < 1.5)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y + 0.04f;
                                                                                if ((double) this.velocity.Y < -1.5)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y + 0.05f;
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.velocity.Y < 0f)
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y - 0.03f;
                                                                                    }
                                                                                }
                                                                                if ((double) this.velocity.Y > 1.5)
                                                                                {
                                                                                    this.velocity.Y = 1.5f;
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                                if (this.type == 49 || /*this.type == 51 ||*/ this.type == 60 || this.type == 62 || this.type == 66 || this.type == 93 || this.type == 137 || this.type == 150 || this.type == 151 || this.type == 152)
                                                                {
                                                                    if (this.wet)
                                                                    {
                                                                        if (this.velocity.Y > 0f)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y*0.95f;
                                                                        }
                                                                        this.velocity.Y = this.velocity.Y - 0.5f;
                                                                        if (this.velocity.Y < -4f)
                                                                        {
                                                                            this.velocity.Y = -4f;
                                                                        }
                                                                        this.TargetClosest(true);
                                                                    }
                                                                    if (this.type == 60)
                                                                    {
                                                                        if (this.direction == -1 && this.velocity.X > -4f)
                                                                        {
                                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                                            if (this.velocity.X > 4f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X - 0.07f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.X > 0f)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + 0.03f;
                                                                                }
                                                                            }
                                                                            if (this.velocity.X < -4f)
                                                                            {
                                                                                this.velocity.X = -4f;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.direction == 1 && this.velocity.X < 4f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X + 0.1f;
                                                                                if (this.velocity.X < -4f)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + 0.07f;
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.velocity.X < 0f)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X - 0.03f;
                                                                                    }
                                                                                }
                                                                                if (this.velocity.X > 4f)
                                                                                {
                                                                                    this.velocity.X = 4f;
                                                                                }
                                                                            }
                                                                        }
                                                                        if (this.directionY == -1 && (double) this.velocity.Y > -1.5)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y - 0.04f;
                                                                            if ((double) this.velocity.Y > 1.5)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y - 0.03f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.Y > 0f)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y + 0.02f;
                                                                                }
                                                                            }
                                                                            if ((double) this.velocity.Y < -1.5)
                                                                            {
                                                                                this.velocity.Y = -1.5f;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.directionY == 1 && (double) this.velocity.Y < 1.5)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y + 0.04f;
                                                                                if ((double) this.velocity.Y < -1.5)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y + 0.03f;
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.velocity.Y < 0f)
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y - 0.02f;
                                                                                    }
                                                                                }
                                                                                if ((double) this.velocity.Y > 1.5)
                                                                                {
                                                                                    this.velocity.Y = 1.5f;
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.direction == -1 && this.velocity.X > -4f)
                                                                        {
                                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                                            if (this.velocity.X > 4f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X - 0.1f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.X > 0f)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + 0.05f;
                                                                                }
                                                                            }
                                                                            if (this.velocity.X < -4f)
                                                                            {
                                                                                this.velocity.X = -4f;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.direction == 1 && this.velocity.X < 4f)
                                                                            {
                                                                                this.velocity.X = this.velocity.X + 0.1f;
                                                                                if (this.velocity.X < -4f)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + 0.1f;
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.velocity.X < 0f)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X - 0.05f;
                                                                                    }
                                                                                }
                                                                                if (this.velocity.X > 4f)
                                                                                {
                                                                                    this.velocity.X = 4f;
                                                                                }
                                                                            }
                                                                        }
                                                                        if (this.directionY == -1 && (double) this.velocity.Y > -1.5)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y - 0.04f;
                                                                            if ((double) this.velocity.Y > 1.5)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y - 0.05f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.velocity.Y > 0f)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y + 0.03f;
                                                                                }
                                                                            }
                                                                            if ((double) this.velocity.Y < -1.5)
                                                                            {
                                                                                this.velocity.Y = -1.5f;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.directionY == 1 && (double) this.velocity.Y < 1.5)
                                                                            {
                                                                                this.velocity.Y = this.velocity.Y + 0.04f;
                                                                                if ((double) this.velocity.Y < -1.5)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y + 0.05f;
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.velocity.Y < 0f)
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y - 0.03f;
                                                                                    }
                                                                                }
                                                                                if ((double) this.velocity.Y > 1.5)
                                                                                {
                                                                                    this.velocity.Y = 1.5f;
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                                if (this.type == 158 && Main.netMode != 1)
                                                                {
                                                                    Vector2 vector32 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                    float num316 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector32.X;
                                                                    float num317 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector32.Y;
                                                                    float num318 = (float) Math.Sqrt((double) (num316*num316 + num317*num317));
                                                                    if (num318 < 200f && this.position.Y + (float) this.height < Main.player[this.target].position.Y + (float) Main.player[this.target].height && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                    {
                                                                        this.Transform(159);
                                                                    }
                                                                }
                                                                this.ai[1] += 1f;
                                                                if (this.type == 158)
                                                                {
                                                                    this.ai[1] += 1f;
                                                                }
                                                                if (this.ai[1] > 200f)
                                                                {
                                                                    if (!Main.player[this.target].wet && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                    {
                                                                        this.ai[1] = 0f;
                                                                    }
                                                                    float num319 = 0.2f;
                                                                    float num320 = 0.1f;
                                                                    float num321 = 4f;
                                                                    float num322 = 1.5f;
                                                                    if (this.type == 48 || this.type == 62 || this.type == 66)
                                                                    {
                                                                        num319 = 0.12f;
                                                                        num320 = 0.07f;
                                                                        num321 = 3f;
                                                                        num322 = 1.25f;
                                                                    }
                                                                    if (this.ai[1] > 1000f)
                                                                    {
                                                                        this.ai[1] = 0f;
                                                                    }
                                                                    this.ai[2] += 1f;
                                                                    if (this.ai[2] > 0f)
                                                                    {
                                                                        if (this.velocity.Y < num322)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y + num320;
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.velocity.Y > -num322)
                                                                        {
                                                                            this.velocity.Y = this.velocity.Y - num320;
                                                                        }
                                                                    }
                                                                    if (this.ai[2] < -150f || this.ai[2] > 150f)
                                                                    {
                                                                        if (this.velocity.X < num321)
                                                                        {
                                                                            this.velocity.X = this.velocity.X + num319;
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.velocity.X > -num321)
                                                                        {
                                                                            this.velocity.X = this.velocity.X - num319;
                                                                        }
                                                                    }
                                                                    if (this.ai[2] > 300f)
                                                                    {
                                                                        this.ai[2] = -300f;
                                                                    }
                                                                }
                                                                if (Main.netMode != 1)
                                                                {
                                                                    if (this.type == 48)
                                                                    {
                                                                        this.ai[0] += 1f;
                                                                        if (this.ai[0] == 30f || this.ai[0] == 60f || this.ai[0] == 90f)
                                                                        {
                                                                            if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                            {
                                                                                float num323 = 6f;
                                                                                Vector2 vector33 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                float num324 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector33.X + (float) Main.rand.Next(-100, 101);
                                                                                float num325 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector33.Y + (float) Main.rand.Next(-100, 101);
                                                                                float num326 = (float) Math.Sqrt((double) (num324*num324 + num325*num325));
                                                                                num326 = num323/num326;
                                                                                num324 *= num326;
                                                                                num325 *= num326;
                                                                                int num327 = 15;
                                                                                int num328 = 38;
                                                                                int num329 = Projectile.NewProjectile(vector33.X, vector33.Y, num324, num325, num328, num327, 0f, Main.myPlayer, 0f, 0f);
                                                                                Main.projectile[num329].timeLeft = 300;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.ai[0] >= (float) (400 + Main.rand.Next(400)))
                                                                            {
                                                                                this.ai[0] = 0f;
                                                                            }
                                                                        }
                                                                    }
                                                                    if (this.type == 62 || this.type == 66)
                                                                    {
                                                                        this.ai[0] += 1f;
                                                                        if (this.ai[0] == 20f || this.ai[0] == 40f || this.ai[0] == 60f || this.ai[0] == 80f)
                                                                        {
                                                                            if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                            {
                                                                                float num330 = 0.2f;
                                                                                Vector2 vector34 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                float num331 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector34.X + (float) Main.rand.Next(-100, 101);
                                                                                float num332 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector34.Y + (float) Main.rand.Next(-100, 101);
                                                                                float num333 = (float) Math.Sqrt((double) (num331*num331 + num332*num332));
                                                                                num333 = num330/num333;
                                                                                num331 *= num333;
                                                                                num332 *= num333;
                                                                                int num334 = this.damage/2;
                                                                                int num335 = 44;
                                                                                int num336 = Projectile.NewProjectile(vector34.X, vector34.Y, num331, num332, num335, num334, 0f, Main.myPlayer, 0f, 0f);
                                                                                Main.projectile[num336].timeLeft = 300;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.ai[0] >= (float) (300 + Main.rand.Next(300)))
                                                                            {
                                                                                this.ai[0] = 0f;
                                                                            }
                                                                        }
                                                                    }
                                                                    if (this.type == 156)
                                                                    {
                                                                        this.ai[0] += 1f;
                                                                        if (this.ai[0] == 20f || this.ai[0] == 40f || this.ai[0] == 60f || this.ai[0] == 80f || this.ai[0] == 100f)
                                                                        {
                                                                            if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                            {
                                                                                float num337 = 0.2f;
                                                                                Vector2 value = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                float num338 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - value.X + (float) Main.rand.Next(-50, 51);
                                                                                float num339 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - value.Y + (float) Main.rand.Next(-50, 51);
                                                                                float num340 = (float) Math.Sqrt((double) (num338*num338 + num339*num339));
                                                                                num340 = num337/num340;
                                                                                num338 *= num340;
                                                                                num339 *= num340;
                                                                                int num341 = 80;
                                                                                int num342 = 115;
                                                                                value += this.velocity*5f;
                                                                                int num343 = Projectile.NewProjectile(value.X + num338*100f, value.Y + num339*100f, num338, num339, num342, num341, 0f, Main.myPlayer, 0f, 0f);
                                                                                Main.projectile[num343].timeLeft = 300;
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.ai[0] >= (float) (250 + Main.rand.Next(250)))
                                                                            {
                                                                                this.ai[0] = 0f;
                                                                                return;
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.aiStyle == 15)
                                                                {
                                                                    this.aiAction = 0;
                                                                    if (this.ai[3] == 0f && this.life > 0)
                                                                    {
                                                                        this.ai[3] = (float) this.lifeMax;
                                                                    }
                                                                    if (this.ai[2] == 0f)
                                                                    {
                                                                        this.ai[0] = -100f;
                                                                        this.ai[2] = 1f;
                                                                        this.TargetClosest(true);
                                                                    }
                                                                    if (this.velocity.Y == 0f)
                                                                    {
                                                                        this.velocity.X = this.velocity.X*0.8f;
                                                                        if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                                                        {
                                                                            this.velocity.X = 0f;
                                                                        }
                                                                        this.ai[0] += 2f;
                                                                        if ((double) this.life < (double) this.lifeMax*0.8)
                                                                        {
                                                                            this.ai[0] += 1f;
                                                                        }
                                                                        if ((double) this.life < (double) this.lifeMax*0.6)
                                                                        {
                                                                            this.ai[0] += 1f;
                                                                        }
                                                                        if ((double) this.life < (double) this.lifeMax*0.4)
                                                                        {
                                                                            this.ai[0] += 2f;
                                                                        }
                                                                        if ((double) this.life < (double) this.lifeMax*0.2)
                                                                        {
                                                                            this.ai[0] += 3f;
                                                                        }
                                                                        if ((double) this.life < (double) this.lifeMax*0.1)
                                                                        {
                                                                            this.ai[0] += 4f;
                                                                        }
                                                                        if (this.ai[0] >= 0f)
                                                                        {
                                                                            this.netUpdate = true;
                                                                            this.TargetClosest(true);
                                                                            if (this.ai[1] == 3f)
                                                                            {
                                                                                this.velocity.Y = -13f;
                                                                                this.velocity.X = this.velocity.X + 3.5f*(float) this.direction;
                                                                                this.ai[0] = -200f;
                                                                                this.ai[1] = 0f;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.ai[1] == 2f)
                                                                                {
                                                                                    this.velocity.Y = -6f;
                                                                                    this.velocity.X = this.velocity.X + 4.5f*(float) this.direction;
                                                                                    this.ai[0] = -120f;
                                                                                    this.ai[1] += 1f;
                                                                                }
                                                                                else
                                                                                {
                                                                                    this.velocity.Y = -8f;
                                                                                    this.velocity.X = this.velocity.X + 4f*(float) this.direction;
                                                                                    this.ai[0] = -120f;
                                                                                    this.ai[1] += 1f;
                                                                                }
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.ai[0] >= -30f)
                                                                            {
                                                                                this.aiAction = 1;
                                                                            }
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.target < 255 && ((this.direction == 1 && this.velocity.X < 3f) || (this.direction == -1 && this.velocity.X > -3f)))
                                                                        {
                                                                            if ((this.direction == -1 && (double) this.velocity.X < 0.1) || (this.direction == 1 && (double) this.velocity.X > -0.1))
                                                                            {
                                                                                this.velocity.X = this.velocity.X + 0.2f*(float) this.direction;
                                                                            }
                                                                            else
                                                                            {
                                                                                this.velocity.X = this.velocity.X*0.93f;
                                                                            }
                                                                        }
                                                                    }
                                                                    int num344 = Dust.NewDust(this.position, this.width, this.height, 4, this.velocity.X, this.velocity.Y, 255, new Color(0, 80, 255, 80), this.scale*1.2f);
                                                                    Main.dust[num344].noGravity = true;
                                                                    Main.dust[num344].velocity *= 0.5f;
                                                                    if (this.life > 0)
                                                                    {
                                                                        float num345 = (float) this.life/(float) this.lifeMax;
                                                                        num345 = num345*0.5f + 1.5f; //0.75f;
                                                                        if (num345 != this.scale)
                                                                        {
                                                                            this.position.X = this.position.X + (float) (this.width/2);
                                                                            this.position.Y = this.position.Y + (float) this.height;
                                                                            this.scale = num345;
                                                                            this.width = (int) (98f*this.scale);
                                                                            this.height = (int) (92f*this.scale);
                                                                            this.position.X = this.position.X - (float) (this.width/2);
                                                                            this.position.Y = this.position.Y - (float) this.height;
                                                                        }
                                                                        if (Main.netMode != 1)
                                                                        {
                                                                            int num346 = (int) ((double) this.lifeMax*0.05);
                                                                            if ((float) (this.life + num346) < this.ai[3])
                                                                            {
                                                                                this.ai[3] = (float) this.life;
                                                                                int num347 = Main.rand.Next(3, 5);
                                                                                for (int num348 = 0; num348 < num347; num348++)
                                                                                {
                                                                                    int x = (int) (this.position.X + (float) Main.rand.Next(this.width - 32));
                                                                                    int y = (int) (this.position.Y + (float) Main.rand.Next(this.height - 32));
                                                                                    //int probe = (this.team == 1) ? 139 : 140;
                                                                                    int num349 = NPC.NewNPC(x, y, 1, 0);
                                                                                    Main.npc[num349].SetDefaults(1, -1f);
                                                                                    Main.npc[num349].velocity.X = (float) Main.rand.Next(-15, 16)*0.1f;
                                                                                    Main.npc[num349].velocity.Y = (float) Main.rand.Next(-30, 1)*0.1f;
                                                                                    Main.npc[num349].ai[1] = (float) Main.rand.Next(3);
                                                                                    //Main.npc[num349].team = this.team;
                                                                                    if (Main.netMode == 2 && num349 < 200)
                                                                                    {
                                                                                        NetMessage.SendData(23, -1, -1, "", num349, 0f, 0f, 0f, 0);
                                                                                    }
                                                                                }
                                                                                return;
                                                                            }
                                                                        }
                                                                        /*
                                                                        if (NPC.countNPCs(139) > 4 && this.team == 1 || NPC.countNPCs(140) > 4 && this.team == 2)
                                                                        {
                                                                            this.canTakeDamage = false;
                                                                            for (int i = 0; i < this.buffType.Length; i++) buffs[i] = 0;
                                                                            this.color = (this.team == 1) ? Color.DarkBlue : Color.DarkRed;
                                                                            if (this.healCD <= 0 && this.life < this.lifeMax) { this.life++; this.healCD = 5; }
                                                                            else this.healCD--;
                                                                            int fireBall = (this.team == 1) ? 258 : 259;
                                                                            if (this.shootCD <= 0)
                                                                            {
                                                                                Projectile.NewProjectile(this.center().X, this.center().Y, 5, 0, fireBall, 50, 0f, Main.myPlayer);
                                                                                Projectile.NewProjectile(this.center().X, this.center().Y, 5, 5, fireBall, 50, 0f, Main.myPlayer);
                                                                                Projectile.NewProjectile(this.center().X, this.center().Y, 0, 5, fireBall, 50, 0f, Main.myPlayer);
                                                                                Projectile.NewProjectile(this.center().X, this.center().Y, -5, 5, fireBall, 50, 0f, Main.myPlayer);
                                                                                Projectile.NewProjectile(this.center().X, this.center().Y, -5, 0, fireBall, 50, 0f, Main.myPlayer);
                                                                                Projectile.NewProjectile(this.center().X, this.center().Y, -5, -5, fireBall, 50, 0f, Main.myPlayer);
                                                                                Projectile.NewProjectile(this.center().X, this.center().Y, 0, -5, fireBall, 50, 0f, Main.myPlayer);
                                                                                Projectile.NewProjectile(this.center().X, this.center().Y, 5, -5, fireBall, 50, 0f, Main.myPlayer);
                                                                                this.shootCD = 240;
                                                                            }
                                                                            else this.shootCD--;
                                                                        }
                                                                        else this.color = (this.team == 1) ? Color.Cyan : Color.Red;
                                                                         */
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.aiStyle == 16)
                                                                    {
                                                                        if (this.direction == 0)
                                                                        {
                                                                            this.TargetClosest(true);
                                                                        }
                                                                        if (this.wet)
                                                                        {
                                                                            bool flag29 = false;
                                                                            if (this.type != 55)
                                                                            {
                                                                                this.TargetClosest(false);
                                                                                if (Main.player[this.target].wet && !Main.player[this.target].dead)
                                                                                {
                                                                                    flag29 = true;
                                                                                }
                                                                            }
                                                                            if (!flag29)
                                                                            {
                                                                                if (this.collideX)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X*-1f;
                                                                                    this.direction *= -1;
                                                                                    this.netUpdate = true;
                                                                                }
                                                                                if (this.collideY)
                                                                                {
                                                                                    this.netUpdate = true;
                                                                                    if (this.velocity.Y > 0f)
                                                                                    {
                                                                                        this.velocity.Y = Math.Abs(this.velocity.Y)*-1f;
                                                                                        this.directionY = -1;
                                                                                        this.ai[0] = -1f;
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (this.velocity.Y < 0f)
                                                                                        {
                                                                                            this.velocity.Y = Math.Abs(this.velocity.Y);
                                                                                            this.directionY = 1;
                                                                                            this.ai[0] = 1f;
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                            if (this.type == 102)
                                                                            {
                                                                                Lighting.addLight((int) (this.position.X + (float) (this.width/2) + (float) (this.direction*(this.width + 8)))/16, (int) (this.position.Y + 2f)/16, 0.07f, 0.04f, 0.025f);
                                                                            }
                                                                            if (flag29)
                                                                            {
                                                                                this.TargetClosest(true);
                                                                                if (this.type == 157)
                                                                                {
                                                                                    if (this.velocity.X > 0f && this.direction < 0)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X*0.95f;
                                                                                    }
                                                                                    if (this.velocity.X < 0f && this.direction > 0)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X*0.95f;
                                                                                    }
                                                                                    this.velocity.X = this.velocity.X + (float) this.direction*0.25f;
                                                                                    this.velocity.Y = this.velocity.Y + (float) this.directionY*0.2f;
                                                                                    if (this.velocity.X > 8f)
                                                                                    {
                                                                                        this.velocity.X = 7f;
                                                                                    }
                                                                                    if (this.velocity.X < -8f)
                                                                                    {
                                                                                        this.velocity.X = -7f;
                                                                                    }
                                                                                    if (this.velocity.Y > 5f)
                                                                                    {
                                                                                        this.velocity.Y = 4f;
                                                                                    }
                                                                                    if (this.velocity.Y < -5f)
                                                                                    {
                                                                                        this.velocity.Y = -4f;
                                                                                    }
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.type == 65 || this.type == 102)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X + (float) this.direction*0.15f;
                                                                                        this.velocity.Y = this.velocity.Y + (float) this.directionY*0.15f;
                                                                                        if (this.velocity.X > 5f)
                                                                                        {
                                                                                            this.velocity.X = 5f;
                                                                                        }
                                                                                        if (this.velocity.X < -5f)
                                                                                        {
                                                                                            this.velocity.X = -5f;
                                                                                        }
                                                                                        if (this.velocity.Y > 3f)
                                                                                        {
                                                                                            this.velocity.Y = 3f;
                                                                                        }
                                                                                        if (this.velocity.Y < -3f)
                                                                                        {
                                                                                            this.velocity.Y = -3f;
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X + (float) this.direction*0.1f;
                                                                                        this.velocity.Y = this.velocity.Y + (float) this.directionY*0.1f;
                                                                                        if (this.velocity.X > 3f)
                                                                                        {
                                                                                            this.velocity.X = 3f;
                                                                                        }
                                                                                        if (this.velocity.X < -3f)
                                                                                        {
                                                                                            this.velocity.X = -3f;
                                                                                        }
                                                                                        if (this.velocity.Y > 2f)
                                                                                        {
                                                                                            this.velocity.Y = 2f;
                                                                                        }
                                                                                        if (this.velocity.Y < -2f)
                                                                                        {
                                                                                            this.velocity.Y = -2f;
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.type == 157)
                                                                                {
                                                                                    if (Main.player[this.target].position.Y > this.position.Y)
                                                                                    {
                                                                                        this.directionY = 1;
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        this.directionY = -1;
                                                                                    }
                                                                                    this.velocity.X = this.velocity.X + (float) this.direction*0.2f;
                                                                                    if (this.velocity.X < -2f || this.velocity.X > 2f)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X*0.95f;
                                                                                    }
                                                                                    if (this.ai[0] == -1f)
                                                                                    {
                                                                                        float num350 = -0.6f;
                                                                                        if (this.directionY < 0)
                                                                                        {
                                                                                            num350 = -1f;
                                                                                        }
                                                                                        if (this.directionY > 0)
                                                                                        {
                                                                                            num350 = -0.2f;
                                                                                        }
                                                                                        this.velocity.Y = this.velocity.Y - 0.02f;
                                                                                        if (this.velocity.Y < num350)
                                                                                        {
                                                                                            this.ai[0] = 1f;
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        float num351 = 0.6f;
                                                                                        if (this.directionY < 0)
                                                                                        {
                                                                                            num351 = 0.2f;
                                                                                        }
                                                                                        if (this.directionY > 0)
                                                                                        {
                                                                                            num351 = 1f;
                                                                                        }
                                                                                        this.velocity.Y = this.velocity.Y + 0.02f;
                                                                                        if (this.velocity.Y > num351)
                                                                                        {
                                                                                            this.ai[0] = -1f;
                                                                                        }
                                                                                    }
                                                                                }
                                                                                else
                                                                                {
                                                                                    this.velocity.X = this.velocity.X + (float) this.direction*0.1f;
                                                                                    if (this.velocity.X < -1f || this.velocity.X > 1f)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X*0.95f;
                                                                                    }
                                                                                    if (this.ai[0] == -1f)
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y - 0.01f;
                                                                                        if ((double) this.velocity.Y < -0.3)
                                                                                        {
                                                                                            this.ai[0] = 1f;
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y + 0.01f;
                                                                                        if ((double) this.velocity.Y > 0.3)
                                                                                        {
                                                                                            this.ai[0] = -1f;
                                                                                        }
                                                                                    }
                                                                                }
                                                                                int num352 = (int) (this.position.X + (float) (this.width/2))/16;
                                                                                int num353 = (int) (this.position.Y + (float) (this.height/2))/16;
                                                                                if (Main.tile[num352, num353 - 1] == null)
                                                                                {
                                                                                    Main.tile[num352, num353 - 1] = new Tile();
                                                                                }
                                                                                if (Main.tile[num352, num353 + 1] == null)
                                                                                {
                                                                                    Main.tile[num352, num353 + 1] = new Tile();
                                                                                }
                                                                                if (Main.tile[num352, num353 + 2] == null)
                                                                                {
                                                                                    Main.tile[num352, num353 + 2] = new Tile();
                                                                                }
                                                                                if (Main.tile[num352, num353 - 1].liquid > 128)
                                                                                {
                                                                                    if (Main.tile[num352, num353 + 1].active())
                                                                                    {
                                                                                        this.ai[0] = -1f;
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (Main.tile[num352, num353 + 2].active())
                                                                                        {
                                                                                            this.ai[0] = -1f;
                                                                                        }
                                                                                    }
                                                                                }
                                                                                if (this.type != 157 && ((double) this.velocity.Y > 0.4 || (double) this.velocity.Y < -0.4))
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y*0.95f;
                                                                                }
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.velocity.Y == 0f)
                                                                            {
                                                                                if (this.type == 65)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X*0.94f;
                                                                                    if ((double) this.velocity.X > -0.2 && (double) this.velocity.X < 0.2)
                                                                                    {
                                                                                        this.velocity.X = 0f;
                                                                                    }
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (Main.netMode != 1)
                                                                                    {
                                                                                        this.velocity.Y = (float) Main.rand.Next(-50, -20)*0.1f;
                                                                                        this.velocity.X = (float) Main.rand.Next(-20, 20)*0.1f;
                                                                                        this.netUpdate = true;
                                                                                    }
                                                                                }
                                                                            }
                                                                            this.velocity.Y = this.velocity.Y + 0.3f;
                                                                            if (this.velocity.Y > 10f)
                                                                            {
                                                                                this.velocity.Y = 10f;
                                                                            }
                                                                            this.ai[0] = 1f;
                                                                        }
                                                                        this.rotation = this.velocity.Y*(float) this.direction*0.1f;
                                                                        if ((double) this.rotation < -0.2)
                                                                        {
                                                                            this.rotation = -0.2f;
                                                                        }
                                                                        if ((double) this.rotation > 0.2)
                                                                        {
                                                                            this.rotation = 0.2f;
                                                                            return;
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.aiStyle == 17)
                                                                        {
                                                                            this.noGravity = true;
                                                                            if (this.ai[0] == 0f)
                                                                            {
                                                                                this.noGravity = false;
                                                                                this.TargetClosest(true);
                                                                                if (Main.netMode != 1)
                                                                                {
                                                                                    if (this.velocity.X != 0f || this.velocity.Y < 0f || (double) this.velocity.Y > 0.3)
                                                                                    {
                                                                                        this.ai[0] = 1f;
                                                                                        this.netUpdate = true;
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        Rectangle rectangle5 = new Rectangle((int) Main.player[this.target].position.X, (int) Main.player[this.target].position.Y, Main.player[this.target].width, Main.player[this.target].height);
                                                                                        Rectangle rectangle6 = new Rectangle((int) this.position.X - 100, (int) this.position.Y - 100, this.width + 200, this.height + 200);
                                                                                        if (rectangle6.Intersects(rectangle5) || this.life < this.lifeMax)
                                                                                        {
                                                                                            this.ai[0] = 1f;
                                                                                            this.velocity.Y = this.velocity.Y - 6f;
                                                                                            this.netUpdate = true;
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                if (!Main.player[this.target].dead)
                                                                                {
                                                                                    if (this.collideX)
                                                                                    {
                                                                                        this.velocity.X = this.oldVelocity.X*-0.5f;
                                                                                        if (this.direction == -1 && this.velocity.X > 0f && this.velocity.X < 2f)
                                                                                        {
                                                                                            this.velocity.X = 2f;
                                                                                        }
                                                                                        if (this.direction == 1 && this.velocity.X < 0f && this.velocity.X > -2f)
                                                                                        {
                                                                                            this.velocity.X = -2f;
                                                                                        }
                                                                                    }
                                                                                    if (this.collideY)
                                                                                    {
                                                                                        this.velocity.Y = this.oldVelocity.Y*-0.5f;
                                                                                        if (this.velocity.Y > 0f && this.velocity.Y < 1f)
                                                                                        {
                                                                                            this.velocity.Y = 1f;
                                                                                        }
                                                                                        if (this.velocity.Y < 0f && this.velocity.Y > -1f)
                                                                                        {
                                                                                            this.velocity.Y = -1f;
                                                                                        }
                                                                                    }
                                                                                    this.TargetClosest(true);
                                                                                    if (this.direction == -1 && this.velocity.X > -3f)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X - 0.1f;
                                                                                        if (this.velocity.X > 3f)
                                                                                        {
                                                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.velocity.X > 0f)
                                                                                            {
                                                                                                this.velocity.X = this.velocity.X - 0.05f;
                                                                                            }
                                                                                        }
                                                                                        if (this.velocity.X < -3f)
                                                                                        {
                                                                                            this.velocity.X = -3f;
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (this.direction == 1 && this.velocity.X < 3f)
                                                                                        {
                                                                                            this.velocity.X = this.velocity.X + 0.1f;
                                                                                            if (this.velocity.X < -3f)
                                                                                            {
                                                                                                this.velocity.X = this.velocity.X + 0.1f;
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.velocity.X < 0f)
                                                                                                {
                                                                                                    this.velocity.X = this.velocity.X + 0.05f;
                                                                                                }
                                                                                            }
                                                                                            if (this.velocity.X > 3f)
                                                                                            {
                                                                                                this.velocity.X = 3f;
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                    float num354 = Math.Abs(this.position.X + (float) (this.width/2) - (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2)));
                                                                                    float num355 = Main.player[this.target].position.Y - (float) (this.height/2);
                                                                                    if (num354 > 50f)
                                                                                    {
                                                                                        num355 -= 100f;
                                                                                    }
                                                                                    if (this.position.Y < num355)
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y + 0.05f;
                                                                                        if (this.velocity.Y < 0f)
                                                                                        {
                                                                                            this.velocity.Y = this.velocity.Y + 0.01f;
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y - 0.05f;
                                                                                        if (this.velocity.Y > 0f)
                                                                                        {
                                                                                            this.velocity.Y = this.velocity.Y - 0.01f;
                                                                                        }
                                                                                    }
                                                                                    if (this.velocity.Y < -3f)
                                                                                    {
                                                                                        this.velocity.Y = -3f;
                                                                                    }
                                                                                    if (this.velocity.Y > 3f)
                                                                                    {
                                                                                        this.velocity.Y = 3f;
                                                                                    }
                                                                                }
                                                                            }
                                                                            if (this.wet)
                                                                            {
                                                                                if (this.velocity.Y > 0f)
                                                                                {
                                                                                    this.velocity.Y = this.velocity.Y*0.95f;
                                                                                }
                                                                                this.velocity.Y = this.velocity.Y - 0.5f;
                                                                                if (this.velocity.Y < -4f)
                                                                                {
                                                                                    this.velocity.Y = -4f;
                                                                                }
                                                                                this.TargetClosest(true);
                                                                                return;
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.aiStyle == 18)
                                                                            {
                                                                                bool npcTarget = false;
                                                                                if (this.type == 63)
                                                                                {
                                                                                    Lighting.addLight((int) (this.position.X + (float) (this.height/2))/16, (int) (this.position.Y + (float) (this.height/2))/16, 0.05f, 0.15f, 0.4f);
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.type == 103)
                                                                                    {
                                                                                        Lighting.addLight((int) (this.position.X + (float) (this.height/2))/16, (int) (this.position.Y + (float) (this.height/2))/16, 0.05f, 0.45f, 0.1f);
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (this.type != 221 && this.type != 242)
                                                                                        {
                                                                                            Lighting.addLight((int) (this.position.X + (float) (this.height/2))/16, (int) (this.position.Y + (float) (this.height/2))/16, 0.35f, 0.05f, 0.2f);
                                                                                        }
                                                                                    }
                                                                                }
                                                                                if (this.direction == 0)
                                                                                {
                                                                                    if (this.type == 63 && Main.npc[NPC.bbt].active && Main.npc[NPC.bbt].type == 70)
                                                                                    {
                                                                                        this.target = NPC.bbt;
                                                                                        npcTarget = true;
                                                                                    }
                                                                                    else if (this.type == 64 && Main.npc[NPC.bwt].active && Main.npc[NPC.bwt].type == 69)
                                                                                    {
                                                                                        this.target = NPC.bwt;
                                                                                        npcTarget = true;
                                                                                    }
                                                                                    else this.TargetClosest(true);
                                                                                }
                                                                                if (!this.wet)
                                                                                {
                                                                                    this.rotation += this.velocity.X*0.1f;
                                                                                    if (this.velocity.Y == 0f)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X*0.98f;
                                                                                        if ((double) this.velocity.X > -0.01 && (double) this.velocity.X < 0.01)
                                                                                        {
                                                                                            this.velocity.X = 0f;
                                                                                        }
                                                                                    }
                                                                                    this.velocity.Y = this.velocity.Y + 0.2f;
                                                                                    if (this.velocity.Y > 10f)
                                                                                    {
                                                                                        this.velocity.Y = 10f;
                                                                                    }
                                                                                    this.ai[0] = 1f;
                                                                                    return;
                                                                                }
                                                                                if (this.collideX)
                                                                                {
                                                                                    this.velocity.X = this.velocity.X*-1f;
                                                                                    this.direction *= -1;
                                                                                }
                                                                                if (this.collideY)
                                                                                {
                                                                                    if (this.velocity.Y > 0f)
                                                                                    {
                                                                                        this.velocity.Y = Math.Abs(this.velocity.Y)*-1f;
                                                                                        this.directionY = -1;
                                                                                        this.ai[0] = -1f;
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (this.velocity.Y < 0f)
                                                                                        {
                                                                                            this.velocity.Y = Math.Abs(this.velocity.Y);
                                                                                            this.directionY = 1;
                                                                                            this.ai[0] = 1f;
                                                                                        }
                                                                                    }
                                                                                }
                                                                                bool flag30 = false;
                                                                                if (!this.friendly)
                                                                                {
                                                                                    if (!npcTarget) this.TargetClosest(false);
                                                                                    if (!npcTarget && (Main.player[this.target].wet && !Main.player[this.target].dead))
                                                                                    {
                                                                                        flag30 = true;
                                                                                    }
                                                                                    if (npcTarget) flag30 = true;
                                                                                }
                                                                                if (flag30)
                                                                                {
                                                                                    this.localAI[2] = 1f;
                                                                                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) + 1.57f;
                                                                                    this.velocity *= 0.98f;
                                                                                    float num356 = 0.2f;
                                                                                    if (this.type == 103)
                                                                                    {
                                                                                        this.velocity *= 0.98f;
                                                                                        num356 = 0.6f;
                                                                                    }
                                                                                    if (this.type == 221)
                                                                                    {
                                                                                        this.velocity *= 0.99f;
                                                                                        num356 = 1f;
                                                                                    }
                                                                                    if (this.type == 242)
                                                                                    {
                                                                                        this.velocity *= 0.995f;
                                                                                        num356 = 3f;
                                                                                    }
                                                                                    if (this.velocity.X > -num356 && this.velocity.X < num356 && this.velocity.Y > -num356 && this.velocity.Y < num356)
                                                                                    {
                                                                                        if (this.type == 221)
                                                                                        {
                                                                                            this.localAI[0] = 1f;
                                                                                        }
                                                                                        if (!npcTarget) this.TargetClosest(true);
                                                                                        float num357 = 7f;
                                                                                        if (this.type == 103)
                                                                                        {
                                                                                            num357 = 9f;
                                                                                        }
                                                                                        Vector2 vector35 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                        float num358 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector35.X;
                                                                                        float num359 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector35.Y;
                                                                                        if (npcTarget) num358 = Main.npc[this.target].position.X + (float) (Main.npc[this.target].width/2) - vector35.X;
                                                                                        if (npcTarget) num359 = Main.npc[this.target].position.Y + (float) (Main.npc[this.target].height/2) - vector35.Y;
                                                                                        float num360 = (float) Math.Sqrt((double) (num358*num358 + num359*num359));
                                                                                        num360 = num357/num360;
                                                                                        num358 *= num360;
                                                                                        num359 *= num360;
                                                                                        this.velocity.X = num358;
                                                                                        this.velocity.Y = num359;
                                                                                        return;
                                                                                    }
                                                                                }
                                                                                else
                                                                                {
                                                                                    this.localAI[2] = 0f;
                                                                                    this.velocity.X = this.velocity.X + (float) this.direction*0.02f;
                                                                                    this.rotation = this.velocity.X*0.4f;
                                                                                    if (this.velocity.X < -1f || this.velocity.X > 1f)
                                                                                    {
                                                                                        this.velocity.X = this.velocity.X*0.95f;
                                                                                    }
                                                                                    if (this.ai[0] == -1f)
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y - 0.01f;
                                                                                        if (this.velocity.Y < -1f)
                                                                                        {
                                                                                            this.ai[0] = 1f;
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y + 0.01f;
                                                                                        if (this.velocity.Y > 1f)
                                                                                        {
                                                                                            this.ai[0] = -1f;
                                                                                        }
                                                                                    }
                                                                                    int num361 = (int) (this.position.X + (float) (this.width/2))/16;
                                                                                    int num362 = (int) (this.position.Y + (float) (this.height/2))/16;
                                                                                    if (Main.tile[num361, num362 - 1] == null)
                                                                                    {
                                                                                        Main.tile[num361, num362 - 1] = new Tile();
                                                                                    }
                                                                                    if (Main.tile[num361, num362 + 1] == null)
                                                                                    {
                                                                                        Main.tile[num361, num362 + 1] = new Tile();
                                                                                    }
                                                                                    if (Main.tile[num361, num362 + 2] == null)
                                                                                    {
                                                                                        Main.tile[num361, num362 + 2] = new Tile();
                                                                                    }
                                                                                    if (Main.tile[num361, num362 - 1].liquid > 128)
                                                                                    {
                                                                                        if (Main.tile[num361, num362 + 1].active())
                                                                                        {
                                                                                            this.ai[0] = -1f;
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (Main.tile[num361, num362 + 2].active())
                                                                                            {
                                                                                                this.ai[0] = -1f;
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        this.ai[0] = 1f;
                                                                                    }
                                                                                    if ((double) this.velocity.Y > 1.2 || (double) this.velocity.Y < -1.2)
                                                                                    {
                                                                                        this.velocity.Y = this.velocity.Y*0.99f;
                                                                                        return;
                                                                                    }
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.aiStyle == 19)
                                                                                {
                                                                                    this.TargetClosest(true);
                                                                                    float num363 = 12f;
                                                                                    Vector2 vector36 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                    float num364 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector36.X;
                                                                                    float num365 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector36.Y;
                                                                                    float num366 = (float) Math.Sqrt((double) (num364*num364 + num365*num365));
                                                                                    num366 = num363/num366;
                                                                                    num364 *= num366;
                                                                                    num365 *= num366;
                                                                                    //num364 *= 3;
                                                                                    //num365 *= 3;
                                                                                    bool canShoot = false;
                                                                                    //if (this.directionY < 2)
                                                                                    {
                                                                                        this.rotation = (float) (Math.Atan2((double) num365, (double) num364) + 1.57);
                                                                                        Rectangle targetRect = new Rectangle((int) Main.player[this.target].position.X, (int) Main.player[this.target].position.Y, Main.player[this.target].width, Main.player[this.target].height);
                                                                                        Rectangle towerRange = new Rectangle((int) (this.center().X - 500), (int) (this.center().Y - 560), 1000, 1000);
                                                                                        bool npcInRange = false;
                                                                                        for (int i = 0; i < Main.npc.Length; i++)
                                                                                        {
                                                                                            if (Main.npc[i].active && Main.npc[i].type == WHITE_SOLDIER && this.type == 70)
                                                                                            {
                                                                                                if (Main.npc[i].getRect().Intersects(towerRange))
                                                                                                {
                                                                                                    npcInRange = true;
                                                                                                }
                                                                                            }
                                                                                            if (Main.npc[i].active && Main.npc[i].type == BLACK_SOLDIER && this.type == 69)
                                                                                            {
                                                                                                if (Main.npc[i].getRect().Intersects(towerRange))
                                                                                                {
                                                                                                    npcInRange = true;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        if (targetRect.Intersects(towerRange) && !npcInRange) canShoot = true;
                                                                                        //flag31 = ((double)this.rotation >= -1.5 && (double)this.rotation <= 1.5); old formula
                                                                                        //if ((double)this.rotation < -1.8f) //was -0.8f
                                                                                        //{
                                                                                        //    this.rotation = -1.8f; //was -0.8f
                                                                                        //}
                                                                                        //else
                                                                                        //{
                                                                                        //if ((double)this.rotation > 1.8f) //was 0.8f
                                                                                        //{
                                                                                        //    this.rotation = 1.8f; //was 0.8f
                                                                                        //}
                                                                                        //}
                                                                                        if (this.velocity.X != 0f)
                                                                                        {
                                                                                            this.velocity.X = this.velocity.X*0.9f;
                                                                                            if ((double) this.velocity.X > -0.1 || (double) this.velocity.X < 0.1)
                                                                                            {
                                                                                                this.netUpdate = true;
                                                                                                this.velocity.X = 0f;
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                    if (this.ai[0] > 0f)
                                                                                    {
                                                                                        if (this.ai[0] == 200f)
                                                                                        {
                                                                                            Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 5);
                                                                                        }
                                                                                        this.ai[0] -= 1f;
                                                                                    }
                                                                                    if (Main.netMode != 1 && this.ai[0] == 0f && canShoot && (Main.player[this.target].team != this.team) && !this.canTakeDamage && !Main.player[this.target].ghost && !Main.player[this.target].dead)
                                                                                        //&& flag31 && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                    {
                                                                                        this.ai[0] = 60f;
                                                                                        int towerShot;
                                                                                        if (this.type == 69)
                                                                                        {
                                                                                            towerShot = Projectile.NewProjectile(Main.player[this.target].center().X, Main.player[this.target].center().Y, /*vector36.X, vector36.Y,*/
                                                                                                num364, num365, 126, 80, 0f, Main.myPlayer, 0f, 0f);
                                                                                            for (int num504 = 0; num504 < 10; num504++)
                                                                                            {
                                                                                                int num50 = Dust.NewDust(new Vector2(this.position.X - 2f, this.position.Y - 2f), this.width + 4, this.height + 4, 135, this.velocity.X*0.4f, this.velocity.Y*0.4f, 100, default(Color), 3.5f);
                                                                                                Main.dust[num50].noGravity = true;
                                                                                                Main.dust[num50].velocity *= 1.8f;
                                                                                                Dust expr_20BD_cp_0 = Main.dust[num50];
                                                                                                expr_20BD_cp_0.velocity.Y = expr_20BD_cp_0.velocity.Y - 0.5f;
                                                                                                if (Main.rand.Next(4) == 0)
                                                                                                {
                                                                                                    Main.dust[num50].noGravity = false;
                                                                                                    Main.dust[num50].scale *= 0.5f;
                                                                                                }
                                                                                                num50 = Dust.NewDust(new Vector2(Main.player[this.target].position.X - 2f, Main.player[this.target].position.Y - 2f), Main.player[this.target].width + 4, Main.player[this.target].height + 4, 135, Main.player[this.target].velocity.X*0.4f, Main.player[this.target].velocity.Y*0.4f, 100, default(Color), 3.5f);
                                                                                                Main.dust[num50].noGravity = true;
                                                                                                Main.dust[num50].velocity *= 1.8f;
                                                                                                expr_20BD_cp_0 = Main.dust[num50];
                                                                                                expr_20BD_cp_0.velocity.Y = expr_20BD_cp_0.velocity.Y - 0.5f;
                                                                                                if (Main.rand.Next(4) == 0)
                                                                                                {
                                                                                                    Main.dust[num50].noGravity = false;
                                                                                                    Main.dust[num50].scale *= 0.5f;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            towerShot = Projectile.NewProjectile(Main.player[this.target].center().X, Main.player[this.target].center().Y, /*vector36.X, vector36.Y,*/
                                                                                                num364, num365, 125, 40, 0f, Main.myPlayer, 0f, 0f);
                                                                                            for (int num504 = 0; num504 < 10; num504++)
                                                                                            {
                                                                                                int num50 = Dust.NewDust(new Vector2(this.position.X - 2f, this.position.Y - 2f), this.width + 4, this.height + 4, 6, this.velocity.X*0.4f, this.velocity.Y*0.4f, 100, default(Color), 3.5f);
                                                                                                Main.dust[num50].noGravity = true;
                                                                                                Main.dust[num50].velocity *= 1.8f;
                                                                                                Dust expr_20BD_cp_0 = Main.dust[num50];
                                                                                                expr_20BD_cp_0.velocity.Y = expr_20BD_cp_0.velocity.Y - 0.5f;
                                                                                                if (Main.rand.Next(4) == 0)
                                                                                                {
                                                                                                    Main.dust[num50].noGravity = false;
                                                                                                    Main.dust[num50].scale *= 0.5f;
                                                                                                }
                                                                                                num50 = Dust.NewDust(new Vector2(Main.player[this.target].position.X - 2f, Main.player[this.target].position.Y - 2f), Main.player[this.target].width + 4, Main.player[this.target].height + 4, 6, Main.player[this.target].velocity.X*0.4f, Main.player[this.target].velocity.Y*0.4f, 100, default(Color), 3.5f);
                                                                                                Main.dust[num50].noGravity = true;
                                                                                                Main.dust[num50].velocity *= 1.8f;
                                                                                                expr_20BD_cp_0 = Main.dust[num50];
                                                                                                expr_20BD_cp_0.velocity.Y = expr_20BD_cp_0.velocity.Y - 0.5f;
                                                                                                if (Main.rand.Next(4) == 0)
                                                                                                {
                                                                                                    Main.dust[num50].noGravity = false;
                                                                                                    Main.dust[num50].scale *= 0.5f;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        Main.projectile[towerShot].ai[0] = 2f;
                                                                                        //Main.projectile[num369].timeLeft = 300;
                                                                                        Main.projectile[towerShot].friendly = false;
                                                                                        NetMessage.SendData(27, -1, -1, "", towerShot, 0f, 0f, 0f, 0);
                                                                                        this.netUpdate = true;
                                                                                    }
                                                                                    try
                                                                                    {
                                                                                        int num370 = (int) this.position.X/16;
                                                                                        int num371 = (int) (this.position.X + (float) (this.width/2))/16;
                                                                                        int num372 = (int) (this.position.X + (float) this.width)/16;
                                                                                        int num373 = (int) (this.position.Y + (float) this.height)/16;
                                                                                        bool flag32 = false;
                                                                                        if (Main.tile[num370, num373] == null)
                                                                                        {
                                                                                            Main.tile[num370, num373] = new Tile();
                                                                                        }
                                                                                        if (Main.tile[num371, num373] == null)
                                                                                        {
                                                                                            Main.tile[num370, num373] = new Tile();
                                                                                        }
                                                                                        if (Main.tile[num372, num373] == null)
                                                                                        {
                                                                                            Main.tile[num370, num373] = new Tile();
                                                                                        }
                                                                                        if ((Main.tile[num370, num373].nactive() && Main.tileSolid[(int) Main.tile[num370, num373].type]) || (Main.tile[num371, num373].nactive() && Main.tileSolid[(int) Main.tile[num371, num373].type]) || (Main.tile[num372, num373].nactive() && Main.tileSolid[(int) Main.tile[num372, num373].type]))
                                                                                        {
                                                                                            flag32 = true;
                                                                                        }
                                                                                        if (flag32)
                                                                                        {
                                                                                            this.noGravity = true;
                                                                                            this.noTileCollide = true;
                                                                                            this.velocity.Y = -0.2f;
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            this.noGravity = false;
                                                                                            this.noTileCollide = false;
                                                                                            if (Main.rand.Next(2) == 0)
                                                                                            {
                                                                                                int num374 = Dust.NewDust(new Vector2(this.position.X - 4f, this.position.Y + (float) this.height - 8f), this.width + 8, 24, 32, 0f, this.velocity.Y/2f, 0, default(Color), 1f);
                                                                                                Dust expr_17988_cp_0 = Main.dust[num374];
                                                                                                expr_17988_cp_0.velocity.X = expr_17988_cp_0.velocity.X*0.4f;
                                                                                                Dust expr_179A8_cp_0 = Main.dust[num374];
                                                                                                expr_179A8_cp_0.velocity.Y = expr_179A8_cp_0.velocity.Y*-1f;
                                                                                                if (Main.rand.Next(2) == 0)
                                                                                                {
                                                                                                    Main.dust[num374].noGravity = true;
                                                                                                    Main.dust[num374].scale += 0.2f;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        return;
                                                                                    }
                                                                                    catch
                                                                                    {
                                                                                        return;
                                                                                    }
                                                                                }
                                                                                if (this.aiStyle == 20)
                                                                                {
                                                                                    if (this.ai[0] == 0f)
                                                                                    {
                                                                                        if (Main.netMode != 1)
                                                                                        {
                                                                                            this.TargetClosest(true);
                                                                                            this.direction *= -1;
                                                                                            this.directionY *= -1;
                                                                                            this.position.Y = this.position.Y + (float) (this.height/2 + 8);
                                                                                            this.ai[1] = this.position.X + (float) (this.width/2);
                                                                                            this.ai[2] = this.position.Y + (float) (this.height/2);
                                                                                            if (this.direction == 0)
                                                                                            {
                                                                                                this.direction = 1;
                                                                                            }
                                                                                            if (this.directionY == 0)
                                                                                            {
                                                                                                this.directionY = 1;
                                                                                            }
                                                                                            this.ai[3] = 1f + (float) Main.rand.Next(15)*0.1f;
                                                                                            this.velocity.Y = (float) (this.directionY*6)*this.ai[3];
                                                                                            this.ai[0] += 1f;
                                                                                            this.netUpdate = true;
                                                                                            return;
                                                                                        }
                                                                                        this.ai[1] = this.position.X + (float) (this.width/2);
                                                                                        this.ai[2] = this.position.Y + (float) (this.height/2);
                                                                                        return;
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        float num375 = 6f*this.ai[3];
                                                                                        float num376 = 0.2f*this.ai[3];
                                                                                        float num377 = num375/num376/2f;
                                                                                        if (this.ai[0] >= 1f && this.ai[0] < (float) ((int) num377))
                                                                                        {
                                                                                            this.velocity.Y = (float) this.directionY*num375;
                                                                                            this.ai[0] += 1f;
                                                                                            return;
                                                                                        }
                                                                                        if (this.ai[0] >= (float) ((int) num377))
                                                                                        {
                                                                                            this.velocity.Y = 0f;
                                                                                            this.directionY *= -1;
                                                                                            this.velocity.X = num375*(float) this.direction;
                                                                                            this.ai[0] = -1f;
                                                                                            return;
                                                                                        }
                                                                                        if (this.directionY > 0)
                                                                                        {
                                                                                            if (this.velocity.Y >= num375)
                                                                                            {
                                                                                                this.directionY *= -1;
                                                                                                this.velocity.Y = num375;
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.directionY < 0 && this.velocity.Y <= -num375)
                                                                                            {
                                                                                                this.directionY *= -1;
                                                                                                this.velocity.Y = -num375;
                                                                                            }
                                                                                        }
                                                                                        if (this.direction > 0)
                                                                                        {
                                                                                            if (this.velocity.X >= num375)
                                                                                            {
                                                                                                this.direction *= -1;
                                                                                                this.velocity.X = num375;
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.direction < 0 && this.velocity.X <= -num375)
                                                                                            {
                                                                                                this.direction *= -1;
                                                                                                this.velocity.X = -num375;
                                                                                            }
                                                                                        }
                                                                                        this.velocity.X = this.velocity.X + num376*(float) this.direction;
                                                                                        this.velocity.Y = this.velocity.Y + num376*(float) this.directionY;
                                                                                        return;
                                                                                    }
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.aiStyle == 21)
                                                                                    {
                                                                                        if (this.ai[0] == 0f)
                                                                                        {
                                                                                            this.TargetClosest(true);
                                                                                            this.directionY = 1;
                                                                                            this.ai[0] = 1f;
                                                                                        }
                                                                                        int num378 = 6;
                                                                                        if (this.ai[1] == 0f)
                                                                                        {
                                                                                            this.rotation += (float) (this.direction*this.directionY)*0.13f;
                                                                                            if (this.collideY)
                                                                                            {
                                                                                                this.ai[0] = 2f;
                                                                                            }
                                                                                            if (!this.collideY && this.ai[0] == 2f)
                                                                                            {
                                                                                                this.direction = -this.direction;
                                                                                                this.ai[1] = 1f;
                                                                                                this.ai[0] = 1f;
                                                                                            }
                                                                                            if (this.collideX)
                                                                                            {
                                                                                                this.directionY = -this.directionY;
                                                                                                this.ai[1] = 1f;
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            this.rotation -= (float) (this.direction*this.directionY)*0.13f;
                                                                                            if (this.collideX)
                                                                                            {
                                                                                                this.ai[0] = 2f;
                                                                                            }
                                                                                            if (!this.collideX && this.ai[0] == 2f)
                                                                                            {
                                                                                                this.directionY = -this.directionY;
                                                                                                this.ai[1] = 0f;
                                                                                                this.ai[0] = 1f;
                                                                                            }
                                                                                            if (this.collideY)
                                                                                            {
                                                                                                this.direction = -this.direction;
                                                                                                this.ai[1] = 0f;
                                                                                            }
                                                                                        }
                                                                                        this.velocity.X = (float) (num378*this.direction);
                                                                                        this.velocity.Y = (float) (num378*this.directionY);
                                                                                        float num379 = (float) (270 - (int) Main.mouseTextColor)/400f;
                                                                                        Lighting.addLight((int) (this.position.X + (float) (this.width/2))/16, (int) (this.position.Y + (float) (this.height/2))/16, 0.9f, 0.3f + num379, 0.2f);
                                                                                        return;
                                                                                    }
                                                                                    if (this.aiStyle == 22)
                                                                                    {
                                                                                        bool flag33 = false;
                                                                                        if (this.justHit)
                                                                                        {
                                                                                            this.ai[2] = 0f;
                                                                                        }
                                                                                        if (this.ai[2] >= 0f)
                                                                                        {
                                                                                            int num380 = 16;
                                                                                            bool flag34 = false;
                                                                                            bool flag35 = false;
                                                                                            if (this.position.X > this.ai[0] - (float) num380 && this.position.X < this.ai[0] + (float) num380)
                                                                                            {
                                                                                                flag34 = true;
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if ((this.velocity.X < 0f && this.direction > 0) || (this.velocity.X > 0f && this.direction < 0))
                                                                                                {
                                                                                                    flag34 = true;
                                                                                                }
                                                                                            }
                                                                                            num380 += 24;
                                                                                            if (this.position.Y > this.ai[1] - (float) num380 && this.position.Y < this.ai[1] + (float) num380)
                                                                                            {
                                                                                                flag35 = true;
                                                                                            }
                                                                                            if (flag34 && flag35)
                                                                                            {
                                                                                                this.ai[2] += 1f;
                                                                                                if (this.ai[2] >= 30f && num380 == 16)
                                                                                                {
                                                                                                    flag33 = true;
                                                                                                }
                                                                                                if (this.ai[2] >= 60f)
                                                                                                {
                                                                                                    this.ai[2] = -200f;
                                                                                                    this.direction *= -1;
                                                                                                    this.velocity.X = this.velocity.X*-1f;
                                                                                                    this.collideX = false;
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                this.ai[0] = this.position.X;
                                                                                                this.ai[1] = this.position.Y;
                                                                                                this.ai[2] = 0f;
                                                                                            }
                                                                                            this.TargetClosest(true);
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.type == 253)
                                                                                            {
                                                                                                this.TargetClosest(true);
                                                                                                this.ai[2] += 2f;
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                this.ai[2] += 1f;
                                                                                                if (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) > this.position.X + (float) (this.width/2))
                                                                                                {
                                                                                                    this.direction = -1;
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    this.direction = 1;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        int num381 = (int) ((this.position.X + (float) (this.width/2))/16f) + this.direction*2;
                                                                                        int num382 = (int) ((this.position.Y + (float) this.height)/16f);
                                                                                        bool flag36 = true;
                                                                                        bool flag37 = false;
                                                                                        int num383 = 3;
                                                                                        if (this.type == 122)
                                                                                        {
                                                                                            if (this.justHit)
                                                                                            {
                                                                                                this.ai[3] = 0f;
                                                                                                this.localAI[1] = 0f;
                                                                                            }
                                                                                            float num384 = 7f;
                                                                                            Vector2 vector37 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                            float num385 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector37.X;
                                                                                            float num386 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector37.Y;
                                                                                            float num387 = (float) Math.Sqrt((double) (num385*num385 + num386*num386));
                                                                                            num387 = num384/num387;
                                                                                            num385 *= num387;
                                                                                            num386 *= num387;
                                                                                            if (Main.netMode != 1 && this.ai[3] == 32f)
                                                                                            {
                                                                                                int num388 = 25;
                                                                                                int num389 = 84;
                                                                                                Projectile.NewProjectile(vector37.X, vector37.Y, num385, num386, num389, num388, 0f, Main.myPlayer, 0f, 0f);
                                                                                            }
                                                                                            num383 = 8;
                                                                                            if (this.ai[3] > 0f)
                                                                                            {
                                                                                                this.ai[3] += 1f;
                                                                                                if (this.ai[3] >= 64f)
                                                                                                {
                                                                                                    this.ai[3] = 0f;
                                                                                                }
                                                                                            }
                                                                                            if (Main.netMode != 1 && this.ai[3] == 0f)
                                                                                            {
                                                                                                this.localAI[1] += 1f;
                                                                                                if (this.localAI[1] > 120f && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                {
                                                                                                    this.localAI[1] = 0f;
                                                                                                    this.ai[3] = 1f;
                                                                                                    this.netUpdate = true;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.type == 75)
                                                                                            {
                                                                                                num383 = 4;
                                                                                                if (Main.rand.Next(6) == 0)
                                                                                                {
                                                                                                    int num390 = Dust.NewDust(this.position, this.width, this.height, 55, 0f, 0f, 200, this.color, 1f);
                                                                                                    Main.dust[num390].velocity *= 0.3f;
                                                                                                }
                                                                                                if (Main.rand.Next(40) == 0)
                                                                                                {
                                                                                                    Main.PlaySound(27, (int) this.position.X, (int) this.position.Y, 1);
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.type == 169)
                                                                                                {
                                                                                                    Lighting.addLight((int) ((this.position.X + (float) (this.width/2))/16f), (int) ((this.position.Y + (float) (this.height/2))/16f), 0f, 0.6f, 0.75f);
                                                                                                    this.alpha = 30;
                                                                                                    if (Main.rand.Next(3) == 0)
                                                                                                    {
                                                                                                        int num391 = Dust.NewDust(this.position, this.width, this.height, 92, 0f, 0f, 200, default(Color), 1f);
                                                                                                        Main.dust[num391].velocity *= 0.3f;
                                                                                                        Main.dust[num391].noGravity = true;
                                                                                                    }
                                                                                                    if (this.justHit)
                                                                                                    {
                                                                                                        this.ai[3] = 0f;
                                                                                                        this.localAI[1] = 0f;
                                                                                                    }
                                                                                                    float num392 = 5f;
                                                                                                    Vector2 vector38 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                    float num393 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector38.X;
                                                                                                    float num394 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector38.Y;
                                                                                                    float num395 = (float) Math.Sqrt((double) (num393*num393 + num394*num394));
                                                                                                    num395 = num392/num395;
                                                                                                    num393 *= num395;
                                                                                                    num394 *= num395;
                                                                                                    if (num393 > 0f)
                                                                                                    {
                                                                                                        this.direction = 1;
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        this.direction = -1;
                                                                                                    }
                                                                                                    this.spriteDirection = this.direction;
                                                                                                    if (this.direction < 0)
                                                                                                    {
                                                                                                        this.rotation = (float) Math.Atan2((double) (-(double) num394), (double) (-(double) num393));
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        this.rotation = (float) Math.Atan2((double) num394, (double) num393);
                                                                                                    }
                                                                                                    if (Main.netMode != 1 && this.ai[3] == 16f)
                                                                                                    {
                                                                                                        int num396 = 45;
                                                                                                        int num397 = 128;
                                                                                                        Projectile.NewProjectile(vector38.X, vector38.Y, num393, num394, num397, num396, 0f, Main.myPlayer, 0f, 0f);
                                                                                                    }
                                                                                                    num383 = 10;
                                                                                                    if (this.ai[3] > 0f)
                                                                                                    {
                                                                                                        this.ai[3] += 1f;
                                                                                                        if (this.ai[3] >= 64f)
                                                                                                        {
                                                                                                            this.ai[3] = 0f;
                                                                                                        }
                                                                                                    }
                                                                                                    if (Main.netMode != 1 && this.ai[3] == 0f)
                                                                                                    {
                                                                                                        this.localAI[1] += 1f;
                                                                                                        if (this.localAI[1] > 120f && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                        {
                                                                                                            this.localAI[1] = 0f;
                                                                                                            this.ai[3] = 1f;
                                                                                                            this.netUpdate = true;
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (this.type == 268)
                                                                                                    {
                                                                                                        this.rotation = this.velocity.X*0.1f;
                                                                                                        if (Main.player[this.target].center().Y < this.center().Y)
                                                                                                        {
                                                                                                            num383 = 12;
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            num383 = 6;
                                                                                                        }
                                                                                                        if (Main.netMode != 1 && !this.confused)
                                                                                                        {
                                                                                                            this.ai[3] += 1f;
                                                                                                            if (this.justHit)
                                                                                                            {
                                                                                                                this.ai[3] = -45f;
                                                                                                                this.localAI[1] = 0f;
                                                                                                            }
                                                                                                            if (Main.netMode != 1 && this.ai[3] >= (float) (60 + Main.rand.Next(60)))
                                                                                                            {
                                                                                                                this.ai[3] = 0f;
                                                                                                                if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].head))
                                                                                                                {
                                                                                                                    float num398 = 10f;
                                                                                                                    Vector2 vector39 = new Vector2(this.position.X + (float) this.width*0.5f - 4f, this.position.Y + (float) this.height*0.7f);
                                                                                                                    float num399 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector39.X;
                                                                                                                    float num400 = Math.Abs(num399)*0.1f;
                                                                                                                    float num401 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector39.Y - num400;
                                                                                                                    num399 += (float) Main.rand.Next(-10, 11);
                                                                                                                    num401 += (float) Main.rand.Next(-30, 21);
                                                                                                                    float num402 = (float) Math.Sqrt((double) (num399*num399 + num401*num401));
                                                                                                                    num402 = num398/num402;
                                                                                                                    num399 *= num402;
                                                                                                                    num401 *= num402;
                                                                                                                    int num403 = 40;
                                                                                                                    int num404 = 288;
                                                                                                                    Projectile.NewProjectile(vector39.X, vector39.Y, num399, num401, num404, num403, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        for (int num405 = num382; num405 < num382 + num383; num405++)
                                                                                        {
                                                                                            if (Main.tile[num381, num405] == null)
                                                                                            {
                                                                                                Main.tile[num381, num405] = new Tile();
                                                                                            }
                                                                                            if ((Main.tile[num381, num405].nactive() && Main.tileSolid[(int) Main.tile[num381, num405].type]) || Main.tile[num381, num405].liquid > 0)
                                                                                            {
                                                                                                if (num405 <= num382 + 1)
                                                                                                {
                                                                                                    flag37 = true;
                                                                                                }
                                                                                                flag36 = false;
                                                                                                break;
                                                                                            }
                                                                                        }
                                                                                        if (this.type == 169 || this.type == 268)
                                                                                        {
                                                                                            for (int num406 = num382 - 3; num406 < num382; num406++)
                                                                                            {
                                                                                                if (Main.tile[num381, num406] == null)
                                                                                                {
                                                                                                    Main.tile[num381, num406] = new Tile();
                                                                                                }
                                                                                                if ((Main.tile[num381, num406].nactive() && Main.tileSolid[(int) Main.tile[num381, num406].type]) || Main.tile[num381, num406].liquid > 0)
                                                                                                {
                                                                                                    flag37 = false;
                                                                                                    flag33 = true;
                                                                                                    break;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        if (flag33)
                                                                                        {
                                                                                            flag37 = false;
                                                                                            flag36 = true;
                                                                                            if (this.type == 268)
                                                                                            {
                                                                                                this.velocity.Y = this.velocity.Y + 2f;
                                                                                            }
                                                                                        }
                                                                                        if (flag36)
                                                                                        {
                                                                                            if (this.type == 75 || this.type == 169)
                                                                                            {
                                                                                                this.velocity.Y = this.velocity.Y + 0.2f;
                                                                                                if (this.velocity.Y > 2f)
                                                                                                {
                                                                                                    this.velocity.Y = 2f;
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                if (this.velocity.Y > 3f)
                                                                                                {
                                                                                                    this.velocity.Y = 3f;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.type == 75 || this.type == 169)
                                                                                            {
                                                                                                if ((this.directionY < 0 && this.velocity.Y > 0f) || flag37)
                                                                                                {
                                                                                                    this.velocity.Y = this.velocity.Y - 0.2f;
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.directionY < 0 && this.velocity.Y > 0f)
                                                                                                {
                                                                                                    this.velocity.Y = this.velocity.Y - 0.1f;
                                                                                                }
                                                                                            }
                                                                                            if (this.velocity.Y < -4f)
                                                                                            {
                                                                                                this.velocity.Y = -4f;
                                                                                            }
                                                                                        }
                                                                                        if (this.type == 75 && this.wet)
                                                                                        {
                                                                                            this.velocity.Y = this.velocity.Y - 0.2f;
                                                                                            if (this.velocity.Y < -2f)
                                                                                            {
                                                                                                this.velocity.Y = -2f;
                                                                                            }
                                                                                        }
                                                                                        if (this.collideX)
                                                                                        {
                                                                                            this.velocity.X = this.oldVelocity.X*-0.4f;
                                                                                            if (this.direction == -1 && this.velocity.X > 0f && this.velocity.X < 1f)
                                                                                            {
                                                                                                this.velocity.X = 1f;
                                                                                            }
                                                                                            if (this.direction == 1 && this.velocity.X < 0f && this.velocity.X > -1f)
                                                                                            {
                                                                                                this.velocity.X = -1f;
                                                                                            }
                                                                                        }
                                                                                        if (this.collideY)
                                                                                        {
                                                                                            this.velocity.Y = this.oldVelocity.Y*-0.25f;
                                                                                            if (this.velocity.Y > 0f && this.velocity.Y < 1f)
                                                                                            {
                                                                                                this.velocity.Y = 1f;
                                                                                            }
                                                                                            if (this.velocity.Y < 0f && this.velocity.Y > -1f)
                                                                                            {
                                                                                                this.velocity.Y = -1f;
                                                                                            }
                                                                                        }
                                                                                        float num407 = 2f;
                                                                                        if (this.type == 75)
                                                                                        {
                                                                                            num407 = 3f;
                                                                                        }
                                                                                        if (this.type == 253)
                                                                                        {
                                                                                            num407 = 4f;
                                                                                        }
                                                                                        if (this.direction == -1 && this.velocity.X > -num407)
                                                                                        {
                                                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                                                            if (this.velocity.X > num407)
                                                                                            {
                                                                                                this.velocity.X = this.velocity.X - 0.1f;
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.velocity.X > 0f)
                                                                                                {
                                                                                                    this.velocity.X = this.velocity.X + 0.05f;
                                                                                                }
                                                                                            }
                                                                                            if (this.velocity.X < -num407)
                                                                                            {
                                                                                                this.velocity.X = -num407;
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.direction == 1 && this.velocity.X < num407)
                                                                                            {
                                                                                                this.velocity.X = this.velocity.X + 0.1f;
                                                                                                if (this.velocity.X < -num407)
                                                                                                {
                                                                                                    this.velocity.X = this.velocity.X + 0.1f;
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (this.velocity.X < 0f)
                                                                                                    {
                                                                                                        this.velocity.X = this.velocity.X - 0.05f;
                                                                                                    }
                                                                                                }
                                                                                                if (this.velocity.X > num407)
                                                                                                {
                                                                                                    this.velocity.X = num407;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        if (this.directionY == -1 && (double) this.velocity.Y > -1.5)
                                                                                        {
                                                                                            this.velocity.Y = this.velocity.Y - 0.04f;
                                                                                            if ((double) this.velocity.Y > 1.5)
                                                                                            {
                                                                                                this.velocity.Y = this.velocity.Y - 0.05f;
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.velocity.Y > 0f)
                                                                                                {
                                                                                                    this.velocity.Y = this.velocity.Y + 0.03f;
                                                                                                }
                                                                                            }
                                                                                            if ((double) this.velocity.Y < -1.5)
                                                                                            {
                                                                                                this.velocity.Y = -1.5f;
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.directionY == 1 && (double) this.velocity.Y < 1.5)
                                                                                            {
                                                                                                this.velocity.Y = this.velocity.Y + 0.04f;
                                                                                                if ((double) this.velocity.Y < -1.5)
                                                                                                {
                                                                                                    this.velocity.Y = this.velocity.Y + 0.05f;
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (this.velocity.Y < 0f)
                                                                                                    {
                                                                                                        this.velocity.Y = this.velocity.Y - 0.03f;
                                                                                                    }
                                                                                                }
                                                                                                if ((double) this.velocity.Y > 1.5)
                                                                                                {
                                                                                                    this.velocity.Y = 1.5f;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        if (this.type == 122)
                                                                                        {
                                                                                            Lighting.addLight((int) this.position.X/16, (int) this.position.Y/16, 0.4f, 0f, 0.25f);
                                                                                            return;
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (this.aiStyle == 23)
                                                                                        {
                                                                                            this.noGravity = true;
                                                                                            this.noTileCollide = true;
                                                                                            if (this.type == 83)
                                                                                            {
                                                                                                Lighting.addLight((int) ((this.position.X + (float) (this.width/2))/16f), (int) ((this.position.Y + (float) (this.height/2))/16f), 0.2f, 0.05f, 0.3f);
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.type == 179)
                                                                                                {
                                                                                                    Lighting.addLight((int) ((this.position.X + (float) (this.width/2))/16f), (int) ((this.position.Y + (float) (this.height/2))/16f), 0.3f, 0.15f, 0.05f);
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    Lighting.addLight((int) ((this.position.X + (float) (this.width/2))/16f), (int) ((this.position.Y + (float) (this.height/2))/16f), 0.05f, 0.2f, 0.3f);
                                                                                                }
                                                                                            }
                                                                                            if (this.target < 0 || this.target == 255 || Main.player[this.target].dead)
                                                                                            {
                                                                                                this.TargetClosest(true);
                                                                                            }
                                                                                            if (this.ai[0] == 0f)
                                                                                            {
                                                                                                float num408 = 9f;
                                                                                                Vector2 vector40 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                float num409 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector40.X;
                                                                                                float num410 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector40.Y;
                                                                                                float num411 = (float) Math.Sqrt((double) (num409*num409 + num410*num410));
                                                                                                num411 = num408/num411;
                                                                                                num409 *= num411;
                                                                                                num410 *= num411;
                                                                                                this.velocity.X = num409;
                                                                                                this.velocity.Y = num410;
                                                                                                this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) + 0.785f;
                                                                                                this.ai[0] = 1f;
                                                                                                this.ai[1] = 0f;
                                                                                                return;
                                                                                            }
                                                                                            if (this.ai[0] == 1f)
                                                                                            {
                                                                                                if (this.justHit)
                                                                                                {
                                                                                                    this.ai[0] = 2f;
                                                                                                    this.ai[1] = 0f;
                                                                                                }
                                                                                                this.velocity *= 0.99f;
                                                                                                this.ai[1] += 1f;
                                                                                                if (this.ai[1] >= 100f)
                                                                                                {
                                                                                                    this.ai[0] = 2f;
                                                                                                    this.ai[1] = 0f;
                                                                                                    this.velocity.X = 0f;
                                                                                                    this.velocity.Y = 0f;
                                                                                                    return;
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.justHit)
                                                                                                {
                                                                                                    this.ai[0] = 2f;
                                                                                                    this.ai[1] = 0f;
                                                                                                }
                                                                                                this.velocity *= 0.96f;
                                                                                                this.ai[1] += 1f;
                                                                                                float num412 = this.ai[1]/120f;
                                                                                                num412 = 0.1f + num412*0.4f;
                                                                                                this.rotation += num412*(float) this.direction;
                                                                                                if (this.ai[1] >= 120f)
                                                                                                {
                                                                                                    this.netUpdate = true;
                                                                                                    this.ai[0] = 0f;
                                                                                                    this.ai[1] = 0f;
                                                                                                    return;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.aiStyle == 24)
                                                                                            {
                                                                                                this.noGravity = true;
                                                                                                if (this.ai[0] == 0f)
                                                                                                {
                                                                                                    this.noGravity = false;
                                                                                                    this.TargetClosest(true);
                                                                                                    if (Main.netMode != 1)
                                                                                                    {
                                                                                                        if (this.velocity.X != 0f || this.velocity.Y < 0f || (double) this.velocity.Y > 0.3)
                                                                                                        {
                                                                                                            this.ai[0] = 1f;
                                                                                                            this.netUpdate = true;
                                                                                                            this.direction = -this.direction;
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            Rectangle rectangle7 = new Rectangle((int) Main.player[this.target].position.X, (int) Main.player[this.target].position.Y, Main.player[this.target].width, Main.player[this.target].height);
                                                                                                            Rectangle rectangle8 = new Rectangle((int) this.position.X - 100, (int) this.position.Y - 100, this.width + 200, this.height + 200);
                                                                                                            if (rectangle8.Intersects(rectangle7) || this.life < this.lifeMax)
                                                                                                            {
                                                                                                                this.ai[0] = 1f;
                                                                                                                this.velocity.Y = this.velocity.Y - 6f;
                                                                                                                this.netUpdate = true;
                                                                                                                this.direction = -this.direction;
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (!Main.player[this.target].dead)
                                                                                                    {
                                                                                                        if (this.collideX)
                                                                                                        {
                                                                                                            this.direction *= -1;
                                                                                                            this.velocity.X = this.oldVelocity.X*-0.5f;
                                                                                                            if (this.direction == -1 && this.velocity.X > 0f && this.velocity.X < 2f)
                                                                                                            {
                                                                                                                this.velocity.X = 2f;
                                                                                                            }
                                                                                                            if (this.direction == 1 && this.velocity.X < 0f && this.velocity.X > -2f)
                                                                                                            {
                                                                                                                this.velocity.X = -2f;
                                                                                                            }
                                                                                                        }
                                                                                                        if (this.collideY)
                                                                                                        {
                                                                                                            this.velocity.Y = this.oldVelocity.Y*-0.5f;
                                                                                                            if (this.velocity.Y > 0f && this.velocity.Y < 1f)
                                                                                                            {
                                                                                                                this.velocity.Y = 1f;
                                                                                                            }
                                                                                                            if (this.velocity.Y < 0f && this.velocity.Y > -1f)
                                                                                                            {
                                                                                                                this.velocity.Y = -1f;
                                                                                                            }
                                                                                                        }
                                                                                                        if (this.direction == -1 && this.velocity.X > -3f)
                                                                                                        {
                                                                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                                                                            if (this.velocity.X > 3f)
                                                                                                            {
                                                                                                                this.velocity.X = this.velocity.X - 0.1f;
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (this.velocity.X > 0f)
                                                                                                                {
                                                                                                                    this.velocity.X = this.velocity.X - 0.05f;
                                                                                                                }
                                                                                                            }
                                                                                                            if (this.velocity.X < -3f)
                                                                                                            {
                                                                                                                this.velocity.X = -3f;
                                                                                                            }
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (this.direction == 1 && this.velocity.X < 3f)
                                                                                                            {
                                                                                                                this.velocity.X = this.velocity.X + 0.1f;
                                                                                                                if (this.velocity.X < -3f)
                                                                                                                {
                                                                                                                    this.velocity.X = this.velocity.X + 0.1f;
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (this.velocity.X < 0f)
                                                                                                                    {
                                                                                                                        this.velocity.X = this.velocity.X + 0.05f;
                                                                                                                    }
                                                                                                                }
                                                                                                                if (this.velocity.X > 3f)
                                                                                                                {
                                                                                                                    this.velocity.X = 3f;
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                        int num413 = (int) ((this.position.X + (float) (this.width/2))/16f) + this.direction;
                                                                                                        int num414 = (int) ((this.position.Y + (float) this.height)/16f);
                                                                                                        bool flag38 = true;
                                                                                                        int num415 = 15;
                                                                                                        bool flag39 = false;
                                                                                                        for (int num416 = num414; num416 < num414 + num415; num416++)
                                                                                                        {
                                                                                                            if (Main.tile[num413, num416] == null)
                                                                                                            {
                                                                                                                Main.tile[num413, num416] = new Tile();
                                                                                                            }
                                                                                                            if ((Main.tile[num413, num416].nactive() && Main.tileSolid[(int) Main.tile[num413, num416].type]) || Main.tile[num413, num416].liquid > 0)
                                                                                                            {
                                                                                                                if (num416 < num414 + 5)
                                                                                                                {
                                                                                                                    flag39 = true;
                                                                                                                }
                                                                                                                flag38 = false;
                                                                                                                break;
                                                                                                            }
                                                                                                        }
                                                                                                        if (flag38)
                                                                                                        {
                                                                                                            this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            this.velocity.Y = this.velocity.Y - 0.1f;
                                                                                                        }
                                                                                                        if (flag39)
                                                                                                        {
                                                                                                            this.velocity.Y = this.velocity.Y - 0.2f;
                                                                                                        }
                                                                                                        if (this.velocity.Y > 3f)
                                                                                                        {
                                                                                                            this.velocity.Y = 3f;
                                                                                                        }
                                                                                                        if (this.velocity.Y < -4f)
                                                                                                        {
                                                                                                            this.velocity.Y = -4f;
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                                if (this.wet)
                                                                                                {
                                                                                                    if (this.velocity.Y > 0f)
                                                                                                    {
                                                                                                        this.velocity.Y = this.velocity.Y*0.95f;
                                                                                                    }
                                                                                                    this.velocity.Y = this.velocity.Y - 0.5f;
                                                                                                    if (this.velocity.Y < -4f)
                                                                                                    {
                                                                                                        this.velocity.Y = -4f;
                                                                                                    }
                                                                                                    this.TargetClosest(true);
                                                                                                    return;
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.aiStyle == 25)
                                                                                                {
                                                                                                    if (this.ai[3] == 0f)
                                                                                                    {
                                                                                                        this.position.X = this.position.X + 8f;
                                                                                                        if (this.position.Y/16f > (float) (Main.maxTilesY - 200))
                                                                                                        {
                                                                                                            this.ai[3] = 3f;
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if ((double) (this.position.Y/16f) > Main.worldSurface)
                                                                                                            {
                                                                                                                this.TargetClosest(true);
                                                                                                                if (Main.player[this.target].zoneSnow)
                                                                                                                {
                                                                                                                    this.ai[3] = 4f;
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    this.ai[3] = 2f;
                                                                                                                }
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                this.ai[3] = 1f;
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                    if (this.ai[0] == 0f)
                                                                                                    {
                                                                                                        this.TargetClosest(true);
                                                                                                        if (Main.netMode != 1)
                                                                                                        {
                                                                                                            if (this.velocity.X != 0f || this.velocity.Y < 0f || (double) this.velocity.Y > 0.3)
                                                                                                            {
                                                                                                                this.ai[0] = 1f;
                                                                                                                this.netUpdate = true;
                                                                                                                return;
                                                                                                            }
                                                                                                            Rectangle rectangle9 = new Rectangle((int) Main.player[this.target].position.X, (int) Main.player[this.target].position.Y, Main.player[this.target].width, Main.player[this.target].height);
                                                                                                            Rectangle rectangle10 = new Rectangle((int) this.position.X - 100, (int) this.position.Y - 100, this.width + 200, this.height + 200);
                                                                                                            if (rectangle10.Intersects(rectangle9) || this.life < this.lifeMax)
                                                                                                            {
                                                                                                                this.ai[0] = 1f;
                                                                                                                this.netUpdate = true;
                                                                                                                return;
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (this.velocity.Y == 0f)
                                                                                                        {
                                                                                                            this.ai[2] += 1f;
                                                                                                            int num417 = 20;
                                                                                                            if (this.ai[1] == 0f)
                                                                                                            {
                                                                                                                num417 = 12;
                                                                                                            }
                                                                                                            if (this.ai[2] < (float) num417)
                                                                                                            {
                                                                                                                this.velocity.X = this.velocity.X*0.9f;
                                                                                                                return;
                                                                                                            }
                                                                                                            this.ai[2] = 0f;
                                                                                                            this.TargetClosest(true);
                                                                                                            this.spriteDirection = this.direction;
                                                                                                            this.ai[1] += 1f;
                                                                                                            if (this.ai[1] == 2f)
                                                                                                            {
                                                                                                                this.velocity.X = (float) this.direction*2.5f;
                                                                                                                this.velocity.Y = -8f;
                                                                                                                this.ai[1] = 0f;
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                this.velocity.X = (float) this.direction*3.5f;
                                                                                                                this.velocity.Y = -4f;
                                                                                                            }
                                                                                                            this.netUpdate = true;
                                                                                                            return;
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (this.direction == 1 && this.velocity.X < 1f)
                                                                                                            {
                                                                                                                this.velocity.X = this.velocity.X + 0.1f;
                                                                                                                return;
                                                                                                            }
                                                                                                            if (this.direction == -1 && this.velocity.X > -1f)
                                                                                                            {
                                                                                                                this.velocity.X = this.velocity.X - 0.1f;
                                                                                                                return;
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (this.aiStyle == 26)
                                                                                                    {
                                                                                                        int num418 = 30;
                                                                                                        bool flag40 = false;
                                                                                                        if (this.velocity.Y == 0f && ((this.velocity.X > 0f && this.direction < 0) || (this.velocity.X < 0f && this.direction > 0)))
                                                                                                        {
                                                                                                            flag40 = true;
                                                                                                            this.ai[3] += 1f;
                                                                                                        }
                                                                                                        if (this.position.X == this.oldPosition.X || this.ai[3] >= (float) num418 || flag40)
                                                                                                        {
                                                                                                            this.ai[3] += 1f;
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (this.ai[3] > 0f)
                                                                                                            {
                                                                                                                this.ai[3] -= 1f;
                                                                                                            }
                                                                                                        }
                                                                                                        if (this.ai[3] > (float) (num418*10))
                                                                                                        {
                                                                                                            this.ai[3] = 0f;
                                                                                                        }
                                                                                                        if (this.justHit)
                                                                                                        {
                                                                                                            this.ai[3] = 0f;
                                                                                                        }
                                                                                                        if (this.ai[3] == (float) num418)
                                                                                                        {
                                                                                                            this.netUpdate = true;
                                                                                                        }
                                                                                                        Vector2 vector41 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                        float num419 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector41.X;
                                                                                                        float num420 = Main.player[this.target].position.Y - vector41.Y;
                                                                                                        float num421 = (float) Math.Sqrt((double) (num419*num419 + num420*num420));
                                                                                                        if (num421 < 200f)
                                                                                                        {
                                                                                                            this.ai[3] = 0f;
                                                                                                        }
                                                                                                        if (this.type == 155 && this.velocity.Y == 0f && num421 < 100f && Math.Abs(this.velocity.X) > 3f && ((this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) && this.velocity.X > 0f) || (this.position.X + (float) (this.width/2) > Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) && this.velocity.X < 0f)))
                                                                                                        {
                                                                                                            this.velocity.Y = this.velocity.Y - 4f;
                                                                                                        }
                                                                                                        if (this.ai[3] < (float) num418)
                                                                                                        {
                                                                                                            this.TargetClosest(true);
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (this.velocity.X == 0f)
                                                                                                            {
                                                                                                                if (this.velocity.Y == 0f)
                                                                                                                {
                                                                                                                    this.ai[0] += 1f;
                                                                                                                    if (this.ai[0] >= 2f)
                                                                                                                    {
                                                                                                                        this.direction *= -1;
                                                                                                                        this.spriteDirection = this.direction;
                                                                                                                        this.ai[0] = 0f;
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                this.ai[0] = 0f;
                                                                                                            }
                                                                                                            this.directionY = -1;
                                                                                                            if (this.direction == 0)
                                                                                                            {
                                                                                                                this.direction = 1;
                                                                                                            }
                                                                                                        }
                                                                                                        float num422 = 6f;
                                                                                                        if (this.velocity.Y == 0f || this.wet || (this.velocity.X <= 0f && this.direction < 0) || (this.velocity.X >= 0f && this.direction > 0))
                                                                                                        {
                                                                                                            if (this.type == 155)
                                                                                                            {
                                                                                                                if (this.velocity.X > 0f && this.direction < 0)
                                                                                                                {
                                                                                                                    this.velocity.X = this.velocity.X*0.95f;
                                                                                                                }
                                                                                                                if (this.velocity.X < 0f && this.direction > 0)
                                                                                                                {
                                                                                                                    this.velocity.X = this.velocity.X*0.95f;
                                                                                                                }
                                                                                                            }
                                                                                                            if (this.velocity.X < -num422 || this.velocity.X > num422)
                                                                                                            {
                                                                                                                if (this.velocity.Y == 0f)
                                                                                                                {
                                                                                                                    this.velocity *= 0.8f;
                                                                                                                }
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (this.velocity.X < num422 && this.direction == 1)
                                                                                                                {
                                                                                                                    this.velocity.X = this.velocity.X + 0.07f;
                                                                                                                    if (this.velocity.X > num422)
                                                                                                                    {
                                                                                                                        this.velocity.X = num422;
                                                                                                                    }
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (this.velocity.X > -num422 && this.direction == -1)
                                                                                                                    {
                                                                                                                        this.velocity.X = this.velocity.X - 0.07f;
                                                                                                                        if (this.velocity.X < -num422)
                                                                                                                        {
                                                                                                                            this.velocity.X = -num422;
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                        if (this.velocity.Y >= 0f)
                                                                                                        {
                                                                                                            int num423 = 0;
                                                                                                            if (this.velocity.X < 0f)
                                                                                                            {
                                                                                                                num423 = -1;
                                                                                                            }
                                                                                                            if (this.velocity.X > 0f)
                                                                                                            {
                                                                                                                num423 = 1;
                                                                                                            }
                                                                                                            Vector2 vector42 = this.position;
                                                                                                            vector42.X += this.velocity.X;
                                                                                                            int num424 = (int) ((vector42.X + (float) (this.width/2) + (float) ((this.width/2 + 1)*num423))/16f);
                                                                                                            int num425 = (int) ((vector42.Y + (float) this.height - 1f)/16f);
                                                                                                            if (Main.tile[num424, num425] == null)
                                                                                                            {
                                                                                                                Main.tile[num424, num425] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num424, num425 - 1] == null)
                                                                                                            {
                                                                                                                Main.tile[num424, num425 - 1] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num424, num425 - 2] == null)
                                                                                                            {
                                                                                                                Main.tile[num424, num425 - 2] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num424, num425 - 3] == null)
                                                                                                            {
                                                                                                                Main.tile[num424, num425 - 3] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num424, num425 + 1] == null)
                                                                                                            {
                                                                                                                Main.tile[num424, num425 + 1] = new Tile();
                                                                                                            }
                                                                                                            if ((float) (num424*16) < vector42.X + (float) this.width && (float) (num424*16 + 16) > vector42.X && ((Main.tile[num424, num425].nactive() && Main.tile[num424, num425].slope() == 0 && Main.tile[num424, num425 - 1].slope() == 0 && Main.tileSolid[(int) Main.tile[num424, num425].type] && !Main.tileSolidTop[(int) Main.tile[num424, num425].type]) || (Main.tile[num424, num425 - 1].halfBrick() && Main.tile[num424, num425 - 1].nactive())) && (!Main.tile[num424, num425 - 1].nactive() || !Main.tileSolid[(int) Main.tile[num424, num425 - 1].type] || Main.tileSolidTop[(int) Main.tile[num424, num425 - 1].type] || (Main.tile[num424, num425 - 1].halfBrick() && (!Main.tile[num424, num425 - 4].nactive() || !Main.tileSolid[(int) Main.tile[num424, num425 - 4].type] || Main.tileSolidTop[(int) Main.tile[num424, num425 - 4].type]))) && (!Main.tile[num424, num425 - 2].nactive() || !Main.tileSolid[(int) Main.tile[num424, num425 - 2].type] || Main.tileSolidTop[(int) Main.tile[num424, num425 - 2].type]) && (!Main.tile[num424, num425 - 3].nactive() || !Main.tileSolid[(int) Main.tile[num424, num425 - 3].type] || Main.tileSolidTop[(int) Main.tile[num424, num425 - 3].type]) && (!Main.tile[num424 - num423, num425 - 3].nactive() || !Main.tileSolid[(int) Main.tile[num424 - num423, num425 - 3].type]))
                                                                                                            {
                                                                                                                float num426 = (float) (num425*16);
                                                                                                                if (Main.tile[num424, num425].halfBrick())
                                                                                                                {
                                                                                                                    num426 += 8f;
                                                                                                                }
                                                                                                                if (Main.tile[num424, num425 - 1].halfBrick())
                                                                                                                {
                                                                                                                    num426 -= 8f;
                                                                                                                }
                                                                                                                if (num426 < vector42.Y + (float) this.height)
                                                                                                                {
                                                                                                                    float num427 = vector42.Y + (float) this.height - num426;
                                                                                                                    if ((double) num427 <= 16.1)
                                                                                                                    {
                                                                                                                        this.gfxOffY += this.position.Y + (float) this.height - num426;
                                                                                                                        this.position.Y = num426 - (float) this.height;
                                                                                                                        if (num427 < 9f)
                                                                                                                        {
                                                                                                                            this.stepSpeed = 1f;
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            this.stepSpeed = 2f;
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                        if (this.velocity.Y == 0f)
                                                                                                        {
                                                                                                            int num428 = (int) ((this.position.X + (float) (this.width/2) + (float) ((this.width/2 + 2)*this.direction) + this.velocity.X*5f)/16f);
                                                                                                            int num429 = (int) ((this.position.Y + (float) this.height - 15f)/16f);
                                                                                                            if (Main.tile[num428, num429] == null)
                                                                                                            {
                                                                                                                Main.tile[num428, num429] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num428, num429 - 1] == null)
                                                                                                            {
                                                                                                                Main.tile[num428, num429 - 1] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num428, num429 - 2] == null)
                                                                                                            {
                                                                                                                Main.tile[num428, num429 - 2] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num428, num429 - 3] == null)
                                                                                                            {
                                                                                                                Main.tile[num428, num429 - 3] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num428, num429 + 1] == null)
                                                                                                            {
                                                                                                                Main.tile[num428, num429 + 1] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num428 + this.direction, num429 - 1] == null)
                                                                                                            {
                                                                                                                Main.tile[num428 + this.direction, num429 - 1] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num428 + this.direction, num429 + 1] == null)
                                                                                                            {
                                                                                                                Main.tile[num428 + this.direction, num429 + 1] = new Tile();
                                                                                                            }
                                                                                                            if (Main.tile[num428 - this.direction, num429 + 1] == null)
                                                                                                            {
                                                                                                                Main.tile[num428 - this.direction, num429 + 1] = new Tile();
                                                                                                            }
                                                                                                            if ((this.velocity.X < 0f && this.spriteDirection == -1) || (this.velocity.X > 0f && this.spriteDirection == 1))
                                                                                                            {
                                                                                                                if (Main.tile[num428, num429 - 2].nactive() && Main.tileSolid[(int) Main.tile[num428, num429 - 2].type])
                                                                                                                {
                                                                                                                    if (Main.tile[num428, num429 - 3].nactive() && Main.tileSolid[(int) Main.tile[num428, num429 - 3].type])
                                                                                                                    {
                                                                                                                        this.velocity.Y = -8.5f;
                                                                                                                        this.netUpdate = true;
                                                                                                                        return;
                                                                                                                    }
                                                                                                                    this.velocity.Y = -7.5f;
                                                                                                                    this.netUpdate = true;
                                                                                                                    return;
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (Main.tile[num428, num429 - 1].nactive() && Main.tile[num428, num429 - 1].slope() == 0 && Main.tileSolid[(int) Main.tile[num428, num429 - 1].type])
                                                                                                                    {
                                                                                                                        this.velocity.Y = -7f;
                                                                                                                        this.netUpdate = true;
                                                                                                                        return;
                                                                                                                    }
                                                                                                                    if (this.position.Y + (float) this.height - (float) (num429*16) > 20f && Main.tile[num428, num429].nactive() && Main.tile[num428, num429].slope() == 0 && Main.tileSolid[(int) Main.tile[num428, num429].type])
                                                                                                                    {
                                                                                                                        this.velocity.Y = -6f;
                                                                                                                        this.netUpdate = true;
                                                                                                                        return;
                                                                                                                    }
                                                                                                                    if ((this.directionY < 0 || Math.Abs(this.velocity.X) > 3f) && (!Main.tile[num428, num429 + 2].nactive() || !Main.tileSolid[(int) Main.tile[num428, num429 + 2].type]) && (!Main.tile[num428 + this.direction, num429 + 3].nactive() || !Main.tileSolid[(int) Main.tile[num428 + this.direction, num429 + 3].type]))
                                                                                                                    {
                                                                                                                        this.velocity.Y = -8f;
                                                                                                                        this.netUpdate = true;
                                                                                                                        return;
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (this.aiStyle == 27)
                                                                                                        {
                                                                                                            if (this.position.X < 160f || this.position.X > (float) ((Main.maxTilesX - 10)*16))
                                                                                                            {
                                                                                                                this.active = false;
                                                                                                                if (Main.netMode != 1) Main.gameTime = -300;
                                                                                                            }
                                                                                                            if (this.localAI[0] == 0f)
                                                                                                            {
                                                                                                                this.localAI[0] = 1f;
                                                                                                                Main.wofB = -1;
                                                                                                                Main.wofT = -1;
                                                                                                            }
                                                                                                            this.ai[1] += 1f;
                                                                                                            if (this.ai[2] == 0f)
                                                                                                            {
                                                                                                                if ((double) this.life < (double) this.lifeMax*0.5)
                                                                                                                {
                                                                                                                    this.ai[1] += 1f;
                                                                                                                }
                                                                                                                if ((double) this.life < (double) this.lifeMax*0.2)
                                                                                                                {
                                                                                                                    this.ai[1] += 1f;
                                                                                                                }
                                                                                                                if (this.ai[1] > 2700f)
                                                                                                                {
                                                                                                                    this.ai[2] = 1f;
                                                                                                                }
                                                                                                            }
                                                                                                            if (this.ai[2] > 0f && this.ai[1] > 60f)
                                                                                                            {
                                                                                                                int num430 = 3;
                                                                                                                if ((double) this.life < (double) this.lifeMax*0.3)
                                                                                                                {
                                                                                                                    num430
                                                                                                                        ++;
                                                                                                                }
                                                                                                                this.ai[2] += 1f;
                                                                                                                this.ai[1] = 0f;
                                                                                                                if (this.ai[2] > (float) num430)
                                                                                                                {
                                                                                                                    this.ai[2] = 0f;
                                                                                                                }
                                                                                                                if (Main.netMode != 1)
                                                                                                                {
                                                                                                                    int num431 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) (this.height/2) + 20f), 117, 1);
                                                                                                                    Main.npc[num431].velocity.X = (float) (this.direction*8);
                                                                                                                }
                                                                                                            }
                                                                                                            this.localAI[3] += 1f;
                                                                                                            if (this.localAI[3] >= (float) (600 + Main.rand.Next(1000)))
                                                                                                            {
                                                                                                                this.localAI[3] = (float) (-(float) Main.rand.Next(200));
                                                                                                                Main.PlaySound(4, (int) this.position.X, (int) this.position.Y, 10);
                                                                                                            }
                                                                                                            Main.wof = this.whoAmI;
                                                                                                            int num432 = (int) (this.position.X/16f);
                                                                                                            int num433 = (int) ((this.position.X + (float) this.width)/16f);
                                                                                                            int num434 = (int) ((this.position.Y + (float) (this.height/2))/16f);
                                                                                                            int num435 = 0;
                                                                                                            int num436 = num434 + 7;
                                                                                                            while (num435 < 15 && num436 > Main.maxTilesY - 200)
                                                                                                            {
                                                                                                                num436++;
                                                                                                                for (int num437 = num432; num437 <= num433; num437
                                                                                                                    ++)
                                                                                                                {
                                                                                                                    try
                                                                                                                    {
                                                                                                                        if (WorldGen.SolidTile(num437, num436) || Main.tile[num437, num436].liquid > 0)
                                                                                                                        {
                                                                                                                            num435
                                                                                                                                ++;
                                                                                                                        }
                                                                                                                    }
                                                                                                                    catch
                                                                                                                    {
                                                                                                                        num435 += 15;
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                            num436 += 4;
                                                                                                            if (Main.wofB == -1)
                                                                                                            {
                                                                                                                Main.wofB = num436*16;
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (Main.wofB > num436*16)
                                                                                                                {
                                                                                                                    Main.wofB
                                                                                                                        --;
                                                                                                                    if (Main.wofB < num436*16)
                                                                                                                    {
                                                                                                                        Main.wofB = num436*16;
                                                                                                                    }
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (Main.wofB < num436*16)
                                                                                                                    {
                                                                                                                        Main.wofB
                                                                                                                            ++;
                                                                                                                        if (Main.wofB > num436*16)
                                                                                                                        {
                                                                                                                            Main.wofB = num436*16;
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                            num435 = 0;
                                                                                                            num436 = num434 - 7;
                                                                                                            while (num435 < 15 && num436 < Main.maxTilesY - 10)
                                                                                                            {
                                                                                                                num436--;
                                                                                                                for (int num438 = num432; num438 <= num433; num438
                                                                                                                    ++)
                                                                                                                {
                                                                                                                    try
                                                                                                                    {
                                                                                                                        if (WorldGen.SolidTile(num438, num436) || Main.tile[num438, num436].liquid > 0)
                                                                                                                        {
                                                                                                                            num435
                                                                                                                                ++;
                                                                                                                        }
                                                                                                                    }
                                                                                                                    catch
                                                                                                                    {
                                                                                                                        num435 += 15;
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                            num436 -= 4;
                                                                                                            if (Main.wofT == -1)
                                                                                                            {
                                                                                                                Main.wofT = num436*16;
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (Main.wofT > num436*16)
                                                                                                                {
                                                                                                                    Main.wofT
                                                                                                                        --;
                                                                                                                    if (Main.wofT < num436*16)
                                                                                                                    {
                                                                                                                        Main.wofT = num436*16;
                                                                                                                    }
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (Main.wofT < num436*16)
                                                                                                                    {
                                                                                                                        Main.wofT
                                                                                                                            ++;
                                                                                                                        if (Main.wofT > num436*16)
                                                                                                                        {
                                                                                                                            Main.wofT = num436*16;
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                            float num439 = (float) ((Main.wofB + Main.wofT)/2 - this.height/2);
                                                                                                            if (this.position.Y > num439 + 1f)
                                                                                                            {
                                                                                                                this.velocity.Y = -1f;
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (this.position.Y < num439 - 1f)
                                                                                                                {
                                                                                                                    this.velocity.Y = 1f;
                                                                                                                }
                                                                                                            }
                                                                                                            this.velocity.Y = 0f;
                                                                                                            this.position.Y = num439;
                                                                                                            float num440 = 1.5f;
                                                                                                            if ((double) this.life < (double) this.lifeMax*0.75)
                                                                                                            {
                                                                                                                num440 += 0.25f;
                                                                                                            }
                                                                                                            if ((double) this.life < (double) this.lifeMax*0.5)
                                                                                                            {
                                                                                                                num440 += 0.4f;
                                                                                                            }
                                                                                                            if ((double) this.life < (double) this.lifeMax*0.25)
                                                                                                            {
                                                                                                                num440 += 0.5f;
                                                                                                            }
                                                                                                            if ((double) this.life < (double) this.lifeMax*0.1)
                                                                                                            {
                                                                                                                num440 += 0.6f;
                                                                                                            }
                                                                                                            if (this.velocity.X == 0f)
                                                                                                            {
                                                                                                                this.TargetClosest(true);
                                                                                                                this.velocity.X = (float) this.direction;
                                                                                                            }
                                                                                                            if (this.velocity.X < 0f)
                                                                                                            {
                                                                                                                this.velocity.X = -num440;
                                                                                                                this.direction = -1;
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                this.velocity.X = num440;
                                                                                                                this.direction = 1;
                                                                                                            }
                                                                                                            this.spriteDirection = this.direction;
                                                                                                            Vector2 vector43 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                            float num441 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector43.X;
                                                                                                            float num442 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector43.Y;
                                                                                                            float num443 = (float) Math.Sqrt((double) (num441*num441 + num442*num442));
                                                                                                            num441 *= num443;
                                                                                                            num442 *= num443;
                                                                                                            if (this.direction > 0)
                                                                                                            {
                                                                                                                if (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) > this.position.X + (float) (this.width/2))
                                                                                                                {
                                                                                                                    this.rotation = (float) Math.Atan2((double) (-(double) num442), (double) (-(double) num441)) + 3.14f;
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    this.rotation = 0f;
                                                                                                                }
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) < this.position.X + (float) (this.width/2))
                                                                                                                {
                                                                                                                    this.rotation = (float) Math.Atan2((double) num442, (double) num441) + 3.14f;
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    this.rotation = 0f;
                                                                                                                }
                                                                                                            }
                                                                                                            if (this.localAI[0] == 1f && Main.netMode != 1)
                                                                                                            {
                                                                                                                this.localAI[0] = 2f;
                                                                                                                num439 = (float) ((Main.wofB + Main.wofT)/2);
                                                                                                                num439 = (num439 + (float) Main.wofT)/2f;
                                                                                                                int num444 = NPC.NewNPC((int) this.position.X, (int) num439, 114, this.whoAmI);
                                                                                                                Main.npc[num444].ai[0] = 1f;
                                                                                                                num439 = (float) ((Main.wofB + Main.wofT)/2);
                                                                                                                num439 = (num439 + (float) Main.wofB)/2f;
                                                                                                                num444 = NPC.NewNPC((int) this.position.X, (int) num439, 114, this.whoAmI);
                                                                                                                Main.npc[num444].ai[0] = -1f;
                                                                                                                num439 = (float) ((Main.wofB + Main.wofT)/2);
                                                                                                                num439 = (num439 + (float) Main.wofB)/2f;
                                                                                                                for (int num445 = 0; num445 < 11; num445
                                                                                                                    ++)
                                                                                                                {
                                                                                                                    num444 = NPC.NewNPC((int) this.position.X, (int) num439, 115, this.whoAmI);
                                                                                                                    Main.npc[num444].ai[0] = (float) num445*0.1f - 0.05f;
                                                                                                                }
                                                                                                                return;
                                                                                                            }
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (this.aiStyle == 28)
                                                                                                            {
                                                                                                                if (Main.wof < 0)
                                                                                                                {
                                                                                                                    this.active = false;
                                                                                                                    return;
                                                                                                                }
                                                                                                                this.realLife = Main.wof;
                                                                                                                if (Main.npc[Main.wof].life > 0)
                                                                                                                {
                                                                                                                    this.life = Main.npc[Main.wof].life;
                                                                                                                }
                                                                                                                this.TargetClosest(true);
                                                                                                                this.position.X = Main.npc[Main.wof].position.X;
                                                                                                                this.direction = Main.npc[Main.wof].direction;
                                                                                                                this.spriteDirection = this.direction;
                                                                                                                float num446 = (float) ((Main.wofB + Main.wofT)/2);
                                                                                                                if (this.ai[0] > 0f)
                                                                                                                {
                                                                                                                    num446 = (num446 + (float) Main.wofT)/2f;
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    num446 = (num446 + (float) Main.wofB)/2f;
                                                                                                                }
                                                                                                                num446 -= (float) (this.height/2);
                                                                                                                if (this.position.Y > num446 + 1f)
                                                                                                                {
                                                                                                                    this.velocity.Y = -1f;
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (this.position.Y < num446 - 1f)
                                                                                                                    {
                                                                                                                        this.velocity.Y = 1f;
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        this.velocity.Y = 0f;
                                                                                                                        this.position.Y = num446;
                                                                                                                    }
                                                                                                                }
                                                                                                                if (this.velocity.Y > 5f)
                                                                                                                {
                                                                                                                    this.velocity.Y = 5f;
                                                                                                                }
                                                                                                                if (this.velocity.Y < -5f)
                                                                                                                {
                                                                                                                    this.velocity.Y = -5f;
                                                                                                                }
                                                                                                                Vector2 vector44 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                float num447 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector44.X;
                                                                                                                float num448 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector44.Y;
                                                                                                                float num449 = (float) Math.Sqrt((double) (num447*num447 + num448*num448));
                                                                                                                num447 *= num449;
                                                                                                                num448 *= num449;
                                                                                                                bool flag41 = true;
                                                                                                                if (this.direction > 0)
                                                                                                                {
                                                                                                                    if (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) > this.position.X + (float) (this.width/2))
                                                                                                                    {
                                                                                                                        this.rotation = (float) Math.Atan2((double) (-(double) num448), (double) (-(double) num447)) + 3.14f;
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        this.rotation = 0f;
                                                                                                                        flag41 = false;
                                                                                                                    }
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) < this.position.X + (float) (this.width/2))
                                                                                                                    {
                                                                                                                        this.rotation = (float) Math.Atan2((double) num448, (double) num447) + 3.14f;
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        this.rotation = 0f;
                                                                                                                        flag41 = false;
                                                                                                                    }
                                                                                                                }
                                                                                                                if (Main.netMode != 1)
                                                                                                                {
                                                                                                                    int num450 = 4;
                                                                                                                    this.localAI[1] += 1f;
                                                                                                                    if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.75)
                                                                                                                    {
                                                                                                                        this.localAI[1] += 1f;
                                                                                                                        num450
                                                                                                                            ++;
                                                                                                                    }
                                                                                                                    if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.5)
                                                                                                                    {
                                                                                                                        this.localAI[1] += 1f;
                                                                                                                        num450
                                                                                                                            ++;
                                                                                                                    }
                                                                                                                    if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.25)
                                                                                                                    {
                                                                                                                        this.localAI[1] += 1f;
                                                                                                                        num450 += 2;
                                                                                                                    }
                                                                                                                    if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.1)
                                                                                                                    {
                                                                                                                        this.localAI[1] += 2f;
                                                                                                                        num450 += 3;
                                                                                                                    }
                                                                                                                    if (this.localAI[2] == 0f)
                                                                                                                    {
                                                                                                                        if (this.localAI[1] > 600f)
                                                                                                                        {
                                                                                                                            this.localAI[2] = 1f;
                                                                                                                            this.localAI[1] = 0f;
                                                                                                                            return;
                                                                                                                        }
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        if (this.localAI[1] > 45f && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                        {
                                                                                                                            this.localAI[1] = 0f;
                                                                                                                            this.localAI[2] += 1f;
                                                                                                                            if (this.localAI[2] >= (float) num450)
                                                                                                                            {
                                                                                                                                this.localAI[2] = 0f;
                                                                                                                            }
                                                                                                                            if (flag41)
                                                                                                                            {
                                                                                                                                float num451 = 9f;
                                                                                                                                int num452 = (Main.bossLevel * 5) + 20;
                                                                                                                                int num453 = 83;
                                                                                                                                if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.5)
                                                                                                                                {
                                                                                                                                    num452
                                                                                                                                        ++;
                                                                                                                                    num451 += 1f;
                                                                                                                                }
                                                                                                                                if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.25)
                                                                                                                                {
                                                                                                                                    num452
                                                                                                                                        ++;
                                                                                                                                    num451 += 1f;
                                                                                                                                }
                                                                                                                                if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.1)
                                                                                                                                {
                                                                                                                                    num452 += 2;
                                                                                                                                    num451 += 2f;
                                                                                                                                }
                                                                                                                                vector44 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                num447 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector44.X;
                                                                                                                                num448 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector44.Y;
                                                                                                                                num449 = (float) Math.Sqrt((double) (num447*num447 + num448*num448));
                                                                                                                                num449 = num451/num449;
                                                                                                                                num447 *= num449;
                                                                                                                                num448 *= num449;
                                                                                                                                vector44.X += num447;
                                                                                                                                vector44.Y += num448;
                                                                                                                                Projectile.NewProjectile(vector44.X, vector44.Y, num447, num448, num453, num452, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                return;
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (this.aiStyle == 29)
                                                                                                                {
                                                                                                                    if (this.justHit)
                                                                                                                    {
                                                                                                                        this.ai[1] = 10f;
                                                                                                                    }
                                                                                                                    if (Main.wof < 0)
                                                                                                                    {
                                                                                                                        this.active = false;
                                                                                                                        return;
                                                                                                                    }
                                                                                                                    this.TargetClosest(true);
                                                                                                                    float num454 = 0.1f;
                                                                                                                    float num455 = 300f;
                                                                                                                    if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.25)
                                                                                                                    {
                                                                                                                        this.damage = 75;
                                                                                                                        this.defense = 40;
                                                                                                                        num455 = 900f;
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.5)
                                                                                                                        {
                                                                                                                            this.damage = 60;
                                                                                                                            this.defense = 30;
                                                                                                                            num455 = 700f;
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if ((double) Main.npc[Main.wof].life < (double) Main.npc[Main.wof].lifeMax*0.75)
                                                                                                                            {
                                                                                                                                this.damage = 45;
                                                                                                                                this.defense = 20;
                                                                                                                                num455 = 500f;
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                    float num456 = Main.npc[Main.wof].position.X + (float) (Main.npc[Main.wof].width/2);
                                                                                                                    float num457 = Main.npc[Main.wof].position.Y;
                                                                                                                    float num458 = (float) (Main.wofB - Main.wofT);
                                                                                                                    num457 = (float) Main.wofT + num458*this.ai[0];
                                                                                                                    this.ai[2] += 1f;
                                                                                                                    if (this.ai[2] > 100f)
                                                                                                                    {
                                                                                                                        num455 = (float) ((int) (num455*1.3f));
                                                                                                                        if (this.ai[2] > 200f)
                                                                                                                        {
                                                                                                                            this.ai[2] = 0f;
                                                                                                                        }
                                                                                                                    }
                                                                                                                    Vector2 vector45 = new Vector2(num456, num457);
                                                                                                                    float num459 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - (float) (this.width/2) - vector45.X;
                                                                                                                    float num460 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - (float) (this.height/2) - vector45.Y;
                                                                                                                    float num461 = (float) Math.Sqrt((double) (num459*num459 + num460*num460));
                                                                                                                    if (this.ai[1] == 0f)
                                                                                                                    {
                                                                                                                        if (num461 > num455)
                                                                                                                        {
                                                                                                                            num461 = num455/num461;
                                                                                                                            num459 *= num461;
                                                                                                                            num460 *= num461;
                                                                                                                        }
                                                                                                                        if (this.position.X < num456 + num459)
                                                                                                                        {
                                                                                                                            this.velocity.X = this.velocity.X + num454;
                                                                                                                            if (this.velocity.X < 0f && num459 > 0f)
                                                                                                                            {
                                                                                                                                this.velocity.X = this.velocity.X + num454*2.5f;
                                                                                                                            }
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if (this.position.X > num456 + num459)
                                                                                                                            {
                                                                                                                                this.velocity.X = this.velocity.X - num454;
                                                                                                                                if (this.velocity.X > 0f && num459 < 0f)
                                                                                                                                {
                                                                                                                                    this.velocity.X = this.velocity.X - num454*2.5f;
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                        if (this.position.Y < num457 + num460)
                                                                                                                        {
                                                                                                                            this.velocity.Y = this.velocity.Y + num454;
                                                                                                                            if (this.velocity.Y < 0f && num460 > 0f)
                                                                                                                            {
                                                                                                                                this.velocity.Y = this.velocity.Y + num454*2.5f;
                                                                                                                            }
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if (this.position.Y > num457 + num460)
                                                                                                                            {
                                                                                                                                this.velocity.Y = this.velocity.Y - num454;
                                                                                                                                if (this.velocity.Y > 0f && num460 < 0f)
                                                                                                                                {
                                                                                                                                    this.velocity.Y = this.velocity.Y - num454*2.5f;
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                        if (this.velocity.X > 4f)
                                                                                                                        {
                                                                                                                            this.velocity.X = 4f;
                                                                                                                        }
                                                                                                                        if (this.velocity.X < -4f)
                                                                                                                        {
                                                                                                                            this.velocity.X = -4f;
                                                                                                                        }
                                                                                                                        if (this.velocity.Y > 4f)
                                                                                                                        {
                                                                                                                            this.velocity.Y = 4f;
                                                                                                                        }
                                                                                                                        if (this.velocity.Y < -4f)
                                                                                                                        {
                                                                                                                            this.velocity.Y = -4f;
                                                                                                                        }
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        if (this.ai[1] > 0f)
                                                                                                                        {
                                                                                                                            this.ai[1] -= 1f;
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            this.ai[1] = 0f;
                                                                                                                        }
                                                                                                                    }
                                                                                                                    if (num459 > 0f)
                                                                                                                    {
                                                                                                                        this.spriteDirection = 1;
                                                                                                                        this.rotation = (float) Math.Atan2((double) num460, (double) num459);
                                                                                                                    }
                                                                                                                    if (num459 < 0f)
                                                                                                                    {
                                                                                                                        this.spriteDirection = -1;
                                                                                                                        this.rotation = (float) Math.Atan2((double) num460, (double) num459) + 3.14f;
                                                                                                                    }
                                                                                                                    Lighting.addLight((int) (this.position.X + (float) (this.width/2))/16, (int) (this.position.Y + (float) (this.height/2))/16, 0.3f, 0.2f, 0.1f);
                                                                                                                    return;
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (this.aiStyle == 30)
                                                                                                                    {
                                                                                                                        if (this.target < 0 || this.target == 255 || Main.player[this.target].dead || !Main.player[this.target].active)
                                                                                                                        {
                                                                                                                            this.TargetClosest(true);
                                                                                                                        }
                                                                                                                        bool dead2 = Main.player[this.target].dead;
                                                                                                                        float num462 = this.position.X + (float) (this.width/2) - Main.player[this.target].position.X - (float) (Main.player[this.target].width/2);
                                                                                                                        float num463 = this.position.Y + (float) this.height - 59f - Main.player[this.target].position.Y - (float) (Main.player[this.target].height/2);
                                                                                                                        float num464 = (float) Math.Atan2((double) num463, (double) num462) + 1.57f;
                                                                                                                        if (num464 < 0f)
                                                                                                                        {
                                                                                                                            num464 += 6.283f;
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if ((double) num464 > 6.283)
                                                                                                                            {
                                                                                                                                num464 -= 6.283f;
                                                                                                                            }
                                                                                                                        }
                                                                                                                        float num465 = 0.1f;
                                                                                                                        if (this.rotation < num464)
                                                                                                                        {
                                                                                                                            if ((double) (num464 - this.rotation) > 3.1415)
                                                                                                                            {
                                                                                                                                this.rotation -= num465;
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                this.rotation += num465;
                                                                                                                            }
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if (this.rotation > num464)
                                                                                                                            {
                                                                                                                                if ((double) (this.rotation - num464) > 3.1415)
                                                                                                                                {
                                                                                                                                    this.rotation += num465;
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    this.rotation -= num465;
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                        if (this.rotation > num464 - num465 && this.rotation < num464 + num465)
                                                                                                                        {
                                                                                                                            this.rotation = num464;
                                                                                                                        }
                                                                                                                        if (this.rotation < 0f)
                                                                                                                        {
                                                                                                                            this.rotation += 6.283f;
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if ((double) this.rotation > 6.283)
                                                                                                                            {
                                                                                                                                this.rotation -= 6.283f;
                                                                                                                            }
                                                                                                                        }
                                                                                                                        if (this.rotation > num464 - num465 && this.rotation < num464 + num465)
                                                                                                                        {
                                                                                                                            this.rotation = num464;
                                                                                                                        }
                                                                                                                        if (Main.rand.Next(5) == 0)
                                                                                                                        {
                                                                                                                            int num466 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + (float) this.height*0.25f), this.width, (int) ((float) this.height*0.5f), 5, this.velocity.X, 2f, 0, default(Color), 1f);
                                                                                                                            Dust expr_1CD4E_cp_0 = Main.dust[num466];
                                                                                                                            expr_1CD4E_cp_0.velocity.X = expr_1CD4E_cp_0.velocity.X*0.5f;
                                                                                                                            Dust expr_1CD6E_cp_0 = Main.dust[num466];
                                                                                                                            expr_1CD6E_cp_0.velocity.Y = expr_1CD6E_cp_0.velocity.Y*0.1f;
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if (this.ai[0] == 0f)
                                                                                                                            {
                                                                                                                                if (this.ai[1] == 0f)
                                                                                                                                {
                                                                                                                                    float num467 = 7f;
                                                                                                                                    float num468 = 0.1f;
                                                                                                                                    int num469 = 1;
                                                                                                                                    if (this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) Main.player[this.target].width)
                                                                                                                                    {
                                                                                                                                        num469 = -1;
                                                                                                                                    }
                                                                                                                                    Vector2 vector46 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                    float num470 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) + (float) (num469*300) - vector46.X;
                                                                                                                                    float num471 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - 300f - vector46.Y;
                                                                                                                                    float num472 = (float) Math.Sqrt((double) (num470*num470 + num471*num471));
                                                                                                                                    float num473 = num472;
                                                                                                                                    num472 = num467/num472;
                                                                                                                                    num470 *= num472;
                                                                                                                                    num471 *= num472;
                                                                                                                                    if (this.velocity.X < num470)
                                                                                                                                    {
                                                                                                                                        this.velocity.X = this.velocity.X + num468;
                                                                                                                                        if (this.velocity.X < 0f && num470 > 0f)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = this.velocity.X + num468;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (this.velocity.X > num470)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = this.velocity.X - num468;
                                                                                                                                            if (this.velocity.X > 0f && num470 < 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X - num468;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    if (this.velocity.Y < num471)
                                                                                                                                    {
                                                                                                                                        this.velocity.Y = this.velocity.Y + num468;
                                                                                                                                        if (this.velocity.Y < 0f && num471 > 0f)
                                                                                                                                        {
                                                                                                                                            this.velocity.Y = this.velocity.Y + num468;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (this.velocity.Y > num471)
                                                                                                                                        {
                                                                                                                                            this.velocity.Y = this.velocity.Y - num468;
                                                                                                                                            if (this.velocity.Y > 0f && num471 < 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y - num468;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                    if (this.ai[2] >= 600f)
                                                                                                                                    {
                                                                                                                                        this.ai[1] = 1f;
                                                                                                                                        this.ai[2] = 0f;
                                                                                                                                        this.ai[3] = 0f;
                                                                                                                                        this.target = 255;
                                                                                                                                        this.netUpdate = true;
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (this.position.Y + (float) this.height < Main.player[this.target].position.Y && num473 < 400f)
                                                                                                                                        {
                                                                                                                                            if (!Main.player[this.target].dead)
                                                                                                                                            {
                                                                                                                                                this.ai[3] += 1f;
                                                                                                                                            }
                                                                                                                                            if (this.ai[3] >= 60f)
                                                                                                                                            {
                                                                                                                                                this.ai[3] = 0f;
                                                                                                                                                vector46 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                num470 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector46.X;
                                                                                                                                                num471 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector46.Y;
                                                                                                                                                if (Main.netMode != 1)
                                                                                                                                                {
                                                                                                                                                    float num474 = 9f;
                                                                                                                                                    int num475 = 20 + (Main.bossLevel * 5);
                                                                                                                                                    int num476 = 83;
                                                                                                                                                    num472 = (float) Math.Sqrt((double) (num470*num470 + num471*num471));
                                                                                                                                                    num472 = num474/num472;
                                                                                                                                                    num470 *= num472;
                                                                                                                                                    num471 *= num472;
                                                                                                                                                    num470 += (float) Main.rand.Next(-40, 41)*0.08f;
                                                                                                                                                    num471 += (float) Main.rand.Next(-40, 41)*0.08f;
                                                                                                                                                    vector46.X += num470*15f;
                                                                                                                                                    vector46.Y += num471*15f;
                                                                                                                                                    Projectile.NewProjectile(vector46.X, vector46.Y, num470, num471, num476, num475, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    if (this.ai[1] == 1f)
                                                                                                                                    {
                                                                                                                                        this.rotation = num464;
                                                                                                                                        float num477 = 12f;
                                                                                                                                        Vector2 vector47 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                        float num478 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector47.X;
                                                                                                                                        float num479 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector47.Y;
                                                                                                                                        float num480 = (float) Math.Sqrt((double) (num478*num478 + num479*num479));
                                                                                                                                        num480 = num477/num480;
                                                                                                                                        this.velocity.X = num478*num480;
                                                                                                                                        this.velocity.Y = num479*num480;
                                                                                                                                        this.ai[1] = 2f;
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (this.ai[1] == 2f)
                                                                                                                                        {
                                                                                                                                            this.ai[2] += 1f;
                                                                                                                                            if (this.ai[2] >= 25f)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = 0f;
                                                                                                                                                }
                                                                                                                                                if ((double) this.velocity.Y > -0.1 && (double) this.velocity.Y < 0.1)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = 0f;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) - 1.57f;
                                                                                                                                            }
                                                                                                                                            if (this.ai[2] >= 70f)
                                                                                                                                            {
                                                                                                                                                this.ai[3] += 1f;
                                                                                                                                                this.ai[2] = 0f;
                                                                                                                                                this.target = 255;
                                                                                                                                                this.rotation = num464;
                                                                                                                                                if (this.ai[3] >= 4f)
                                                                                                                                                {
                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                    this.ai[3] = 0f;
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    this.ai[1] = 1f;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                if ((double) this.life < (double) this.lifeMax*0.5)
                                                                                                                                {
                                                                                                                                    this.ai[0] = 1f;
                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                    this.ai[2] = 0f;
                                                                                                                                    this.ai[3] = 0f;
                                                                                                                                    this.netUpdate = true;
                                                                                                                                    return;
                                                                                                                                }
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if (this.ai[0] == 1f || this.ai[0] == 2f)
                                                                                                                                {
                                                                                                                                    if (this.ai[0] == 1f)
                                                                                                                                    {
                                                                                                                                        this.ai[2] += 0.005f;
                                                                                                                                        if ((double) this.ai[2] > 0.5)
                                                                                                                                        {
                                                                                                                                            this.ai[2] = 0.5f;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        this.ai[2] -= 0.005f;
                                                                                                                                        if (this.ai[2] < 0f)
                                                                                                                                        {
                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    this.rotation += this.ai[2];
                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                    if (this.ai[1] == 100f)
                                                                                                                                    {
                                                                                                                                        this.ai[0] += 1f;
                                                                                                                                        this.ai[1] = 0f;
                                                                                                                                        if (this.ai[0] == 3f)
                                                                                                                                        {
                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            Main.PlaySound(3, (int) this.position.X, (int) this.position.Y, 1);
                                                                                                                                            for (int num481 = 0; num481 < 2; num481
                                                                                                                                                ++)
                                                                                                                                            {
                                                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 143, 1f);
                                                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 7, 1f);
                                                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 6, 1f);
                                                                                                                                            }
                                                                                                                                            for (int num482 = 0; num482 < 20; num482
                                                                                                                                                ++)
                                                                                                                                            {
                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f, 0, default(Color), 1f);
                                                                                                                                            }
                                                                                                                                            Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f, 0, default(Color), 1f);
                                                                                                                                    this.velocity.X = this.velocity.X*0.98f;
                                                                                                                                    this.velocity.Y = this.velocity.Y*0.98f;
                                                                                                                                    if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                                                                                                                    {
                                                                                                                                        this.velocity.X = 0f;
                                                                                                                                    }
                                                                                                                                    if ((double) this.velocity.Y > -0.1 && (double) this.velocity.Y < 0.1)
                                                                                                                                    {
                                                                                                                                        this.velocity.Y = 0f;
                                                                                                                                        return;
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    this.damage = (int) ((double) this.defDamage*1.5);
                                                                                                                                    this.defense = this.defDefense + 15;
                                                                                                                                    this.soundHit = 4;
                                                                                                                                    if (this.ai[1] == 0f)
                                                                                                                                    {
                                                                                                                                        float num483 = 8f;
                                                                                                                                        float num484 = 0.15f;
                                                                                                                                        Vector2 vector48 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                        float num485 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector48.X;
                                                                                                                                        float num486 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - 300f - vector48.Y;
                                                                                                                                        float num487 = (float) Math.Sqrt((double) (num485*num485 + num486*num486));
                                                                                                                                        num487 = num483/num487;
                                                                                                                                        num485 *= num487;
                                                                                                                                        num486 *= num487;
                                                                                                                                        if (this.velocity.X < num485)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = this.velocity.X + num484;
                                                                                                                                            if (this.velocity.X < 0f && num485 > 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X + num484;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.velocity.X > num485)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X - num484;
                                                                                                                                                if (this.velocity.X > 0f && num485 < 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = this.velocity.X - num484;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        if (this.velocity.Y < num486)
                                                                                                                                        {
                                                                                                                                            this.velocity.Y = this.velocity.Y + num484;
                                                                                                                                            if (this.velocity.Y < 0f && num486 > 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y + num484;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.velocity.Y > num486)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y - num484;
                                                                                                                                                if (this.velocity.Y > 0f && num486 < 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = this.velocity.Y - num484;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        this.ai[2] += 1f;
                                                                                                                                        if (this.ai[2] >= 300f)
                                                                                                                                        {
                                                                                                                                            this.ai[1] = 1f;
                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                            this.ai[3] = 0f;
                                                                                                                                            this.TargetClosest(true);
                                                                                                                                            this.netUpdate = true;
                                                                                                                                        }
                                                                                                                                        vector48 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                        num485 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector48.X;
                                                                                                                                        num486 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector48.Y;
                                                                                                                                        this.rotation = (float) Math.Atan2((double) num486, (double) num485) - 1.57f;
                                                                                                                                        if (Main.netMode != 1)
                                                                                                                                        {
                                                                                                                                            this.localAI[1] += 1f;
                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.75)
                                                                                                                                            {
                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                            }
                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.5)
                                                                                                                                            {
                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                            }
                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.25)
                                                                                                                                            {
                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                            }
                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.1)
                                                                                                                                            {
                                                                                                                                                this.localAI[1] += 2f;
                                                                                                                                            }
                                                                                                                                            if (this.localAI[1] > 140f && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                            {
                                                                                                                                                this.localAI[1] = 0f;
                                                                                                                                                float num488 = 9f;
                                                                                                                                                int num489 = 25 + (Main.bossLevel * 5);
                                                                                                                                                int num490 = 100;
                                                                                                                                                num487 = (float) Math.Sqrt((double) (num485*num485 + num486*num486));
                                                                                                                                                num487 = num488/num487;
                                                                                                                                                num485 *= num487;
                                                                                                                                                num486 *= num487;
                                                                                                                                                vector48.X += num485*15f;
                                                                                                                                                vector48.Y += num486*15f;
                                                                                                                                                Projectile.NewProjectile(vector48.X, vector48.Y, num485, num486, num490, num489, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                return;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        int num491 = 1;
                                                                                                                                        if (this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) Main.player[this.target].width)
                                                                                                                                        {
                                                                                                                                            num491 = -1;
                                                                                                                                        }
                                                                                                                                        float num492 = 8f;
                                                                                                                                        float num493 = 0.2f;
                                                                                                                                        Vector2 vector49 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                        float num494 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) + (float) (num491*340) - vector49.X;
                                                                                                                                        float num495 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector49.Y;
                                                                                                                                        float num496 = (float) Math.Sqrt((double) (num494*num494 + num495*num495));
                                                                                                                                        num496 = num492/num496;
                                                                                                                                        num494 *= num496;
                                                                                                                                        num495 *= num496;
                                                                                                                                        if (this.velocity.X < num494)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = this.velocity.X + num493;
                                                                                                                                            if (this.velocity.X < 0f && num494 > 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X + num493;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.velocity.X > num494)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X - num493;
                                                                                                                                                if (this.velocity.X > 0f && num494 < 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = this.velocity.X - num493;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        if (this.velocity.Y < num495)
                                                                                                                                        {
                                                                                                                                            this.velocity.Y = this.velocity.Y + num493;
                                                                                                                                            if (this.velocity.Y < 0f && num495 > 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y + num493;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.velocity.Y > num495)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y - num493;
                                                                                                                                                if (this.velocity.Y > 0f && num495 < 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = this.velocity.Y - num493;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        vector49 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                        num494 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector49.X;
                                                                                                                                        num495 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector49.Y;
                                                                                                                                        this.rotation = (float) Math.Atan2((double) num495, (double) num494) - 1.57f;
                                                                                                                                        if (Main.netMode != 1)
                                                                                                                                        {
                                                                                                                                            this.localAI[1] += 1f;
                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.75)
                                                                                                                                            {
                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                            }
                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.5)
                                                                                                                                            {
                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                            }
                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.25)
                                                                                                                                            {
                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                            }
                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.1)
                                                                                                                                            {
                                                                                                                                                this.localAI[1] += 2f;
                                                                                                                                            }
                                                                                                                                            if (this.localAI[1] > 45f && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                            {
                                                                                                                                                this.localAI[1] = 0f;
                                                                                                                                                float num497 = 9f;
                                                                                                                                                int num498 = 20 + (Main.bossLevel * 5);
                                                                                                                                                int num499 = 100;
                                                                                                                                                num496 = (float) Math.Sqrt((double) (num494*num494 + num495*num495));
                                                                                                                                                num496 = num497/num496;
                                                                                                                                                num494 *= num496;
                                                                                                                                                num495 *= num496;
                                                                                                                                                vector49.X += num494*15f;
                                                                                                                                                vector49.Y += num495*15f;
                                                                                                                                                Projectile.NewProjectile(vector49.X, vector49.Y, num494, num495, num499, num498, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        this.ai[2] += 1f;
                                                                                                                                        if (this.ai[2] >= 200f)
                                                                                                                                        {
                                                                                                                                            this.ai[1] = 0f;
                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                            this.ai[3] = 0f;
                                                                                                                                            this.TargetClosest(true);
                                                                                                                                            this.netUpdate = true;
                                                                                                                                            return;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        if (this.aiStyle == 31)
                                                                                                                        {
                                                                                                                            if (this.target < 0 || this.target == 255 || Main.player[this.target].dead || !Main.player[this.target].active)
                                                                                                                            {
                                                                                                                                this.TargetClosest(true);
                                                                                                                            }
                                                                                                                            bool dead3 = Main.player[this.target].dead;
                                                                                                                            float num500 = this.position.X + (float) (this.width/2) - Main.player[this.target].position.X - (float) (Main.player[this.target].width/2);
                                                                                                                            float num501 = this.position.Y + (float) this.height - 59f - Main.player[this.target].position.Y - (float) (Main.player[this.target].height/2);
                                                                                                                            float num502 = (float) Math.Atan2((double) num501, (double) num500) + 1.57f;
                                                                                                                            if (num502 < 0f)
                                                                                                                            {
                                                                                                                                num502 += 6.283f;
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if ((double) num502 > 6.283)
                                                                                                                                {
                                                                                                                                    num502 -= 6.283f;
                                                                                                                                }
                                                                                                                            }
                                                                                                                            float num503 = 0.15f;
                                                                                                                            if (this.rotation < num502)
                                                                                                                            {
                                                                                                                                if ((double) (num502 - this.rotation) > 3.1415)
                                                                                                                                {
                                                                                                                                    this.rotation -= num503;
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    this.rotation += num503;
                                                                                                                                }
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if (this.rotation > num502)
                                                                                                                                {
                                                                                                                                    if ((double) (this.rotation - num502) > 3.1415)
                                                                                                                                    {
                                                                                                                                        this.rotation += num503;
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        this.rotation -= num503;
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                            if (this.rotation > num502 - num503 && this.rotation < num502 + num503)
                                                                                                                            {
                                                                                                                                this.rotation = num502;
                                                                                                                            }
                                                                                                                            if (this.rotation < 0f)
                                                                                                                            {
                                                                                                                                this.rotation += 6.283f;
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if ((double) this.rotation > 6.283)
                                                                                                                                {
                                                                                                                                    this.rotation -= 6.283f;
                                                                                                                                }
                                                                                                                            }
                                                                                                                            if (this.rotation > num502 - num503 && this.rotation < num502 + num503)
                                                                                                                            {
                                                                                                                                this.rotation = num502;
                                                                                                                            }
                                                                                                                            if (Main.rand.Next(5) == 0)
                                                                                                                            {
                                                                                                                                int num504 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + (float) this.height*0.25f), this.width, (int) ((float) this.height*0.5f), 5, this.velocity.X, 2f, 0, default(Color), 1f);
                                                                                                                                Dust expr_1E9BD_cp_0 = Main.dust[num504];
                                                                                                                                expr_1E9BD_cp_0.velocity.X = expr_1E9BD_cp_0.velocity.X*0.5f;
                                                                                                                                Dust expr_1E9DD_cp_0 = Main.dust[num504];
                                                                                                                                expr_1E9DD_cp_0.velocity.Y = expr_1E9DD_cp_0.velocity.Y*0.1f;
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if (this.ai[0] == 0f)
                                                                                                                                {
                                                                                                                                    if (this.ai[1] == 0f)
                                                                                                                                    {
                                                                                                                                        this.TargetClosest(true);
                                                                                                                                        float num505 = 12f;
                                                                                                                                        float num506 = 0.4f;
                                                                                                                                        int num507 = 1;
                                                                                                                                        if (this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) Main.player[this.target].width)
                                                                                                                                        {
                                                                                                                                            num507 = -1;
                                                                                                                                        }
                                                                                                                                        Vector2 vector50 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                        float num508 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) + (float) (num507*400) - vector50.X;
                                                                                                                                        float num509 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector50.Y;
                                                                                                                                        float num510 = (float) Math.Sqrt((double) (num508*num508 + num509*num509));
                                                                                                                                        num510 = num505/num510;
                                                                                                                                        num508 *= num510;
                                                                                                                                        num509 *= num510;
                                                                                                                                        if (this.velocity.X < num508)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = this.velocity.X + num506;
                                                                                                                                            if (this.velocity.X < 0f && num508 > 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X + num506;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.velocity.X > num508)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X - num506;
                                                                                                                                                if (this.velocity.X > 0f && num508 < 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = this.velocity.X - num506;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        if (this.velocity.Y < num509)
                                                                                                                                        {
                                                                                                                                            this.velocity.Y = this.velocity.Y + num506;
                                                                                                                                            if (this.velocity.Y < 0f && num509 > 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y + num506;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.velocity.Y > num509)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y - num506;
                                                                                                                                                if (this.velocity.Y > 0f && num509 < 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = this.velocity.Y - num506;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        this.ai[2] += 1f;
                                                                                                                                        if (this.ai[2] >= 600f)
                                                                                                                                        {
                                                                                                                                            this.ai[1] = 1f;
                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                            this.ai[3] = 0f;
                                                                                                                                            this.target = 255;
                                                                                                                                            this.netUpdate = true;
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (!Main.player[this.target].dead)
                                                                                                                                            {
                                                                                                                                                this.ai[3] += 1f;
                                                                                                                                            }
                                                                                                                                            if (this.ai[3] >= 60f)
                                                                                                                                            {
                                                                                                                                                this.ai[3] = 0f;
                                                                                                                                                vector50 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                num508 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector50.X;
                                                                                                                                                num509 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector50.Y;
                                                                                                                                                if (Main.netMode != 1)
                                                                                                                                                {
                                                                                                                                                    float num511 = 12f;
                                                                                                                                                    int num512 = 20 + (Main.bossLevel * 5);
                                                                                                                                                    int num513 = 96;
                                                                                                                                                    num510 = (float) Math.Sqrt((double) (num508*num508 + num509*num509));
                                                                                                                                                    num510 = num511/num510;
                                                                                                                                                    num508 *= num510;
                                                                                                                                                    num509 *= num510;
                                                                                                                                                    num508 += (float) Main.rand.Next(-40, 41)*0.05f;
                                                                                                                                                    num509 += (float) Main.rand.Next(-40, 41)*0.05f;
                                                                                                                                                    vector50.X += num508*4f;
                                                                                                                                                    vector50.Y += num509*4f;
                                                                                                                                                    Projectile.NewProjectile(vector50.X, vector50.Y, num508, num509, num513, num512, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (this.ai[1] == 1f)
                                                                                                                                        {
                                                                                                                                            this.rotation = num502;
                                                                                                                                            float num514 = 13f;
                                                                                                                                            Vector2 vector51 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                            float num515 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector51.X;
                                                                                                                                            float num516 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector51.Y;
                                                                                                                                            float num517 = (float) Math.Sqrt((double) (num515*num515 + num516*num516));
                                                                                                                                            num517 = num514/num517;
                                                                                                                                            this.velocity.X = num515*num517;
                                                                                                                                            this.velocity.Y = num516*num517;
                                                                                                                                            this.ai[1] = 2f;
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.ai[1] == 2f)
                                                                                                                                            {
                                                                                                                                                this.ai[2] += 1f;
                                                                                                                                                if (this.ai[2] >= 8f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                    this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                    if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.X = 0f;
                                                                                                                                                    }
                                                                                                                                                    if ((double) this.velocity.Y > -0.1 && (double) this.velocity.Y < 0.1)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.Y = 0f;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) - 1.57f;
                                                                                                                                                }
                                                                                                                                                if (this.ai[2] >= 42f)
                                                                                                                                                {
                                                                                                                                                    this.ai[3] += 1f;
                                                                                                                                                    this.ai[2] = 0f;
                                                                                                                                                    this.target = 255;
                                                                                                                                                    this.rotation = num502;
                                                                                                                                                    if (this.ai[3] >= 10f)
                                                                                                                                                    {
                                                                                                                                                        this.ai[1] = 0f;
                                                                                                                                                        this.ai[3] = 0f;
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        this.ai[1] = 1f;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    if ((double) this.life < (double) this.lifeMax*0.5)
                                                                                                                                    {
                                                                                                                                        this.ai[0] = 1f;
                                                                                                                                        this.ai[1] = 0f;
                                                                                                                                        this.ai[2] = 0f;
                                                                                                                                        this.ai[3] = 0f;
                                                                                                                                        this.netUpdate = true;
                                                                                                                                        return;
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    if (this.ai[0] == 1f || this.ai[0] == 2f)
                                                                                                                                    {
                                                                                                                                        if (this.ai[0] == 1f)
                                                                                                                                        {
                                                                                                                                            this.ai[2] += 0.005f;
                                                                                                                                            if ((double) this.ai[2] > 0.5)
                                                                                                                                            {
                                                                                                                                                this.ai[2] = 0.5f;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            this.ai[2] -= 0.005f;
                                                                                                                                            if (this.ai[2] < 0f)
                                                                                                                                            {
                                                                                                                                                this.ai[2] = 0f;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        this.rotation += this.ai[2];
                                                                                                                                        this.ai[1] += 1f;
                                                                                                                                        if (this.ai[1] == 100f)
                                                                                                                                        {
                                                                                                                                            this.ai[0] += 1f;
                                                                                                                                            this.ai[1] = 0f;
                                                                                                                                            if (this.ai[0] == 3f)
                                                                                                                                            {
                                                                                                                                                this.ai[2] = 0f;
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                Main.PlaySound(3, (int) this.position.X, (int) this.position.Y, 1);
                                                                                                                                                for (int num518 = 0; num518 < 2; num518
                                                                                                                                                    ++)
                                                                                                                                                {
                                                                                                                                                    Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 144, 1f);
                                                                                                                                                    Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 7, 1f);
                                                                                                                                                    Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 6, 1f);
                                                                                                                                                }
                                                                                                                                                for (int num519 = 0; num519 < 20; num519
                                                                                                                                                    ++)
                                                                                                                                                {
                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f, 0, default(Color), 1f);
                                                                                                                                                }
                                                                                                                                                Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f, 0, default(Color), 1f);
                                                                                                                                        this.velocity.X = this.velocity.X*0.98f;
                                                                                                                                        this.velocity.Y = this.velocity.Y*0.98f;
                                                                                                                                        if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = 0f;
                                                                                                                                        }
                                                                                                                                        if ((double) this.velocity.Y > -0.1 && (double) this.velocity.Y < 0.1)
                                                                                                                                        {
                                                                                                                                            this.velocity.Y = 0f;
                                                                                                                                            return;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        this.soundHit = 4;
                                                                                                                                        this.damage = (int) ((double) this.defDamage*1.5);
                                                                                                                                        this.defense = this.defDefense + 25;
                                                                                                                                        if (this.ai[1] == 0f)
                                                                                                                                        {
                                                                                                                                            float num520 = 4f;
                                                                                                                                            float num521 = 0.1f;
                                                                                                                                            int num522 = 1;
                                                                                                                                            if (this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) Main.player[this.target].width)
                                                                                                                                            {
                                                                                                                                                num522 = -1;
                                                                                                                                            }
                                                                                                                                            Vector2 vector52 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                            float num523 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) + (float) (num522*180) - vector52.X;
                                                                                                                                            float num524 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector52.Y;
                                                                                                                                            float num525 = (float) Math.Sqrt((double) (num523*num523 + num524*num524));
                                                                                                                                            num525 = num520/num525;
                                                                                                                                            num523 *= num525;
                                                                                                                                            num524 *= num525;
                                                                                                                                            if (this.velocity.X < num523)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X + num521;
                                                                                                                                                if (this.velocity.X < 0f && num523 > 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = this.velocity.X + num521;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                if (this.velocity.X > num523)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = this.velocity.X - num521;
                                                                                                                                                    if (this.velocity.X > 0f && num523 < 0f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.X = this.velocity.X - num521;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            if (this.velocity.Y < num524)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y + num521;
                                                                                                                                                if (this.velocity.Y < 0f && num524 > 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = this.velocity.Y + num521;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                if (this.velocity.Y > num524)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = this.velocity.Y - num521;
                                                                                                                                                    if (this.velocity.Y > 0f && num524 < 0f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.Y = this.velocity.Y - num521;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            this.ai[2] += 1f;
                                                                                                                                            if (this.ai[2] >= 400f)
                                                                                                                                            {
                                                                                                                                                this.ai[1] = 1f;
                                                                                                                                                this.ai[2] = 0f;
                                                                                                                                                this.ai[3] = 0f;
                                                                                                                                                this.target = 255;
                                                                                                                                                this.netUpdate = true;
                                                                                                                                            }
                                                                                                                                            if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                            {
                                                                                                                                                this.localAI[2] += 1f;
                                                                                                                                                if (this.localAI[2] > 22f)
                                                                                                                                                {
                                                                                                                                                    this.localAI[2] = 0f;
                                                                                                                                                    Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 34);
                                                                                                                                                }
                                                                                                                                                if (Main.netMode != 1)
                                                                                                                                                {
                                                                                                                                                    this.localAI[1] += 1f;
                                                                                                                                                    if ((double) this.life < (double) this.lifeMax*0.75)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[1] += 1f;
                                                                                                                                                    }
                                                                                                                                                    if ((double) this.life < (double) this.lifeMax*0.5)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[1] += 1f;
                                                                                                                                                    }
                                                                                                                                                    if ((double) this.life < (double) this.lifeMax*0.25)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[1] += 1f;
                                                                                                                                                    }
                                                                                                                                                    if ((double) this.life < (double) this.lifeMax*0.1)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[1] += 2f;
                                                                                                                                                    }
                                                                                                                                                    if (this.localAI[1] > 8f)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[1] = 0f;
                                                                                                                                                        float num526 = 6f;
                                                                                                                                                        int num527 = 7 + (Main.bossLevel * 2);
                                                                                                                                                        int num528 = 101;
                                                                                                                                                        vector52 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                        num523 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector52.X;
                                                                                                                                                        num524 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector52.Y;
                                                                                                                                                        num525 = (float) Math.Sqrt((double) (num523*num523 + num524*num524));
                                                                                                                                                        num525 = num526/num525;
                                                                                                                                                        num523 *= num525;
                                                                                                                                                        num524 *= num525;
                                                                                                                                                        num524 += (float) Main.rand.Next(-40, 41)*0.01f;
                                                                                                                                                        num523 += (float) Main.rand.Next(-40, 41)*0.01f;
                                                                                                                                                        num524 += this.velocity.Y*0.5f;
                                                                                                                                                        num523 += this.velocity.X*0.5f;
                                                                                                                                                        vector52.X -= num523*1f;
                                                                                                                                                        vector52.Y -= num524*1f;
                                                                                                                                                        Projectile.NewProjectile(vector52.X, vector52.Y, num523, num524, num528, num527, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                        return;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.ai[1] == 1f)
                                                                                                                                            {
                                                                                                                                                Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                                                                                                                this.rotation = num502;
                                                                                                                                                float num529 = 14f;
                                                                                                                                                Vector2 vector53 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                float num530 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector53.X;
                                                                                                                                                float num531 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector53.Y;
                                                                                                                                                float num532 = (float) Math.Sqrt((double) (num530*num530 + num531*num531));
                                                                                                                                                num532 = num529/num532;
                                                                                                                                                this.velocity.X = num530*num532;
                                                                                                                                                this.velocity.Y = num531*num532;
                                                                                                                                                this.ai[1] = 2f;
                                                                                                                                                return;
                                                                                                                                            }
                                                                                                                                            if (this.ai[1] == 2f)
                                                                                                                                            {
                                                                                                                                                this.ai[2] += 1f;
                                                                                                                                                if (this.ai[2] >= 50f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = this.velocity.X*0.93f;
                                                                                                                                                    this.velocity.Y = this.velocity.Y*0.93f;
                                                                                                                                                    if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.X = 0f;
                                                                                                                                                    }
                                                                                                                                                    if ((double) this.velocity.Y > -0.1 && (double) this.velocity.Y < 0.1)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.Y = 0f;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) - 1.57f;
                                                                                                                                                }
                                                                                                                                                if (this.ai[2] >= 80f)
                                                                                                                                                {
                                                                                                                                                    this.ai[3] += 1f;
                                                                                                                                                    this.ai[2] = 0f;
                                                                                                                                                    this.target = 255;
                                                                                                                                                    this.rotation = num502;
                                                                                                                                                    if (this.ai[3] >= 6f)
                                                                                                                                                    {
                                                                                                                                                        this.ai[1] = 0f;
                                                                                                                                                        this.ai[3] = 0f;
                                                                                                                                                        return;
                                                                                                                                                    }
                                                                                                                                                    this.ai[1] = 1f;
                                                                                                                                                    return;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if (this.aiStyle == 32)
                                                                                                                            {
                                                                                                                                this.damage = this.defDamage;
                                                                                                                                this.defense = this.defDefense;
                                                                                                                                if (this.ai[0] == 0f && Main.netMode != 1)
                                                                                                                                {
                                                                                                                                    this.TargetClosest(true);
                                                                                                                                    this.ai[0] = 1f;
                                                                                                                                    if (this.type != 68)
                                                                                                                                    {
                                                                                                                                        int num533 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) this.position.Y + this.height/2, 128, this.whoAmI);
                                                                                                                                        Main.npc[num533].ai[0] = -1f;
                                                                                                                                        Main.npc[num533].ai[1] = (float) this.whoAmI;
                                                                                                                                        Main.npc[num533].target = this.target;
                                                                                                                                        Main.npc[num533].netUpdate = true;
                                                                                                                                        num533 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) this.position.Y + this.height/2, 129, this.whoAmI);
                                                                                                                                        Main.npc[num533].ai[0] = 1f;
                                                                                                                                        Main.npc[num533].ai[1] = (float) this.whoAmI;
                                                                                                                                        Main.npc[num533].target = this.target;
                                                                                                                                        Main.npc[num533].netUpdate = true;
                                                                                                                                        num533 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) this.position.Y + this.height/2, 130, this.whoAmI);
                                                                                                                                        Main.npc[num533].ai[0] = -1f;
                                                                                                                                        Main.npc[num533].ai[1] = (float) this.whoAmI;
                                                                                                                                        Main.npc[num533].target = this.target;
                                                                                                                                        Main.npc[num533].ai[3] = 150f;
                                                                                                                                        Main.npc[num533].netUpdate = true;
                                                                                                                                        num533 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) this.position.Y + this.height/2, 131, this.whoAmI);
                                                                                                                                        Main.npc[num533].ai[0] = 1f;
                                                                                                                                        Main.npc[num533].ai[1] = (float) this.whoAmI;
                                                                                                                                        Main.npc[num533].target = this.target;
                                                                                                                                        Main.npc[num533].netUpdate = true;
                                                                                                                                        Main.npc[num533].ai[3] = 150f;
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                if (this.type == 68 && this.ai[1] != 3f && this.ai[1] != 2f)
                                                                                                                                {
                                                                                                                                    Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                                                                                                    this.ai[1] = 2f;
                                                                                                                                }
                                                                                                                                if (Main.player[this.target].dead || Math.Abs(this.position.X - Main.player[this.target].position.X) > 6000f || Math.Abs(this.position.Y - Main.player[this.target].position.Y) > 6000f)
                                                                                                                                {
                                                                                                                                    this.TargetClosest(true);
                                                                                                                                    if (Main.player[this.target].dead || Math.Abs(this.position.X - Main.player[this.target].position.X) > 6000f || Math.Abs(this.position.Y - Main.player[this.target].position.Y) > 6000f)
                                                                                                                                    {
                                                                                                                                        //this.ai[1] = 3f;
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                if (this.ai[1] == 0f)
                                                                                                                                {
                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                    if (this.ai[2] >= 600f)
                                                                                                                                    {
                                                                                                                                        this.ai[2] = 0f;
                                                                                                                                        this.ai[1] = 1f;
                                                                                                                                        this.TargetClosest(true);
                                                                                                                                        this.netUpdate = true;
                                                                                                                                    }
                                                                                                                                    this.rotation = this.velocity.X/15f;
                                                                                                                                    if (this.position.Y > Main.player[this.target].position.Y - 200f)
                                                                                                                                    {
                                                                                                                                        if (this.velocity.Y > 0f)
                                                                                                                                        {
                                                                                                                                            this.velocity.Y = this.velocity.Y*0.98f;
                                                                                                                                        }
                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.1f;
                                                                                                                                        if (this.velocity.Y > 2f)
                                                                                                                                        {
                                                                                                                                            this.velocity.Y = 2f;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (this.position.Y < Main.player[this.target].position.Y - 500f)
                                                                                                                                        {
                                                                                                                                            if (this.velocity.Y < 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y*0.98f;
                                                                                                                                            }
                                                                                                                                            this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                                                            if (this.velocity.Y < -2f)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = -2f;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    if (this.position.X + (float) (this.width/2) > Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) + 100f)
                                                                                                                                    {
                                                                                                                                        if (this.velocity.X > 0f)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = this.velocity.X*0.98f;
                                                                                                                                        }
                                                                                                                                        this.velocity.X = this.velocity.X - 0.1f;
                                                                                                                                        if (this.velocity.X > 8f)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = 8f;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    if (this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - 100f)
                                                                                                                                    {
                                                                                                                                        if (this.velocity.X < 0f)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = this.velocity.X*0.98f;
                                                                                                                                        }
                                                                                                                                        this.velocity.X = this.velocity.X + 0.1f;
                                                                                                                                        if (this.velocity.X < -8f)
                                                                                                                                        {
                                                                                                                                            this.velocity.X = -8f;
                                                                                                                                            return;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    if (this.ai[1] == 1f)
                                                                                                                                    {
                                                                                                                                        this.defense *= 2;
                                                                                                                                        this.damage *= 2;
                                                                                                                                        this.ai[2] += 1f;
                                                                                                                                        if (this.ai[2] == 2f)
                                                                                                                                        {
                                                                                                                                            Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                                                                                                        }
                                                                                                                                        if (this.ai[2] >= 400f)
                                                                                                                                        {
                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                            this.ai[1] = 0f;
                                                                                                                                        }
                                                                                                                                        this.rotation += (float) this.direction*0.3f;
                                                                                                                                        Vector2 vector54 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                        float num534 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector54.X;
                                                                                                                                        float num535 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector54.Y;
                                                                                                                                        float num536 = (float) Math.Sqrt((double) (num534*num534 + num535*num535));
                                                                                                                                        num536 = 2f/num536;
                                                                                                                                        this.velocity.X = num534*num536;
                                                                                                                                        this.velocity.Y = num535*num536;
                                                                                                                                        return;
                                                                                                                                    }
                                                                                                                                    if (this.ai[1] == 2f)
                                                                                                                                    {
                                                                                                                                        this.damage = 9999;
                                                                                                                                        this.defense = 9999;
                                                                                                                                        this.rotation += (float) this.direction*0.3f;
                                                                                                                                        Vector2 vector55 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                        float num537 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector55.X;
                                                                                                                                        float num538 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector55.Y;
                                                                                                                                        float num539 = (float) Math.Sqrt((double) (num537*num537 + num538*num538));
                                                                                                                                        num539 = 8f/num539;
                                                                                                                                        this.velocity.X = num537*num539;
                                                                                                                                        this.velocity.Y = num538*num539;
                                                                                                                                        return;
                                                                                                                                    }
                                                                                                                                    if (this.ai[1] == 3f)
                                                                                                                                    {
                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                                                        if (this.velocity.Y < 0f)
                                                                                                                                        {
                                                                                                                                            this.velocity.Y = this.velocity.Y*0.95f;
                                                                                                                                        }
                                                                                                                                        this.velocity.X = this.velocity.X*0.95f;
                                                                                                                                        if (this.timeLeft > 500)
                                                                                                                                        {
                                                                                                                                            this.timeLeft = 500;
                                                                                                                                            return;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if (this.aiStyle == 33)
                                                                                                                                {
                                                                                                                                    Vector2 vector56 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                    float num540 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector56.X;
                                                                                                                                    float num541 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector56.Y;
                                                                                                                                    float num542 = (float) Math.Sqrt((double) (num540*num540 + num541*num541));
                                                                                                                                    if (this.ai[2] != 99f)
                                                                                                                                    {
                                                                                                                                        if (num542 > 800f)
                                                                                                                                        {
                                                                                                                                            this.ai[2] = 99f;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (num542 < 400f)
                                                                                                                                        {
                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    this.spriteDirection = -(int) this.ai[0];
                                                                                                                                    if (!Main.npc[(int) this.ai[1]].active || Main.npc[(int) this.ai[1]].aiStyle != 32)
                                                                                                                                    {
                                                                                                                                        this.ai[2] += 10f;
                                                                                                                                        if (this.ai[2] > 50f || Main.netMode != 2)
                                                                                                                                        {
                                                                                                                                            this.life = -1;
                                                                                                                                            this.HitEffect(0, 10.0);
                                                                                                                                            this.active = false;
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    if (this.ai[2] == 99f)
                                                                                                                                    {
                                                                                                                                        if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y)
                                                                                                                                        {
                                                                                                                                            if (this.velocity.Y > 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                            }
                                                                                                                                            this.velocity.Y = this.velocity.Y - 0.1f;
                                                                                                                                            if (this.velocity.Y > 8f)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = 8f;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y)
                                                                                                                                            {
                                                                                                                                                if (this.velocity.Y < 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                }
                                                                                                                                                this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                                                                if (this.velocity.Y < -8f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = -8f;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2))
                                                                                                                                        {
                                                                                                                                            if (this.velocity.X > 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                            }
                                                                                                                                            this.velocity.X = this.velocity.X - 0.5f;
                                                                                                                                            if (this.velocity.X > 12f)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = 12f;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2))
                                                                                                                                        {
                                                                                                                                            if (this.velocity.X < 0f)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                            }
                                                                                                                                            this.velocity.X = this.velocity.X + 0.5f;
                                                                                                                                            if (this.velocity.X < -12f)
                                                                                                                                            {
                                                                                                                                                this.velocity.X = -12f;
                                                                                                                                                return;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (this.ai[2] == 0f || this.ai[2] == 3f)
                                                                                                                                        {
                                                                                                                                            if (Main.npc[(int) this.ai[1]].ai[1] == 3f && this.timeLeft > 10)
                                                                                                                                            {
                                                                                                                                                this.timeLeft = 10;
                                                                                                                                            }
                                                                                                                                            if (Main.npc[(int) this.ai[1]].ai[1] != 0f)
                                                                                                                                            {
                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                if (Main.player[this.target].dead)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                                                                    if (this.velocity.Y > 16f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.Y = 16f;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    Vector2 vector57 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                    float num543 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector57.X;
                                                                                                                                                    float num544 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector57.Y;
                                                                                                                                                    float num545 = (float) Math.Sqrt((double) (num543*num543 + num544*num544));
                                                                                                                                                    num545 = 7f/num545;
                                                                                                                                                    num543 *= num545;
                                                                                                                                                    num544 *= num545;
                                                                                                                                                    this.rotation = (float) Math.Atan2((double) num544, (double) num543) - 1.57f;
                                                                                                                                                    if (this.velocity.X > num543)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.97f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X - 0.05f;
                                                                                                                                                    }
                                                                                                                                                    if (this.velocity.X < num543)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.97f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X + 0.05f;
                                                                                                                                                    }
                                                                                                                                                    if (this.velocity.Y > num544)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.97f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.05f;
                                                                                                                                                    }
                                                                                                                                                    if (this.velocity.Y < num544)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.97f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.05f;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                this.ai[3] += 1f;
                                                                                                                                                if (this.ai[3] >= 600f)
                                                                                                                                                {
                                                                                                                                                    this.ai[2] = 0f;
                                                                                                                                                    this.ai[3] = 0f;
                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                this.ai[3] += 1f;
                                                                                                                                                if (this.ai[3] >= 300f)
                                                                                                                                                {
                                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                                    this.ai[3] = 0f;
                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                }
                                                                                                                                                if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y + 320f)
                                                                                                                                                {
                                                                                                                                                    if (this.velocity.Y > 0f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                    }
                                                                                                                                                    this.velocity.Y = this.velocity.Y - 0.04f;
                                                                                                                                                    if (this.velocity.Y > 3f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.Y = 3f;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y + 260f)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.04f;
                                                                                                                                                        if (this.velocity.Y < -3f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = -3f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2))
                                                                                                                                                {
                                                                                                                                                    if (this.velocity.X > 0f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                    }
                                                                                                                                                    this.velocity.X = this.velocity.X - 0.3f;
                                                                                                                                                    if (this.velocity.X > 12f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.X = 12f;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 250f)
                                                                                                                                                {
                                                                                                                                                    if (this.velocity.X < 0f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                    }
                                                                                                                                                    this.velocity.X = this.velocity.X + 0.3f;
                                                                                                                                                    if (this.velocity.X < -12f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.X = -12f;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            Vector2 vector58 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                            float num546 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector58.X;
                                                                                                                                            float num547 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector58.Y;
                                                                                                                                            Math.Sqrt((double) (num546*num546 + num547*num547));
                                                                                                                                            this.rotation = (float) Math.Atan2((double) num547, (double) num546) + 1.57f;
                                                                                                                                            return;
                                                                                                                                        }
                                                                                                                                        if (this.ai[2] == 1f)
                                                                                                                                        {
                                                                                                                                            Vector2 vector59 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                            float num548 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector59.X;
                                                                                                                                            float num549 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector59.Y;
                                                                                                                                            float num550 = (float) Math.Sqrt((double) (num548*num548 + num549*num549));
                                                                                                                                            this.rotation = (float) Math.Atan2((double) num549, (double) num548) + 1.57f;
                                                                                                                                            this.velocity.X = this.velocity.X*0.95f;
                                                                                                                                            this.velocity.Y = this.velocity.Y - 0.1f;
                                                                                                                                            if (this.velocity.Y < -8f)
                                                                                                                                            {
                                                                                                                                                this.velocity.Y = -8f;
                                                                                                                                            }
                                                                                                                                            if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y - 200f)
                                                                                                                                            {
                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                this.ai[2] = 2f;
                                                                                                                                                vector59 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                num548 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector59.X;
                                                                                                                                                num549 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector59.Y;
                                                                                                                                                num550 = (float) Math.Sqrt((double) (num548*num548 + num549*num549));
                                                                                                                                                num550 = 22f/num550;
                                                                                                                                                this.velocity.X = num548*num550;
                                                                                                                                                this.velocity.Y = num549*num550;
                                                                                                                                                this.netUpdate = true;
                                                                                                                                                return;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.ai[2] == 2f)
                                                                                                                                            {
                                                                                                                                                if (this.position.Y > Main.player[this.target].position.Y || this.velocity.Y < 0f)
                                                                                                                                                {
                                                                                                                                                    this.ai[2] = 3f;
                                                                                                                                                    return;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                if (this.ai[2] == 4f)
                                                                                                                                                {
                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                    Vector2 vector60 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                    float num551 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector60.X;
                                                                                                                                                    float num552 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector60.Y;
                                                                                                                                                    float num553 = (float) Math.Sqrt((double) (num551*num551 + num552*num552));
                                                                                                                                                    num553 = 7f/num553;
                                                                                                                                                    num551 *= num553;
                                                                                                                                                    num552 *= num553;
                                                                                                                                                    if (this.velocity.X > num551)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.97f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X - 0.05f;
                                                                                                                                                    }
                                                                                                                                                    if (this.velocity.X < num551)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.97f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X + 0.05f;
                                                                                                                                                    }
                                                                                                                                                    if (this.velocity.Y > num552)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.97f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.05f;
                                                                                                                                                    }
                                                                                                                                                    if (this.velocity.Y < num552)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.97f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.05f;
                                                                                                                                                    }
                                                                                                                                                    this.ai[3] += 1f;
                                                                                                                                                    if (this.ai[3] >= 600f)
                                                                                                                                                    {
                                                                                                                                                        this.ai[2] = 0f;
                                                                                                                                                        this.ai[3] = 0f;
                                                                                                                                                        this.netUpdate = true;
                                                                                                                                                    }
                                                                                                                                                    vector60 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                    num551 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector60.X;
                                                                                                                                                    num552 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector60.Y;
                                                                                                                                                    num553 = (float) Math.Sqrt((double) (num551*num551 + num552*num552));
                                                                                                                                                    this.rotation = (float) Math.Atan2((double) num552, (double) num551) + 1.57f;
                                                                                                                                                    return;
                                                                                                                                                }
                                                                                                                                                if (this.ai[2] == 5f && ((this.velocity.X > 0f && this.position.X + (float) (this.width/2) > Main.player[this.target].position.X + (float) (Main.player[this.target].width/2)) || (this.velocity.X < 0f && this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))))
                                                                                                                                                {
                                                                                                                                                    this.ai[2] = 0f;
                                                                                                                                                    return;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    if (this.aiStyle == 34)
                                                                                                                                    {
                                                                                                                                        this.spriteDirection = -(int) this.ai[0];
                                                                                                                                        Vector2 vector61 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                        float num554 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector61.X;
                                                                                                                                        float num555 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector61.Y;
                                                                                                                                        float num556 = (float) Math.Sqrt((double) (num554*num554 + num555*num555));
                                                                                                                                        if (this.ai[2] != 99f)
                                                                                                                                        {
                                                                                                                                            if (num556 > 800f)
                                                                                                                                            {
                                                                                                                                                this.ai[2] = 99f;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (num556 < 400f)
                                                                                                                                            {
                                                                                                                                                this.ai[2] = 0f;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        if (!Main.npc[(int) this.ai[1]].active || Main.npc[(int) this.ai[1]].aiStyle != 32)
                                                                                                                                        {
                                                                                                                                            this.ai[2] += 10f;
                                                                                                                                            if (this.ai[2] > 50f || Main.netMode != 2)
                                                                                                                                            {
                                                                                                                                                this.life = -1;
                                                                                                                                                this.HitEffect(0, 10.0);
                                                                                                                                                this.active = false;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        if (this.ai[2] == 99f)
                                                                                                                                        {
                                                                                                                                            if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y)
                                                                                                                                            {
                                                                                                                                                if (this.velocity.Y > 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                }
                                                                                                                                                this.velocity.Y = this.velocity.Y - 0.1f;
                                                                                                                                                if (this.velocity.Y > 8f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = 8f;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y)
                                                                                                                                                {
                                                                                                                                                    if (this.velocity.Y < 0f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                    }
                                                                                                                                                    this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                                                                    if (this.velocity.Y < -8f)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.Y = -8f;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2))
                                                                                                                                            {
                                                                                                                                                if (this.velocity.X > 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                }
                                                                                                                                                this.velocity.X = this.velocity.X - 0.5f;
                                                                                                                                                if (this.velocity.X > 12f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = 12f;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2))
                                                                                                                                            {
                                                                                                                                                if (this.velocity.X < 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                }
                                                                                                                                                this.velocity.X = this.velocity.X + 0.5f;
                                                                                                                                                if (this.velocity.X < -12f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.X = -12f;
                                                                                                                                                    return;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.ai[2] == 0f || this.ai[2] == 3f)
                                                                                                                                            {
                                                                                                                                                if (Main.npc[(int) this.ai[1]].ai[1] == 3f && this.timeLeft > 10)
                                                                                                                                                {
                                                                                                                                                    this.timeLeft = 10;
                                                                                                                                                }
                                                                                                                                                if (Main.npc[(int) this.ai[1]].ai[1] != 0f)
                                                                                                                                                {
                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                    if (Main.player[this.target].dead)
                                                                                                                                                    {
                                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                                                                        if (this.velocity.Y > 16f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = 16f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        Vector2 vector62 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                        float num557 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector62.X;
                                                                                                                                                        float num558 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector62.Y;
                                                                                                                                                        float num559 = (float) Math.Sqrt((double) (num557*num557 + num558*num558));
                                                                                                                                                        num559 = 12f/num559;
                                                                                                                                                        num557 *= num559;
                                                                                                                                                        num558 *= num559;
                                                                                                                                                        this.rotation = (float) Math.Atan2((double) num558, (double) num557) - 1.57f;
                                                                                                                                                        if (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y) < 2f)
                                                                                                                                                        {
                                                                                                                                                            this.rotation = (float) Math.Atan2((double) num558, (double) num557) - 1.57f;
                                                                                                                                                            this.velocity.X = num557;
                                                                                                                                                            this.velocity.Y = num558;
                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            this.velocity *= 0.97f;
                                                                                                                                                        }
                                                                                                                                                        this.ai[3] += 1f;
                                                                                                                                                        if (this.ai[3] >= 600f)
                                                                                                                                                        {
                                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                                            this.ai[3] = 0f;
                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    this.ai[3] += 1f;
                                                                                                                                                    if (this.ai[3] >= 600f)
                                                                                                                                                    {
                                                                                                                                                        this.ai[2] += 1f;
                                                                                                                                                        this.ai[3] = 0f;
                                                                                                                                                        this.netUpdate = true;
                                                                                                                                                    }
                                                                                                                                                    if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y + 300f)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.1f;
                                                                                                                                                        if (this.velocity.Y > 3f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = 3f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y + 230f)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.Y < 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                                                                            if (this.velocity.Y < -3f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = -3f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) + 250f)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.94f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X - 0.3f;
                                                                                                                                                        if (this.velocity.X > 9f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = 9f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2))
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.94f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X + 0.2f;
                                                                                                                                                        if (this.velocity.X < -8f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = -8f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                Vector2 vector63 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                float num560 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector63.X;
                                                                                                                                                float num561 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector63.Y;
                                                                                                                                                Math.Sqrt((double) (num560*num560 + num561*num561));
                                                                                                                                                this.rotation = (float) Math.Atan2((double) num561, (double) num560) + 1.57f;
                                                                                                                                                return;
                                                                                                                                            }
                                                                                                                                            if (this.ai[2] == 1f)
                                                                                                                                            {
                                                                                                                                                if (this.velocity.Y > 0f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                }
                                                                                                                                                Vector2 vector64 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                float num562 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 280f*this.ai[0] - vector64.X;
                                                                                                                                                float num563 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector64.Y;
                                                                                                                                                float num564 = (float) Math.Sqrt((double) (num562*num562 + num563*num563));
                                                                                                                                                this.rotation = (float) Math.Atan2((double) num563, (double) num562) + 1.57f;
                                                                                                                                                this.velocity.X = (this.velocity.X*5f + Main.npc[(int) this.ai[1]].velocity.X)/6f;
                                                                                                                                                this.velocity.X = this.velocity.X + 0.5f;
                                                                                                                                                this.velocity.Y = this.velocity.Y - 0.5f;
                                                                                                                                                if (this.velocity.Y < -9f)
                                                                                                                                                {
                                                                                                                                                    this.velocity.Y = -9f;
                                                                                                                                                }
                                                                                                                                                if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y - 280f)
                                                                                                                                                {
                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                    this.ai[2] = 2f;
                                                                                                                                                    vector64 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                    num562 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector64.X;
                                                                                                                                                    num563 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector64.Y;
                                                                                                                                                    num564 = (float) Math.Sqrt((double) (num562*num562 + num563*num563));
                                                                                                                                                    num564 = 20f/num564;
                                                                                                                                                    this.velocity.X = num562*num564;
                                                                                                                                                    this.velocity.Y = num563*num564;
                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                    return;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                if (this.ai[2] == 2f)
                                                                                                                                                {
                                                                                                                                                    if (this.position.Y > Main.player[this.target].position.Y || this.velocity.Y < 0f)
                                                                                                                                                    {
                                                                                                                                                        if (this.ai[3] >= 4f)
                                                                                                                                                        {
                                                                                                                                                            this.ai[2] = 3f;
                                                                                                                                                            this.ai[3] = 0f;
                                                                                                                                                            return;
                                                                                                                                                        }
                                                                                                                                                        this.ai[2] = 1f;
                                                                                                                                                        this.ai[3] += 1f;
                                                                                                                                                        return;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    if (this.ai[2] == 4f)
                                                                                                                                                    {
                                                                                                                                                        Vector2 vector65 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                        float num565 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector65.X;
                                                                                                                                                        float num566 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector65.Y;
                                                                                                                                                        float num567 = (float) Math.Sqrt((double) (num565*num565 + num566*num566));
                                                                                                                                                        this.rotation = (float) Math.Atan2((double) num566, (double) num565) + 1.57f;
                                                                                                                                                        this.velocity.Y = (this.velocity.Y*5f + Main.npc[(int) this.ai[1]].velocity.Y)/6f;
                                                                                                                                                        this.velocity.X = this.velocity.X + 0.5f;
                                                                                                                                                        if (this.velocity.X > 12f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = 12f;
                                                                                                                                                        }
                                                                                                                                                        if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 500f || this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) + 500f)
                                                                                                                                                        {
                                                                                                                                                            this.TargetClosest(true);
                                                                                                                                                            this.ai[2] = 5f;
                                                                                                                                                            vector65 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                            num565 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector65.X;
                                                                                                                                                            num566 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector65.Y;
                                                                                                                                                            num567 = (float) Math.Sqrt((double) (num565*num565 + num566*num566));
                                                                                                                                                            num567 = 17f/num567;
                                                                                                                                                            this.velocity.X = num565*num567;
                                                                                                                                                            this.velocity.Y = num566*num567;
                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                            return;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        if (this.ai[2] == 5f && this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - 100f)
                                                                                                                                                        {
                                                                                                                                                            if (this.ai[3] >= 4f)
                                                                                                                                                            {
                                                                                                                                                                this.ai[2] = 0f;
                                                                                                                                                                this.ai[3] = 0f;
                                                                                                                                                                return;
                                                                                                                                                            }
                                                                                                                                                            this.ai[2] = 4f;
                                                                                                                                                            this.ai[3] += 1f;
                                                                                                                                                            return;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (this.aiStyle == 35)
                                                                                                                                        {
                                                                                                                                            this.spriteDirection = -(int) this.ai[0];
                                                                                                                                            if (!Main.npc[(int) this.ai[1]].active || Main.npc[(int) this.ai[1]].aiStyle != 32)
                                                                                                                                            {
                                                                                                                                                this.ai[2] += 10f;
                                                                                                                                                if (this.ai[2] > 50f || Main.netMode != 2)
                                                                                                                                                {
                                                                                                                                                    this.life = -1;
                                                                                                                                                    this.HitEffect(0, 10.0);
                                                                                                                                                    this.active = false;
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            if (this.ai[2] == 0f)
                                                                                                                                            {
                                                                                                                                                if (Main.npc[(int) this.ai[1]].ai[1] == 3f && this.timeLeft > 10)
                                                                                                                                                {
                                                                                                                                                    this.timeLeft = 10;
                                                                                                                                                }
                                                                                                                                                if (Main.npc[(int) this.ai[1]].ai[1] != 0f)
                                                                                                                                                {
                                                                                                                                                    this.localAI[0] += 2f;
                                                                                                                                                    if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y - 100f)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.07f;
                                                                                                                                                        if (this.velocity.Y > 6f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = 6f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y - 100f)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.Y < 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.Y = this.velocity.Y + 0.07f;
                                                                                                                                                            if (this.velocity.Y < -6f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = -6f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 120f*this.ai[0])
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X - 0.1f;
                                                                                                                                                        if (this.velocity.X > 8f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = 8f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 120f*this.ai[0])
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X + 0.1f;
                                                                                                                                                        if (this.velocity.X < -8f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = -8f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    this.ai[3] += 1f;
                                                                                                                                                    if (this.ai[3] >= 1100f)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[0] = 0f;
                                                                                                                                                        this.ai[2] = 1f;
                                                                                                                                                        this.ai[3] = 0f;
                                                                                                                                                        this.netUpdate = true;
                                                                                                                                                    }
                                                                                                                                                    if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y - 150f)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.04f;
                                                                                                                                                        if (this.velocity.Y > 3f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = 3f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y - 150f)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.Y < 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.Y = this.velocity.Y + 0.04f;
                                                                                                                                                            if (this.velocity.Y < -3f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = -3f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) + 200f)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X - 0.2f;
                                                                                                                                                        if (this.velocity.X > 8f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = 8f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) + 160f)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X + 0.2f;
                                                                                                                                                        if (this.velocity.X < -8f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = -8f;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                Vector2 vector66 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                float num568 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 200f*this.ai[0] - vector66.X;
                                                                                                                                                float num569 = Main.npc[(int) this.ai[1]].position.Y + 230f - vector66.Y;
                                                                                                                                                float num570 = (float) Math.Sqrt((double) (num568*num568 + num569*num569));
                                                                                                                                                this.rotation = (float) Math.Atan2((double) num569, (double) num568) + 1.57f;
                                                                                                                                                if (Main.netMode != 1)
                                                                                                                                                {
                                                                                                                                                    this.localAI[0] += 1f;
                                                                                                                                                    if (this.localAI[0] > 140f)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[0] = 0f;
                                                                                                                                                        float num571 = 12f;
                                                                                                                                                        int num572 = 0;
                                                                                                                                                        int num573 = 102;
                                                                                                                                                        num570 = num571/num570;
                                                                                                                                                        num568 = -num568*num570;
                                                                                                                                                        num569 = -num569*num570;
                                                                                                                                                        num568 += (float) Main.rand.Next(-40, 41)*0.01f;
                                                                                                                                                        num569 += (float) Main.rand.Next(-40, 41)*0.01f;
                                                                                                                                                        vector66.X += num568*4f;
                                                                                                                                                        vector66.Y += num569*4f;
                                                                                                                                                        Projectile.NewProjectile(vector66.X, vector66.Y, num568, num569, num573, num572, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                        return;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                if (this.ai[2] == 1f)
                                                                                                                                                {
                                                                                                                                                    this.ai[3] += 1f;
                                                                                                                                                    if (this.ai[3] >= 300f)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[0] = 0f;
                                                                                                                                                        this.ai[2] = 0f;
                                                                                                                                                        this.ai[3] = 0f;
                                                                                                                                                        this.netUpdate = true;
                                                                                                                                                    }
                                                                                                                                                    Vector2 vector67 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                    float num574 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - vector67.X;
                                                                                                                                                    float num575 = Main.npc[(int) this.ai[1]].position.Y - vector67.Y;
                                                                                                                                                    num575 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - 80f - vector67.Y;
                                                                                                                                                    float num576 = (float) Math.Sqrt((double) (num574*num574 + num575*num575));
                                                                                                                                                    num576 = 6f/num576;
                                                                                                                                                    num574 *= num576;
                                                                                                                                                    num575 *= num576;
                                                                                                                                                    if (this.velocity.X > num574)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X - 0.04f;
                                                                                                                                                    }
                                                                                                                                                    if (this.velocity.X < num574)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.X < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.X = this.velocity.X + 0.04f;
                                                                                                                                                    }
                                                                                                                                                    if (this.velocity.Y > num575)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.08f;
                                                                                                                                                    }
                                                                                                                                                    if (this.velocity.Y < num575)
                                                                                                                                                    {
                                                                                                                                                        if (this.velocity.Y < 0f)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                        }
                                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.08f;
                                                                                                                                                    }
                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                    vector67 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                    num574 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector67.X;
                                                                                                                                                    num575 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector67.Y;
                                                                                                                                                    num576 = (float) Math.Sqrt((double) (num574*num574 + num575*num575));
                                                                                                                                                    this.rotation = (float) Math.Atan2((double) num575, (double) num574) - 1.57f;
                                                                                                                                                    if (Main.netMode != 1)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[0] += 1f;
                                                                                                                                                        if (this.localAI[0] > 40f)
                                                                                                                                                        {
                                                                                                                                                            this.localAI[0] = 0f;
                                                                                                                                                            float num577 = 10f;
                                                                                                                                                            int num578 = 0;
                                                                                                                                                            int num579 = 102;
                                                                                                                                                            num576 = num577/num576;
                                                                                                                                                            num574 *= num576;
                                                                                                                                                            num575 *= num576;
                                                                                                                                                            num574 += (float) Main.rand.Next(-40, 41)*0.01f;
                                                                                                                                                            num575 += (float) Main.rand.Next(-40, 41)*0.01f;
                                                                                                                                                            vector67.X += num574*4f;
                                                                                                                                                            vector67.Y += num575*4f;
                                                                                                                                                            Projectile.NewProjectile(vector67.X, vector67.Y, num574, num575, num579, num578, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                            return;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.aiStyle == 36)
                                                                                                                                            {
                                                                                                                                                this.spriteDirection = -(int) this.ai[0];
                                                                                                                                                if (!Main.npc[(int) this.ai[1]].active || Main.npc[(int) this.ai[1]].aiStyle != 32)
                                                                                                                                                {
                                                                                                                                                    this.ai[2] += 10f;
                                                                                                                                                    if (this.ai[2] > 50f || Main.netMode != 2)
                                                                                                                                                    {
                                                                                                                                                        this.life = -1;
                                                                                                                                                        this.HitEffect(0, 10.0);
                                                                                                                                                        this.active = false;
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                if (this.ai[2] == 0f || this.ai[2] == 3f)
                                                                                                                                                {
                                                                                                                                                    if (Main.npc[(int) this.ai[1]].ai[1] == 3f && this.timeLeft > 10)
                                                                                                                                                    {
                                                                                                                                                        this.timeLeft = 10;
                                                                                                                                                    }
                                                                                                                                                    if (Main.npc[(int) this.ai[1]].ai[1] != 0f)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[0] += 3f;
                                                                                                                                                        if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y - 100f)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.Y > 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.Y = this.velocity.Y - 0.07f;
                                                                                                                                                            if (this.velocity.Y > 6f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = 6f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y - 100f)
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.Y < 0f)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                                }
                                                                                                                                                                this.velocity.Y = this.velocity.Y + 0.07f;
                                                                                                                                                                if (this.velocity.Y < -6f)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.Y = -6f;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 120f*this.ai[0])
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.X > 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                                                                                                                            if (this.velocity.X > 8f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = 8f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 120f*this.ai[0])
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.X < 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.X = this.velocity.X + 0.1f;
                                                                                                                                                            if (this.velocity.X < -8f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = -8f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        this.ai[3] += 1f;
                                                                                                                                                        if (this.ai[3] >= 800f)
                                                                                                                                                        {
                                                                                                                                                            this.ai[2] += 1f;
                                                                                                                                                            this.ai[3] = 0f;
                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                        }
                                                                                                                                                        if (this.position.Y > Main.npc[(int) this.ai[1]].position.Y - 100f)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.Y > 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.Y = this.velocity.Y - 0.1f;
                                                                                                                                                            if (this.velocity.Y > 3f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = 3f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            if (this.position.Y < Main.npc[(int) this.ai[1]].position.Y - 100f)
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.Y < 0f)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.Y = this.velocity.Y*0.96f;
                                                                                                                                                                }
                                                                                                                                                                this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                                                                                if (this.velocity.Y < -3f)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.Y = -3f;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        if (this.position.X + (float) (this.width/2) > Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 180f*this.ai[0])
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.X > 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.X = this.velocity.X - 0.14f;
                                                                                                                                                            if (this.velocity.X > 8f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = 8f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        if (this.position.X + (float) (this.width/2) < Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - 180f*this.ai[0])
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.X < 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.X = this.velocity.X + 0.14f;
                                                                                                                                                            if (this.velocity.X < -8f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = -8f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                    Vector2 vector68 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                    float num580 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector68.X;
                                                                                                                                                    float num581 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector68.Y;
                                                                                                                                                    float num582 = (float) Math.Sqrt((double) (num580*num580 + num581*num581));
                                                                                                                                                    this.rotation = (float) Math.Atan2((double) num581, (double) num580) - 1.57f;
                                                                                                                                                    if (Main.netMode != 1)
                                                                                                                                                    {
                                                                                                                                                        this.localAI[0] += 1f;
                                                                                                                                                        if (this.localAI[0] > 200f)
                                                                                                                                                        {
                                                                                                                                                            this.localAI[0] = 0f;
                                                                                                                                                            float num583 = 8f;
                                                                                                                                                            int num584 = 25;
                                                                                                                                                            int num585 = 100;
                                                                                                                                                            num582 = num583/num582;
                                                                                                                                                            num580 *= num582;
                                                                                                                                                            num581 *= num582;
                                                                                                                                                            num580 += (float) Main.rand.Next(-40, 41)*0.05f;
                                                                                                                                                            num581 += (float) Main.rand.Next(-40, 41)*0.05f;
                                                                                                                                                            vector68.X += num580*8f;
                                                                                                                                                            vector68.Y += num581*8f;
                                                                                                                                                            Projectile.NewProjectile(vector68.X, vector68.Y, num580, num581, num585, num584, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                            return;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    if (this.ai[2] == 1f)
                                                                                                                                                    {
                                                                                                                                                        this.ai[3] += 1f;
                                                                                                                                                        if (this.ai[3] >= 200f)
                                                                                                                                                        {
                                                                                                                                                            this.localAI[0] = 0f;
                                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                                            this.ai[3] = 0f;
                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                        }
                                                                                                                                                        Vector2 vector69 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                        float num586 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - 350f - vector69.X;
                                                                                                                                                        float num587 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - 20f - vector69.Y;
                                                                                                                                                        float num588 = (float) Math.Sqrt((double) (num586*num586 + num587*num587));
                                                                                                                                                        num588 = 7f/num588;
                                                                                                                                                        num586 *= num588;
                                                                                                                                                        num587 *= num588;
                                                                                                                                                        if (this.velocity.X > num586)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.X > 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.X = this.velocity.X - 0.1f;
                                                                                                                                                        }
                                                                                                                                                        if (this.velocity.X < num586)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.X < 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.X = this.velocity.X + 0.1f;
                                                                                                                                                        }
                                                                                                                                                        if (this.velocity.Y > num587)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.Y > 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.Y = this.velocity.Y - 0.03f;
                                                                                                                                                        }
                                                                                                                                                        if (this.velocity.Y < num587)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.Y < 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                            }
                                                                                                                                                            this.velocity.Y = this.velocity.Y + 0.03f;
                                                                                                                                                        }
                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                        vector69 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                        num586 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector69.X;
                                                                                                                                                        num587 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector69.Y;
                                                                                                                                                        num588 = (float) Math.Sqrt((double) (num586*num586 + num587*num587));
                                                                                                                                                        this.rotation = (float) Math.Atan2((double) num587, (double) num586) - 1.57f;
                                                                                                                                                        if (Main.netMode == 1)
                                                                                                                                                        {
                                                                                                                                                            this.localAI[0] += 1f;
                                                                                                                                                            if (this.localAI[0] > 80f)
                                                                                                                                                            {
                                                                                                                                                                this.localAI[0] = 0f;
                                                                                                                                                                float num589 = 10f;
                                                                                                                                                                int num590 = 20 + (Main.bossLevel * 5);
                                                                                                                                                                int num591 = 100;
                                                                                                                                                                num588 = num589/num588;
                                                                                                                                                                num586 *= num588;
                                                                                                                                                                num587 *= num588;
                                                                                                                                                                num586 += (float) Main.rand.Next(-40, 41)*0.05f;
                                                                                                                                                                num587 += (float) Main.rand.Next(-40, 41)*0.05f;
                                                                                                                                                                vector69.X += num586*8f;
                                                                                                                                                                vector69.Y += num587*8f;
                                                                                                                                                                Projectile.NewProjectile(vector69.X, vector69.Y, num586, num587, num591, num590, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                return;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                if (this.aiStyle == 37)
                                                                                                                                                {
                                                                                                                                                    if (this.ai[3] > 0f)
                                                                                                                                                    {
                                                                                                                                                        this.realLife = (int) this.ai[3];
                                                                                                                                                    }
                                                                                                                                                    if (this.target < 0 || this.target == 255 || Main.player[this.target].dead)
                                                                                                                                                    {
                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                    }
                                                                                                                                                    if (this.type > 134)
                                                                                                                                                    {
                                                                                                                                                        bool flag42 = false;
                                                                                                                                                        if (this.ai[1] <= 0f)
                                                                                                                                                        {
                                                                                                                                                            flag42 = true;
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            if (Main.npc[(int) this.ai[3]].life <= 0)
                                                                                                                                                            {
                                                                                                                                                                flag42 = true;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        if (flag42)
                                                                                                                                                        {
                                                                                                                                                            this.life = 0;
                                                                                                                                                            this.HitEffect(0, 10.0);
                                                                                                                                                            this.checkDead();
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    if (Main.netMode != 1)
                                                                                                                                                    {
                                                                                                                                                        if (this.ai[0] == 0f && this.type == 134)
                                                                                                                                                        {
                                                                                                                                                            this.ai[3] = (float) this.whoAmI;
                                                                                                                                                            this.realLife = this.whoAmI;
                                                                                                                                                            int front = this.whoAmI;
                                                                                                                                                            int numParts = 80;
                                                                                                                                                            for (int curPart = 0; curPart <= numParts; curPart++)
                                                                                                                                                            {
                                                                                                                                                                int partType = 135;
                                                                                                                                                                if (curPart == numParts)
                                                                                                                                                                {
                                                                                                                                                                    partType = 136;
                                                                                                                                                                }
                                                                                                                                                                int curPartSlot = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), partType, this.whoAmI);
                                                                                                                                                                Main.npc[curPartSlot].ai[3] = (float) this.whoAmI;
                                                                                                                                                                Main.npc[curPartSlot].realLife = this.whoAmI;
                                                                                                                                                                Main.npc[curPartSlot].ai[1] = (float) front;
                                                                                                                                                                Main.npc[front].ai[0] = (float) curPartSlot;
                                                                                                                                                                NetMessage.SendData(23, -1, -1, "", curPartSlot, 0f, 0f, 0f, 0);
                                                                                                                                                                front = curPartSlot;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        if (this.type == 135)
                                                                                                                                                        {
                                                                                                                                                            this.localAI[0] += (float) Main.rand.Next(4);
                                                                                                                                                            if (this.localAI[0] >= (float) Main.rand.Next(1400, 26000))
                                                                                                                                                            {
                                                                                                                                                                this.localAI[0] = 0f;
                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                                                {
                                                                                                                                                                    float num597 = 8f;
                                                                                                                                                                    Vector2 vector70 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) (this.height/2));
                                                                                                                                                                    float num598 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector70.X + (float) Main.rand.Next(-20, 21);
                                                                                                                                                                    float num599 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector70.Y + (float) Main.rand.Next(-20, 21);
                                                                                                                                                                    float num600 = (float) Math.Sqrt((double) (num598*num598 + num599*num599));
                                                                                                                                                                    num600 = num597/num600;
                                                                                                                                                                    num598 *= num600;
                                                                                                                                                                    num599 *= num600;
                                                                                                                                                                    num598 += (float) Main.rand.Next(-20, 21)*0.05f;
                                                                                                                                                                    num599 += (float) Main.rand.Next(-20, 21)*0.05f;
                                                                                                                                                                    int num601 = 22;
                                                                                                                                                                    int num602 = 100;
                                                                                                                                                                    vector70.X += num598*5f;
                                                                                                                                                                    vector70.Y += num599*5f;
                                                                                                                                                                    int num603 = Projectile.NewProjectile(vector70.X, vector70.Y, num598, num599, num602, num601, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                    Main.projectile[num603].timeLeft = 300;
                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    int num604 = (int) (this.position.X/16f) - 1;
                                                                                                                                                    int num605 = (int) ((this.position.X + (float) this.width)/16f) + 2;
                                                                                                                                                    int num606 = (int) (this.position.Y/16f) - 1;
                                                                                                                                                    int num607 = (int) ((this.position.Y + (float) this.height)/16f) + 2;
                                                                                                                                                    if (num604 < 0)
                                                                                                                                                    {
                                                                                                                                                        num604 = 0;
                                                                                                                                                    }
                                                                                                                                                    if (num605 > Main.maxTilesX)
                                                                                                                                                    {
                                                                                                                                                        num605 = Main.maxTilesX;
                                                                                                                                                    }
                                                                                                                                                    if (num606 < 0)
                                                                                                                                                    {
                                                                                                                                                        num606 = 0;
                                                                                                                                                    }
                                                                                                                                                    if (num607 > Main.maxTilesY)
                                                                                                                                                    {
                                                                                                                                                        num607 = Main.maxTilesY;
                                                                                                                                                    }
                                                                                                                                                    bool flag43 = false;
                                                                                                                                                    if (!flag43)
                                                                                                                                                    {
                                                                                                                                                        for (int num608 = num604; num608 < num605; num608++)
                                                                                                                                                        {
                                                                                                                                                            for (int num609 = num606; num609 < num607; num609++)
                                                                                                                                                            {
                                                                                                                                                                if (Main.tile[num608, num609] != null && ((Main.tile[num608, num609].nactive() && (Main.tileSolid[(int) Main.tile[num608, num609].type] || (Main.tileSolidTop[(int) Main.tile[num608, num609].type] && Main.tile[num608, num609].frameY == 0))) || Main.tile[num608, num609].liquid > 64))
                                                                                                                                                                {
                                                                                                                                                                    Vector2 vector71;
                                                                                                                                                                    vector71.X = (float) (num608*16);
                                                                                                                                                                    vector71.Y = (float) (num609*16);
                                                                                                                                                                    if (this.position.X + (float) this.width > vector71.X && this.position.X < vector71.X + 16f && this.position.Y + (float) this.height > vector71.Y && this.position.Y < vector71.Y + 16f)
                                                                                                                                                                    {
                                                                                                                                                                        flag43 = true;
                                                                                                                                                                        break;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    if (!flag43)
                                                                                                                                                    {
                                                                                                                                                        if (this.type != 135 || this.ai[2] != 1f)
                                                                                                                                                        {
                                                                                                                                                            Lighting.addLight((int) ((this.position.X + (float) (this.width/2))/16f), (int) ((this.position.Y + (float) (this.height/2))/16f), 0.3f, 0.1f, 0.05f);
                                                                                                                                                        }
                                                                                                                                                        this.localAI[1] = 1f;
                                                                                                                                                        if (this.type == 134)
                                                                                                                                                        {
                                                                                                                                                            Rectangle rectangle11 = new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
                                                                                                                                                            int num610 = 1000;
                                                                                                                                                            bool flag44 = true;
                                                                                                                                                            if (this.position.Y > Main.player[this.target].position.Y)
                                                                                                                                                            {
                                                                                                                                                                for (int num611 = 0; num611 < 255; num611
                                                                                                                                                                    ++)
                                                                                                                                                                {
                                                                                                                                                                    if (Main.player[num611].active)
                                                                                                                                                                    {
                                                                                                                                                                        Rectangle rectangle12 = new Rectangle((int) Main.player[num611].position.X - num610, (int) Main.player[num611].position.Y - num610, num610*2, num610*2);
                                                                                                                                                                        if (rectangle11.Intersects(rectangle12))
                                                                                                                                                                        {
                                                                                                                                                                            flag44 = false;
                                                                                                                                                                            break;
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                if (flag44)
                                                                                                                                                                {
                                                                                                                                                                    flag43 = true;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        this.localAI[1] = 0f;
                                                                                                                                                    }
                                                                                                                                                    float num612 = 16f;
                                                                                                                                                    float num614 = 0.1f;
                                                                                                                                                    float num615 = 0.15f;
                                                                                                                                                    Vector2 vector72 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                    float num616 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2);
                                                                                                                                                    float num617 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2);
                                                                                                                                                    num616 = (float) ((int) (num616/16f)*16);
                                                                                                                                                    num617 = (float) ((int) (num617/16f)*16);
                                                                                                                                                    vector72.X = (float) ((int) (vector72.X/16f)*16);
                                                                                                                                                    vector72.Y = (float) ((int) (vector72.Y/16f)*16);
                                                                                                                                                    num616 -= vector72.X;
                                                                                                                                                    num617 -= vector72.Y;
                                                                                                                                                    float num618 = (float) Math.Sqrt((double) (num616*num616 + num617*num617));
                                                                                                                                                    if (this.ai[1] > 0f && this.ai[1] < (float) Main.npc.Length)
                                                                                                                                                    {
                                                                                                                                                        try
                                                                                                                                                        {
                                                                                                                                                            vector72 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                            num616 = Main.npc[(int) this.ai[1]].position.X + (float) (Main.npc[(int) this.ai[1]].width/2) - vector72.X;
                                                                                                                                                            num617 = Main.npc[(int) this.ai[1]].position.Y + (float) (Main.npc[(int) this.ai[1]].height/2) - vector72.Y;
                                                                                                                                                        }
                                                                                                                                                        catch
                                                                                                                                                        {
                                                                                                                                                        }
                                                                                                                                                        this.rotation = (float) Math.Atan2((double) num617, (double) num616) + 1.57f;
                                                                                                                                                        num618 = (float) Math.Sqrt((double) (num616*num616 + num617*num617));
                                                                                                                                                        int num619 = (int) (44f*this.scale);
                                                                                                                                                        num618 = (num618 - (float) num619)/num618;
                                                                                                                                                        num616 *= num618;
                                                                                                                                                        num617 *= num618;
                                                                                                                                                        this.velocity = default(Vector2);
                                                                                                                                                        this.position.X = this.position.X + num616;
                                                                                                                                                        this.position.Y = this.position.Y + num617;
                                                                                                                                                        return;
                                                                                                                                                    }
                                                                                                                                                    if (!flag43)
                                                                                                                                                    {
                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.15f;
                                                                                                                                                        if (this.velocity.Y > num612)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.Y = num612;
                                                                                                                                                        }
                                                                                                                                                        if ((double) (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y)) < (double) num612*0.4)
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.X < 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X - num614*1.1f;
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X + num614*1.1f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.Y == num612)
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.X < num616)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.X = this.velocity.X + num614;
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.X > num616)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X - num614;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.Y > 4f)
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.X < 0f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X + num614*0.9f;
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X - num614*0.9f;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        if (this.soundDelay == 0)
                                                                                                                                                        {
                                                                                                                                                            float num620 = num618/40f;
                                                                                                                                                            if (num620 < 10f)
                                                                                                                                                            {
                                                                                                                                                                num620 = 10f;
                                                                                                                                                            }
                                                                                                                                                            if (num620 > 20f)
                                                                                                                                                            {
                                                                                                                                                                num620 = 20f;
                                                                                                                                                            }
                                                                                                                                                            this.soundDelay = (int) num620;
                                                                                                                                                            Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 1);
                                                                                                                                                        }
                                                                                                                                                        num618 = (float) Math.Sqrt((double) (num616*num616 + num617*num617));
                                                                                                                                                        float num621 = Math.Abs(num616);
                                                                                                                                                        float num622 = Math.Abs(num617);
                                                                                                                                                        float num623 = num612/num618;
                                                                                                                                                        num616 *= num623;
                                                                                                                                                        num617 *= num623;
                                                                                                                                                        if (((this.velocity.X > 0f && num616 > 0f) || (this.velocity.X < 0f && num616 < 0f)) && ((this.velocity.Y > 0f && num617 > 0f) || (this.velocity.Y < 0f && num617 < 0f)))
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.X < num616)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X + num615;
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.X > num616)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.X = this.velocity.X - num615;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            if (this.velocity.Y < num617)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = this.velocity.Y + num615;
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.Y > num617)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.Y = this.velocity.Y - num615;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        if ((this.velocity.X > 0f && num616 > 0f) || (this.velocity.X < 0f && num616 < 0f) || (this.velocity.Y > 0f && num617 > 0f) || (this.velocity.Y < 0f && num617 < 0f))
                                                                                                                                                        {
                                                                                                                                                            if (this.velocity.X < num616)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X + num614;
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.X > num616)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.X = this.velocity.X - num614;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            if (this.velocity.Y < num617)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.Y = this.velocity.Y + num614;
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.Y > num617)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.Y = this.velocity.Y - num614;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            if ((double) Math.Abs(num617) < (double) num612*0.2 && ((this.velocity.X > 0f && num616 < 0f) || (this.velocity.X < 0f && num616 > 0f)))
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.Y > 0f)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.Y = this.velocity.Y + num614*2f;
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.Y = this.velocity.Y - num614*2f;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            if ((double) Math.Abs(num616) < (double) num612*0.2 && ((this.velocity.Y > 0f && num617 < 0f) || (this.velocity.Y < 0f && num617 > 0f)))
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.X > 0f)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.X = this.velocity.X + num614*2f;
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.X = this.velocity.X - num614*2f;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            if (num621 > num622)
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.X < num616)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.X = this.velocity.X + num614*1.1f;
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.X > num616)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X - num614*1.1f;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                if ((double) (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y)) < (double) num612*0.5)
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.Y > 0f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = this.velocity.Y + num614;
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = this.velocity.Y - num614;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.Y < num617)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.Y = this.velocity.Y + num614*1.1f;
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.Y > num617)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = this.velocity.Y - num614*1.1f;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                if ((double) (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y)) < (double) num612*0.5)
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.X > 0f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X + num614;
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X - num614;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) + 1.57f;
                                                                                                                                                    if (this.type == 134)
                                                                                                                                                    {
                                                                                                                                                        if (flag43)
                                                                                                                                                        {
                                                                                                                                                            if (this.localAI[0] != 1f)
                                                                                                                                                            {
                                                                                                                                                                this.netUpdate = true;
                                                                                                                                                            }
                                                                                                                                                            this.localAI[0] = 1f;
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            if (this.localAI[0] != 0f)
                                                                                                                                                            {
                                                                                                                                                                this.netUpdate = true;
                                                                                                                                                            }
                                                                                                                                                            this.localAI[0] = 0f;
                                                                                                                                                        }
                                                                                                                                                        if (((this.velocity.X > 0f && this.oldVelocity.X < 0f) || (this.velocity.X < 0f && this.oldVelocity.X > 0f) || (this.velocity.Y > 0f && this.oldVelocity.Y < 0f) || (this.velocity.Y < 0f && this.oldVelocity.Y > 0f)) && !this.justHit)
                                                                                                                                                        {
                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                            return;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    if (this.aiStyle == 38)
                                                                                                                                                    {
                                                                                                                                                        float num624 = 4f;
                                                                                                                                                        float num625 = 1f;
                                                                                                                                                        if (this.type == 143)
                                                                                                                                                        {
                                                                                                                                                            num624 = 3f;
                                                                                                                                                            num625 = 0.7f;
                                                                                                                                                        }
                                                                                                                                                        if (this.type == 145)
                                                                                                                                                        {
                                                                                                                                                            num624 = 3.5f;
                                                                                                                                                            num625 = 0.8f;
                                                                                                                                                        }
                                                                                                                                                        if (this.type == 143)
                                                                                                                                                        {
                                                                                                                                                            this.ai[2] += 1f;
                                                                                                                                                            if (this.ai[2] >= 120f)
                                                                                                                                                            {
                                                                                                                                                                this.ai[2] = 0f;
                                                                                                                                                                if (Main.netMode != 1)
                                                                                                                                                                {
                                                                                                                                                                    Vector2 vector73 = new Vector2(this.position.X + (float) this.width*0.5f - (float) (this.direction*12), this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                    float speedX = (float) (12*this.spriteDirection);
                                                                                                                                                                    float speedY = 0f;
                                                                                                                                                                    if (Main.netMode != 1)
                                                                                                                                                                    {
                                                                                                                                                                        int num626 = 25;
                                                                                                                                                                        int num627 = 110;
                                                                                                                                                                        int num628 = Projectile.NewProjectile(vector73.X, vector73.Y, speedX, speedY, num627, num626, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                        Main.projectile[num628].ai[0] = 2f;
                                                                                                                                                                        Main.projectile[num628].timeLeft = 300;
                                                                                                                                                                        Main.projectile[num628].friendly = false;
                                                                                                                                                                        NetMessage.SendData(27, -1, -1, "", num628, 0f, 0f, 0f, 0);
                                                                                                                                                                        this.netUpdate = true;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        if (this.type == 144 && this.ai[1] >= 3f)
                                                                                                                                                        {
                                                                                                                                                            this.TargetClosest(true);
                                                                                                                                                            this.spriteDirection = this.direction;
                                                                                                                                                            if (this.velocity.Y == 0f)
                                                                                                                                                            {
                                                                                                                                                                this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                                this.ai[2] += 1f;
                                                                                                                                                                if ((double) this.velocity.X > -0.3 && (double) this.velocity.X < 0.3)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.X = 0f;
                                                                                                                                                                }
                                                                                                                                                                if (this.ai[2] >= 200f)
                                                                                                                                                                {
                                                                                                                                                                    this.ai[2] = 0f;
                                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            if (this.type == 145 && this.ai[1] >= 3f)
                                                                                                                                                            {
                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                if (this.velocity.Y == 0f)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                                                    if ((double) this.velocity.X > -0.3 && (double) this.velocity.X < 0.3)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = 0f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.ai[2] >= 16f)
                                                                                                                                                                    {
                                                                                                                                                                        this.ai[2] = 0f;
                                                                                                                                                                        this.ai[1] = 0f;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                if (this.velocity.X == 0f && this.velocity.Y == 0f && this.ai[2] == 8f)
                                                                                                                                                                {
                                                                                                                                                                    float num629 = 10f;
                                                                                                                                                                    Vector2 vector74 = new Vector2(this.position.X + (float) this.width*0.5f - (float) (this.direction*12), this.position.Y + (float) this.height*0.25f);
                                                                                                                                                                    float num630 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector74.X;
                                                                                                                                                                    float num631 = Main.player[this.target].position.Y - vector74.Y;
                                                                                                                                                                    float num632 = (float) Math.Sqrt((double) (num630*num630 + num631*num631));
                                                                                                                                                                    num632 = num629/num632;
                                                                                                                                                                    num630 *= num632;
                                                                                                                                                                    num631 *= num632;
                                                                                                                                                                    if (Main.netMode != 1)
                                                                                                                                                                    {
                                                                                                                                                                        int num633 = 35;
                                                                                                                                                                        int num634 = 109;
                                                                                                                                                                        int num635 = Projectile.NewProjectile(vector74.X, vector74.Y, num630, num631, num634, num633, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                        Main.projectile[num635].ai[0] = 2f;
                                                                                                                                                                        Main.projectile[num635].timeLeft = 300;
                                                                                                                                                                        Main.projectile[num635].friendly = false;
                                                                                                                                                                        NetMessage.SendData(27, -1, -1, "", num635, 0f, 0f, 0f, 0);
                                                                                                                                                                        this.netUpdate = true;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.Y == 0f)
                                                                                                                                                                {
                                                                                                                                                                    if (this.localAI[2] == this.position.X)
                                                                                                                                                                    {
                                                                                                                                                                        this.direction *= -1;
                                                                                                                                                                        this.ai[3] = 60f;
                                                                                                                                                                    }
                                                                                                                                                                    this.localAI[2] = this.position.X;
                                                                                                                                                                    if (this.ai[3] == 0f)
                                                                                                                                                                    {
                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                    }
                                                                                                                                                                    this.ai[0] += 1f;
                                                                                                                                                                    if (this.ai[0] > 2f)
                                                                                                                                                                    {
                                                                                                                                                                        this.ai[0] = 0f;
                                                                                                                                                                        this.ai[1] += 1f;
                                                                                                                                                                        this.velocity.Y = -8.2f;
                                                                                                                                                                        this.velocity.X = this.velocity.X + (float) this.direction*num625*1.1f;
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = -6f;
                                                                                                                                                                        this.velocity.X = this.velocity.X + (float) this.direction*num625*0.9f;
                                                                                                                                                                    }
                                                                                                                                                                    this.spriteDirection = this.direction;
                                                                                                                                                                }
                                                                                                                                                                this.velocity.X = this.velocity.X + (float) this.direction*num625*0.01f;
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        if (this.ai[3] > 0f)
                                                                                                                                                        {
                                                                                                                                                            this.ai[3] -= 1f;
                                                                                                                                                        }
                                                                                                                                                        if (this.velocity.X > num624 && this.direction > 0)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = 4f;
                                                                                                                                                        }
                                                                                                                                                        if (this.velocity.X < -num624 && this.direction < 0)
                                                                                                                                                        {
                                                                                                                                                            this.velocity.X = -4f;
                                                                                                                                                            return;
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        if (this.aiStyle == 39)
                                                                                                                                                        {
                                                                                                                                                            if (this.target < 0 || Main.player[this.target].dead || this.direction == 0)
                                                                                                                                                            {
                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                            }
                                                                                                                                                            bool flag45 = true;
                                                                                                                                                            int num636 = 0;
                                                                                                                                                            if (this.velocity.X < 0f)
                                                                                                                                                            {
                                                                                                                                                                num636 = -1;
                                                                                                                                                            }
                                                                                                                                                            if (this.velocity.X > 0f)
                                                                                                                                                            {
                                                                                                                                                                num636 = 1;
                                                                                                                                                            }
                                                                                                                                                            Vector2 vector75 = this.position;
                                                                                                                                                            vector75.X += this.velocity.X;
                                                                                                                                                            int num637 = (int) ((vector75.X + (float) (this.width/2) + (float) ((this.width/2 + 1)*num636))/16f);
                                                                                                                                                            int num638 = (int) ((vector75.Y + (float) this.height - 1f)/16f);
                                                                                                                                                            if ((float) (num637*16) < vector75.X + (float) this.width && (float) (num637*16 + 16) > vector75.X && ((Main.tile[num637, num638].nactive() && Main.tile[num637, num638].slope() == 0 && Main.tile[num637, num638 - 1].slope() == 0 && ((Main.tileSolid[(int) Main.tile[num637, num638].type] && !Main.tileSolidTop[(int) Main.tile[num637, num638].type]) || (flag45 && Main.tileSolidTop[(int) Main.tile[num637, num638].type] && (!Main.tileSolid[(int) Main.tile[num637, num638 - 1].type] || !Main.tile[num637, num638 - 1].nactive()) && Main.tile[num637, num638].type != 16 && Main.tile[num637, num638].type != 18 && Main.tile[num637, num638].type != 134))) || (Main.tile[num637, num638 - 1].halfBrick() && Main.tile[num637, num638 - 1].nactive())) && (!Main.tile[num637, num638 - 1].nactive() || !Main.tileSolid[(int) Main.tile[num637, num638 - 1].type] || Main.tileSolidTop[(int) Main.tile[num637, num638 - 1].type] || (Main.tile[num637, num638 - 1].halfBrick() && (!Main.tile[num637, num638 - 4].nactive() || !Main.tileSolid[(int) Main.tile[num637, num638 - 4].type] || Main.tileSolidTop[(int) Main.tile[num637, num638 - 4].type]))) && (!Main.tile[num637, num638 - 2].nactive() || !Main.tileSolid[(int) Main.tile[num637, num638 - 2].type] || Main.tileSolidTop[(int) Main.tile[num637, num638 - 2].type]) && (!Main.tile[num637, num638 - 3].nactive() || !Main.tileSolid[(int) Main.tile[num637, num638 - 3].type] || Main.tileSolidTop[(int) Main.tile[num637, num638 - 3].type]) && (!Main.tile[num637 - num636, num638 - 3].nactive() || !Main.tileSolid[(int) Main.tile[num637 - num636, num638 - 3].type] || Main.tileSolidTop[(int) Main.tile[num637 - num636, num638 - 3].type]))
                                                                                                                                                            {
                                                                                                                                                                float num639 = (float) (num638*16);
                                                                                                                                                                if (Main.tile[num637, num638].halfBrick())
                                                                                                                                                                {
                                                                                                                                                                    num639 += 8f;
                                                                                                                                                                }
                                                                                                                                                                if (Main.tile[num637, num638 - 1].halfBrick())
                                                                                                                                                                {
                                                                                                                                                                    num639 -= 8f;
                                                                                                                                                                }
                                                                                                                                                                if (num639 < vector75.Y + (float) this.height)
                                                                                                                                                                {
                                                                                                                                                                    float num640 = vector75.Y + (float) this.height - num639;
                                                                                                                                                                    if ((double) num640 <= 16.1)
                                                                                                                                                                    {
                                                                                                                                                                        this.gfxOffY += this.position.Y + (float) this.height - num639;
                                                                                                                                                                        this.position.Y = num639 - (float) this.height;
                                                                                                                                                                        if (num640 < 9f)
                                                                                                                                                                        {
                                                                                                                                                                            this.stepSpeed = 0.75f;
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            this.stepSpeed = 1.5f;
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            if (this.justHit)
                                                                                                                                                            {
                                                                                                                                                                this.ai[0] = 0f;
                                                                                                                                                                this.ai[1] = 0f;
                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                            }
                                                                                                                                                            if (this.type == 154 && Main.rand.Next(10) == 0)
                                                                                                                                                            {
                                                                                                                                                                int num641 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 67, this.velocity.X*0.5f, this.velocity.Y*0.5f, 90, default(Color), 1.5f);
                                                                                                                                                                Main.dust[num641].noGravity = true;
                                                                                                                                                                Main.dust[num641].velocity *= 0.2f;
                                                                                                                                                            }
                                                                                                                                                            if (this.ai[0] == 0f)
                                                                                                                                                            {
                                                                                                                                                                if (this.velocity.X < 0f)
                                                                                                                                                                {
                                                                                                                                                                    this.direction = -1;
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.X > 0f)
                                                                                                                                                                    {
                                                                                                                                                                        this.direction = 1;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                this.spriteDirection = this.direction;
                                                                                                                                                                Vector2 vector76 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                float num642 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector76.X;
                                                                                                                                                                float num643 = Main.player[this.target].position.Y - vector76.Y;
                                                                                                                                                                float num644 = (float) Math.Sqrt((double) (num642*num642 + num643*num643));
                                                                                                                                                                bool flag46 = Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height);
                                                                                                                                                                if (num644 > 200f && flag46)
                                                                                                                                                                {
                                                                                                                                                                    this.ai[1] += 4f;
                                                                                                                                                                }
                                                                                                                                                                if (num644 > 600f && (flag46 || this.position.Y + (float) this.height > Main.player[this.target].position.Y - 200f))
                                                                                                                                                                {
                                                                                                                                                                    this.ai[1] += 10f;
                                                                                                                                                                }
                                                                                                                                                                if (this.wet)
                                                                                                                                                                {
                                                                                                                                                                    this.ai[1] = 1000f;
                                                                                                                                                                }
                                                                                                                                                                this.defense = 30;
                                                                                                                                                                this.damage = 80;
                                                                                                                                                                this.knockBackResist = 0.3f;
                                                                                                                                                                this.ai[1] += 1f;
                                                                                                                                                                if (this.ai[1] >= 400f)
                                                                                                                                                                {
                                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                                    this.ai[0] = 1f;
                                                                                                                                                                }
                                                                                                                                                                if (!this.justHit && this.velocity.X != this.oldVelocity.X)
                                                                                                                                                                {
                                                                                                                                                                    this.direction *= -1;
                                                                                                                                                                }
                                                                                                                                                                if (this.velocity.Y == 0f && Main.player[this.target].position.Y < this.position.Y + (float) this.height)
                                                                                                                                                                {
                                                                                                                                                                    int num645;
                                                                                                                                                                    int num646;
                                                                                                                                                                    if (this.direction > 0)
                                                                                                                                                                    {
                                                                                                                                                                        num645 = (int) (((double) this.position.X + (double) this.width*0.5)/16.0);
                                                                                                                                                                        num646 = num645 + 3;
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        num646 = (int) (((double) this.position.X + (double) this.width*0.5)/16.0);
                                                                                                                                                                        num645 = num646 - 3;
                                                                                                                                                                    }
                                                                                                                                                                    int num647 = (int) ((this.position.Y + (float) this.height + 2f)/16f) - 1;
                                                                                                                                                                    int num648 = num647 + 4;
                                                                                                                                                                    bool flag47 = false;
                                                                                                                                                                    for (int num649 = num645; num649 <= num646; num649
                                                                                                                                                                        ++)
                                                                                                                                                                    {
                                                                                                                                                                        for (int num650 = num647; num650 <= num648; num650
                                                                                                                                                                            ++)
                                                                                                                                                                        {
                                                                                                                                                                            if (Main.tile[num649, num650] != null && Main.tile[num649, num650].nactive() && Main.tileSolid[(int) Main.tile[num649, num650].type])
                                                                                                                                                                            {
                                                                                                                                                                                flag47 = true;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    if (!flag47)
                                                                                                                                                                    {
                                                                                                                                                                        this.direction *= -1;
                                                                                                                                                                        this.velocity.X = 0.1f*(float) this.direction;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                if (num644 < 400f)
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.X < -1f || this.velocity.X > 1f)
                                                                                                                                                                    {
                                                                                                                                                                        if (this.velocity.Y == 0f)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity *= 0.8f;
                                                                                                                                                                            return;
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        if (this.velocity.X < 1f && this.direction == 1)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.X = this.velocity.X + 0.07f;
                                                                                                                                                                            if (this.velocity.X > 1f)
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.X = 1f;
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            if (this.velocity.X > -1f && this.direction == -1)
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.X = this.velocity.X - 0.07f;
                                                                                                                                                                                if (this.velocity.X < -1f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.X = -1f;
                                                                                                                                                                                    return;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.X < -1.5f || this.velocity.X > 1.5f)
                                                                                                                                                                    {
                                                                                                                                                                        if (this.velocity.Y == 0f)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity *= 0.8f;
                                                                                                                                                                            return;
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        if (this.velocity.X < 1.5f && this.direction == 1)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.X = this.velocity.X + 0.07f;
                                                                                                                                                                            if (this.velocity.X > 1.5f)
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.X = 1.5f;
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            if (this.velocity.X > -1.5f && this.direction == -1)
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.X = this.velocity.X - 0.07f;
                                                                                                                                                                                if (this.velocity.X < -1.5f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.X = -1.5f;
                                                                                                                                                                                    return;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.ai[0] == 1f)
                                                                                                                                                                {
                                                                                                                                                                    this.velocity.X = this.velocity.X*0.5f;
                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                    if (this.ai[1] >= 30f)
                                                                                                                                                                    {
                                                                                                                                                                        this.netUpdate = true;
                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                        this.ai[1] = 0f;
                                                                                                                                                                        this.ai[0] = 3f;
                                                                                                                                                                        this.ai[2] = 0f;
                                                                                                                                                                        return;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    if (this.ai[0] == 3f)
                                                                                                                                                                    {
                                                                                                                                                                        if (this.type == 154 && Main.rand.Next(3) < 2)
                                                                                                                                                                        {
                                                                                                                                                                            int num651 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 67, this.velocity.X*0.5f, this.velocity.Y*0.5f, 90, default(Color), 1.5f);
                                                                                                                                                                            Main.dust[num651].noGravity = true;
                                                                                                                                                                            Main.dust[num651].velocity *= 0.2f;
                                                                                                                                                                        }
                                                                                                                                                                        this.damage = 120;
                                                                                                                                                                        this.defense = 70;
                                                                                                                                                                        this.ai[1] += 1f;
                                                                                                                                                                        if (this.ai[1] == 1f)
                                                                                                                                                                        {
                                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                                            this.TargetClosest(true);
                                                                                                                                                                            this.ai[2] += 0.3f;
                                                                                                                                                                            this.rotation += this.ai[2]*(float) this.direction;
                                                                                                                                                                            this.ai[1] += 1f;
                                                                                                                                                                            bool flag48 = Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height);
                                                                                                                                                                            float num652 = 10f;
                                                                                                                                                                            if (!flag48)
                                                                                                                                                                            {
                                                                                                                                                                                num652 = 6f;
                                                                                                                                                                            }
                                                                                                                                                                            Vector2 vector77 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                            float num653 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector77.X;
                                                                                                                                                                            float num654 = Math.Abs(num653)*0.2f;
                                                                                                                                                                            if (this.directionY > 0)
                                                                                                                                                                            {
                                                                                                                                                                                num654 = 0f;
                                                                                                                                                                            }
                                                                                                                                                                            float num655 = Main.player[this.target].position.Y - vector77.Y - num654;
                                                                                                                                                                            float num656 = (float) Math.Sqrt((double) (num653*num653 + num655*num655));
                                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                                            num656 = num652/num656;
                                                                                                                                                                            num653 *= num656;
                                                                                                                                                                            num655 *= num656;
                                                                                                                                                                            if (!flag48)
                                                                                                                                                                            {
                                                                                                                                                                                num655 = -10f;
                                                                                                                                                                            }
                                                                                                                                                                            this.velocity.X = num653;
                                                                                                                                                                            this.velocity.Y = num655;
                                                                                                                                                                            this.ai[3] = this.velocity.X;
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            if (this.position.X + (float) this.width > Main.player[this.target].position.X && this.position.X < Main.player[this.target].position.X + (float) Main.player[this.target].width && this.position.Y < Main.player[this.target].position.Y + (float) Main.player[this.target].height)
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.X = this.velocity.X*0.8f;
                                                                                                                                                                                this.ai[3] = 0f;
                                                                                                                                                                                if (this.velocity.Y < 0f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = this.velocity.Y + 0.2f;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                            if (this.ai[3] != 0f)
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.X = this.ai[3];
                                                                                                                                                                                this.velocity.Y = this.velocity.Y - 0.22f;
                                                                                                                                                                            }
                                                                                                                                                                            if (this.ai[1] >= 90f)
                                                                                                                                                                            {
                                                                                                                                                                                this.noGravity = false;
                                                                                                                                                                                this.ai[1] = 0f;
                                                                                                                                                                                this.ai[0] = 4f;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                        if (this.wet && this.directionY < 0)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.Y = this.velocity.Y - 0.3f;
                                                                                                                                                                        }
                                                                                                                                                                        this.rotation += this.ai[2]*(float) this.direction;
                                                                                                                                                                        return;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.ai[0] == 4f)
                                                                                                                                                                    {
                                                                                                                                                                        if (this.wet && this.directionY < 0)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.Y = this.velocity.Y - 0.3f;
                                                                                                                                                                        }
                                                                                                                                                                        this.velocity.X = this.velocity.X*0.96f;
                                                                                                                                                                        if (this.ai[2] > 0f)
                                                                                                                                                                        {
                                                                                                                                                                            this.ai[2] -= 0.01f;
                                                                                                                                                                            this.rotation += this.ai[2]*(float) this.direction;
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            if (this.velocity.Y >= 0f)
                                                                                                                                                                            {
                                                                                                                                                                                this.rotation = 0f;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                        if (this.ai[2] <= 0f && (this.velocity.Y == 0f || this.wet))
                                                                                                                                                                        {
                                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                                            this.rotation = 0f;
                                                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                                                            this.ai[1] = 0f;
                                                                                                                                                                            this.ai[0] = 5f;
                                                                                                                                                                            return;
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        if (this.ai[0] == 5f)
                                                                                                                                                                        {
                                                                                                                                                                            this.rotation = 0f;
                                                                                                                                                                            this.velocity.X = 0f;
                                                                                                                                                                            this.ai[1] += 1f;
                                                                                                                                                                            if (this.ai[1] >= 30f)
                                                                                                                                                                            {
                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                this.netUpdate = true;
                                                                                                                                                                                this.ai[1] = 0f;
                                                                                                                                                                                this.ai[0] = 0f;
                                                                                                                                                                            }
                                                                                                                                                                            if (this.wet)
                                                                                                                                                                            {
                                                                                                                                                                                this.ai[0] = 3f;
                                                                                                                                                                                this.ai[1] = 0f;
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            if (this.aiStyle == 40)
                                                                                                                                                            {
                                                                                                                                                                if (this.target < 0 || this.target == 255 || Main.player[this.target].dead)
                                                                                                                                                                {
                                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                                }
                                                                                                                                                                float num657 = 2f;
                                                                                                                                                                float num658 = 0.08f;
                                                                                                                                                                Vector2 vector78 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                float num659 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2);
                                                                                                                                                                float num660 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2);
                                                                                                                                                                num659 = (float) ((int) (num659/8f)*8);
                                                                                                                                                                num660 = (float) ((int) (num660/8f)*8);
                                                                                                                                                                vector78.X = (float) ((int) (vector78.X/8f)*8);
                                                                                                                                                                vector78.Y = (float) ((int) (vector78.Y/8f)*8);
                                                                                                                                                                num659 -= vector78.X;
                                                                                                                                                                num660 -= vector78.Y;
                                                                                                                                                                float num661 = (float) Math.Sqrt((double) (num659*num659 + num660*num660));
                                                                                                                                                                if (num661 == 0f)
                                                                                                                                                                {
                                                                                                                                                                    num659 = this.velocity.X;
                                                                                                                                                                    num660 = this.velocity.Y;
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    num661 = num657/num661;
                                                                                                                                                                    num659 *= num661;
                                                                                                                                                                    num660 *= num661;
                                                                                                                                                                }
                                                                                                                                                                if (Main.player[this.target].dead)
                                                                                                                                                                {
                                                                                                                                                                    num659 = (float) this.direction*num657/2f;
                                                                                                                                                                    num660 = -num657/2f;
                                                                                                                                                                }
                                                                                                                                                                this.spriteDirection = -1;
                                                                                                                                                                if (!Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                                                {
                                                                                                                                                                    this.ai[0] += 1f;
                                                                                                                                                                    if (this.ai[0] > 0f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.023f;
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.023f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.ai[0] < -100f || this.ai[0] > 100f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X + 0.023f;
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X - 0.023f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.ai[0] > 200f)
                                                                                                                                                                    {
                                                                                                                                                                        this.ai[0] = -200f;
                                                                                                                                                                    }
                                                                                                                                                                    this.velocity.X = this.velocity.X + num659*0.007f;
                                                                                                                                                                    this.velocity.Y = this.velocity.Y + num660*0.007f;
                                                                                                                                                                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X);
                                                                                                                                                                    if ((double) this.velocity.X > 1.5)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                                    }
                                                                                                                                                                    if ((double) this.velocity.X < -1.5)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                                    }
                                                                                                                                                                    if ((double) this.velocity.Y > 1.5)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                                    }
                                                                                                                                                                    if ((double) this.velocity.Y < -1.5)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.velocity.X > 3f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = 3f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.velocity.X < -3f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = -3f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.velocity.Y > 3f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = 3f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.velocity.Y < -3f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = -3f;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    if (this.velocity.X < num659)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = this.velocity.X + num658;
                                                                                                                                                                        if (this.velocity.X < 0f && num659 > 0f)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.X = this.velocity.X + num658;
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        if (this.velocity.X > num659)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.X = this.velocity.X - num658;
                                                                                                                                                                            if (this.velocity.X > 0f && num659 < 0f)
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.X = this.velocity.X - num658;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    if (this.velocity.Y < num660)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = this.velocity.Y + num658;
                                                                                                                                                                        if (this.velocity.Y < 0f && num660 > 0f)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.Y = this.velocity.Y + num658;
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        if (this.velocity.Y > num660)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.Y = this.velocity.Y - num658;
                                                                                                                                                                            if (this.velocity.Y > 0f && num660 < 0f)
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.Y = this.velocity.Y - num658;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    this.rotation = (float) Math.Atan2((double) num660, (double) num659);
                                                                                                                                                                }
                                                                                                                                                                float num662 = 0.5f;
                                                                                                                                                                if (this.collideX)
                                                                                                                                                                {
                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                    this.velocity.X = this.oldVelocity.X*-num662;
                                                                                                                                                                    if (this.direction == -1 && this.velocity.X > 0f && this.velocity.X < 2f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = 2f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.direction == 1 && this.velocity.X < 0f && this.velocity.X > -2f)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.X = -2f;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                if (this.collideY)
                                                                                                                                                                {
                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                    this.velocity.Y = this.oldVelocity.Y*-num662;
                                                                                                                                                                    if (this.velocity.Y > 0f && (double) this.velocity.Y < 1.5)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = 2f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.velocity.Y < 0f && (double) this.velocity.Y > -1.5)
                                                                                                                                                                    {
                                                                                                                                                                        this.velocity.Y = -2f;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                if (((this.velocity.X > 0f && this.oldVelocity.X < 0f) || (this.velocity.X < 0f && this.oldVelocity.X > 0f) || (this.velocity.Y > 0f && this.oldVelocity.Y < 0f) || (this.velocity.Y < 0f && this.oldVelocity.Y > 0f)) && !this.justHit)
                                                                                                                                                                {
                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                }
                                                                                                                                                                if (Main.netMode != 1)
                                                                                                                                                                {
                                                                                                                                                                    int num663 = (int) this.center().X/16;
                                                                                                                                                                    int num664 = (int) this.center().Y/16;
                                                                                                                                                                    bool flag49 = false;
                                                                                                                                                                    for (int num665 = num663 - 1; num665 <= num663 + 1; num665
                                                                                                                                                                        ++)
                                                                                                                                                                    {
                                                                                                                                                                        for (int num666 = num664 - 1; num666 <= num664 + 1; num666
                                                                                                                                                                            ++)
                                                                                                                                                                        {
                                                                                                                                                                            if (Main.tile[num665, num666].wall > 0)
                                                                                                                                                                            {
                                                                                                                                                                                flag49 = true;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    if (!flag49)
                                                                                                                                                                    {
                                                                                                                                                                        if (this.type == 237)
                                                                                                                                                                        {
                                                                                                                                                                            this.Transform(236);
                                                                                                                                                                            return;
                                                                                                                                                                        }
                                                                                                                                                                        if (this.type == 238)
                                                                                                                                                                        {
                                                                                                                                                                            this.Transform(163);
                                                                                                                                                                            return;
                                                                                                                                                                        }
                                                                                                                                                                        if (this.type == 240)
                                                                                                                                                                        {
                                                                                                                                                                            this.Transform(239);
                                                                                                                                                                            return;
                                                                                                                                                                        }
                                                                                                                                                                        this.Transform(164);
                                                                                                                                                                        return;
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.aiStyle == 41)
                                                                                                                                                                {
                                                                                                                                                                    if (this.ai[2] > 1f)
                                                                                                                                                                    {
                                                                                                                                                                        this.ai[2] -= 1f;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.ai[2] == 0f)
                                                                                                                                                                    {
                                                                                                                                                                        this.ai[0] = -100f;
                                                                                                                                                                        this.ai[2] = 1f;
                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                        this.spriteDirection = this.direction;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.wet && this.type != 177)
                                                                                                                                                                    {
                                                                                                                                                                        if (this.collideX)
                                                                                                                                                                        {
                                                                                                                                                                            this.direction *= -this.direction;
                                                                                                                                                                            this.spriteDirection = this.direction;
                                                                                                                                                                        }
                                                                                                                                                                        if (this.collideY)
                                                                                                                                                                        {
                                                                                                                                                                            this.TargetClosest(true);
                                                                                                                                                                            if (this.oldVelocity.Y < 0f)
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.Y = 5f;
                                                                                                                                                                            }
                                                                                                                                                                            else
                                                                                                                                                                            {
                                                                                                                                                                                this.velocity.Y = this.velocity.Y - 2f;
                                                                                                                                                                            }
                                                                                                                                                                            this.spriteDirection = this.direction;
                                                                                                                                                                        }
                                                                                                                                                                        if (this.velocity.Y > 4f)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.95f;
                                                                                                                                                                        }
                                                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.3f;
                                                                                                                                                                        if (this.velocity.Y < -4f)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.Y = -4f;
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    if (this.velocity.Y == 0f)
                                                                                                                                                                    {
                                                                                                                                                                        if (this.ai[3] == this.position.X)
                                                                                                                                                                        {
                                                                                                                                                                            this.direction *= -1;
                                                                                                                                                                            this.ai[2] = 300f;
                                                                                                                                                                        }
                                                                                                                                                                        this.ai[3] = 0f;
                                                                                                                                                                        this.velocity.X = this.velocity.X*0.8f;
                                                                                                                                                                        if ((double) this.velocity.X > -0.1 && (double) this.velocity.X < 0.1)
                                                                                                                                                                        {
                                                                                                                                                                            this.velocity.X = 0f;
                                                                                                                                                                        }
                                                                                                                                                                        if (this.type == 177)
                                                                                                                                                                        {
                                                                                                                                                                            this.ai[0] += 2f;
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            this.ai[0] += 5f;
                                                                                                                                                                        }
                                                                                                                                                                        Vector2 vector79 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                        float num667 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector79.X;
                                                                                                                                                                        float num668 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector79.Y;
                                                                                                                                                                        float num669 = (float) Math.Sqrt((double) (num667*num667 + num668*num668));
                                                                                                                                                                        float num670 = 400f/num669;
                                                                                                                                                                        if (this.type == 177)
                                                                                                                                                                        {
                                                                                                                                                                            num670 *= 5f;
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            num670 *= 10f;
                                                                                                                                                                        }
                                                                                                                                                                        if (num670 > 30f)
                                                                                                                                                                        {
                                                                                                                                                                            num670 = 30f;
                                                                                                                                                                        }
                                                                                                                                                                        this.ai[0] += (float) ((int) num670);
                                                                                                                                                                        if (this.ai[0] >= 0f)
                                                                                                                                                                        {
                                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                                            if (this.ai[2] == 1f)
                                                                                                                                                                            {
                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                            }
                                                                                                                                                                            if (this.type == 177)
                                                                                                                                                                            {
                                                                                                                                                                                if (this.ai[1] == 2f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = -11.5f;
                                                                                                                                                                                    this.velocity.X = this.velocity.X + 2f*(float) this.direction;
                                                                                                                                                                                    if (num669 < 350f && num669 > 200f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = this.velocity.X + (float) this.direction;
                                                                                                                                                                                    }
                                                                                                                                                                                    this.ai[0] = -200f;
                                                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                                                    this.ai[3] = this.position.X;
                                                                                                                                                                                }
                                                                                                                                                                                else
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = -7.5f;
                                                                                                                                                                                    this.velocity.X = this.velocity.X + (float) (4*this.direction);
                                                                                                                                                                                    if (num669 < 350f && num669 > 200f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = this.velocity.X + (float) this.direction;
                                                                                                                                                                                    }
                                                                                                                                                                                    this.ai[0] = -120f;
                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                            else
                                                                                                                                                                            {
                                                                                                                                                                                if (this.ai[1] == 3f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = -9f;
                                                                                                                                                                                    this.velocity.X = this.velocity.X + (float) (3*this.direction);
                                                                                                                                                                                    if (num669 < 350f && num669 > 200f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = this.velocity.X + (float) this.direction;
                                                                                                                                                                                    }
                                                                                                                                                                                    this.ai[0] = -200f;
                                                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                                                    this.ai[3] = this.position.X;
                                                                                                                                                                                }
                                                                                                                                                                                else
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = -5f;
                                                                                                                                                                                    this.velocity.X = this.velocity.X + (float) (5*this.direction);
                                                                                                                                                                                    if (num669 < 350f && num669 > 200f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = this.velocity.X + (float) this.direction;
                                                                                                                                                                                    }
                                                                                                                                                                                    this.ai[0] = -120f;
                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            if (this.ai[0] >= -30f)
                                                                                                                                                                            {
                                                                                                                                                                                this.aiAction = 1;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                        this.spriteDirection = this.direction;
                                                                                                                                                                        return;
                                                                                                                                                                    }
                                                                                                                                                                    if (this.target < 255)
                                                                                                                                                                    {
                                                                                                                                                                        if (this.type == 177)
                                                                                                                                                                        {
                                                                                                                                                                            bool flag50 = false;
                                                                                                                                                                            if (this.position.Y + (float) this.height < Main.player[this.target].position.Y && this.position.X + (float) this.width > Main.player[this.target].position.X && this.position.X < Main.player[this.target].position.X + (float) Main.player[this.target].width)
                                                                                                                                                                            {
                                                                                                                                                                                flag50 = true;
                                                                                                                                                                                this.velocity.X = this.velocity.X*0.92f;
                                                                                                                                                                                if (this.velocity.Y < 0f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                                                    this.velocity.Y = this.velocity.Y + 0.1f;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                            if (!flag50 && ((this.direction == 1 && this.velocity.X < 4f) || (this.direction == -1 && this.velocity.X > -4f)))
                                                                                                                                                                            {
                                                                                                                                                                                if ((this.direction == -1 && (double) this.velocity.X < 0.1) || (this.direction == 1 && (double) this.velocity.X > -0.1))
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.X = this.velocity.X + 0.2f*(float) this.direction;
                                                                                                                                                                                    return;
                                                                                                                                                                                }
                                                                                                                                                                                this.velocity.X = this.velocity.X*0.93f;
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            if ((this.direction == 1 && this.velocity.X < 3f) || (this.direction == -1 && this.velocity.X > -3f))
                                                                                                                                                                            {
                                                                                                                                                                                if ((this.direction == -1 && (double) this.velocity.X < 0.1) || (this.direction == 1 && (double) this.velocity.X > -0.1))
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.X = this.velocity.X + 0.2f*(float) this.direction;
                                                                                                                                                                                    return;
                                                                                                                                                                                }
                                                                                                                                                                                this.velocity.X = this.velocity.X*0.93f;
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    if (this.aiStyle == 42)
                                                                                                                                                                    {
                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                        if (this.ai[0] == 0f)
                                                                                                                                                                        {
                                                                                                                                                                            if (this.target >= 0)
                                                                                                                                                                            {
                                                                                                                                                                                Vector2 vector80 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                                float num671 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector80.X;
                                                                                                                                                                                float num672 = Main.player[this.target].position.Y - vector80.Y;
                                                                                                                                                                                float num673 = (float) Math.Sqrt((double) (num671*num671 + num672*num672));
                                                                                                                                                                                if (num673 < 200f && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                                                                {
                                                                                                                                                                                    this.ai[0] = 1f;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                            if (this.velocity.X != 0f || this.velocity.Y < 0f || this.velocity.Y > 2f || this.life != this.lifeMax)
                                                                                                                                                                            {
                                                                                                                                                                                this.ai[0] = 1f;
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            this.ai[0] += 1f;
                                                                                                                                                                            if (this.ai[0] >= 21f)
                                                                                                                                                                            {
                                                                                                                                                                                this.ai[0] = 21f;
                                                                                                                                                                                this.Transform(196);
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        if (this.aiStyle == 43)
                                                                                                                                                                        {
                                                                                                                                                                            if (this.target == -1 || Main.player[this.target].dead || !Main.player[this.target].active)
                                                                                                                                                                            {
                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                            }
                                                                                                                                                                            if (this.ai[0] == -1f && Main.netMode != 1)
                                                                                                                                                                            {
                                                                                                                                                                                float num674 = this.ai[1];
                                                                                                                                                                                int num675;
                                                                                                                                                                                do
                                                                                                                                                                                {
                                                                                                                                                                                    num675 = Main.rand.Next(3);
                                                                                                                                                                                    if (num675 == 1)
                                                                                                                                                                                    {
                                                                                                                                                                                        num675 = 2;
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (num675 == 2)
                                                                                                                                                                                        {
                                                                                                                                                                                            num675 = 3;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                } while ((float) num675 == num674);
                                                                                                                                                                                this.ai[0] = (float) num675;
                                                                                                                                                                                this.ai[1] = 0f;
                                                                                                                                                                                this.ai[2] = 0f;
                                                                                                                                                                            }
                                                                                                                                                                            if (this.ai[0] == 0f)
                                                                                                                                                                            {
                                                                                                                                                                                if (this.ai[1] > 4f && this.ai[1]%2f == 0f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.ai[0] = -1f;
                                                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                                                    this.ai[2] = 0f;
                                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                                }
                                                                                                                                                                                else
                                                                                                                                                                                {
                                                                                                                                                                                    if (this.ai[1]%2f == 0f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                        if (Math.Abs(this.position.Y + (float) (this.height/2) - (Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2))) < 20f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.localAI[0] = 1f;
                                                                                                                                                                                            this.ai[1] += 1f;
                                                                                                                                                                                            this.ai[2] = 0f;
                                                                                                                                                                                            float num676 = 12f;
                                                                                                                                                                                            Vector2 vector81 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                                            float num677 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector81.X;
                                                                                                                                                                                            float num678 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector81.Y;
                                                                                                                                                                                            float num679 = (float) Math.Sqrt((double) (num677*num677 + num678*num678));
                                                                                                                                                                                            num679 = num676/num679;
                                                                                                                                                                                            this.velocity.X = num677*num679;
                                                                                                                                                                                            this.velocity.Y = num678*num679;
                                                                                                                                                                                            this.spriteDirection = this.direction;
                                                                                                                                                                                            Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            this.localAI[0] = 0f;
                                                                                                                                                                                            if (this.position.Y + (float) (this.height/2) < Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2))
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.Y = this.velocity.Y + 0.15f;
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.Y = this.velocity.Y - 0.15f;
                                                                                                                                                                                            }
                                                                                                                                                                                            if (this.velocity.Y < -12f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.Y = -12f;
                                                                                                                                                                                            }
                                                                                                                                                                                            if (this.velocity.Y > 12f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.Y = 12f;
                                                                                                                                                                                            }
                                                                                                                                                                                            if (Math.Abs(this.position.X + (float) (this.width/2) - (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))) > 600f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = this.velocity.X + 0.15f*(float) this.direction;
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                                if (Math.Abs(this.position.X + (float) (this.width/2) - (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))) < 300f)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.velocity.X = this.velocity.X - 0.15f*(float) this.direction;
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.velocity.X = this.velocity.X*0.8f;
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                            if (this.velocity.X < -16f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = -16f;
                                                                                                                                                                                            }
                                                                                                                                                                                            if (this.velocity.X > 16f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = 16f;
                                                                                                                                                                                            }
                                                                                                                                                                                            this.spriteDirection = this.direction;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.velocity.X < 0f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.direction = -1;
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            this.direction = 1;
                                                                                                                                                                                        }
                                                                                                                                                                                        this.spriteDirection = this.direction;
                                                                                                                                                                                        int num680 = 1;
                                                                                                                                                                                        if (this.position.X + (float) (this.width/2) < Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))
                                                                                                                                                                                        {
                                                                                                                                                                                            num680 = -1;
                                                                                                                                                                                        }
                                                                                                                                                                                        if (this.direction == num680 && Math.Abs(this.position.X + (float) (this.width/2) - (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2))) > 600f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.ai[2] = 1f;
                                                                                                                                                                                        }
                                                                                                                                                                                        if (this.ai[2] == 1f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.TargetClosest(true);
                                                                                                                                                                                            this.spriteDirection = this.direction;
                                                                                                                                                                                            this.localAI[0] = 0f;
                                                                                                                                                                                            this.velocity *= 0.9f;
                                                                                                                                                                                            if ((double) (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y)) < 0.1)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.ai[2] = 0f;
                                                                                                                                                                                                this.ai[1] += 1f;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            this.localAI[0] = 1f;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                            if (this.ai[0] == 2f)
                                                                                                                                                                            {
                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                this.spriteDirection = this.direction;
                                                                                                                                                                                float num681 = 12f;
                                                                                                                                                                                float num682 = 0.07f;
                                                                                                                                                                                Vector2 vector82 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                                float num683 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector82.X;
                                                                                                                                                                                float num684 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - 200f - vector82.Y;
                                                                                                                                                                                float num685 = (float) Math.Sqrt((double) (num683*num683 + num684*num684));
                                                                                                                                                                                if (num685 < 200f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.ai[0] = 1f;
                                                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                                }
                                                                                                                                                                                else
                                                                                                                                                                                {
                                                                                                                                                                                    num685 = num681/num685;
                                                                                                                                                                                    if (this.velocity.X < num683)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = this.velocity.X + num682;
                                                                                                                                                                                        if (this.velocity.X < 0f && num683 > 0f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X + num682;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.velocity.X > num683)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X - num682;
                                                                                                                                                                                            if (this.velocity.X > 0f && num683 < 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = this.velocity.X - num682;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    if (this.velocity.Y < num684)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.Y = this.velocity.Y + num682;
                                                                                                                                                                                        if (this.velocity.Y < 0f && num684 > 0f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.Y = this.velocity.Y + num682;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.velocity.Y > num684)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.Y = this.velocity.Y - num682;
                                                                                                                                                                                            if (this.velocity.Y > 0f && num684 < 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.Y = this.velocity.Y - num682;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                            if (this.ai[0] == 1f)
                                                                                                                                                                            {
                                                                                                                                                                                this.localAI[0] = 0f;
                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                Vector2 vector83 = new Vector2(this.position.X + (float) (this.width/2) + (float) (Main.rand.Next(20)*this.direction), this.position.Y + (float) this.height*0.8f);
                                                                                                                                                                                Vector2 vector84 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                                float num686 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector84.X;
                                                                                                                                                                                float num687 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector84.Y;
                                                                                                                                                                                float num688 = (float) Math.Sqrt((double) (num686*num686 + num687*num687));
                                                                                                                                                                                if (Collision.CanHit(vector83, 1, 1, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                                                                {
                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                    if (this.ai[1] > 40f - (Main.bossLevel * 4))
                                                                                                                                                                                    {
                                                                                                                                                                                        this.ai[1] = 0f;
                                                                                                                                                                                        this.ai[2] += 1f;
                                                                                                                                                                                        Main.PlaySound(3, (int) this.position.X, (int) this.position.Y, 1);
                                                                                                                                                                                        if (Main.netMode != 1)
                                                                                                                                                                                        {
                                                                                                                                                                                            int num689 = Main.rand.Next(210, 212);
                                                                                                                                                                                            int num690 = NPC.NewNPC((int) vector83.X, (int) vector83.Y, num689, 0);
                                                                                                                                                                                            Main.npc[num690].velocity.X = (float) Main.rand.Next(-200, 201)*0.002f;
                                                                                                                                                                                            Main.npc[num690].velocity.Y = (float) Main.rand.Next(-200, 201)*0.002f;
                                                                                                                                                                                            Main.npc[num690].localAI[0] = 60f;
                                                                                                                                                                                            Main.npc[num690].netUpdate = true;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                if (num688 > 400f || !Collision.CanHit(new Vector2(vector83.X, vector83.Y - 30f), 1, 1, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                                                                {
                                                                                                                                                                                    float num691 = 14f;
                                                                                                                                                                                    float num692 = 0.1f;
                                                                                                                                                                                    vector84 = vector83;
                                                                                                                                                                                    num686 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector84.X;
                                                                                                                                                                                    num687 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector84.Y;
                                                                                                                                                                                    num688 = (float) Math.Sqrt((double) (num686*num686 + num687*num687));
                                                                                                                                                                                    num688 = num691/num688;
                                                                                                                                                                                    if (this.velocity.X < num686)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = this.velocity.X + num692;
                                                                                                                                                                                        if (this.velocity.X < 0f && num686 > 0f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X + num692;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.velocity.X > num686)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X - num692;
                                                                                                                                                                                            if (this.velocity.X > 0f && num686 < 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = this.velocity.X - num692;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    if (this.velocity.Y < num687)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.Y = this.velocity.Y + num692;
                                                                                                                                                                                        if (this.velocity.Y < 0f && num687 > 0f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.Y = this.velocity.Y + num692;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.velocity.Y > num687)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.Y = this.velocity.Y - num692;
                                                                                                                                                                                            if (this.velocity.Y > 0f && num687 < 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.Y = this.velocity.Y - num692;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                else
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity *= 0.9f;
                                                                                                                                                                                }
                                                                                                                                                                                this.spriteDirection = this.direction;
                                                                                                                                                                                if (this.ai[2] > 5f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.ai[0] = -1f;
                                                                                                                                                                                    this.ai[1] = 1f;
                                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                            if (this.ai[0] == 3f)
                                                                                                                                                                            {
                                                                                                                                                                                float num693 = 4f;
                                                                                                                                                                                float num694 = 0.05f;
                                                                                                                                                                                Vector2 vector85 = new Vector2(this.position.X + (float) (this.width/2) + (float) (Main.rand.Next(20)*this.direction), this.position.Y + (float) this.height*0.8f);
                                                                                                                                                                                Vector2 vector86 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                                float num695 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector86.X;
                                                                                                                                                                                float num696 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - 300f - vector86.Y;
                                                                                                                                                                                float num697 = (float) Math.Sqrt((double) (num695*num695 + num696*num696));
                                                                                                                                                                                this.ai[1] += 1f;
                                                                                                                                                                                if (this.ai[1]%40f == 39f && this.position.Y + (float) this.height < Main.player[this.target].position.Y && Collision.CanHit(vector85, 1, 1, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                                                                {
                                                                                                                                                                                    Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 17);
                                                                                                                                                                                    if (Main.netMode != 1)
                                                                                                                                                                                    {
                                                                                                                                                                                        float num698 = 8f;
                                                                                                                                                                                        float num699 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector85.X + (float) Main.rand.Next(-80, 81);
                                                                                                                                                                                        float num700 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector85.Y + (float) Main.rand.Next(-40, 41);
                                                                                                                                                                                        float num701 = (float) Math.Sqrt((double) (num699*num699 + num700*num700));
                                                                                                                                                                                        num701 = num698/num701;
                                                                                                                                                                                        num699 *= num701;
                                                                                                                                                                                        num700 *= num701;
                                                                                                                                                                                        int num702 = 20 + (Main.bossLevel * 5);
                                                                                                                                                                                        int num703 = 55;
                                                                                                                                                                                        int num704 = Projectile.NewProjectile(vector85.X, vector85.Y, num699, num700, num703, num702, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                                        Main.projectile[num704].timeLeft = 300;
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                if (!Collision.CanHit(new Vector2(vector85.X, vector85.Y - 30f), 1, 1, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                                                                {
                                                                                                                                                                                    num693 = 14f;
                                                                                                                                                                                    num694 = 0.1f;
                                                                                                                                                                                    vector86 = vector85;
                                                                                                                                                                                    num695 = Main.player[this.target].position.X + (float) (Main.player[this.target].width/2) - vector86.X;
                                                                                                                                                                                    num696 = Main.player[this.target].position.Y + (float) (Main.player[this.target].height/2) - vector86.Y;
                                                                                                                                                                                    num697 = (float) Math.Sqrt((double) (num695*num695 + num696*num696));
                                                                                                                                                                                    num697 = num693/num697;
                                                                                                                                                                                    if (this.velocity.X < num695)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = this.velocity.X + num694;
                                                                                                                                                                                        if (this.velocity.X < 0f && num695 > 0f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X + num694;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.velocity.X > num695)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X - num694;
                                                                                                                                                                                            if (this.velocity.X > 0f && num695 < 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = this.velocity.X - num694;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    if (this.velocity.Y < num696)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.Y = this.velocity.Y + num694;
                                                                                                                                                                                        if (this.velocity.Y < 0f && num696 > 0f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.Y = this.velocity.Y + num694;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.velocity.Y > num696)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.Y = this.velocity.Y - num694;
                                                                                                                                                                                            if (this.velocity.Y > 0f && num696 < 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.Y = this.velocity.Y - num694;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                else
                                                                                                                                                                                {
                                                                                                                                                                                    if (num697 > 100f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                        this.spriteDirection = this.direction;
                                                                                                                                                                                        num697 = num693/num697;
                                                                                                                                                                                        if (this.velocity.X < num695)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X + num694;
                                                                                                                                                                                            if (this.velocity.X < 0f && num695 > 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = this.velocity.X + num694*2f;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            if (this.velocity.X > num695)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = this.velocity.X - num694;
                                                                                                                                                                                                if (this.velocity.X > 0f && num695 < 0f)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.velocity.X = this.velocity.X - num694*2f;
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                        if (this.velocity.Y < num696)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.Y = this.velocity.Y + num694;
                                                                                                                                                                                            if (this.velocity.Y < 0f && num696 > 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.Y = this.velocity.Y + num694*2f;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            if (this.velocity.Y > num696)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.Y = this.velocity.Y - num694;
                                                                                                                                                                                                if (this.velocity.Y > 0f && num696 < 0f)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.velocity.Y = this.velocity.Y - num694*2f;
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                if (this.ai[1] > 800f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.ai[0] = -1f;
                                                                                                                                                                                    this.ai[1] = 3f;
                                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                                    return;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            if (this.aiStyle == 44)
                                                                                                                                                                            {
                                                                                                                                                                                this.noGravity = true;
                                                                                                                                                                                if (this.collideX)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.X = this.oldVelocity.X*-0.5f;
                                                                                                                                                                                    if (this.direction == -1 && this.velocity.X > 0f && this.velocity.X < 2f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = 2f;
                                                                                                                                                                                    }
                                                                                                                                                                                    if (this.direction == 1 && this.velocity.X < 0f && this.velocity.X > -2f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = -2f;
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                if (this.collideY)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = this.oldVelocity.Y*-0.5f;
                                                                                                                                                                                    if (this.velocity.Y > 0f && this.velocity.Y < 1f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.Y = 1f;
                                                                                                                                                                                    }
                                                                                                                                                                                    if (this.velocity.Y < 0f && this.velocity.Y > -1f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.Y = -1f;
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                float num705 = 0.05f;
                                                                                                                                                                                float num706 = 3f;
                                                                                                                                                                                float num707 = Math.Abs(this.position.X + (float) (this.width/2) - (Main.player[this.target].position.X + (float) (Main.player[this.target].width/2)));
                                                                                                                                                                                float num708 = Main.player[this.target].position.Y - (float) (this.height/2);
                                                                                                                                                                                if (num707 > 30f)
                                                                                                                                                                                {
                                                                                                                                                                                    if (this.direction == -1 && this.velocity.X > -num706)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.X = this.velocity.X - num705;
                                                                                                                                                                                        if (this.velocity.X > num706)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X - num705;
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            if (this.velocity.X > 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = this.velocity.X - num705/2f;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                        if (this.velocity.X < -num706)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = -num706;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.direction == 1 && this.velocity.X < num706)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X + num705;
                                                                                                                                                                                            if (this.velocity.X < -num706)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = this.velocity.X + num705;
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                                if (this.velocity.X < 0f)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.velocity.X = this.velocity.X + num705/2f;
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                            if (this.velocity.X > num706)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.velocity.X = num706;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                if (num707 > 100f)
                                                                                                                                                                                {
                                                                                                                                                                                    num708 -= 50f;
                                                                                                                                                                                }
                                                                                                                                                                                if (this.position.Y < num708)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = this.velocity.Y + 0.01f;
                                                                                                                                                                                    if (this.velocity.Y < 0f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.01f;
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                else
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = this.velocity.Y - 0.01f;
                                                                                                                                                                                    if (this.velocity.Y > 0f)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.velocity.Y = this.velocity.Y - 0.01f;
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                if (this.velocity.Y < -1f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = -1f;
                                                                                                                                                                                }
                                                                                                                                                                                if (this.velocity.Y > 1f)
                                                                                                                                                                                {
                                                                                                                                                                                    this.velocity.Y = 1f;
                                                                                                                                                                                    return;
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                            else
                                                                                                                                                                            {
                                                                                                                                                                                if (this.aiStyle == 45)
                                                                                                                                                                                {
                                                                                                                                                                                    NPC.golemBoss = this.whoAmI;
                                                                                                                                                                                    if (this.localAI[0] == 0f && Main.netMode != 1)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.localAI[0] = 1f;
                                                                                                                                                                                        NPC.NewNPC((int) this.center().X - (84*2), (int) this.center().Y - 9, 247, 0);
                                                                                                                                                                                        NPC.NewNPC((int) this.center().X + (78*2), (int) this.center().Y - 9, 248, 0);
                                                                                                                                                                                        NPC.NewNPC((int) this.center().X - (3*2), (int) this.center().Y - 57, 246, 0);
                                                                                                                                                                                    }
                                                                                                                                                                                    if (this.alpha > 0)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.alpha -= 10;
                                                                                                                                                                                        if (this.alpha < 0)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.alpha = 0;
                                                                                                                                                                                        }
                                                                                                                                                                                        this.ai[1] = 0f;
                                                                                                                                                                                    }
                                                                                                                                                                                    bool flag51 = false;
                                                                                                                                                                                    bool flag52 = false;
                                                                                                                                                                                    bool flag53 = false;
                                                                                                                                                                                    this.dontTakeDamage = false;
                                                                                                                                                                                    for (int num709 = 0; num709 < 200; num709
                                                                                                                                                                                        ++)
                                                                                                                                                                                    {
                                                                                                                                                                                        if (Main.npc[num709].active && Main.npc[num709].type == 246)
                                                                                                                                                                                        {
                                                                                                                                                                                            flag51 = true;
                                                                                                                                                                                        }
                                                                                                                                                                                        if (Main.npc[num709].active && Main.npc[num709].type == 247)
                                                                                                                                                                                        {
                                                                                                                                                                                            flag52 = true;
                                                                                                                                                                                        }
                                                                                                                                                                                        if (Main.npc[num709].active && Main.npc[num709].type == 248)
                                                                                                                                                                                        {
                                                                                                                                                                                            flag53 = true;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    this.dontTakeDamage = flag51;
                                                                                                                                                                                    if (!flag52)
                                                                                                                                                                                    {
                                                                                                                                                                                        int num710 = Dust.NewDust(new Vector2(this.center().X - 80f, this.center().Y - 9f), 8, 8, 31, 0f, 0f, 100, default(Color), 1f);
                                                                                                                                                                                        Main.dust[num710].alpha += Main.rand.Next(100);
                                                                                                                                                                                        Main.dust[num710].velocity *= 0.2f;
                                                                                                                                                                                        Dust expr_2AE0F_cp_0 = Main.dust[num710];
                                                                                                                                                                                        expr_2AE0F_cp_0.velocity.Y = expr_2AE0F_cp_0.velocity.Y - (0.5f + (float) Main.rand.Next(10)*0.1f);
                                                                                                                                                                                        Main.dust[num710].fadeIn = 0.5f + (float) Main.rand.Next(10)*0.1f;
                                                                                                                                                                                        if (Main.rand.Next(10) == 0)
                                                                                                                                                                                        {
                                                                                                                                                                                            num710 = Dust.NewDust(new Vector2(this.center().X - 80f, this.center().Y - 9f), 8, 8, 6, 0f, 0f, 0, default(Color), 1f);
                                                                                                                                                                                            if (Main.rand.Next(20) != 0)
                                                                                                                                                                                            {
                                                                                                                                                                                                Main.dust[num710].noGravity = true;
                                                                                                                                                                                                Main.dust[num710].scale *= 1f + (float) Main.rand.Next(10)*0.1f;
                                                                                                                                                                                                Dust expr_2AF1A_cp_0 = Main.dust[num710];
                                                                                                                                                                                                expr_2AF1A_cp_0.velocity.Y = expr_2AF1A_cp_0.velocity.Y - 1f;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    if (!flag53)
                                                                                                                                                                                    {
                                                                                                                                                                                        int num711 = Dust.NewDust(new Vector2(this.center().X + 62f, this.center().Y - 9f), 8, 8, 31, 0f, 0f, 100, default(Color), 1f);
                                                                                                                                                                                        Main.dust[num711].alpha += Main.rand.Next(100);
                                                                                                                                                                                        Main.dust[num711].velocity *= 0.2f;
                                                                                                                                                                                        Dust expr_2AFD7_cp_0 = Main.dust[num711];
                                                                                                                                                                                        expr_2AFD7_cp_0.velocity.Y = expr_2AFD7_cp_0.velocity.Y - (0.5f + (float) Main.rand.Next(10)*0.1f);
                                                                                                                                                                                        Main.dust[num711].fadeIn = 0.5f + (float) Main.rand.Next(10)*0.1f;
                                                                                                                                                                                        if (Main.rand.Next(10) == 0)
                                                                                                                                                                                        {
                                                                                                                                                                                            num711 = Dust.NewDust(new Vector2(this.center().X + 62f, this.center().Y - 9f), 8, 8, 6, 0f, 0f, 0, default(Color), 1f);
                                                                                                                                                                                            if (Main.rand.Next(20) != 0)
                                                                                                                                                                                            {
                                                                                                                                                                                                Main.dust[num711].noGravity = true;
                                                                                                                                                                                                Main.dust[num711].scale *= 1f + (float) Main.rand.Next(10)*0.1f;
                                                                                                                                                                                                Dust expr_2B0E2_cp_0 = Main.dust[num711];
                                                                                                                                                                                                expr_2B0E2_cp_0.velocity.Y = expr_2B0E2_cp_0.velocity.Y - 1f;
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    if (this.ai[0] == 0f)
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.velocity.Y == 0f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.velocity.X = this.velocity.X*0.8f;
                                                                                                                                                                                            this.ai[1] += 1f;
                                                                                                                                                                                            if (this.ai[1] > 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                if (!flag52)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 2f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (!flag53)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 2f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (!flag51)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 4f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.life < this.lifeMax)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 2f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.life < this.lifeMax/2)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 4f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.life < this.lifeMax/3)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 8f;
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                            if (this.ai[1] >= 300f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.ai[1] = -20f;
                                                                                                                                                                                                this.frameCounter = 0.0;
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                                if (this.ai[1] == -1f)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                                                                    this.velocity.X = (float) (4*this.direction);
                                                                                                                                                                                                    this.velocity.Y = -12.1f;
                                                                                                                                                                                                    this.ai[0] = 1f;
                                                                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.ai[0] == 1f)
                                                                                                                                                                                        {
                                                                                                                                                                                            if (this.velocity.Y == 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 14);
                                                                                                                                                                                                this.ai[0] = 0f;
                                                                                                                                                                                                for (int num712 = (int) this.position.X - 20; num712 < (int) this.position.X + this.width + 40; num712 += 20)
                                                                                                                                                                                                {
                                                                                                                                                                                                    for (int num713 = 0; num713 < 4; num713
                                                                                                                                                                                                        ++)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        int num714 = Dust.NewDust(new Vector2(this.position.X - 20f, this.position.Y + (float) this.height), this.width + 20, 4, 31, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                                                                                        Main.dust[num714].velocity *= 0.2f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    int num715 = Gore.NewGore(new Vector2((float) (num712 - 20), this.position.Y + (float) this.height - 8f), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                    Main.gore[num715].velocity *= 0.4f;
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                                if (this.position.X < Main.player[this.target].position.X && this.position.X + (float) this.width > Main.player[this.target].position.X + (float) Main.player[this.target].width)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                                                                    this.velocity.Y = this.velocity.Y + 0.2f;
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    if (this.direction < 0)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.velocity.X = this.velocity.X - 0.2f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    else
                                                                                                                                                                                                    {
                                                                                                                                                                                                        if (this.direction > 0)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.X = this.velocity.X + 0.2f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                    float num716 = 3f;
                                                                                                                                                                                                    if (this.life < this.lifeMax)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        num716 += 1f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.life < this.lifeMax/2)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        num716 += 1f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.life < this.lifeMax/4)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        num716 += 1f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.velocity.X < -num716)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.velocity.X = -num716;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.velocity.X > num716)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.velocity.X = num716;
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                    if (this.target <= 0 || this.target == 255 || Main.player[this.target].dead)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                    }
                                                                                                                                                                                    int num717 = 3000;
                                                                                                                                                                                    if (Math.Abs(this.center().X - Main.player[this.target].center().X) + Math.Abs(this.center().Y - Main.player[this.target].center().Y) > (float) num717)
                                                                                                                                                                                    {
                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                        if (Math.Abs(this.center().X - Main.player[this.target].center().X) + Math.Abs(this.center().Y - Main.player[this.target].center().Y) > (float) num717)
                                                                                                                                                                                        {
                                                                                                                                                                                            //this.active = false;
                                                                                                                                                                                            //return;
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                                else
                                                                                                                                                                                {
                                                                                                                                                                                    if (this.aiStyle == 46)
                                                                                                                                                                                    {
                                                                                                                                                                                        if (NPC.golemBoss < 0 || !Main.npc[NPC.golemBoss].active)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.StrikeNPC(9999, 0f, 0, false, false);
                                                                                                                                                                                            return;
                                                                                                                                                                                        }
                                                                                                                                                                                        this.noTileCollide = false;
                                                                                                                                                                                        float num718 = 12f;
                                                                                                                                                                                        Vector2 vector87 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                        float num719 = Main.npc[NPC.golemBoss].center().X - vector87.X;
                                                                                                                                                                                        float num720 = Main.npc[NPC.golemBoss].center().Y - vector87.Y;
                                                                                                                                                                                        num720 -= 57f;
                                                                                                                                                                                        num719 -= 3f;
                                                                                                                                                                                        float num721 = (float) Math.Sqrt((double) (num719*num719 + num720*num720));
                                                                                                                                                                                        if (num721 < 20f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.rotation = 0f;
                                                                                                                                                                                            this.velocity.X = num719;
                                                                                                                                                                                            this.velocity.Y = num720;
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            num721 = num718/num721;
                                                                                                                                                                                            this.velocity.X = num719*num721;
                                                                                                                                                                                            this.velocity.Y = num720*num721;
                                                                                                                                                                                            this.rotation = this.velocity.X*0.1f;
                                                                                                                                                                                        }
                                                                                                                                                                                        if (this.alpha > 0)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.alpha -= 10;
                                                                                                                                                                                            if (this.alpha < 0)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.alpha = 0;
                                                                                                                                                                                            }
                                                                                                                                                                                            this.ai[1] = 30f;
                                                                                                                                                                                        }
                                                                                                                                                                                        if (this.ai[0] == 0f)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.ai[1] += 1f;
                                                                                                                                                                                            int num722 = 300;
                                                                                                                                                                                            if (this.ai[1] < 20f || this.ai[1] > (float) (num722 - 20))
                                                                                                                                                                                            {
                                                                                                                                                                                                this.localAI[0] = 1f;
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                                this.localAI[0] = 0f;
                                                                                                                                                                                            }
                                                                                                                                                                                            if (this.ai[1] >= (float) num722)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                                this.ai[1] = 0f;
                                                                                                                                                                                                Vector2 vector88 = new Vector2(this.center().X, this.center().Y + 10f);
                                                                                                                                                                                                float num723 = 8f;
                                                                                                                                                                                                float num724 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector88.X;
                                                                                                                                                                                                float num725 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector88.Y;
                                                                                                                                                                                                float num726 = (float) Math.Sqrt((double) (num724*num724 + num725*num725));
                                                                                                                                                                                                num726 = num723/num726;
                                                                                                                                                                                                num724 *= num726;
                                                                                                                                                                                                num725 *= num726;
                                                                                                                                                                                                int num727 = 20 + (Main.bossLevel * 5);
                                                                                                                                                                                                int num728 = 258;
                                                                                                                                                                                                if (Main.netMode != 1)
                                                                                                                                                                                                {
                                                                                                                                                                                                    Projectile.NewProjectile(vector88.X, vector88.Y, num724, num725, num728, num727, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            if (this.ai[0] == 1f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                                Vector2 vector89 = new Vector2(this.center().X, this.center().Y + 10f);
                                                                                                                                                                                                if (Main.player[this.target].center().X < this.center().X - (float) this.width)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.localAI[1] = -1f;
                                                                                                                                                                                                    vector89.X -= 40f;
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    if (Main.player[this.target].center().X > this.center().X + (float) this.width)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.localAI[1] = 1f;
                                                                                                                                                                                                        vector89.X += 40f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    else
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.localAI[1] = 0f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                this.ai[1] += 1f;
                                                                                                                                                                                                if ((double) this.life < (double) this.lifeMax*0.4)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if ((double) this.life < (double) this.lifeMax*0.3)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if ((double) this.life < (double) this.lifeMax*0.2)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if ((double) this.life < (double) this.lifeMax*0.1)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                int num729 = 300;
                                                                                                                                                                                                if (this.ai[1] < 20f || this.ai[1] > (float) (num729 - 20))
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.localAI[0] = 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.localAI[0] = 0f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.ai[1] >= (float) num729)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                                                                    float num730 = 8f;
                                                                                                                                                                                                    float num731 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector89.X;
                                                                                                                                                                                                    float num732 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector89.Y;
                                                                                                                                                                                                    float num733 = (float) Math.Sqrt((double) (num731*num731 + num732*num732));
                                                                                                                                                                                                    num733 = num730/num733;
                                                                                                                                                                                                    num731 *= num733;
                                                                                                                                                                                                    num732 *= num733;
                                                                                                                                                                                                    int num734 = 20 + (Main.bossLevel * 5);
                                                                                                                                                                                                    int num735 = 258;
                                                                                                                                                                                                    if (Main.netMode != 1)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        Projectile.NewProjectile(vector89.X, vector89.Y, num731, num732, num735, num734, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                this.ai[2] += 1f;
                                                                                                                                                                                                if (this.life < this.lifeMax/3)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.life < this.lifeMax/4)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.life < this.lifeMax/5)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.ai[2] > (float) (60 + Main.rand.Next(600)))
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[2] = 0f;
                                                                                                                                                                                                    if (this.localAI[1] != 0f)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        vector89 = new Vector2(this.center().X, this.center().Y - 22f);
                                                                                                                                                                                                        if (this.localAI[1] == -1f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            vector89.X -= 30f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (this.localAI[1] == 1f)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                vector89.X += 30f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        float num736 = 12f;
                                                                                                                                                                                                        float num737 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector89.X;
                                                                                                                                                                                                        float num738 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector89.Y;
                                                                                                                                                                                                        float num739 = (float) Math.Sqrt((double) (num737*num737 + num738*num738));
                                                                                                                                                                                                        num739 = num736/num739;
                                                                                                                                                                                                        num737 *= num739;
                                                                                                                                                                                                        num738 *= num739;
                                                                                                                                                                                                        int num740 = 20 + (Main.bossLevel * 5);
                                                                                                                                                                                                        int num741 = 259;
                                                                                                                                                                                                        vector89.X += num737*3f;
                                                                                                                                                                                                        vector89.Y += num738*3f;
                                                                                                                                                                                                        if (Main.netMode != 1)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            int num742 = Projectile.NewProjectile(vector89.X, vector89.Y, num737, num738, num741, num740, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                                                            Main.projectile[num742].timeLeft = 300;
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                        if (this.life < this.lifeMax/2)
                                                                                                                                                                                        {
                                                                                                                                                                                            this.ai[0] = 1f;
                                                                                                                                                                                            return;
                                                                                                                                                                                        }
                                                                                                                                                                                        this.ai[0] = 0f;
                                                                                                                                                                                        return;
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.aiStyle == 47)
                                                                                                                                                                                        {
                                                                                                                                                                                            if (NPC.golemBoss < 0 || !Main.npc[NPC.golemBoss].active)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.StrikeNPC(9999, 0f, 0, false, false);
                                                                                                                                                                                                return;
                                                                                                                                                                                            }
                                                                                                                                                                                            if (this.alpha > 0)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.alpha -= 10;
                                                                                                                                                                                                if (this.alpha < 0)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.alpha = 0;
                                                                                                                                                                                                }
                                                                                                                                                                                                this.ai[1] = 0f;
                                                                                                                                                                                            }
                                                                                                                                                                                            if (this.ai[0] == 0f)
                                                                                                                                                                                            {
                                                                                                                                                                                                this.noTileCollide = true;
                                                                                                                                                                                                float num743 = 8f;
                                                                                                                                                                                                if (this.life < this.lifeMax/2)
                                                                                                                                                                                                {
                                                                                                                                                                                                    num743 += 2f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.life < this.lifeMax/4)
                                                                                                                                                                                                {
                                                                                                                                                                                                    num743 += 2f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (Main.npc[NPC.golemBoss].life < Main.npc[NPC.golemBoss].lifeMax)
                                                                                                                                                                                                {
                                                                                                                                                                                                    num743 += 8f;
                                                                                                                                                                                                }
                                                                                                                                                                                                Vector2 vector90 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                float num744 = Main.npc[NPC.golemBoss].center().X - vector90.X;
                                                                                                                                                                                                float num745 = Main.npc[NPC.golemBoss].center().Y - vector90.Y;
                                                                                                                                                                                                num745 -= 9f;
                                                                                                                                                                                                if (this.type == 247)
                                                                                                                                                                                                {
                                                                                                                                                                                                    num744 -= 84f;
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    num744 += 78f;
                                                                                                                                                                                                }
                                                                                                                                                                                                float num746 = (float) Math.Sqrt((double) (num744*num744 + num745*num745));
                                                                                                                                                                                                if (num746 < 12f + num743)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.rotation = 0f;
                                                                                                                                                                                                    this.velocity.X = num744;
                                                                                                                                                                                                    this.velocity.Y = num745;
                                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                                    if (this.life < this.lifeMax/2)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.ai[1] += 1f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.life < this.lifeMax/4)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.ai[1] += 1f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (Main.npc[NPC.golemBoss].life < Main.npc[NPC.golemBoss].lifeMax)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.ai[1] += 10f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.ai[1] >= 60f)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                                        if ((this.type == 247 && this.center().X + 100f > Main.player[this.target].center().X) || (this.type == 248 && this.center().X - 100f < Main.player[this.target].center().X))
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.ai[1] = 0f;
                                                                                                                                                                                                            this.ai[0] = 1f;
                                                                                                                                                                                                            return;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        this.ai[1] = 0f;
                                                                                                                                                                                                        return;
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    num746 = num743/num746;
                                                                                                                                                                                                    this.velocity.X = num744*num746;
                                                                                                                                                                                                    this.velocity.Y = num745*num746;
                                                                                                                                                                                                    this.rotation = (float) Math.Atan2((double) (-(double) this.velocity.Y), (double) (-(double) this.velocity.X));
                                                                                                                                                                                                    if (this.type == 247)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X);
                                                                                                                                                                                                        return;
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                                if (this.ai[0] == 1f)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.noTileCollide = false;
                                                                                                                                                                                                    float num747 = 10f;
                                                                                                                                                                                                    if (this.life < this.lifeMax/2)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        num747 += 4f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.life < this.lifeMax/4)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        num747 += 4f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (Main.npc[NPC.golemBoss].life < Main.npc[NPC.golemBoss].lifeMax)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        num747 += 10f;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    Vector2 vector91 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                    float num748 = Main.player[this.target].center().X - vector91.X;
                                                                                                                                                                                                    float num749 = Main.player[this.target].center().Y - vector91.Y;
                                                                                                                                                                                                    float num750 = (float) Math.Sqrt((double) (num748*num748 + num749*num749));
                                                                                                                                                                                                    num750 = num747/num750;
                                                                                                                                                                                                    this.velocity.X = num748*num750;
                                                                                                                                                                                                    this.velocity.Y = num749*num750;
                                                                                                                                                                                                    this.ai[0] = 2f;
                                                                                                                                                                                                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X);
                                                                                                                                                                                                    if (this.type == 247)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.rotation = (float) Math.Atan2((double) (-(double) this.velocity.Y), (double) (-(double) this.velocity.X));
                                                                                                                                                                                                        return;
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    if (this.ai[0] == 2f)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        Vector2 vector92 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                        float num751 = Main.npc[NPC.golemBoss].center().X - vector92.X;
                                                                                                                                                                                                        float num752 = Main.npc[NPC.golemBoss].center().Y - vector92.Y;
                                                                                                                                                                                                        num751 += Main.npc[NPC.golemBoss].velocity.X;
                                                                                                                                                                                                        num752 += Main.npc[NPC.golemBoss].velocity.Y;
                                                                                                                                                                                                        num752 -= 9f;
                                                                                                                                                                                                        if (this.type == 247)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            num751 -= 84f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            num751 += 78f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        float num753 = (float) Math.Sqrt((double) (num751*num751 + num752*num752));
                                                                                                                                                                                                        if (Main.npc[NPC.golemBoss].life < Main.npc[NPC.golemBoss].lifeMax)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.knockBackResist = 0f;
                                                                                                                                                                                                            if (num753 > 700f || this.collideX || this.collideY)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.noTileCollide = true;
                                                                                                                                                                                                                this.ai[0] = 0f;
                                                                                                                                                                                                                return;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (num753 > 600f || this.collideX || this.collideY || this.justHit)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.noTileCollide = true;
                                                                                                                                                                                                                this.ai[0] = 0f;
                                                                                                                                                                                                                return;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                    else
                                                                                                                                                                                                    {
                                                                                                                                                                                                        if (this.ai[0] == 3f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.noTileCollide = true;
                                                                                                                                                                                                            float num754 = 12f;
                                                                                                                                                                                                            float num755 = 0.4f;
                                                                                                                                                                                                            Vector2 vector93 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                            float num756 = Main.player[this.target].center().X - vector93.X;
                                                                                                                                                                                                            float num757 = Main.player[this.target].center().Y - vector93.Y;
                                                                                                                                                                                                            float num758 = (float) Math.Sqrt((double) (num756*num756 + num757*num757));
                                                                                                                                                                                                            num758 = num754/num758;
                                                                                                                                                                                                            num756 *= num758;
                                                                                                                                                                                                            num757 *= num758;
                                                                                                                                                                                                            if (this.velocity.X < num756)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.velocity.X = this.velocity.X + num755;
                                                                                                                                                                                                                if (this.velocity.X < 0f && num756 > 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.X = this.velocity.X + num755*2f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                            else
                                                                                                                                                                                                            {
                                                                                                                                                                                                                if (this.velocity.X > num756)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.X = this.velocity.X - num755;
                                                                                                                                                                                                                    if (this.velocity.X > 0f && num756 < 0f)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.velocity.X = this.velocity.X - num755*2f;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                            if (this.velocity.Y < num757)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.velocity.Y = this.velocity.Y + num755;
                                                                                                                                                                                                                if (this.velocity.Y < 0f && num757 > 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.Y = this.velocity.Y + num755*2f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                            else
                                                                                                                                                                                                            {
                                                                                                                                                                                                                if (this.velocity.Y > num757)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.Y = this.velocity.Y - num755;
                                                                                                                                                                                                                    if (this.velocity.Y > 0f && num757 < 0f)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.velocity.Y = this.velocity.Y - num755*2f;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                            this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X);
                                                                                                                                                                                                            if (this.type == 247)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.rotation = (float) Math.Atan2((double) (-(double) this.velocity.Y), (double) (-(double) this.velocity.X));
                                                                                                                                                                                                                return;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            if (this.aiStyle == 48)
                                                                                                                                                                                            {
                                                                                                                                                                                                if (NPC.golemBoss < 0 || !Main.npc[NPC.golemBoss].active)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.StrikeNPC(9999, 0f, 0, false, false);
                                                                                                                                                                                                    return;
                                                                                                                                                                                                }
                                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                                float num759 = 7f;
                                                                                                                                                                                                float num760 = 0.05f;
                                                                                                                                                                                                Vector2 vector94 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                float num761 = Main.player[this.target].center().X - vector94.X;
                                                                                                                                                                                                float num762 = Main.player[this.target].center().Y - vector94.Y - 300f;
                                                                                                                                                                                                float num763 = (float) Math.Sqrt((double) (num761*num761 + num762*num762));
                                                                                                                                                                                                num763 = num759/num763;
                                                                                                                                                                                                num761 *= num763;
                                                                                                                                                                                                num762 *= num763;
                                                                                                                                                                                                if (this.velocity.X < num761)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.velocity.X = this.velocity.X + num760;
                                                                                                                                                                                                    if (this.velocity.X < 0f && num761 > 0f)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.velocity.X = this.velocity.X + num760;
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    if (this.velocity.X > num761)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.velocity.X = this.velocity.X - num760;
                                                                                                                                                                                                        if (this.velocity.X > 0f && num761 < 0f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.X = this.velocity.X - num760;
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.velocity.Y < num762)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.velocity.Y = this.velocity.Y + num760;
                                                                                                                                                                                                    if (this.velocity.Y < 0f && num762 > 0f)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.velocity.Y = this.velocity.Y + num760;
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    if (this.velocity.Y > num762)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.velocity.Y = this.velocity.Y - num760;
                                                                                                                                                                                                        if (this.velocity.Y > 0f && num762 < 0f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.Y = this.velocity.Y - num760;
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                this.ai[1] += 1f;
                                                                                                                                                                                                if ((double) Main.npc[NPC.golemBoss].life < (double) Main.npc[NPC.golemBoss].lifeMax*0.8)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if ((double) Main.npc[NPC.golemBoss].life < (double) Main.npc[NPC.golemBoss].lifeMax*0.6)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if ((double) Main.npc[NPC.golemBoss].life < (double) Main.npc[NPC.golemBoss].lifeMax*0.4)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if ((double) Main.npc[NPC.golemBoss].life < (double) Main.npc[NPC.golemBoss].lifeMax*0.2)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[1] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                int num764 = 300;
                                                                                                                                                                                                if (this.ai[1] < 20f || this.ai[1] > (float) (num764 - 20))
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.localAI[0] = 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.localAI[0] = 0f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.ai[1] >= (float) num764)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                                                                    this.ai[1] = 0f;
                                                                                                                                                                                                    Vector2 vector95 = new Vector2(this.center().X, this.center().Y - 10f);
                                                                                                                                                                                                    float num765 = 8f;
                                                                                                                                                                                                    float num766 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector95.X;
                                                                                                                                                                                                    float num767 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector95.Y;
                                                                                                                                                                                                    float num768 = (float) Math.Sqrt((double) (num766*num766 + num767*num767));
                                                                                                                                                                                                    num768 = num765/num768;
                                                                                                                                                                                                    num766 *= num768;
                                                                                                                                                                                                    num767 *= num768;
                                                                                                                                                                                                    int num769 = 17;
                                                                                                                                                                                                    int num770 = 258;
                                                                                                                                                                                                    if (Main.netMode != 1)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        Projectile.NewProjectile(vector95.X, vector95.Y, num766, num767, num770, num769, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                if (Main.npc[NPC.golemBoss].life < Main.npc[NPC.golemBoss].lifeMax/2)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (Main.npc[NPC.golemBoss].life < Main.npc[NPC.golemBoss].lifeMax/3)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (Main.npc[NPC.golemBoss].life < Main.npc[NPC.golemBoss].lifeMax/4)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (Main.npc[NPC.golemBoss].life < Main.npc[NPC.golemBoss].lifeMax/5)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[2] += 1f;
                                                                                                                                                                                                }
                                                                                                                                                                                                if (this.ai[2] > (float) (80 + Main.rand.Next(1200)))
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.ai[2] = 0f;
                                                                                                                                                                                                    for (int num771 = 0; num771 < 2; num771
                                                                                                                                                                                                        ++)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        Vector2 vector96 = new Vector2(this.center().X, this.center().Y - 50f);
                                                                                                                                                                                                        if (num771 == 0)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            vector96.X -= 14f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (num771 == 1)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                vector96.X += 14f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        float num772 = 12f;
                                                                                                                                                                                                        float num773 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector96.X;
                                                                                                                                                                                                        float num774 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector96.Y;
                                                                                                                                                                                                        float num775 = (float) Math.Sqrt((double) (num773*num773 + num774*num774));
                                                                                                                                                                                                        num775 = num772/num775;
                                                                                                                                                                                                        num773 *= num775;
                                                                                                                                                                                                        num774 *= num775;
                                                                                                                                                                                                        int num776 = 22;
                                                                                                                                                                                                        int num777 = 259;
                                                                                                                                                                                                        vector96.X += num773*3f;
                                                                                                                                                                                                        vector96.Y += num774*3f;
                                                                                                                                                                                                        if (Main.netMode != 1)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            int num778 = Projectile.NewProjectile(vector96.X, vector96.Y, num773, num774, num777, num776, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                                                            Main.projectile[num778].timeLeft = 300;
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                    return;
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                                if (this.aiStyle == 49)
                                                                                                                                                                                                {
                                                                                                                                                                                                    this.noGravity = true;
                                                                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                                                                    float num779 = 4f;
                                                                                                                                                                                                    float num780 = 0.25f;
                                                                                                                                                                                                    Vector2 vector97 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                    float num781 = Main.player[this.target].center().X - vector97.X;
                                                                                                                                                                                                    float num782 = Main.player[this.target].center().Y - vector97.Y - 200f;
                                                                                                                                                                                                    float num783 = (float) Math.Sqrt((double) (num781*num781 + num782*num782));
                                                                                                                                                                                                    if (num783 < 20f)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        num781 = this.velocity.X;
                                                                                                                                                                                                        num782 = this.velocity.Y;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    else
                                                                                                                                                                                                    {
                                                                                                                                                                                                        num783 = num779/num783;
                                                                                                                                                                                                        num781 *= num783;
                                                                                                                                                                                                        num782 *= num783;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.velocity.X < num781)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.velocity.X = this.velocity.X + num780;
                                                                                                                                                                                                        if (this.velocity.X < 0f && num781 > 0f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.X = this.velocity.X + num780*2f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                    else
                                                                                                                                                                                                    {
                                                                                                                                                                                                        if (this.velocity.X > num781)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.X = this.velocity.X - num780;
                                                                                                                                                                                                            if (this.velocity.X > 0f && num781 < 0f)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.velocity.X = this.velocity.X - num780*2f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.velocity.Y < num782)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.velocity.Y = this.velocity.Y + num780;
                                                                                                                                                                                                        if (this.velocity.Y < 0f && num782 > 0f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.Y = this.velocity.Y + num780*2f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                    else
                                                                                                                                                                                                    {
                                                                                                                                                                                                        if (this.velocity.Y > num782)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.Y = this.velocity.Y - num780;
                                                                                                                                                                                                            if (this.velocity.Y > 0f && num782 < 0f)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.velocity.Y = this.velocity.Y - num780*2f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.position.X + (float) this.width > Main.player[this.target].position.X && this.position.X < Main.player[this.target].position.X + (float) Main.player[this.target].width && this.position.Y + (float) this.height < Main.player[this.target].position.Y && Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height) && Main.netMode != 1)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.ai[0] += 1f;
                                                                                                                                                                                                        if (this.ai[0] > 8f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.ai[0] = 0f;
                                                                                                                                                                                                            int num784 = (int) (this.position.X + 10f + (float) Main.rand.Next(this.width - 20));
                                                                                                                                                                                                            int num785 = (int) (this.position.Y + (float) this.height + 4f);
                                                                                                                                                                                                            Projectile.NewProjectile((float) num784, (float) num785, 0f, 5f, 264, 17, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                                                            return;
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    if (this.aiStyle == 50)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        if (this.timeLeft > 5)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.timeLeft = 5;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        this.noTileCollide = true;
                                                                                                                                                                                                        this.velocity.Y = this.velocity.Y + 0.02f;
                                                                                                                                                                                                        if (this.velocity.Y < 0f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.99f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        if (this.velocity.Y > 1f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.Y = 1f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                                        if (this.position.X + (float) this.width < Main.player[this.target].position.X)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (this.velocity.X < 0f)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.velocity.X = this.velocity.X*0.98f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            this.velocity.X = this.velocity.X + 0.1f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (this.position.X > Main.player[this.target].position.X + (float) Main.player[this.target].width)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                if (this.velocity.X > 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.X = this.velocity.X*0.98f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                this.velocity.X = this.velocity.X - 0.1f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        if (this.velocity.X > 5f || this.velocity.X < -5f)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.X = this.velocity.X*0.97f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        this.rotation = this.velocity.X*0.2f;
                                                                                                                                                                                                        return;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    if (this.aiStyle == 51)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                                        if (Main.netMode != 1)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            int num786 = 6000;
                                                                                                                                                                                                            if (Math.Abs(this.center().X - Main.player[this.target].center().X) + Math.Abs(this.center().Y - Main.player[this.target].center().Y) > (float) num786)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.active = false;
                                                                                                                                                                                                                this.life = 0;
                                                                                                                                                                                                                if (Main.netMode == 2)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    NetMessage.SendData(23, -1, -1, "", this.whoAmI, 0f, 0f, 0f, 0);
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        NPC.plantBoss = this.whoAmI;
                                                                                                                                                                                                        if (this.localAI[0] == 0f && Main.netMode != 1)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.localAI[0] = 1f;
                                                                                                                                                                                                            NPC.NewNPC((int) this.center().X, (int) this.center().Y, 263, this.whoAmI);
                                                                                                                                                                                                            NPC.NewNPC((int) this.center().X, (int) this.center().Y, 263, this.whoAmI);
                                                                                                                                                                                                            NPC.NewNPC((int) this.center().X, (int) this.center().Y, 263, this.whoAmI);
                                                                                                                                                                                                        }
                                                                                                                                                                                                        int[] array = new int[3];
                                                                                                                                                                                                        float num787 = 0f;
                                                                                                                                                                                                        float num788 = 0f;
                                                                                                                                                                                                        int num789 = 0;
                                                                                                                                                                                                        for (int num790 = 0; num790 < 200; num790
                                                                                                                                                                                                            ++)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (Main.npc[num790].active && Main.npc[num790].aiStyle == 52)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                num787 += Main.npc[num790].center().X;
                                                                                                                                                                                                                num788 += Main.npc[num790].center().Y;
                                                                                                                                                                                                                array[num789] = num790;
                                                                                                                                                                                                                num789
                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                if (num789 > 2)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    break;
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        num787 /= (float) num789;
                                                                                                                                                                                                        num788 /= (float) num789;
                                                                                                                                                                                                        float num791 = 2.5f;
                                                                                                                                                                                                        float num792 = 0.025f;
                                                                                                                                                                                                        if (this.life < this.lifeMax/2)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            num791 = 5f;
                                                                                                                                                                                                            num792 = 0.05f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        if (this.life < this.lifeMax/4)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            num791 = 7f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        if (!Main.player[this.target].zoneJungle || (double) Main.player[this.target].position.Y < Main.worldSurface/16.0 || Main.player[this.target].position.Y > (float) (Main.maxTilesY/16 - 300))
                                                                                                                                                                                                        {
                                                                                                                                                                                                            num791 += 4f;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        Vector2 vector98 = new Vector2(num787, num788);
                                                                                                                                                                                                        float num793 = Main.player[this.target].center().X - vector98.X;
                                                                                                                                                                                                        float num794 = Main.player[this.target].center().Y - vector98.Y;
                                                                                                                                                                                                        float num795 = (float) Math.Sqrt((double) (num793*num793 + num794*num794));
                                                                                                                                                                                                        int num796 = 500;
                                                                                                                                                                                                        if (num795 >= (float) num796)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            num795 = (float) num796/num795;
                                                                                                                                                                                                            num793 *= num795;
                                                                                                                                                                                                            num794 *= num795;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        num787 += num793;
                                                                                                                                                                                                        num788 += num794;
                                                                                                                                                                                                        vector98 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                        num793 = num787 - vector98.X;
                                                                                                                                                                                                        num794 = num788 - vector98.Y;
                                                                                                                                                                                                        num795 = (float) Math.Sqrt((double) (num793*num793 + num794*num794));
                                                                                                                                                                                                        if (num795 < num791)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            num793 = this.velocity.X;
                                                                                                                                                                                                            num794 = this.velocity.Y;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            num795 = num791/num795;
                                                                                                                                                                                                            num793 *= num795;
                                                                                                                                                                                                            num794 *= num795;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        if (this.velocity.X < num793)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.X = this.velocity.X + num792;
                                                                                                                                                                                                            if (this.velocity.X < 0f && num793 > 0f)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.velocity.X = this.velocity.X + num792*2f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (this.velocity.X > num793)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.velocity.X = this.velocity.X - num792;
                                                                                                                                                                                                                if (this.velocity.X > 0f && num793 < 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.X = this.velocity.X - num792*2f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        if (this.velocity.Y < num794)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.velocity.Y = this.velocity.Y + num792;
                                                                                                                                                                                                            if (this.velocity.Y < 0f && num794 > 0f)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.velocity.Y = this.velocity.Y + num792*2f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (this.velocity.Y > num794)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.velocity.Y = this.velocity.Y - num792;
                                                                                                                                                                                                                if (this.velocity.Y > 0f && num794 < 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.Y = this.velocity.Y - num792*2f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        Vector2 vector99 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                        float num797 = Main.player[this.target].center().X - vector99.X;
                                                                                                                                                                                                        float num798 = Main.player[this.target].center().Y - vector99.Y;
                                                                                                                                                                                                        this.rotation = (float) Math.Atan2((double) num798, (double) num797) + 1.57f;
                                                                                                                                                                                                        if (this.life > this.lifeMax/2)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.defense = 36;
                                                                                                                                                                                                            this.damage = 50;
                                                                                                                                                                                                            if (Main.netMode != 1)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                                                                                                if ((double) this.life < (double) this.lifeMax*0.9)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[1] += 1f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if ((double) this.life < (double) this.lifeMax*0.8)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[1] += 1f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if ((double) this.life < (double) this.lifeMax*0.7)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[1] += 1f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if ((double) this.life < (double) this.lifeMax*0.6)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[1] += 1f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (this.localAI[1] > 80f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[1] = 0f;
                                                                                                                                                                                                                    if (Collision.CanHit(this.position, this.width, this.height, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        Vector2 vector100 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                                        float num799 = 15f;
                                                                                                                                                                                                                        float num800 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector100.X;
                                                                                                                                                                                                                        float num801 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector100.Y;
                                                                                                                                                                                                                        float num802 = (float) Math.Sqrt((double) (num800*num800 + num801*num801));
                                                                                                                                                                                                                        num802 = num799/num802;
                                                                                                                                                                                                                        num800 *= num802;
                                                                                                                                                                                                                        num801 *= num802;
                                                                                                                                                                                                                        int num803 = 50;
                                                                                                                                                                                                                        int num804 = 275;
                                                                                                                                                                                                                        if ((double) this.life < (double) this.lifeMax*0.8 && Main.rand.Next(4) == 0)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            num803 = 55;
                                                                                                                                                                                                                            this.localAI[1] = -30f;
                                                                                                                                                                                                                            num804 = 276;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        else
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.8 && Main.rand.Next(8) == 0)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                num803 = 60;
                                                                                                                                                                                                                                this.localAI[1] = -120f;
                                                                                                                                                                                                                                num804 = 277;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        vector100.X += num800*3f;
                                                                                                                                                                                                                        vector100.Y += num801*3f;
                                                                                                                                                                                                                        int num805 = Projectile.NewProjectile(vector100.X, vector100.Y, num800, num801, num804, num803, 0f, Main.myPlayer, 0f, 0f);
                                                                                                                                                                                                                        if (num804 != 277)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            Main.projectile[num805].timeLeft = 300;
                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            this.defense = 10;
                                                                                                                                                                                                            this.damage = 100;
                                                                                                                                                                                                            if (this.localAI[0] == 1f && Main.netMode != 1)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.localAI[0] = 2f;
                                                                                                                                                                                                                for (int num806 = 0; num806 < 8; num806++)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    NPC.NewNPC((int) this.center().X, (int) this.center().Y, 264, this.whoAmI);
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                            if (this.localAI[2] == 0f)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 378, this.scale);
                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 379, this.scale);
                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 380, this.scale);
                                                                                                                                                                                                                this.localAI[2] = 1f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            this.localAI[1] += 1f;
                                                                                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.4)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.3)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.2)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            if ((double) this.life < (double) this.lifeMax*0.1)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            if (this.localAI[1] >= 350f)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                float num807 = 8f;
                                                                                                                                                                                                                Vector2 vector101 = new Vector2(this.position.X + (float) this.width*0.5f, this.position.Y + (float) this.height*0.5f);
                                                                                                                                                                                                                float num808 = Main.player[this.target].position.X + (float) Main.player[this.target].width*0.5f - vector101.X + (float) Main.rand.Next(-10, 11);
                                                                                                                                                                                                                float num809 = Math.Abs(num808*0.2f);
                                                                                                                                                                                                                float num810 = Main.player[this.target].position.Y + (float) Main.player[this.target].height*0.5f - vector101.Y + (float) Main.rand.Next(-10, 11);
                                                                                                                                                                                                                if (num810 > 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    num809 = 0f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                num810 -= num809;
                                                                                                                                                                                                                float num811 = (float) Math.Sqrt((double) (num808*num808 + num810*num810));
                                                                                                                                                                                                                num811 = num807/num811;
                                                                                                                                                                                                                num808 *= num811;
                                                                                                                                                                                                                num810 *= num811;
                                                                                                                                                                                                                int num812 = NPC.NewNPC((int) this.center().X, (int) this.center().Y, 265, 0);
                                                                                                                                                                                                                Main.npc[num812].velocity.X = num808;
                                                                                                                                                                                                                Main.npc[num812].velocity.Y = num810;
                                                                                                                                                                                                                Main.npc[num812].netUpdate = true;
                                                                                                                                                                                                                this.localAI[1] = 0f;
                                                                                                                                                                                                                return;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                    else
                                                                                                                                                                                                    {
                                                                                                                                                                                                        if (this.aiStyle == 52)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (NPC.plantBoss < 0)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                this.StrikeNPC(9999, 0f, 0, false, false);
                                                                                                                                                                                                                this.netUpdate = true;
                                                                                                                                                                                                                return;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            if (Main.netMode == 1)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                if (this.ai[0] == 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.ai[0] = (float) ((int) (this.center().X/16f));
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (this.ai[1] == 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.ai[1] = (float) ((int) (this.center().X/16f));
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                            if (Main.netMode != 1)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                if (this.ai[0] == 0f || this.ai[1] == 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[0] = 0f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                this.localAI[0] -= 1f;
                                                                                                                                                                                                                if (Main.npc[NPC.plantBoss].life < Main.npc[NPC.plantBoss].lifeMax/2)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[0] -= 2f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (Main.npc[NPC.plantBoss].life < Main.npc[NPC.plantBoss].lifeMax/4)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[0] -= 2f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (!Main.player[Main.npc[NPC.plantBoss].target].zoneJungle || (double) Main.player[Main.npc[NPC.plantBoss].target].position.Y < Main.worldSurface/16.0 || Main.player[Main.npc[NPC.plantBoss].target].position.Y > (float) (Main.maxTilesY/16 - 300))
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[0] -= 4f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (this.localAI[0] <= 0f && this.ai[0] != 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    for (int num813 = 0; num813 < 200; num813
                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        if (num813 != this.whoAmI && Main.npc[num813].active && Main.npc[num813].type == this.type && (Main.npc[num813].velocity.X != 0f || Main.npc[num813].velocity.Y != 0f))
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            this.localAI[0] = (float) Main.rand.Next(60, 300);
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (this.localAI[0] <= 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[0] = (float) Main.rand.Next(300, 600);
                                                                                                                                                                                                                    bool flag54 = false;
                                                                                                                                                                                                                    int num814 = 0;
                                                                                                                                                                                                                    while (!flag54 && num814 <= 1000)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        num814
                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                        int num815 = (int) (Main.player[Main.npc[NPC.plantBoss].target].center().X/16f);
                                                                                                                                                                                                                        int num816 = (int) (Main.player[Main.npc[NPC.plantBoss].target].center().Y/16f);
                                                                                                                                                                                                                        if (this.ai[0] == 0f)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            num815 = (int) ((Main.player[Main.npc[NPC.plantBoss].target].center().X + Main.npc[NPC.plantBoss].center().X)/32f);
                                                                                                                                                                                                                            num816 = (int) ((Main.player[Main.npc[NPC.plantBoss].target].center().Y + Main.npc[NPC.plantBoss].center().Y)/32f);
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        int num817 = 20;
                                                                                                                                                                                                                        num817 += (int) (100f*((float) num814/1000f));
                                                                                                                                                                                                                        int num818 = num815 + Main.rand.Next(-num817, num817 + 1);
                                                                                                                                                                                                                        int num819 = num816 + Main.rand.Next(-num817, num817 + 1);
                                                                                                                                                                                                                        if (Main.npc[NPC.plantBoss].life < Main.npc[NPC.plantBoss].lifeMax/2 && Main.rand.Next(6) == 0)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            this.TargetClosest(true);
                                                                                                                                                                                                                            int num820 = (int) (Main.player[this.target].center().X/16f);
                                                                                                                                                                                                                            int num821 = (int) (Main.player[this.target].center().Y/16f);
                                                                                                                                                                                                                            if (Main.tile[num820, num821].wall > 0)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                num818 = num820;
                                                                                                                                                                                                                                num819 = num821;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        if (WorldGen.SolidTile(num818, num819) || (Main.tile[num818, num819].wall > 0 && (num814 > 500 || Main.npc[NPC.plantBoss].life < Main.npc[NPC.plantBoss].lifeMax/2)))
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            flag54 = true;
                                                                                                                                                                                                                            this.ai[0] = (float) num818;
                                                                                                                                                                                                                            this.ai[1] = (float) num819;
                                                                                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                            if (this.ai[0] > 0f && this.ai[1] > 0f)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                float num822 = 6f;
                                                                                                                                                                                                                if (Main.npc[NPC.plantBoss].life < Main.npc[NPC.plantBoss].lifeMax/2)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    num822 = 8f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (Main.npc[NPC.plantBoss].life < Main.npc[NPC.plantBoss].lifeMax/4)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    num822 = 10f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (!Main.player[Main.npc[NPC.plantBoss].target].zoneJungle || (double) Main.player[Main.npc[NPC.plantBoss].target].position.Y < Main.worldSurface/16.0 || Main.player[Main.npc[NPC.plantBoss].target].position.Y > (float) (Main.maxTilesY/16 - 300))
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    num822 += 6f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                Vector2 vector102 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                                float num823 = this.ai[0]*16f - 8f - vector102.X;
                                                                                                                                                                                                                float num824 = this.ai[1]*16f - 8f - vector102.Y;
                                                                                                                                                                                                                float num825 = (float) Math.Sqrt((double) (num823*num823 + num824*num824));
                                                                                                                                                                                                                if (num825 < 12f + num822)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.X = num823;
                                                                                                                                                                                                                    this.velocity.Y = num824;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                else
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    num825 = num822/num825;
                                                                                                                                                                                                                    this.velocity.X = num823*num825;
                                                                                                                                                                                                                    this.velocity.Y = num824*num825;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                Vector2 vector103 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                                float num826 = Main.npc[NPC.plantBoss].center().X - vector103.X;
                                                                                                                                                                                                                float num827 = Main.npc[NPC.plantBoss].center().Y - vector103.Y;
                                                                                                                                                                                                                this.rotation = (float) Math.Atan2((double) num827, (double) num826) - 1.57f;
                                                                                                                                                                                                                return;
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (this.aiStyle == 53)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                if (NPC.plantBoss < 0)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.StrikeNPC(9999, 0f, 0, false, false);
                                                                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                int num828 = NPC.plantBoss;
                                                                                                                                                                                                                if (Main.netMode != 1)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.localAI[0] -= 1f;
                                                                                                                                                                                                                    if (this.localAI[0] <= 0f)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.localAI[0] = (float) Main.rand.Next(120, 480);
                                                                                                                                                                                                                        this.ai[0] = (float) Main.rand.Next(-100, 101);
                                                                                                                                                                                                                        this.ai[1] = (float) Main.rand.Next(-100, 101);
                                                                                                                                                                                                                        this.netUpdate = true;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                                                float num829 = 0.2f;
                                                                                                                                                                                                                float num830 = 200f;
                                                                                                                                                                                                                if ((double) Main.npc[num828].life < (double) Main.npc[num828].lifeMax*0.25)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    num830 += 100f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if ((double) Main.npc[num828].life < (double) Main.npc[num828].lifeMax*0.1)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    num830 += 100f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (!Main.npc[num828].active || NPC.plantBoss < 0)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.active = false;
                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                float num831 = Main.npc[num828].position.X + (float) (Main.npc[num828].width/2);
                                                                                                                                                                                                                float num832 = Main.npc[num828].position.Y + (float) (Main.npc[num828].height/2);
                                                                                                                                                                                                                Vector2 vector104 = new Vector2(num831, num832);
                                                                                                                                                                                                                float num833 = num831 + this.ai[0];
                                                                                                                                                                                                                float num834 = num832 + this.ai[1];
                                                                                                                                                                                                                float num835 = num833 - vector104.X;
                                                                                                                                                                                                                float num836 = num834 - vector104.Y;
                                                                                                                                                                                                                float num837 = (float) Math.Sqrt((double) (num835*num835 + num836*num836));
                                                                                                                                                                                                                num837 = num830/num837;
                                                                                                                                                                                                                num835 *= num837;
                                                                                                                                                                                                                num836 *= num837;
                                                                                                                                                                                                                if (this.position.X < num831 + num835)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.X = this.velocity.X + num829;
                                                                                                                                                                                                                    if (this.velocity.X < 0f && num835 > 0f)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                                else
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    if (this.position.X > num831 + num835)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.velocity.X = this.velocity.X - num829;
                                                                                                                                                                                                                        if (this.velocity.X > 0f && num835 < 0f)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            this.velocity.X = this.velocity.X*0.9f;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (this.position.Y < num832 + num836)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.Y = this.velocity.Y + num829;
                                                                                                                                                                                                                    if (this.velocity.Y < 0f && num836 > 0f)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                                else
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    if (this.position.Y > num832 + num836)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.velocity.Y = this.velocity.Y - num829;
                                                                                                                                                                                                                        if (this.velocity.Y > 0f && num836 < 0f)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            this.velocity.Y = this.velocity.Y*0.9f;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (this.velocity.X > 8f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.X = 8f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (this.velocity.X < -8f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.X = -8f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (this.velocity.Y > 8f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.Y = 8f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (this.velocity.Y < -8f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.velocity.Y = -8f;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (num835 > 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.spriteDirection = 1;
                                                                                                                                                                                                                    this.rotation = (float) Math.Atan2((double) num836, (double) num835);
                                                                                                                                                                                                                }
                                                                                                                                                                                                                if (num835 < 0f)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    this.spriteDirection = -1;
                                                                                                                                                                                                                    this.rotation = (float) Math.Atan2((double) num836, (double) num835) + 3.14f;
                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                            else
                                                                                                                                                                                                            {
                                                                                                                                                                                                                if (this.aiStyle == 54)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    NPC.crimsonBoss = this.whoAmI;
                                                                                                                                                                                                                    if (Main.netMode != 1 && this.localAI[0] == 0f)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.localAI[0] = 1f;
                                                                                                                                                                                                                        for (int num838 = 0; num838 < 20; num838++)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            float num839 = this.center().X;
                                                                                                                                                                                                                            float num840 = this.center().Y;
                                                                                                                                                                                                                            num839 += (float) Main.rand.Next(-this.width, this.width);
                                                                                                                                                                                                                            num840 += (float) Main.rand.Next(-this.height, this.height);
                                                                                                                                                                                                                            int num841 = NPC.NewNPC((int) num839, (int) num840, 267, 0);
                                                                                                                                                                                                                            Main.npc[num841].velocity = new Vector2((float) Main.rand.Next(-30, 31)*0.1f, (float) Main.rand.Next(-30, 31)*0.1f);
                                                                                                                                                                                                                            Main.npc[num841].netUpdate = true;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    if (Main.netMode != 1)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                                                        int num842 = 6000;
                                                                                                                                                                                                                        if (Math.Abs(this.center().X - Main.player[this.target].center().X) + Math.Abs(this.center().Y - Main.player[this.target].center().Y) > (float) num842)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            this.active = false;
                                                                                                                                                                                                                            this.life = 0;
                                                                                                                                                                                                                            if (Main.netMode == 2)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                NetMessage.SendData(23, -1, -1, "", this.whoAmI, 0f, 0f, 0f, 0);
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    if (this.ai[0] < 0f)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        if (this.localAI[2] == 0f)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            Main.PlaySound(3, (int) this.position.X, (int) this.position.Y, 1);
                                                                                                                                                                                                                            this.localAI[2] = 1f;
                                                                                                                                                                                                                            Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 392, 1f);
                                                                                                                                                                                                                            Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 393, 1f);
                                                                                                                                                                                                                            Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 394, 1f);
                                                                                                                                                                                                                            Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 395, 1f);
                                                                                                                                                                                                                            for (int num843 = 0; num843 < 20; num843
                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f, 0, default(Color), 1f);
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        this.dontTakeDamage = false;
                                                                                                                                                                                                                        this.knockBackResist = 0.5f;
                                                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                                                        Vector2 vector105 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                                        float num844 = Main.player[this.target].center().X - vector105.X;
                                                                                                                                                                                                                        float num845 = Main.player[this.target].center().Y - vector105.Y;
                                                                                                                                                                                                                        float num846 = (float) Math.Sqrt((double) (num844*num844 + num845*num845));
                                                                                                                                                                                                                        float num847 = 8f;
                                                                                                                                                                                                                        num846 = num847/num846;
                                                                                                                                                                                                                        num844 *= num846;
                                                                                                                                                                                                                        num845 *= num846;
                                                                                                                                                                                                                        this.velocity.X = (this.velocity.X*50f + num844)/51f;
                                                                                                                                                                                                                        this.velocity.Y = (this.velocity.Y*50f + num845)/51f;
                                                                                                                                                                                                                        if (this.ai[0] == -1f)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            if (Main.netMode != 1)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                                                                                                                if (this.localAI[1] >= (float) (60 + Main.rand.Next(120)))
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    this.localAI[1] = 0f;
                                                                                                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                                                                                                    int num848 = 0;
                                                                                                                                                                                                                                    int num849;
                                                                                                                                                                                                                                    int num850;
                                                                                                                                                                                                                                    while (true)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        num848
                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                        num849 = (int) Main.player[this.target].center().X/16;
                                                                                                                                                                                                                                        num850 = (int) Main.player[this.target].center().Y/16;
                                                                                                                                                                                                                                        if (Main.rand.Next(2) == 0)
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            num849 += Main.rand.Next(7, 13);
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            num849 -= Main.rand.Next(7, 13);
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        if (Main.rand.Next(2) == 0)
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            num850 += Main.rand.Next(7, 13);
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            num850 -= Main.rand.Next(7, 13);
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        if (!WorldGen.SolidTile(num849, num850))
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            break;
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        if (num848 > 100)
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    this.ai[0] = -2f;
                                                                                                                                                                                                                                    this.ai[1] = (float) num849;
                                                                                                                                                                                                                                    this.ai[2] = (float) num850;
                                                                                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        else
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            if (this.ai[0] == -2f)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                this.velocity *= 0.9f;
                                                                                                                                                                                                                                this.alpha += 25;
                                                                                                                                                                                                                                if (this.alpha >= 255)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    this.alpha = 255;
                                                                                                                                                                                                                                    this.position.X = this.ai[1]*16f - (float) (this.width/2);
                                                                                                                                                                                                                                    this.position.Y = this.ai[2]*16f - (float) (this.height/2);
                                                                                                                                                                                                                                    Main.PlaySound(2, (int) this.center().X, (int) this.center().Y, 8);
                                                                                                                                                                                                                                    this.ai[0] = -3f;
                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            else
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                if (this.ai[0] == -3f)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    this.alpha -= 25;
                                                                                                                                                                                                                                    if (this.alpha <= 0)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        this.alpha = 0;
                                                                                                                                                                                                                                        this.ai[0] = -1f;
                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    else
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        this.TargetClosest(true);
                                                                                                                                                                                                                        Vector2 vector106 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                                        float num851 = Main.player[this.target].center().X - vector106.X;
                                                                                                                                                                                                                        float num852 = Main.player[this.target].center().Y - vector106.Y;
                                                                                                                                                                                                                        float num853 = (float) Math.Sqrt((double) (num851*num851 + num852*num852));
                                                                                                                                                                                                                        float num854 = 1f;
                                                                                                                                                                                                                        if (num853 < num854)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            this.velocity.X = num851;
                                                                                                                                                                                                                            this.velocity.Y = num852;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        else
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            num853 = num854/num853;
                                                                                                                                                                                                                            this.velocity.X = num851*num853;
                                                                                                                                                                                                                            this.velocity.Y = num852*num853;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        if (this.ai[0] == 0f)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            if (Main.netMode != 1)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                int num855 = 0;
                                                                                                                                                                                                                                for (int num856 = 0; num856 < 200; num856
                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    if (Main.npc[num856].active && Main.npc[num856].type == 267)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        num855
                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                if (num855 == 0)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    this.ai[0] = -1f;
                                                                                                                                                                                                                                    this.localAI[1] = 0f;
                                                                                                                                                                                                                                    this.alpha = 0;
                                                                                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                this.localAI[1] += 1f;
                                                                                                                                                                                                                                if (this.localAI[1] >= (float) (120 + Main.rand.Next(300)))
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    this.localAI[1] = 0f;
                                                                                                                                                                                                                                    this.TargetClosest(true);
                                                                                                                                                                                                                                    int num857 = 0;
                                                                                                                                                                                                                                    int num858;
                                                                                                                                                                                                                                    int num859;
                                                                                                                                                                                                                                    while (true)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        num857
                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                        num858 = (int) Main.player[this.target].center().X/16;
                                                                                                                                                                                                                                        num859 = (int) Main.player[this.target].center().Y/16;
                                                                                                                                                                                                                                        num858 += Main.rand.Next(-50, 51);
                                                                                                                                                                                                                                        num859 += Main.rand.Next(-50, 51);
                                                                                                                                                                                                                                        if (!WorldGen.SolidTile(num858, num859) && Collision.CanHit(new Vector2((float) (num858*16), (float) (num859*16)), 1, 1, Main.player[this.target].position, Main.player[this.target].width, Main.player[this.target].height))
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            break;
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        if (num857 > 100)
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    this.ai[0] = 1f;
                                                                                                                                                                                                                                    this.ai[1] = (float) num858;
                                                                                                                                                                                                                                    this.ai[2] = (float) num859;
                                                                                                                                                                                                                                    this.netUpdate = true;
                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        else
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            if (this.ai[0] == 1f)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                this.alpha += 5;
                                                                                                                                                                                                                                if (this.alpha >= 255)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    Main.PlaySound(2, (int) this.center().X, (int) this.center().Y, 8);
                                                                                                                                                                                                                                    this.alpha = 255;
                                                                                                                                                                                                                                    this.position.X = this.ai[1]*16f - (float) (this.width/2);
                                                                                                                                                                                                                                    this.position.Y = this.ai[2]*16f - (float) (this.height/2);
                                                                                                                                                                                                                                    this.ai[0] = 2f;
                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            else
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                if (this.ai[0] == 2f)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    this.alpha -= 5;
                                                                                                                                                                                                                                    if (this.alpha <= 0)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        this.alpha = 0;
                                                                                                                                                                                                                                        this.ai[0] = 0f;
                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                                else
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    if (this.aiStyle == 55)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        if (NPC.crimsonBoss < 0)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            this.active = false;
                                                                                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        if (this.ai[0] == 0f)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            Vector2 vector107 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                                            float num860 = Main.npc[NPC.crimsonBoss].center().X - vector107.X;
                                                                                                                                                                                                                            float num861 = Main.npc[NPC.crimsonBoss].center().Y - vector107.Y;
                                                                                                                                                                                                                            float num862 = (float) Math.Sqrt((double) (num860*num860 + num861*num861));
                                                                                                                                                                                                                            if (num862 > 90f)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                num862 = 8f/num862;
                                                                                                                                                                                                                                num860 *= num862;
                                                                                                                                                                                                                                num861 *= num862;
                                                                                                                                                                                                                                this.velocity.X = (this.velocity.X*15f + num860)/16f;
                                                                                                                                                                                                                                this.velocity.Y = (this.velocity.Y*15f + num861)/16f;
                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            if (Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y) < 8f)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                this.velocity.Y = this.velocity.Y*1.05f;
                                                                                                                                                                                                                                this.velocity.X = this.velocity.X*1.05f;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            if (Main.netMode != 1 && Main.rand.Next(200) == 0)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                this.TargetClosest(true);
                                                                                                                                                                                                                                vector107 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                                                num860 = Main.player[this.target].center().X - vector107.X;
                                                                                                                                                                                                                                num861 = Main.player[this.target].center().Y - vector107.Y;
                                                                                                                                                                                                                                num862 = (float) Math.Sqrt((double) (num860*num860 + num861*num861));
                                                                                                                                                                                                                                num862 = 8f/num862;
                                                                                                                                                                                                                                this.velocity.X = num860*num862;
                                                                                                                                                                                                                                this.velocity.Y = num861*num862;
                                                                                                                                                                                                                                this.ai[0] = 1f;
                                                                                                                                                                                                                                this.netUpdate = true;
                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        else
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            Vector2 vector108 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                                            float num863 = Main.npc[NPC.crimsonBoss].center().X - vector108.X;
                                                                                                                                                                                                                            float num864 = Main.npc[NPC.crimsonBoss].center().Y - vector108.Y;
                                                                                                                                                                                                                            float num865 = (float) Math.Sqrt((double) (num863*num863 + num864*num864));
                                                                                                                                                                                                                            if (num865 > 700f || this.justHit)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                this.ai[0] = 0f;
                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    else
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        if (this.aiStyle == 56)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            this.TargetClosest(true);
                                                                                                                                                                                                                            Vector2 vector109 = new Vector2(this.center().X, this.center().Y);
                                                                                                                                                                                                                            float num866 = Main.player[this.target].center().X - vector109.X;
                                                                                                                                                                                                                            float num867 = Main.player[this.target].center().Y - vector109.Y;
                                                                                                                                                                                                                            float num868 = (float) Math.Sqrt((double) (num866*num866 + num867*num867));
                                                                                                                                                                                                                            float num869 = 12f;
                                                                                                                                                                                                                            num868 = num869/num868;
                                                                                                                                                                                                                            num866 *= num868;
                                                                                                                                                                                                                            num867 *= num868;
                                                                                                                                                                                                                            this.velocity.X = (this.velocity.X*100f + num866)/101f;
                                                                                                                                                                                                                            this.velocity.Y = (this.velocity.Y*100f + num867)/101f;
                                                                                                                                                                                                                            this.rotation = (float) Math.Atan2((double) num867, (double) num866) - 1.57f;
                                                                                                                                                                                                                            int num870 = Dust.NewDust(this.position, this.width, this.height, 180, 0f, 0f, 0, default(Color), 1f);
                                                                                                                                                                                                                            Main.dust[num870].velocity *= 0.1f;
                                                                                                                                                                                                                            Main.dust[num870].scale = 1.3f;
                                                                                                                                                                                                                            Main.dust[num870].noGravity = true;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }

        public void FindFrame()
        {
            int num = 1;
            if (!Main.dedServ)
            {
                if (!Main.NPCLoaded[this.type])
                {
                    return;
                }
                num = Main.npcTexture[this.type].Height/Main.npcFrameCount[this.type];
            }
            int num2 = 0;
            if (this.aiAction == 0)
            {
                if (this.velocity.Y < 0f)
                {
                    num2 = 2;
                }
                else
                {
                    if (this.velocity.Y > 0f)
                    {
                        num2 = 3;
                    }
                    else
                    {
                        if (this.velocity.X != 0f)
                        {
                            num2 = 1;
                        }
                        else
                        {
                            num2 = 0;
                        }
                    }
                }
            }
            else
            {
                if (this.aiAction == 1)
                {
                    num2 = 4;
                }
            }
            if (this.type == 1 || this.type == 16 || this.type == 59 || this.type == 71 || this.type == 81 || this.type == 138 || this.type == 147 || this.type == 183 || this.type == 184 || this.type == 204 || this.type == 225)
            {
                this.frameCounter += 1.0;
                if (num2 > 0)
                {
                    this.frameCounter += 1.0;
                }
                if (num2 == 4)
                {
                    this.frameCounter += 1.0;
                }
                if (this.frameCounter >= 8.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 266)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter > 6.0)
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = this.frame.Y + num;
                }
                if (this.ai[0] >= 0f)
                {
                    if (this.frame.Y > num*3)
                    {
                        this.frame.Y = 0;
                    }
                }
                else
                {
                    if (this.frame.Y < num*4)
                    {
                        this.frame.Y = num*4;
                    }
                    if (this.frame.Y > num*7)
                    {
                        this.frame.Y = num*4;
                    }
                }
            }
            if (this.type == 262)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter > 6.0)
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = this.frame.Y + num;
                }
                if (this.life > this.lifeMax/2)
                {
                    if (this.frame.Y > num*3)
                    {
                        this.frame.Y = 0;
                    }
                }
                else
                {
                    if (this.frame.Y < num*4)
                    {
                        this.frame.Y = num*4;
                    }
                    if (this.frame.Y > num*7)
                    {
                        this.frame.Y = num*4;
                    }
                }
            }
            if (this.type == 263)
            {
                if (this.velocity.X == 0f && this.velocity.Y == 0f)
                {
                    if (this.frame.Y > 0)
                    {
                        this.frameCounter += 1.0;
                        if (this.frameCounter > 4.0)
                        {
                            this.frameCounter = 0.0;
                            this.frame.Y = this.frame.Y - num;
                        }
                    }
                }
                else
                {
                    if (this.frame.Y < 2)
                    {
                        this.frameCounter += 1.0;
                        if (this.frameCounter > 4.0)
                        {
                            this.frameCounter = 0.0;
                            this.frame.Y = this.frame.Y + num;
                        }
                    }
                }
            }
            if (this.type == 244)
            {
                this.frameCounter += 1.0;
                if (num2 > 0)
                {
                    this.frameCounter += 1.0;
                }
                if (num2 == 4)
                {
                    this.frameCounter += 1.0;
                }
                if (this.frameCounter >= 8.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 289)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter < 2.0)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if (this.frameCounter < 3.0)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        this.frame.Y = num*2;
                        this.frameCounter = 0.0;
                    }
                }
                if (this.ai[3] == 1f)
                {
                    this.frame.Y = this.frame.Y + num*3;
                }
            }
            if (this.type == 288)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter >= 6.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 250 || this.type == 264 || this.type == 268)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter >= 6.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 245)
            {
                if (this.ai[0] == 0f)
                {
                    if (this.ai[1] < -16f)
                    {
                        this.frame.Y = 0;
                    }
                    else
                    {
                        if (this.ai[1] < -12f)
                        {
                            this.frame.Y = num;
                        }
                        else
                        {
                            if (this.ai[1] < -8f)
                            {
                                this.frame.Y = num*2;
                            }
                            else
                            {
                                if (this.ai[1] < -4f)
                                {
                                    this.frame.Y = num*3;
                                }
                                else
                                {
                                    if (this.ai[1] < 0f)
                                    {
                                        this.frame.Y = num*4;
                                    }
                                    else
                                    {
                                        this.frame.Y = 0;
                                    }
                                }
                            }
                        }
                    }
                }
                else
                {
                    if (this.ai[0] == 1f)
                    {
                        this.frame.Y = 1;
                    }
                }
            }
            if (this.type == 246)
            {
                if (this.ai[0] == 0f)
                {
                    if (this.localAI[0] == 1f)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        this.frame.Y = 0;
                    }
                }
                else
                {
                    if (this.ai[0] == 1f)
                    {
                        if (this.localAI[0] == 1f)
                        {
                            this.frame.Y = num;
                        }
                        else
                        {
                            this.frame.Y = 0;
                        }
                        if (this.localAI[1] == -1f)
                        {
                            this.frame.Y = this.frame.Y + num*4;
                        }
                        if (this.localAI[1] == 1f)
                        {
                            this.frame.Y = this.frame.Y + num*2;
                        }
                    }
                }
            }
            if (this.type == 249)
            {
                if (this.localAI[0] == 1f)
                {
                    this.frame.Y = num;
                }
                else
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 141)
            {
                this.spriteDirection = this.direction;
                if (this.velocity.Y != 0f)
                {
                    this.frame.Y = num*2;
                }
                else
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 8.0)
                    {
                        this.frame.Y = this.frame.Y + num;
                        this.frameCounter = 0.0;
                    }
                    if (this.frame.Y > num)
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 243)
            {
                if (this.frameCounter < 0.0)
                {
                    if (this.velocity.Y == 0f)
                    {
                        this.frameCounter += 1.0;
                        if (this.frameCounter < -12.0)
                        {
                            if (this.frame.Y > num*9)
                            {
                                this.frame.Y = num*11;
                            }
                        }
                        else
                        {
                            if (this.frameCounter < -6.0)
                            {
                                if (this.frame.Y > num*9)
                                {
                                    this.frame.Y = num*12;
                                }
                            }
                            else
                            {
                                if (this.frameCounter < 0.0)
                                {
                                    this.frameCounter = 0.0;
                                    if (this.frame.Y > num*9)
                                    {
                                        this.frame.Y = num*11;
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                        this.frameCounter = -18.0;
                        if (this.velocity.Y < 0f)
                        {
                            this.frame.Y = num*14;
                        }
                        else
                        {
                            this.frame.Y = num*13;
                        }
                    }
                }
                else
                {
                    this.spriteDirection = this.direction;
                    this.frameCounter += (double) Math.Abs(this.velocity.X*1.1f);
                    if (this.frameCounter >= 6.0)
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = this.frame.Y + num;
                        if (this.frame.Y > num*9)
                        {
                            this.frame.Y = 0;
                        }
                    }
                    if (this.velocity.Y < -2f || this.velocity.Y > 5f)
                    {
                        this.frameCounter = -18.0;
                    }
                }
            }
            if (this.type == 222)
            {
                this.frameCounter += 1.0;
                if (this.localAI[0] == 1f)
                {
                    if (this.frameCounter > 4.0)
                    {
                        this.frame.Y = this.frame.Y + num;
                        this.frameCounter = 0.0;
                    }
                    if (this.frame.Y >= num*4)
                    {
                        this.frame.Y = 0;
                    }
                }
                else
                {
                    if (this.frameCounter > 4.0)
                    {
                        this.frame.Y = this.frame.Y + num;
                        this.frameCounter = 0.0;
                    }
                    if (this.frame.Y < num*4)
                    {
                        this.frame.Y = num*4;
                    }
                    if (this.frame.Y >= num*12)
                    {
                        this.frame.Y = num*4;
                    }
                }
            }
            if (this.type == 164 || this.type == 239)
            {
                if (this.velocity.Y != 0f)
                {
                    this.frameCounter = 0.0;
                    if (this.velocity.Y < 0f)
                    {
                        this.frame.Y = num*4;
                    }
                    else
                    {
                        this.frame.Y = 0;
                    }
                }
                else
                {
                    this.spriteDirection = this.direction;
                    this.frameCounter += (double) (Math.Abs(this.velocity.X)*1.1f);
                    if (this.frameCounter < 6.0)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.frameCounter < 12.0)
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            if (this.frameCounter < 18.0)
                            {
                                this.frame.Y = num*3;
                            }
                            else
                            {
                                this.frameCounter = 0.0;
                            }
                        }
                    }
                }
            }
            if (this.type == 236)
            {
                if (this.velocity.Y == 0f)
                {
                    this.spriteDirection = this.direction;
                }
                else
                {
                    this.frame.Y = 0;
                }
                this.frameCounter += (double) Math.Abs(this.velocity.X);
                if (this.frameCounter > 6.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y > num || this.velocity.Y != 0f)
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 165 || this.type == 237 || this.type == 238 || this.type == 240)
            {
                this.frameCounter += (double) ((Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y))*0.5f);
                if (this.frameCounter < 6.0)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if (this.frameCounter < 12.0)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.frameCounter < 18.0)
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            if (this.frameCounter < 24.0)
                            {
                                this.frame.Y = num*3;
                            }
                            else
                            {
                                this.frameCounter = 0.0;
                            }
                        }
                    }
                }
            }
            if (this.type == 195)
            {
                if (this.ai[0] < 3f)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if (this.ai[0] < 6f)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.ai[0] < 9f)
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            if (this.ai[0] < 12f)
                            {
                                this.frame.Y = num*3;
                            }
                            else
                            {
                                if (this.ai[0] < 15f)
                                {
                                    this.frame.Y = num*4;
                                }
                                else
                                {
                                    this.frame.Y = num*5;
                                }
                            }
                        }
                    }
                }
            }
            if (this.type == 174)
            {
                if (this.velocity.Y == 0f)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if ((double) this.velocity.Y < -1.5)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if ((double) this.velocity.Y > 1.5)
                        {
                            this.frame.Y = num*3;
                        }
                        else
                        {
                            this.frame.Y = num*2;
                        }
                    }
                }
            }
            if (this.type == 177)
            {
                if (this.velocity.Y == 0f)
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 10.0)
                    {
                        this.frameCounter = 30.0;
                        this.frame.Y = 0;
                    }
                    else
                    {
                        this.frame.Y = num;
                    }
                }
                else
                {
                    if (this.velocity.Y < 0f)
                    {
                        this.frame.Y = num*2;
                    }
                    else
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = num*2;
                    }
                }
            }
            if (this.type == 163)
            {
                if (this.velocity.Y != 0f)
                {
                    this.frameCounter = -12.0;
                    if (this.velocity.Y < 0f)
                    {
                        this.frame.Y = num*5;
                    }
                    else
                    {
                        this.frame.Y = num*6;
                    }
                }
                else
                {
                    this.spriteDirection = this.direction;
                    this.frameCounter += (double) (Math.Abs(this.velocity.X)*1.1f);
                    if (this.frameCounter < -6.0)
                    {
                        this.frame.Y = num*6;
                    }
                    else
                    {
                        if (this.frameCounter < 0.0)
                        {
                            this.frame.Y = num*7;
                        }
                        else
                        {
                            if (this.frameCounter < 6.0)
                            {
                                this.frame.Y = num;
                            }
                            else
                            {
                                if (this.frameCounter < 12.0)
                                {
                                    this.frame.Y = num*2;
                                }
                                else
                                {
                                    if (this.frameCounter < 18.0)
                                    {
                                        this.frame.Y = num*3;
                                    }
                                    else
                                    {
                                        this.frameCounter = 0.0;
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (this.type == 143)
            {
                if (this.velocity.Y > 0f)
                {
                    this.frameCounter += 1.0;
                }
                else
                {
                    if (this.velocity.Y < 0f)
                    {
                        this.frameCounter -= 1.0;
                    }
                }
                if (this.frameCounter < 6.0)
                {
                    this.frame.Y = num;
                }
                else
                {
                    if (this.frameCounter < 12.0)
                    {
                        this.frame.Y = num*2;
                    }
                    else
                    {
                        if (this.frameCounter < 18.0)
                        {
                            this.frame.Y = num*3;
                        }
                    }
                }
                if (this.frameCounter < 0.0)
                {
                    this.frameCounter = 0.0;
                }
                if (this.frameCounter > 17.0)
                {
                    this.frameCounter = 17.0;
                }
            }
            if (this.type == 144)
            {
                if (this.velocity.X == 0f && this.velocity.Y == 0f)
                {
                    this.localAI[3] += 1f;
                    if (this.localAI[3] < 6f)
                    {
                        this.frame.Y = 0;
                    }
                    else
                    {
                        if (this.localAI[3] < 12f)
                        {
                            this.frame.Y = num;
                        }
                    }
                    if (this.localAI[3] >= 11f)
                    {
                        this.localAI[3] = 0f;
                    }
                }
                else
                {
                    if (this.velocity.Y > 0f)
                    {
                        this.frameCounter += 1.0;
                    }
                    else
                    {
                        if (this.velocity.Y < 0f)
                        {
                            this.frameCounter -= 1.0;
                        }
                    }
                    if (this.frameCounter < 6.0)
                    {
                        this.frame.Y = num*2;
                    }
                    else
                    {
                        if (this.frameCounter < 12.0)
                        {
                            this.frame.Y = num*3;
                        }
                        else
                        {
                            if (this.frameCounter < 18.0)
                            {
                                this.frame.Y = num*4;
                            }
                        }
                    }
                    if (this.frameCounter < 0.0)
                    {
                        this.frameCounter = 0.0;
                    }
                    if (this.frameCounter > 17.0)
                    {
                        this.frameCounter = 17.0;
                    }
                }
            }
            if (this.type == 145)
            {
                if (this.velocity.X == 0f && this.velocity.Y == 0f)
                {
                    if (this.ai[2] < 4f)
                    {
                        this.frame.Y = 0;
                    }
                    else
                    {
                        if (this.ai[2] < 8f)
                        {
                            this.frame.Y = num;
                        }
                        else
                        {
                            if (this.ai[2] < 12f)
                            {
                                this.frame.Y = num*2;
                            }
                            else
                            {
                                if (this.ai[2] < 16f)
                                {
                                    this.frame.Y = num*3;
                                }
                            }
                        }
                    }
                }
                else
                {
                    if (this.velocity.Y > 0f)
                    {
                        this.frameCounter += 1.0;
                    }
                    else
                    {
                        if (this.velocity.Y < 0f)
                        {
                            this.frameCounter -= 1.0;
                        }
                    }
                    if (this.frameCounter < 6.0)
                    {
                        this.frame.Y = num*4;
                    }
                    else
                    {
                        if (this.frameCounter < 12.0)
                        {
                            this.frame.Y = num*5;
                        }
                        else
                        {
                            if (this.frameCounter < 18.0)
                            {
                                this.frame.Y = num*6;
                            }
                        }
                    }
                    if (this.frameCounter < 0.0)
                    {
                        this.frameCounter = 0.0;
                    }
                    if (this.frameCounter > 17.0)
                    {
                        this.frameCounter = 17.0;
                    }
                }
            }
            if (this.aiStyle == 39)
            {
                if (this.ai[0] == 0f)
                {
                    this.rotation = 0f;
                    if (this.velocity.Y == 0f)
                    {
                        this.spriteDirection = this.direction;
                    }
                    else
                    {
                        if (this.velocity.Y < 0f)
                        {
                            this.frameCounter = 0.0;
                        }
                    }
                    this.frameCounter += (double) (Math.Abs(this.velocity.X)*1.1f);
                    if (this.frameCounter < 6.0)
                    {
                        this.frame.Y = 0;
                    }
                    else
                    {
                        if (this.frameCounter < 12.0)
                        {
                            this.frame.Y = num;
                        }
                        else
                        {
                            if (this.frameCounter < 18.0)
                            {
                                this.frame.Y = num*2;
                            }
                            else
                            {
                                if (this.frameCounter < 24.0)
                                {
                                    this.frame.Y = num*3;
                                }
                                else
                                {
                                    if (this.frameCounter < 32.0)
                                    {
                                        this.frame.Y = num*4;
                                    }
                                    else
                                    {
                                        this.frameCounter = 0.0;
                                    }
                                }
                            }
                        }
                    }
                }
                else
                {
                    if (this.ai[0] == 1f)
                    {
                        this.frameCounter = 0.0;
                        if (this.ai[1] < 10f)
                        {
                            this.frame.Y = num*5;
                        }
                        else
                        {
                            if (this.ai[1] < 20f)
                            {
                                this.frame.Y = num*6;
                            }
                            else
                            {
                                this.frame.Y = num*7;
                            }
                        }
                    }
                    else
                    {
                        if (this.ai[0] == 5f)
                        {
                            this.frameCounter = 0.0;
                            if (this.ai[1] < 10f)
                            {
                                this.frame.Y = num*7;
                            }
                            else
                            {
                                if (this.ai[1] < 20f)
                                {
                                    this.frame.Y = num*6;
                                }
                                else
                                {
                                    this.frame.Y = num*5;
                                }
                            }
                        }
                        else
                        {
                            this.frameCounter = 0.0;
                            this.frame.Y = num*7;
                        }
                    }
                }
            }
            if (this.type == 50 || this.type == 51)
            {
                if (this.velocity.Y != 0f)
                {
                    this.frame.Y = num*4;
                }
                else
                {
                    this.frameCounter += 1.0;
                    if (num2 > 0)
                    {
                        this.frameCounter += 1.0;
                    }
                    if (num2 == 4)
                    {
                        this.frameCounter += 1.0;
                    }
                    if (this.frameCounter >= 8.0)
                    {
                        this.frame.Y = this.frame.Y + num;
                        this.frameCounter = 0.0;
                    }
                    if (this.frame.Y >= num*4)
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 170 || this.type == 171 || this.type == 180)
            {
                this.spriteDirection = this.direction;
                this.frameCounter += 1.0;
                if (this.frameCounter >= 4.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*14)
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 135)
            {
                if (this.ai[2] == 0f)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    this.frame.Y = num;
                }
            }
            if (this.type == 85)
            {
                if (this.ai[0] == 0f)
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = 0;
                }
                else
                {
                    int num3 = 3;
                    if (this.velocity.Y == 0f)
                    {
                        this.frameCounter -= 1.0;
                    }
                    else
                    {
                        this.frameCounter += 1.0;
                    }
                    if (this.frameCounter < 0.0)
                    {
                        this.frameCounter = 0.0;
                    }
                    if (this.frameCounter > (double) (num3*4))
                    {
                        this.frameCounter = (double) (num3*4);
                    }
                    if (this.frameCounter < (double) num3)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.frameCounter < (double) (num3*2))
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            if (this.frameCounter < (double) (num3*3))
                            {
                                this.frame.Y = num*3;
                            }
                            else
                            {
                                if (this.frameCounter < (double) (num3*4))
                                {
                                    this.frame.Y = num*4;
                                }
                                else
                                {
                                    if (this.frameCounter < (double) (num3*5))
                                    {
                                        this.frame.Y = num*5;
                                    }
                                    else
                                    {
                                        if (this.frameCounter < (double) (num3*6))
                                        {
                                            this.frame.Y = num*4;
                                        }
                                        else
                                        {
                                            if (this.frameCounter < (double) (num3*7))
                                            {
                                                this.frame.Y = num*3;
                                            }
                                            else
                                            {
                                                this.frame.Y = num*2;
                                                if (this.frameCounter >= (double) (num3*8))
                                                {
                                                    this.frameCounter = (double) num3;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                if (this.ai[3] == 2f)
                {
                    this.frame.Y = this.frame.Y + num*6;
                }
                else
                {
                    if (this.ai[3] == 3f)
                    {
                        this.frame.Y = this.frame.Y + num*12;
                    }
                    else
                    {
                        if (this.ai[3] == 4f)
                        {
                            this.frame.Y = this.frame.Y + num*18;
                        }
                    }
                }
            }
            if (this.type == 113 || this.type == 114)
            {
                if (this.ai[2] == 0f)
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 12.0)
                    {
                        this.frame.Y = this.frame.Y + num;
                        this.frameCounter = 0.0;
                    }
                    if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = 0;
                    }
                }
                else
                {
                    this.frame.Y = 0;
                    this.frameCounter = -60.0;
                }
            }
            if (this.type == 61)
            {
                this.spriteDirection = this.direction;
                this.rotation = this.velocity.X*0.1f;
                if (this.velocity.X == 0f && this.velocity.Y == 0f)
                {
                    this.frame.Y = 0;
                    this.frameCounter = 0.0;
                }
                else
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter < 4.0)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        this.frame.Y = num*2;
                        if (this.frameCounter >= 7.0)
                        {
                            this.frameCounter = 0.0;
                        }
                    }
                }
            }
            if (this.type == 252)
            {
                if ((double) this.velocity.X > 0.5)
                {
                    this.spriteDirection = 1;
                }
                if ((double) this.velocity.X < -0.5)
                {
                    this.spriteDirection = -1;
                }
                this.rotation = this.velocity.X*0.1f;
                if (this.velocity.X == 0f && this.velocity.Y == 0f)
                {
                    this.frame.Y = 0;
                    this.frameCounter = 0.0;
                }
                else
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter > 4.0)
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = this.frame.Y + num;
                    }
                    if (this.frame.Y > num*4 || this.frame.Y == 0)
                    {
                        this.frame.Y = num;
                    }
                }
            }
            if (this.type == 122)
            {
                this.spriteDirection = this.direction;
                this.rotation = this.velocity.X*0.05f;
                if (this.ai[3] > 0f)
                {
                    int num4 = (int) (this.ai[3]/8f);
                    this.frameCounter = 0.0;
                    this.frame.Y = (num4 + 3)*num;
                }
                else
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 8.0)
                    {
                        this.frame.Y = this.frame.Y + num;
                        this.frameCounter = 0.0;
                    }
                    if (this.frame.Y >= num*3)
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 74)
            {
                this.spriteDirection = this.direction;
                this.rotation = this.velocity.X*0.1f;
                if (this.velocity.X == 0f && this.velocity.Y == 0f)
                {
                    this.frame.Y = num*4;
                    this.frameCounter = 0.0;
                }
                else
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 4.0)
                    {
                        this.frame.Y = this.frame.Y + num;
                        this.frameCounter = 0.0;
                    }
                    if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 62 || this.type == 66 || this.type == 156)
            {
                this.spriteDirection = this.direction;
                this.rotation = this.velocity.X*0.1f;
                this.frameCounter += 1.0;
                if (this.frameCounter < 6.0)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    this.frame.Y = num;
                    if (this.frameCounter >= 11.0)
                    {
                        this.frameCounter = 0.0;
                    }
                }
            }
            if (this.type == 63 || this.type == 64 || this.type == 103 || this.type == 242 || this.type == 256)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter < 6.0)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if (this.frameCounter < 12.0)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.frameCounter < 18.0)
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            this.frame.Y = num*3;
                            if (this.frameCounter >= 23.0)
                            {
                                this.frameCounter = 0.0;
                            }
                        }
                    }
                }
            }
            if (this.type == 221)
            {
                if (this.localAI[2] == 1f)
                {
                    if (this.localAI[0] == 1f)
                    {
                        this.frame.Y = 0;
                        this.localAI[0] = 0f;
                    }
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 8.0)
                    {
                        this.frame.Y = this.frame.Y + num;
                        this.frameCounter = 0.0;
                    }
                    if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = num*Main.npcFrameCount[this.type] - num;
                    }
                }
                else
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 13.0)
                    {
                        this.frame.Y = this.frame.Y + num;
                        this.frameCounter = 0.0;
                    }
                    if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 2 || this.type == 23 || this.type == 121 || this.type == 169 || this.type == 190 || this.type == 191 || this.type == 192 || this.type == 193 || this.type == 194)
            {
                if (this.type == 2 || this.type == 190 || this.type == 191 || this.type == 192 || this.type == 193 || this.type == 194)
                {
                    if (this.velocity.X > 0f)
                    {
                        this.spriteDirection = 1;
                        this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X);
                    }
                    if (this.velocity.X < 0f)
                    {
                        this.spriteDirection = -1;
                        this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) + 3.14f;
                    }
                }
                else
                {
                    if (this.type == 2 || this.type == 121)
                    {
                        if (this.velocity.X > 0f)
                        {
                            this.spriteDirection = 1;
                        }
                        if (this.velocity.X < 0f)
                        {
                            this.spriteDirection = -1;
                        }
                        this.rotation = this.velocity.X*0.1f;
                    }
                }
                this.frameCounter += 1.0;
                if (this.frameCounter >= 8.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 133)
            {
                if (this.velocity.X > 0f)
                {
                    this.spriteDirection = 1;
                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X);
                }
                if (this.velocity.X < 0f)
                {
                    this.spriteDirection = -1;
                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) + 3.14f;
                }
                this.frameCounter += 1.0;
                if (this.frameCounter >= 8.0)
                {
                    this.frame.Y = num;
                }
                else
                {
                    this.frame.Y = 0;
                }
                if (this.frameCounter >= 16.0)
                {
                    this.frame.Y = 0;
                    this.frameCounter = 0.0;
                }
                if ((double) this.life < (double) this.lifeMax*0.5)
                {
                    this.frame.Y = this.frame.Y + num*2;
                }
            }
            if (this.type == 116)
            {
                if (this.velocity.X > 0f)
                {
                    this.spriteDirection = 1;
                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X);
                }
                if (this.velocity.X < 0f)
                {
                    this.spriteDirection = -1;
                    this.rotation = (float) Math.Atan2((double) this.velocity.Y, (double) this.velocity.X) + 3.14f;
                }
                this.frameCounter += 1.0;
                if (this.frameCounter >= 5.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 75)
            {
                if (this.velocity.X > 0f)
                {
                    this.spriteDirection = 1;
                }
                else
                {
                    this.spriteDirection = -1;
                }
                this.rotation = this.velocity.X*0.1f;
                this.frameCounter += 1.0;
                if (this.frameCounter >= 4.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 157)
            {
                this.spriteDirection = this.direction;
                this.frameCounter += 1.0;
                if (!this.wet)
                {
                    this.frameCounter += 1.0;
                }
                int num5 = 5;
                if (this.frameCounter < (double) num5)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if (this.frameCounter < (double) (num5*2))
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.frameCounter < (double) (num5*3))
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            if (this.frameCounter < (double) (num5*4))
                            {
                                this.frame.Y = num;
                            }
                            else
                            {
                                if (this.frameCounter < (double) (num5*5))
                                {
                                    this.frame.Y = num*3;
                                }
                                else
                                {
                                    if (this.frameCounter < (double) (num5*6))
                                    {
                                        this.frame.Y = num*4;
                                    }
                                    else
                                    {
                                        if (this.frameCounter < (double) (num5*7))
                                        {
                                            this.frame.Y = num*5;
                                        }
                                        else
                                        {
                                            if (this.frameCounter < (double) (num5*8))
                                            {
                                                this.frame.Y = num*4;
                                            }
                                            else
                                            {
                                                this.frameCounter = 0.0;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (this.type == 55 || this.type == 57 || this.type == 58 || this.type == 102 || this.type == 241)
            {
                this.spriteDirection = this.direction;
                this.frameCounter += 1.0;
                if (this.wet)
                {
                    if (this.frameCounter < 6.0)
                    {
                        this.frame.Y = 0;
                    }
                    else
                    {
                        if (this.frameCounter < 12.0)
                        {
                            this.frame.Y = num;
                        }
                        else
                        {
                            if (this.frameCounter < 18.0)
                            {
                                this.frame.Y = num*2;
                            }
                            else
                            {
                                if (this.frameCounter < 24.0)
                                {
                                    this.frame.Y = num*3;
                                }
                                else
                                {
                                    this.frameCounter = 0.0;
                                }
                            }
                        }
                    }
                }
                else
                {
                    if (this.frameCounter < 6.0)
                    {
                        this.frame.Y = num*4;
                    }
                    else
                    {
                        if (this.frameCounter < 12.0)
                        {
                            this.frame.Y = num*5;
                        }
                        else
                        {
                            this.frameCounter = 0.0;
                        }
                    }
                }
            }
            if (this.type == 69)
            {
                if (this.ai[0] < 190f)
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 6.0)
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = this.frame.Y + num;
                        if (this.frame.Y/num >= Main.npcFrameCount[this.type] - 1)
                        {
                            this.frame.Y = 0;
                        }
                    }
                }
                else
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = num*(Main.npcFrameCount[this.type] - 1);
                }
            }
            if (this.type == 155)
            {
                if (this.velocity.Y > 0f)
                {
                    this.frame.Y = num*4;
                    this.frameCounter = 0.0;
                }
                else
                {
                    if (this.velocity.Y < 0f)
                    {
                        this.frame.Y = num*6;
                        this.frameCounter = 0.0;
                    }
                    else
                    {
                        this.spriteDirection = this.direction;
                        this.frameCounter += (double) (Math.Abs(this.velocity.X)*0.4f);
                        if ((this.direction > 0 && this.velocity.X < 0f) || (this.direction < 0 && this.velocity.X > 0f))
                        {
                            this.frameCounter = 0.0;
                            this.frame.Y = 0;
                        }
                        else
                        {
                            if (this.frameCounter < 8.0)
                            {
                                this.frame.Y = num*3;
                            }
                            else
                            {
                                if (this.frameCounter < 16.0)
                                {
                                    this.frame.Y = num*6;
                                }
                                else
                                {
                                    if (this.frameCounter < 24.0)
                                    {
                                        this.frame.Y = num*4;
                                    }
                                    else
                                    {
                                        if (this.frameCounter < 32.0)
                                        {
                                            this.frame.Y = num*5;
                                        }
                                        else
                                        {
                                            this.frameCounter = 0.0;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (this.type == 86)
            {
                if (this.velocity.Y == 0f || this.wet)
                {
                    if (this.velocity.X < -2f)
                    {
                        this.spriteDirection = -1;
                    }
                    else
                    {
                        if (this.velocity.X > 2f)
                        {
                            this.spriteDirection = 1;
                        }
                        else
                        {
                            this.spriteDirection = this.direction;
                        }
                    }
                }
                if (this.velocity.Y != 0f)
                {
                    this.frame.Y = num*15;
                    this.frameCounter = 0.0;
                }
                else
                {
                    if (this.velocity.X == 0f)
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = 0;
                    }
                    else
                    {
                        if (Math.Abs(this.velocity.X) < 3f)
                        {
                            this.frameCounter += (double) Math.Abs(this.velocity.X);
                            if (this.frameCounter >= 6.0)
                            {
                                this.frameCounter = 0.0;
                                this.frame.Y = this.frame.Y + num;
                                if (this.frame.Y/num >= 9)
                                {
                                    this.frame.Y = num;
                                }
                                if (this.frame.Y/num <= 0)
                                {
                                    this.frame.Y = num;
                                }
                            }
                        }
                        else
                        {
                            this.frameCounter += (double) Math.Abs(this.velocity.X);
                            if (this.frameCounter >= 10.0)
                            {
                                this.frameCounter = 0.0;
                                this.frame.Y = this.frame.Y + num;
                                if (this.frame.Y/num >= 15)
                                {
                                    this.frame.Y = num*9;
                                }
                                if (this.frame.Y/num <= 8)
                                {
                                    this.frame.Y = num*9;
                                }
                            }
                        }
                    }
                }
            }
            if (this.type == 127)
            {
                if (this.ai[1] == 0f)
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 12.0)
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = this.frame.Y + num;
                        if (this.frame.Y/num >= 2)
                        {
                            this.frame.Y = 0;
                        }
                    }
                }
                else
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = num*2;
                }
            }
            if (this.type == 129)
            {
                if (this.velocity.Y == 0f)
                {
                    this.spriteDirection = this.direction;
                }
                this.frameCounter += 1.0;
                if (this.frameCounter >= 2.0)
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = this.frame.Y + num;
                    if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 130)
            {
                if (this.velocity.Y == 0f)
                {
                    this.spriteDirection = this.direction;
                }
                this.frameCounter += 1.0;
                if (this.frameCounter >= 8.0)
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = this.frame.Y + num;
                    if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 67 || this.type == 217 || this.type == 218 || this.type == 219)
            {
                if (this.velocity.Y == 0f)
                {
                    this.spriteDirection = this.direction;
                }
                this.frameCounter += 1.0;
                if (this.frameCounter >= 6.0)
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = this.frame.Y + num;
                    if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 220)
            {
                if (this.velocity.Y == 0f)
                {
                    this.spriteDirection = this.direction;
                }
                this.frameCounter += 1.0;
                if (this.frameCounter >= 10.0)
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = this.frame.Y + num;
                    if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 109)
            {
                if (this.velocity.Y == 0f && ((this.velocity.X <= 0f && this.direction < 0) || (this.velocity.X >= 0f && this.direction > 0)))
                {
                    this.spriteDirection = this.direction;
                }
                this.frameCounter += (double) Math.Abs(this.velocity.X);
                if (this.frameCounter >= 7.0)
                {
                    this.frameCounter -= 7.0;
                    this.frame.Y = this.frame.Y + num;
                    if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 83 || this.type == 84 || this.type == 179)
            {
                if (this.ai[0] == 2f)
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = 0;
                }
                else
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter >= 4.0)
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = this.frame.Y + num;
                        if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                        {
                            this.frame.Y = 0;
                        }
                    }
                }
            }
            if (this.type == 72)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter >= 3.0)
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = this.frame.Y + num;
                    if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                    {
                        this.frame.Y = 0;
                    }
                }
            }
            if (this.type == 65)
            {
                this.spriteDirection = this.direction;
                this.frameCounter += 1.0;
                if (this.wet)
                {
                    if (this.frameCounter < 6.0)
                    {
                        this.frame.Y = 0;
                    }
                    else
                    {
                        if (this.frameCounter < 12.0)
                        {
                            this.frame.Y = num;
                        }
                        else
                        {
                            if (this.frameCounter < 18.0)
                            {
                                this.frame.Y = num*2;
                            }
                            else
                            {
                                if (this.frameCounter < 24.0)
                                {
                                    this.frame.Y = num*3;
                                }
                                else
                                {
                                    this.frameCounter = 0.0;
                                }
                            }
                        }
                    }
                }
            }
            if (this.type == 224)
            {
                if (this.velocity.X > 0f)
                {
                    this.spriteDirection = 1;
                    this.rotation = this.velocity.Y*0.2f;
                }
                if (this.velocity.X < 0f)
                {
                    this.spriteDirection = -1;
                    this.rotation = -this.velocity.Y*0.2f;
                }
                this.frameCounter += 1.0;
                if (this.frameCounter >= 6.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*4)
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 150 || this.type == 151 || this.type == 152 || this.type == 158 || this.type == 226)
            {
                if (this.velocity.X > 0f)
                {
                    this.spriteDirection = 1;
                }
                if (this.velocity.X < 0f)
                {
                    this.spriteDirection = -1;
                }
                this.rotation = this.velocity.X*0.1f;
                this.frameCounter += 1.0;
                if (this.frameCounter >= 6.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*4)
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 48 || this.type == 49 || /*this.type == 51 || */ this.type == 60 || this.type == 82 || this.type == 93 || this.type == 137 || this.type == 182 || this.type == 210 || this.type == 211 || this.type == 253)
            {
                if (this.velocity.X > 0f)
                {
                    this.spriteDirection = 1;
                }
                if (this.velocity.X < 0f)
                {
                    this.spriteDirection = -1;
                }
                this.rotation = this.velocity.X*0.1f;
                if (this.type == 210 || this.type == 211)
                {
                    this.frameCounter += 1.0;
                    this.rotation = this.velocity.X*0.2f;
                }
                this.frameCounter += 1.0;
                if (this.frameCounter >= 6.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 42 || (this.type >= 231 && this.type <= 235))
            {
                this.frameCounter += 1.0;
                if (this.frameCounter < 2.0)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if (this.frameCounter < 4.0)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.frameCounter < 6.0)
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            if (this.frameCounter < 8.0)
                            {
                                this.frame.Y = num;
                            }
                            else
                            {
                                this.frameCounter = 0.0;
                            }
                        }
                    }
                }
            }
            if (this.type == 205)
            {
                this.frameCounter += 0.5;
                if (this.frameCounter < 2.0)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if (this.frameCounter < 4.0)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.frameCounter < 6.0)
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            if (this.frameCounter < 8.0)
                            {
                                this.frame.Y = num;
                            }
                            else
                            {
                                this.frameCounter = 0.0;
                            }
                        }
                    }
                }
            }
            if (this.type == 176)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter > 4.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y > num)
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 43 || this.type == 56 || this.type == 175)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter < 6.0)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if (this.frameCounter < 12.0)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.frameCounter < 18.0)
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            if (this.frameCounter < 24.0)
                            {
                                this.frame.Y = num;
                            }
                        }
                    }
                }
                if (this.frameCounter == 23.0)
                {
                    this.frameCounter = 0.0;
                }
            }
            if (this.type == 115)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter < 3.0)
                {
                    this.frame.Y = 0;
                }
                else
                {
                    if (this.frameCounter < 6.0)
                    {
                        this.frame.Y = num;
                    }
                    else
                    {
                        if (this.frameCounter < 12.0)
                        {
                            this.frame.Y = num*2;
                        }
                        else
                        {
                            if (this.frameCounter < 15.0)
                            {
                                this.frame.Y = num;
                            }
                        }
                    }
                }
                if (this.frameCounter == 15.0)
                {
                    this.frameCounter = 0.0;
                }
            }
            if (this.type == 101)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter > 6.0)
                {
                    this.frame.Y = this.frame.Y + num*2;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y > num*2)
                {
                    this.frame.Y = 0;
                }
            }
            if (this.type == 199)
            {
                if (this.velocity.Y == 0f)
                {
                    if (this.direction == 1)
                    {
                        this.spriteDirection = 1;
                    }
                    if (this.direction == -1)
                    {
                        this.spriteDirection = -1;
                    }
                }
                if (this.frame.Y < num*3)
                {
                    this.frameCounter += 1.0;
                    if (this.frameCounter > 6.0)
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = this.frame.Y + num;
                    }
                }
                else
                {
                    if (this.velocity.Y == 0f)
                    {
                        this.frameCounter += (double) Math.Abs(this.velocity.X);
                        if (this.frameCounter > 12.0)
                        {
                            this.frameCounter = 0.0;
                            this.frame.Y = this.frame.Y + num;
                            if (this.frame.Y > num*7)
                            {
                                this.frame.Y = num*3;
                            }
                        }
                    }
                }
            }
            if (this.type == 17 || this.type == 18 || this.type == 19 || this.type == 20 || this.type == 22 || this.type == 142 || this.type == 178 || this.type == 38 || this.type == 26 || this.type == 27 || this.type == 28 || this.type == 31 || this.type == 294 || this.type == 295 || this.type == 296 || this.type == 21 || this.type == 44 || this.type == 54 || this.type == 37 || this.type == 73 || this.type == 77 || this.type == 78 || this.type == 79 || this.type == 80 || this.type == 104 || this.type == 107 || this.type == 108 || this.type == 120 || this.type == 124 || /*this.type == 140 || */ this.type == 159 || this.type == 160 || this.type == 167 || this.type == 181 || this.type == 185 || this.type == 196 || this.type == 197 || this.type == 198 || this.type == 201 || this.type == 202 || this.type == 203 || this.type == 207 || this.type == 208 || this.type == 209 || this.type == 212 || this.type == 213 || this.type == 227 || this.type == 228 || this.type == 229 || this.type == 287)
            {
                if (this.velocity.Y == 0f)
                {
                    if (this.direction == 1)
                    {
                        this.spriteDirection = 1;
                    }
                    if (this.direction == -1)
                    {
                        this.spriteDirection = -1;
                    }
                    if (this.velocity.X == 0f)
                    {
                        if /*(this.type == 140 || */ (this.type == 287)
                        {
                            this.frame.Y = num;
                            this.frameCounter = 0.0;
                        }
                        else
                        {
                            this.frame.Y = 0;
                            this.frameCounter = 0.0;
                        }
                    }
                    else
                    {
                        this.frameCounter += (double) (Math.Abs(this.velocity.X)*2f);
                        this.frameCounter += 1.0;
                        if (this.frameCounter > 6.0)
                        {
                            this.frame.Y = this.frame.Y + num;
                            this.frameCounter = 0.0;
                        }
                        if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                        {
                            this.frame.Y = num*2;
                        }
                    }
                }
                else
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = num;
                    if (this.type == 21 || this.type == 31 || this.type == 294 || this.type == 295 || this.type == 296 || this.type == 44 || this.type == 77 || this.type == 78 || this.type == 79 || this.type == 80 || this.type == 120 || /*this.type == 140 || */ this.type == 159 || this.type == 167 || this.type == 197 || this.type == 201 || this.type == 202 || this.type == 203 || this.type == 287)
                    {
                        this.frame.Y = 0;
                    }
                    if (this.type == 181)
                    {
                        this.frame.Y = num*14;
                    }
                }
            }
            if (this.type >= 269 && this.type <= 280)
            {
                if (this.velocity.Y == 0f)
                {
                    if (this.direction == 1)
                    {
                        this.spriteDirection = 1;
                    }
                    if (this.direction == -1)
                    {
                        this.spriteDirection = -1;
                    }
                    if (this.velocity.X == 0f)
                    {
                        //if (this.type == 140)
                        //{
                        //    this.frame.Y = num;
                        //    this.frameCounter = 0.0;
                        //}
                        //else
                        {
                            this.frame.Y = 0;
                            this.frameCounter = 0.0;
                        }
                    }
                    else
                    {
                        this.frameCounter += (double) (Math.Abs(this.velocity.X)*2f);
                        this.frameCounter += 1.0;
                        if (this.frameCounter > 6.0)
                        {
                            this.frame.Y = this.frame.Y + num;
                            this.frameCounter = 0.0;
                        }
                        if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                        {
                            this.frame.Y = num*2;
                        }
                    }
                }
                else
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = 0;
                }
            }
            if (this.type == 230)
            {
                if (this.velocity.Y == 0f)
                {
                    this.rotation = 0f;
                    if (this.direction == 1)
                    {
                        this.spriteDirection = 1;
                    }
                    if (this.direction == -1)
                    {
                        this.spriteDirection = -1;
                    }
                    if (this.velocity.X == 0f)
                    {
                        this.frame.Y = 0;
                        this.frameCounter = 0.0;
                    }
                    else
                    {
                        this.frameCounter += (double) (Math.Abs(this.velocity.X)*2f);
                        this.frameCounter += 1.0;
                        if (this.frameCounter > 10.0)
                        {
                            this.frame.Y = this.frame.Y + num;
                            this.frameCounter = 0.0;
                        }
                        if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                        {
                            this.frame.Y = 0;
                        }
                    }
                }
                else
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = 0;
                    if (this.velocity.Y > 4f)
                    {
                        this.rotation -= this.velocity.Y*0.01f;
                    }
                }
            }
            else
            {
                if (this.type == 290)
                {
                    if (this.velocity.Y == 0f)
                    {
                        if (this.direction == 1)
                        {
                            this.spriteDirection = 1;
                        }
                        if (this.direction == -1)
                        {
                            this.spriteDirection = -1;
                        }
                        if (this.ai[2] > 0f)
                        {
                            if (this.ai[1] < 10f)
                            {
                                this.frame.Y = num*11;
                            }
                            else
                            {
                                if (this.ai[1] < 20f)
                                {
                                    this.frame.Y = num*10;
                                }
                                else
                                {
                                    this.frame.Y = num*9;
                                }
                            }
                        }
                        else
                        {
                            if (this.velocity.X == 0f)
                            {
                                this.frameCounter = 0.0;
                                this.frame.Y = 0;
                            }
                            else
                            {
                                if (this.frame.Y < num*2)
                                {
                                    this.frame.Y = num*2;
                                }
                                this.frameCounter += (double) (Math.Abs(this.velocity.X)*1f);
                                if (this.frameCounter > 6.0)
                                {
                                    this.frame.Y = this.frame.Y + num;
                                    this.frameCounter = 0.0;
                                }
                                if (this.frame.Y > num*8)
                                {
                                    this.frame.Y = num*2;
                                }
                            }
                        }
                    }
                    else
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = num;
                    }
                }
                else
                {
                    if (this.type == 110 || this.type == 214 || this.type == 215 || this.type == 216 || this.type == 291 || this.type == 292 || this.type == 293)
                    {
                        if (this.velocity.Y == 0f)
                        {
                            if (this.direction == 1)
                            {
                                this.spriteDirection = 1;
                            }
                            if (this.direction == -1)
                            {
                                this.spriteDirection = -1;
                            }
                            if (this.ai[2] > 0f)
                            {
                                this.spriteDirection = this.direction;
                                this.frame.Y = num*(int) this.ai[2];
                                this.frameCounter = 0.0;
                            }
                            else
                            {
                                if (this.frame.Y < num*6)
                                {
                                    this.frame.Y = num*6;
                                }
                                this.frameCounter += (double) (Math.Abs(this.velocity.X)*2f);
                                this.frameCounter += (double) this.velocity.X;
                                if (this.frameCounter > 6.0)
                                {
                                    this.frame.Y = this.frame.Y + num;
                                    this.frameCounter = 0.0;
                                }
                                if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                                {
                                    this.frame.Y = num*6;
                                }
                            }
                        }
                        else
                        {
                            this.frameCounter = 0.0;
                            this.frame.Y = 0;
                        }
                    }
                    else
                    {
                        if (this.type == 206)
                        {
                            if (this.velocity.Y == 0f)
                            {
                                if (this.direction == 1)
                                {
                                    this.spriteDirection = 1;
                                }
                                if (this.direction == -1)
                                {
                                    this.spriteDirection = -1;
                                }
                                if (this.ai[2] > 0f)
                                {
                                    this.spriteDirection = this.direction;
                                    this.frame.Y = num*(int) this.ai[2];
                                    this.frameCounter = 0.0;
                                }
                                else
                                {
                                    if (this.frame.Y < num*6)
                                    {
                                        this.frame.Y = num*6;
                                    }
                                    this.frameCounter += (double) (Math.Abs(this.velocity.X)*2f);
                                    this.frameCounter += (double) this.velocity.X;
                                    if (this.frameCounter > 6.0)
                                    {
                                        this.frame.Y = this.frame.Y + num;
                                        this.frameCounter = 0.0;
                                    }
                                    if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                                    {
                                        this.frame.Y = num*6;
                                    }
                                }
                            }
                            else
                            {
                                this.frameCounter = 0.0;
                                this.frame.Y = 0;
                            }
                        }
                    }
                }
            }
            if (this.type == 111)
            {
                if (this.velocity.Y == 0f)
                {
                    if (this.direction == 1)
                    {
                        this.spriteDirection = 1;
                    }
                    if (this.direction == -1)
                    {
                        this.spriteDirection = -1;
                    }
                    if (this.ai[2] > 0f)
                    {
                        this.spriteDirection = this.direction;
                        this.frame.Y = num*((int) this.ai[2] - 1);
                        this.frameCounter = 0.0;
                    }
                    else
                    {
                        if (this.frame.Y < num*7)
                        {
                            this.frame.Y = num*7;
                        }
                        this.frameCounter += (double) (Math.Abs(this.velocity.X)*2f);
                        this.frameCounter += (double) (this.velocity.X*1.3f);
                        if (this.frameCounter > 6.0)
                        {
                            this.frame.Y = this.frame.Y + num;
                            this.frameCounter = 0.0;
                        }
                        if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                        {
                            this.frame.Y = num*7;
                        }
                    }
                }
                else
                {
                    this.frameCounter = 0.0;
                    this.frame.Y = num*6;
                }
            }
            else
            {
                if (this.type == 257)
                {
                    if (this.velocity.Y == 0f)
                    {
                        if (this.direction == 1)
                        {
                            this.spriteDirection = 1;
                        }
                        if (this.direction == -1)
                        {
                            this.spriteDirection = -1;
                        }
                    }
                    if (this.velocity.Y != 0f || (this.direction == -1 && this.velocity.X > 0f) || (this.direction == 1 && this.velocity.X < 0f))
                    {
                        this.frameCounter = 0.0;
                        this.frame.Y = num*4;
                    }
                    else
                    {
                        if (this.velocity.X == 0f)
                        {
                            this.frameCounter = 0.0;
                            this.frame.Y = 0;
                        }
                        else
                        {
                            this.frameCounter += (double) Math.Abs(this.velocity.X);
                            if (this.frameCounter < 8.0)
                            {
                                this.frame.Y = 0;
                            }
                            else
                            {
                                if (this.frameCounter < 16.0)
                                {
                                    this.frame.Y = num;
                                }
                                else
                                {
                                    if (this.frameCounter < 24.0)
                                    {
                                        this.frame.Y = num*2;
                                    }
                                    else
                                    {
                                        if (this.frameCounter < 32.0)
                                        {
                                            this.frame.Y = num*3;
                                        }
                                        else
                                        {
                                            this.frameCounter = 0.0;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                else
                {
                    if (this.type == 258)
                    {
                        if (this.velocity.Y == 0f)
                        {
                            if (this.direction == 1)
                            {
                                this.spriteDirection = 1;
                            }
                            if (this.direction == -1)
                            {
                                this.spriteDirection = -1;
                            }
                        }
                        if (this.velocity.Y != 0f || (this.direction == -1 && this.velocity.X > 0f) || (this.direction == 1 && this.velocity.X < 0f))
                        {
                            this.frameCounter += 1.0;
                            if (this.frameCounter > 1.0)
                            {
                                this.frame.Y = this.frame.Y + num;
                                this.frameCounter = 0.0;
                            }
                            if (this.frame.Y > num*5 || this.frame.Y < num*3)
                            {
                                this.frame.Y = num*3;
                            }
                        }
                        else
                        {
                            if (this.velocity.X == 0f)
                            {
                                this.frameCounter = 0.0;
                                this.frame.Y = 0;
                            }
                            else
                            {
                                this.frameCounter += (double) Math.Abs(this.velocity.X);
                                if (this.frameCounter < 8.0)
                                {
                                    this.frame.Y = 0;
                                }
                                else
                                {
                                    if (this.frameCounter < 16.0)
                                    {
                                        this.frame.Y = num;
                                    }
                                    else
                                    {
                                        if (this.frameCounter < 24.0)
                                        {
                                            this.frame.Y = num*2;
                                        }
                                        else
                                        {
                                            this.frameCounter = 0.0;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                        if (this.type == 3 || this.type == 52 || this.type == 53 || this.type == 132 || this.type == 161 || this.type == 162 || this.type == 166 || this.type == 186 || this.type == 187 || this.type == 188 || this.type == 189 || this.type == 200 || this.type == 223 || this.type == 251 || this.type == 254 || this.type == 255)
                        {
                            if (this.velocity.Y == 0f)
                            {
                                if (this.direction == 1)
                                {
                                    this.spriteDirection = 1;
                                }
                                if (this.direction == -1)
                                {
                                    this.spriteDirection = -1;
                                }
                            }
                            if (this.velocity.Y != 0f || (this.direction == -1 && this.velocity.X > 0f) || (this.direction == 1 && this.velocity.X < 0f))
                            {
                                this.frameCounter = 0.0;
                                this.frame.Y = num*2;
                            }
                            else
                            {
                                if (this.velocity.X == 0f)
                                {
                                    this.frameCounter = 0.0;
                                    this.frame.Y = 0;
                                }
                                else
                                {
                                    this.frameCounter += (double) Math.Abs(this.velocity.X);
                                    if (this.frameCounter < 8.0)
                                    {
                                        this.frame.Y = 0;
                                    }
                                    else
                                    {
                                        if (this.frameCounter < 16.0)
                                        {
                                            this.frame.Y = num;
                                        }
                                        else
                                        {
                                            if (this.frameCounter < 24.0)
                                            {
                                                this.frame.Y = num*2;
                                            }
                                            else
                                            {
                                                if (this.frameCounter < 32.0)
                                                {
                                                    this.frame.Y = num;
                                                }
                                                else
                                                {
                                                    this.frameCounter = 0.0;
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        else
                        {
                            if (this.type == 148 || this.type == 149 || this.type == 168)
                            {
                                int num6 = 0;
                                if (this.localAI[0] == 2f)
                                {
                                    num6 = 3;
                                }
                                if (this.localAI[0] == 3f)
                                {
                                    num6 = 6;
                                }
                                if (this.localAI[0] == 4f)
                                {
                                    num6 = 9;
                                }
                                num6 *= num;
                                if (this.velocity.Y == 0f)
                                {
                                    if (this.direction == 1)
                                    {
                                        this.spriteDirection = 1;
                                    }
                                    if (this.direction == -1)
                                    {
                                        this.spriteDirection = -1;
                                    }
                                    if (this.velocity.X == 0f)
                                    {
                                        this.frame.Y = num6;
                                        this.frameCounter = 0.0;
                                    }
                                    else
                                    {
                                        this.frameCounter += (double) (Math.Abs(this.velocity.X)*1f);
                                        if (this.frameCounter < 6.0)
                                        {
                                            this.frame.Y = num6;
                                        }
                                        else
                                        {
                                            if (this.frameCounter < 12.0)
                                            {
                                                this.frame.Y = num + num6;
                                            }
                                            else
                                            {
                                                if (this.frameCounter < 15.0)
                                                {
                                                    this.frame.Y = num*2 + num6;
                                                }
                                                else
                                                {
                                                    this.frameCounter = 0.0;
                                                    this.frame.Y = num*2 + num6;
                                                }
                                            }
                                        }
                                    }
                                }
                                else
                                {
                                    if (this.velocity.Y < 0f)
                                    {
                                        this.frameCounter = 0.0;
                                        this.frame.Y = num*2 + num6;
                                    }
                                    else
                                    {
                                        if (this.velocity.Y > 0f)
                                        {
                                            this.frameCounter = 0.0;
                                            this.frame.Y = num*2 + num6;
                                        }
                                    }
                                }
                            }
                            else
                            {
                                if (this.type == 46 || this.type == 47)
                                {
                                    if (this.velocity.Y == 0f)
                                    {
                                        if (this.direction == 1)
                                        {
                                            this.spriteDirection = 1;
                                        }
                                        if (this.direction == -1)
                                        {
                                            this.spriteDirection = -1;
                                        }
                                        if (this.velocity.X == 0f)
                                        {
                                            this.frame.Y = 0;
                                            this.frameCounter = 0.0;
                                        }
                                        else
                                        {
                                            this.frameCounter += (double) (Math.Abs(this.velocity.X)*1f);
                                            this.frameCounter += 1.0;
                                            if (this.frameCounter > 6.0)
                                            {
                                                this.frame.Y = this.frame.Y + num;
                                                this.frameCounter = 0.0;
                                            }
                                            if (this.frame.Y/num >= Main.npcFrameCount[this.type])
                                            {
                                                this.frame.Y = 0;
                                            }
                                        }
                                    }
                                    else
                                    {
                                        if (this.velocity.Y < 0f)
                                        {
                                            this.frameCounter = 0.0;
                                            this.frame.Y = num*4;
                                        }
                                        else
                                        {
                                            if (this.velocity.Y > 0f)
                                            {
                                                this.frameCounter = 0.0;
                                                this.frame.Y = num*6;
                                            }
                                        }
                                    }
                                }
                                else
                                {
                                    if (this.type == 4 || this.type == 125 || this.type == 126)
                                    {
                                        this.frameCounter += 1.0;
                                        if (this.frameCounter < 7.0)
                                        {
                                            this.frame.Y = 0;
                                        }
                                        else
                                        {
                                            if (this.frameCounter < 14.0)
                                            {
                                                this.frame.Y = num;
                                            }
                                            else
                                            {
                                                if (this.frameCounter < 21.0)
                                                {
                                                    this.frame.Y = num*2;
                                                }
                                                else
                                                {
                                                    this.frameCounter = 0.0;
                                                    this.frame.Y = 0;
                                                }
                                            }
                                        }
                                        if (this.ai[0] > 1f)
                                        {
                                            this.frame.Y = this.frame.Y + num*3;
                                        }
                                    }
                                    else
                                    {
                                        if (this.type == 5)
                                        {
                                            this.frameCounter += 1.0;
                                            if (this.frameCounter >= 8.0)
                                            {
                                                this.frame.Y = this.frame.Y + num;
                                                this.frameCounter = 0.0;
                                            }
                                            if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                                            {
                                                this.frame.Y = 0;
                                            }
                                        }
                                        else
                                        {
                                            if (this.type == 94)
                                            {
                                                this.frameCounter += 1.0;
                                                if (this.frameCounter < 6.0)
                                                {
                                                    this.frame.Y = 0;
                                                }
                                                else
                                                {
                                                    if (this.frameCounter < 12.0)
                                                    {
                                                        this.frame.Y = num;
                                                    }
                                                    else
                                                    {
                                                        if (this.frameCounter < 18.0)
                                                        {
                                                            this.frame.Y = num*2;
                                                        }
                                                        else
                                                        {
                                                            this.frame.Y = num;
                                                            if (this.frameCounter >= 23.0)
                                                            {
                                                                this.frameCounter = 0.0;
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (this.type == 6 || this.type == 173)
                                                {
                                                    this.frameCounter += 1.0;
                                                    if (this.frameCounter >= 8.0)
                                                    {
                                                        this.frame.Y = this.frame.Y + num;
                                                        this.frameCounter = 0.0;
                                                    }
                                                    if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                                                    {
                                                        this.frame.Y = 0;
                                                    }
                                                }
                                                else
                                                {
                                                    if (this.type == 24)
                                                    {
                                                        if (this.velocity.Y == 0f)
                                                        {
                                                            if (this.direction == 1)
                                                            {
                                                                this.spriteDirection = 1;
                                                            }
                                                            if (this.direction == -1)
                                                            {
                                                                this.spriteDirection = -1;
                                                            }
                                                        }
                                                        if (this.ai[1] > 0f)
                                                        {
                                                            if (this.frame.Y < 4)
                                                            {
                                                                this.frameCounter = 0.0;
                                                            }
                                                            this.frameCounter += 1.0;
                                                            if (this.frameCounter <= 4.0)
                                                            {
                                                                this.frame.Y = num*4;
                                                            }
                                                            else
                                                            {
                                                                if (this.frameCounter <= 8.0)
                                                                {
                                                                    this.frame.Y = num*5;
                                                                }
                                                                else
                                                                {
                                                                    if (this.frameCounter <= 12.0)
                                                                    {
                                                                        this.frame.Y = num*6;
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.frameCounter <= 16.0)
                                                                        {
                                                                            this.frame.Y = num*7;
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.frameCounter <= 20.0)
                                                                            {
                                                                                this.frame.Y = num*8;
                                                                            }
                                                                            else
                                                                            {
                                                                                this.frame.Y = num*9;
                                                                                this.frameCounter = 100.0;
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            this.frameCounter += 1.0;
                                                            if (this.frameCounter <= 4.0)
                                                            {
                                                                this.frame.Y = 0;
                                                            }
                                                            else
                                                            {
                                                                if (this.frameCounter <= 8.0)
                                                                {
                                                                    this.frame.Y = num;
                                                                }
                                                                else
                                                                {
                                                                    if (this.frameCounter <= 12.0)
                                                                    {
                                                                        this.frame.Y = num*2;
                                                                    }
                                                                    else
                                                                    {
                                                                        this.frame.Y = num*3;
                                                                        if (this.frameCounter >= 16.0)
                                                                        {
                                                                            this.frameCounter = 0.0;
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.type == 29 || this.type == 32 || this.type == 45 || this.type == 172 || (this.type >= 281 && this.type <= 286))
                                                        {
                                                            if (this.velocity.Y == 0f)
                                                            {
                                                                if (this.direction == 1)
                                                                {
                                                                    this.spriteDirection = 1;
                                                                }
                                                                if (this.direction == -1)
                                                                {
                                                                    this.spriteDirection = -1;
                                                                }
                                                            }
                                                            this.frame.Y = 0;
                                                            if (this.velocity.Y != 0f)
                                                            {
                                                                this.frame.Y = this.frame.Y + num;
                                                            }
                                                            else
                                                            {
                                                                if (this.ai[1] > 0f)
                                                                {
                                                                    this.frame.Y = this.frame.Y + num*2;
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (this.type == 34)
            {
                this.frameCounter += 1.0;
                if (this.frameCounter >= 4.0)
                {
                    this.frame.Y = this.frame.Y + num;
                    this.frameCounter = 0.0;
                }
                if (this.frame.Y >= num*Main.npcFrameCount[this.type])
                {
                    this.frame.Y = 0;
                }
            }
        }

        public void TargetClosest(bool faceTarget = true)
        {
            float num = 0f;
            bool flag = false;
            for (int i = 0; i < 255; i++)
            {
                if (Main.player[i].active && !Main.player[i].dead && Main.player[i].team != this.team)
                {
                    float num2 = Math.Abs(Main.player[i].position.X + (float) (Main.player[i].width/2) - this.position.X + (float) (this.width/2)) + Math.Abs(Main.player[i].position.Y + (float) (Main.player[i].height/2) - this.position.Y + (float) (this.height/2));
                    num2 -= (float) Main.player[i].aggro;
                    if (!flag || num2 < num)
                    {
                        flag = true;
                        num = Math.Abs(Main.player[i].position.X + (float) (Main.player[i].width/2) - this.position.X + (float) (this.width/2)) + Math.Abs(Main.player[i].position.Y + (float) (Main.player[i].height/2) - this.position.Y + (float) (this.height/2));
                        this.target = i;
                    }
                }
            }
            if (this.target < 0 || this.target >= 255)
            {
                this.target = 0;
            }
            this.targetRect = new Rectangle((int) Main.player[this.target].position.X, (int) Main.player[this.target].position.Y, Main.player[this.target].width, Main.player[this.target].height);
            if (Main.player[this.target].dead)
            {
                faceTarget = false;
            }
            if (faceTarget)
            {
                this.direction = 1;
                if ((float) (this.targetRect.X + this.targetRect.Width/2) < this.position.X + (float) (this.width/2))
                {
                    this.direction = -1;
                }
                this.directionY = 1;
                if ((float) (this.targetRect.Y + this.targetRect.Height/2) < this.position.Y + (float) (this.height/2))
                {
                    this.directionY = -1;
                }
            }
            if (this.confused)
            {
                this.direction *= -1;
            }
            if ((this.direction != this.oldDirection || this.directionY != this.oldDirectionY || this.target != this.oldTarget) && !this.collideX && !this.collideY)
            {
                this.netUpdate = true;
            }
        }

        public void TargetClosestTopLane(bool faceTarget = true)
        {
            float num = 0f;
            bool flag = false;
            for (int i = 0; i < 255; i++)
            {
                if (Main.player[i].active && !Main.player[i].dead && Main.player[i].team != this.team && Main.player[i].getRect().Intersects(NPC.TOP_AREA))
                {
                    float num2 = Math.Abs(Main.player[i].position.X + (float) (Main.player[i].width/2) - this.position.X + (float) (this.width/2)) + Math.Abs(Main.player[i].position.Y + (float) (Main.player[i].height/2) - this.position.Y + (float) (this.height/2));
                    num2 -= (float) Main.player[i].aggro;
                    if (!flag || num2 < num)
                    {
                        flag = true;
                        num = Math.Abs(Main.player[i].position.X + (float) (Main.player[i].width/2) - this.position.X + (float) (this.width/2)) + Math.Abs(Main.player[i].position.Y + (float) (Main.player[i].height/2) - this.position.Y + (float) (this.height/2));
                        this.target = i;
                    }
                }
            }
            if (this.target < 0 || this.target >= 255)
            {
                this.target = 0;
            }
            this.targetRect = new Rectangle((int) Main.player[this.target].position.X, (int) Main.player[this.target].position.Y, Main.player[this.target].width, Main.player[this.target].height);
            if (Main.player[this.target].dead)
            {
                faceTarget = false;
            }
            if (faceTarget)
            {
                this.direction = 1;
                if ((float) (this.targetRect.X + this.targetRect.Width/2) < this.position.X + (float) (this.width/2))
                {
                    this.direction = -1;
                }
                this.directionY = 1;
                if ((float) (this.targetRect.Y + this.targetRect.Height/2) < this.position.Y + (float) (this.height/2))
                {
                    this.directionY = -1;
                }
            }
            if (this.confused)
            {
                this.direction *= -1;
            }
            if ((this.direction != this.oldDirection || this.directionY != this.oldDirectionY || this.target != this.oldTarget) && !this.collideX && !this.collideY)
            {
                this.netUpdate = true;
            }
        }

        public void CheckActive()
        {
            if (this.active)
            {
                if (this.type == 8 || this.type == 9 || this.type == 11 || this.type == 12 || this.type == 14 || this.type == 15 || this.type == 40 || this.type == 41 || this.type == 96 || this.type == 97 || this.type == 99 || this.type == 100 || (this.type > 87 && this.type <= 92) || this.type == 118 || this.type == 119 || this.type == 113 || this.type == 114 || this.type == 115 || this.type == 263 || this.type == 267)
                {
                    return;
                }
                if (this.type >= 246 && this.type <= 249)
                {
                    return;
                }
                if (this.type >= 134 && this.type <= 136)
                {
                    return;
                }
                if (this.townNPC)
                {
                    Rectangle rectangle = new Rectangle((int) (this.position.X + (float) (this.width/2) - (float) NPC.townRangeX), (int) (this.position.Y + (float) (this.height/2) - (float) NPC.townRangeY), NPC.townRangeX*2, NPC.townRangeY*2);
                    for (int i = 0; i < 255; i++)
                    {
                        if (Main.player[i].active && rectangle.Intersects(new Rectangle((int) Main.player[i].position.X, (int) Main.player[i].position.Y, Main.player[i].width, Main.player[i].height)))
                        {
                            Main.player[i].townNPCs += this.npcSlots;
                        }
                    }
                    return;
                }
                bool flag = false;
                Rectangle rectangle2 = new Rectangle((int) (this.position.X + (float) (this.width/2) - (float) NPC.activeRangeX), (int) (this.position.Y + (float) (this.height/2) - (float) NPC.activeRangeY), NPC.activeRangeX*2, NPC.activeRangeY*2);
                Rectangle rectangle3 = new Rectangle((int) ((double) (this.position.X + (float) (this.width/2)) - (double) NPC.sWidth*0.5 - (double) this.width), (int) ((double) (this.position.Y + (float) (this.height/2)) - (double) NPC.sHeight*0.5 - (double) this.height), NPC.sWidth + this.width*2, NPC.sHeight + this.height*2);
                for (int j = 0; j < 255; j++)
                {
                    if (Main.player[j].active)
                    {
                        if (rectangle2.Intersects(new Rectangle((int) Main.player[j].position.X, (int) Main.player[j].position.Y, Main.player[j].width, Main.player[j].height)))
                        {
                            flag = true;
                            if (this.type != 25 && this.type != 30 && this.type != 33 && this.lifeMax > 0)
                            {
                                Main.player[j].activeNPCs += this.npcSlots;
                            }
                        }
                        if (rectangle3.Intersects(new Rectangle((int) Main.player[j].position.X, (int) Main.player[j].position.Y, Main.player[j].width, Main.player[j].height)))
                        {
                            this.timeLeft = NPC.activeTime;
                        }
                        if (this.type == 7 || this.type == 10 || this.type == 13 || this.type == 39 || this.type == 87)
                        {
                            flag = true;
                        }
                        if (this.boss || this.type == 35 || this.type == 36 || this.type == 127 || this.type == 128 || this.type == 129 || this.type == 130 || this.type == 131)
                        {
                            flag = true;
                        }
                    }
                }
                this.timeLeft--;
                if (this.timeLeft <= 0)
                {
                    flag = false;
                }
                if (!flag && Main.netMode != 1)
                {
                    //NPC.noSpawnCycle = true;
                    this.active = false;
                    if (this.ichorOwner != -99)
                    {
                        Main.player[ichorOwner].ichorTargets--;
                        this.ichorOwner = -99;
                    }

                    if (Main.netMode == 2)
                    {
                        this.netSkip = -1;
                        this.life = 0;
                        NetMessage.SendData(23, -1, -1, "", this.whoAmI, 0f, 0f, 0f, 0);
                    }
                    if (this.aiStyle == 6)
                    {
                        for (int k = (int) this.ai[0]; k > 0; k = (int) Main.npc[k].ai[0])
                        {
                            if (Main.npc[k].active)
                            {
                                Main.npc[k].active = false;
                                if (Main.npc[k].ichorOwner != -99)
                                {
                                    Main.player[ichorOwner].ichorTargets--;
                                    Main.npc[k].ichorOwner = -99;
                                }
                                if (Main.netMode == 2)
                                {
                                    Main.npc[k].life = 0;
                                    Main.npc[k].netSkip = -1;
                                    NetMessage.SendData(23, -1, -1, "", k, 0f, 0f, 0f, 0);
                                }
                            }
                        }
                    }
                }
            }
        }

        public static void SpawnNPC()
        {
            if (Main.worldName.Equals("STS Boss") || Main.worldChoice.Equals("STS Boss"))
            {
                NPC.SpawnWave();
                return;
            }
            if (Main.worldName.Equals("STS1v1") || Main.worldChoice.Equals("STS1v1"))
            {
                NPC.SpawnNPC1v1();
                return;
            }
            if (Main.worldName.Equals("sts 3v3") || Main.worldChoice.Equals("sts 3v3"))
            {
                NPC.SpawnNPC3v3();
                return;
            }
            if (Main.gameTime == -3600) //towers
            {
                int Tower1 = NPC.NewNPC(225*16 + 8, 285*16, 69, 0); //white base
                if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Tower1, 0f, 0f, 0f, 0);
                int Tower2 = NPC.NewNPC(405*16 + 8, 283*16, 69, 0); //white midway
                if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Tower2, 0f, 0f, 0f, 0);
                int Tower3 = NPC.NewNPC(795*16 + 8, 283*16, 70, 0); //black midway
                if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Tower3, 0f, 0f, 0f, 0);
                int Tower4 = NPC.NewNPC(975*16 + 8, 285*16, 70, 0); //black base
                if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Tower4, 0f, 0f, 0f, 0);
            }
            if ((Main.gameTime >= 0) && ((Main.gameTime%900) <= 240)) //team creeps
            {
                if (Main.gameTime%60 == 0) //little creeps
                {
                    int newWhite = NPC.NewNPC(130*16 + 8, 295*16, 26, 0);
                    Main.npc[newWhite].direction = 1;
                    Main.npc[newWhite].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newWhite, 0f, 0f, 0f, 0);

                    int newBlack = NPC.NewNPC(1065*16 + 8, 295*16, 27, 0);
                    Main.npc[newBlack].direction = -1;
                    Main.npc[newBlack].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newBlack, 0f, 0f, 0f, 0);
                }
            }

            if (Main.gameTime%1800 == 0) //big creeps
            {
                if (Main.blackTowersDowned == 2)
                {
                    int newBigWhite = NPC.NewNPC(130*16 + 8, 295*16, 276, 0);
                    Main.npc[newBigWhite].direction = 1;
                    Main.npc[newBigWhite].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newBigWhite, 0f, 0f, 0f, 0);
                }
                if (Main.whiteTowersDowned == 2)
                {
                    int newBigBlack = NPC.NewNPC(1065*16 + 8, 295*16, 277, 0);
                    Main.npc[newBigBlack].direction = -1;
                    Main.npc[newBigBlack].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newBigBlack, 0f, 0f, 0f, 0);
                }
            }
            //if ((Main.gameTime >= 0) && ((Main.gameTime % 1800) == 0))
            //{
            //    NPC.NewNPC(118 * 16 + 8, 381 * 16, 180, 0);
            //}
            if ((Main.gameTime >= 0) && ((Main.gameTime%900) == 0)) //jungle
            {
                if (NPC.NewNPC(118*16 + 8, 381*16, 56, Main.snatcherw1) != 200)
                {
                    Main.npc[Main.snatcherw1].ai[0] = (float) 118;
                    Main.npc[Main.snatcherw1].ai[1] = (float) 381;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.snatcherw1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(107*16 + 8, 367*16, 56, Main.snatcherw2) != 200)
                {
                    Main.npc[Main.snatcherw2].ai[0] = (float) 107;
                    Main.npc[Main.snatcherw2].ai[1] = (float) 367;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.snatcherw2, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(216*16 + 8, 393*16, 43, Main.maneaterw1) != 200)
                {
                    Main.npc[Main.maneaterw1].ai[0] = (float) 216;
                    Main.npc[Main.maneaterw1].ai[1] = (float) 393;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.maneaterw1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(189*16 + 8, 395*16, 43, Main.maneaterw2) != 200)
                {
                    Main.npc[Main.maneaterw2].ai[0] = (float) 189;
                    Main.npc[Main.maneaterw2].ai[1] = (float) 395;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.maneaterw2, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(270*16 + 8, 393*16, 175, Main.trapperw1) != 200)
                {
                    Main.npc[Main.trapperw1].ai[0] = (float) 270;
                    Main.npc[Main.trapperw1].ai[1] = (float) 393;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.trapperw1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(307*16 + 8, 385*16, 175, Main.trapperw2) != 200)
                {
                    Main.npc[Main.trapperw2].ai[0] = (float) 307;
                    Main.npc[Main.trapperw2].ai[1] = (float) 385;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.trapperw2, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(420*16 + 8, 400*16, 260, Main.mushroomw1) != 200)
                {
                    Main.npc[Main.mushroomw1].ai[0] = (float) 420;
                    Main.npc[Main.mushroomw1].ai[1] = (float) 400;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.mushroomw1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(389*16 + 8, 400*16, 260, Main.mushroomw2) != 200)
                {
                    Main.npc[Main.mushroomw2].ai[0] = (float) 389;
                    Main.npc[Main.mushroomw2].ai[1] = (float) 400;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.mushroomw2, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(455*16 + 8, 387*16, 101, Main.clingerw1) != 200)
                {
                    Main.npc[Main.clingerw1].ai[0] = (float) 455;
                    Main.npc[Main.clingerw1].ai[1] = (float) 387;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.clingerw1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(470*16 + 8, 376*16, 101, Main.clingerw2) != 200)
                {
                    Main.npc[Main.clingerw2].ai[0] = (float) 468;
                    Main.npc[Main.clingerw2].ai[1] = (float) 374;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.clingerw2, 0f, 0f, 0f, 0);
                }

                if (NPC.NewNPC(1088*16 + 8, 395*16, 56, Main.snatcherb1) != 200)
                {
                    Main.npc[Main.snatcherb1].ai[0] = (float) 1088;
                    Main.npc[Main.snatcherb1].ai[1] = (float) 395;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.snatcherb1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(1081*16 + 8, 382*16, 56, Main.snatcherb2) != 200)
                {
                    Main.npc[Main.snatcherb2].ai[0] = (float) 1081;
                    Main.npc[Main.snatcherb2].ai[1] = (float) 382;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.snatcherb2, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(995*16 + 8, 419*16, 43, Main.maneaterb1) != 200)
                {
                    Main.npc[Main.maneaterb1].ai[0] = (float) 995;
                    Main.npc[Main.maneaterb1].ai[1] = (float) 419;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.maneaterb1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(991*16 + 8, 395*16, 43, Main.maneaterb2) != 200)
                {
                    Main.npc[Main.maneaterb2].ai[0] = (float) 989;
                    Main.npc[Main.maneaterb2].ai[1] = (float) 393;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.maneaterb2, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(950*16 + 8, 404*16, 175, Main.trapperb1) != 200)
                {
                    Main.npc[Main.trapperb1].ai[0] = (float) 950;
                    Main.npc[Main.trapperb1].ai[1] = (float) 404;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.trapperb1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(925*16 + 8, 396*16, 175, Main.trapperb2) != 200)
                {
                    Main.npc[Main.trapperb2].ai[0] = (float) 923;
                    Main.npc[Main.trapperb2].ai[1] = (float) 394;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.trapperb2, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(807*16 + 8, 382*16, 260, Main.mushroomb1) != 200)
                {
                    Main.npc[Main.mushroomb1].ai[0] = (float) 807;
                    Main.npc[Main.mushroomb1].ai[1] = (float) 382;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.mushroomb1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(826*16 + 8, 369*16, 260, Main.mushroomb2) != 200)
                {
                    Main.npc[Main.mushroomb2].ai[0] = (float) 824;
                    Main.npc[Main.mushroomb2].ai[1] = (float) 367;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.mushroomb2, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(783*16 + 8, 402*16, 101, Main.clingerb1) != 200)
                {
                    Main.npc[Main.clingerb1].ai[0] = (float) 783;
                    Main.npc[Main.clingerb1].ai[1] = (float) 402;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.clingerb1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(782*16 + 8, 389*16, 101, Main.clingerb2) != 200)
                {
                    Main.npc[Main.clingerb2].ai[0] = (float) 780;
                    Main.npc[Main.clingerb2].ai[1] = (float) 387;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.clingerb2, 0f, 0f, 0f, 0);
                }
            }
            return;
        }

        public static void SpawnWave()
        {
            if (Main.waveCounter <= 0 || Main.gameTime <= 0)
            {
                return;
            }
            if (Main.waveSpawnCD <= 0)
            {
                int nextSpawn = Main.rand.Next(10);
                Vector2 nextLocation = NPC.WAVE_SPAWNS[Main.rand.Next(NPC.WAVE_SPAWNS.Length)];
                if (nextSpawn == 0)
                {
                    NPC.NewNPC((int) nextLocation.X, (int) nextLocation.Y, Main.wave_minions[2]);
                    Main.waveSpawnCD = 120;
                }
                else if (nextSpawn < 4)
                {
                    NPC.NewNPC((int) nextLocation.X, (int) nextLocation.Y, Main.wave_minions[1]);
                    Main.waveSpawnCD = 60;
                }
                else
                {
                    NPC.NewNPC((int) nextLocation.X, (int) nextLocation.Y, Main.wave_minions[0]);
                    Main.waveSpawnCD = 30;
                }
            }
            else Main.waveSpawnCD--;
        }

        public static void SpawnNPC1v1()
        {
            if (Main.gameTime == -3600) //towers
            {
                int Tower1 = NPC.NewNPC(187*16 + 8, 180*16, 69, 0); //white base
                if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Tower1, 0f, 0f, 0f, 0);
                int Tower2 = NPC.NewNPC(345*16 + 8, 180*16, 70, 0); //black base
                if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Tower2, 0f, 0f, 0f, 0);
                int Tower3 = NPC.NewNPC(187*16 + 8, 226*16, 69, 0); //white base
                if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Tower3, 0f, 0f, 0f, 0);
                int Tower4 = NPC.NewNPC(345*16 + 8, 226*16, 70, 0); //black base
                if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Tower4, 0f, 0f, 0f, 0);
            }

            if ((Main.gameTime >= 0) && ((Main.gameTime%1200) <= 120)) //team creeps
            {
                if (Main.gameTime%40 == 0) //little creeps
                {
                    int newWhite = NPC.NewNPC(187*16 + 8, 225*16, 26, 0);
                    Main.npc[newWhite].direction = 1;
                    Main.npc[newWhite].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newWhite, 0f, 0f, 0f, 0);

                    int newBlack = NPC.NewNPC(345*16 + 8, 225*16, 27, 0);
                    Main.npc[newBlack].direction = -1;
                    Main.npc[newBlack].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newBlack, 0f, 0f, 0f, 0);
                }
                if (Main.gameTime%60 == 0) //little creeps
                {
                    int newWhite = NPC.NewNPC(208*16 + 8, 160*16, 26, 0);
                    Main.npc[newWhite].direction = 1;
                    Main.npc[newWhite].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newWhite, 0f, 0f, 0f, 0);

                    int newBlack = NPC.NewNPC(324*16 + 8, 160*16, 27, 0);
                    Main.npc[newBlack].direction = -1;
                    Main.npc[newBlack].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newBlack, 0f, 0f, 0f, 0);
                }
            }

            if (Main.gameTime%1800 <= 120) //big creeps
            {
                if (Main.blackTowersDowned == 2 && Main.gameTime%1800 == 0)
                {
                    int newBigWhite = NPC.NewNPC(187*16 + 8, 225*16, 276, 0);
                    Main.npc[newBigWhite].direction = 1;
                    Main.npc[newBigWhite].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newBigWhite, 0f, 0f, 0f, 0);

                    if (Main.gameTime%120 == 119 && Main.whitePaladinsSpawned > 3)
                    {
                        newBigWhite = NPC.NewNPC(187*16 + 8, 225*16, 276, 0);
                        Main.npc[newBigWhite].direction = 1;
                        Main.npc[newBigWhite].directionY = -1;
                        if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newBigWhite, 0f, 0f, 0f, 0);
                    }
                }
                if (Main.whiteTowersDowned == 2 && Main.gameTime%1800 == 0)
                {
                    int newBigBlack = NPC.NewNPC(345*16 + 8, 225*16, 277, 0);
                    Main.npc[newBigBlack].direction = -1;
                    Main.npc[newBigBlack].directionY = -1;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newBigBlack, 0f, 0f, 0f, 0);

                    if (Main.gameTime%120 == 119 && Main.blackPaladinsSpawned > 3)
                    {
                        newBigBlack = NPC.NewNPC(345*16 + 8, 225*16, 277, 0);
                        Main.npc[newBigBlack].direction = -1;
                        Main.npc[newBigBlack].directionY = -1;
                        if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", newBigBlack, 0f, 0f, 0f, 0);
                    }
                }
                if (Main.whiteTowersDowned == 2 && Main.gameTime%1800 == 0)
                {
                    Main.blackPaladinsSpawned++;
                }
                if (Main.blackTowersDowned == 2 && Main.gameTime%1800 == 0)
                {
                    Main.whitePaladinsSpawned++;
                }
            }

            if ((Main.gameTime >= 0) && ((Main.gameTime%1800) == 0)) //jungle
            {
                if (NPC.NewNPC(222*16 + 8, 178*16, 43, Main.snatcherw1) != 200)
                {
                    Main.npc[Main.snatcherw1].ai[0] = (float) 222;
                    Main.npc[Main.snatcherw1].ai[1] = (float) 178;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.snatcherw1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(238*16 + 8, 178*16, 43, Main.snatcherw2) != 200)
                {
                    Main.npc[Main.snatcherw2].ai[0] = (float) 238;
                    Main.npc[Main.snatcherw2].ai[1] = (float) 178;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.snatcherw2, 0f, 0f, 0f, 0);
                }
                int npcType = 260;
                if (Main.rand.Next(100) == 0) npcType = 101;
                if (NPC.NewNPC(246*16 + 8, 171*16, npcType, Main.maneaterw1) != 200)
                {
                    Main.npc[Main.maneaterw1].ai[0] = (float) 246;
                    Main.npc[Main.maneaterw1].ai[1] = (float) 171;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.maneaterw1, 0f, 0f, 0f, 0);
                }
                npcType = 260;
                if (Main.rand.Next(100) == 0) npcType = 101;
                if (NPC.NewNPC(286*16 + 8, 171*16, npcType, Main.maneaterw2) != 200)
                {
                    Main.npc[Main.maneaterw2].ai[0] = (float) 286;
                    Main.npc[Main.maneaterw2].ai[1] = (float) 171;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.maneaterw2, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(294*16 + 8, 178*16, 43, Main.trapperw1) != 200)
                {
                    Main.npc[Main.trapperw1].ai[0] = (float) 294;
                    Main.npc[Main.trapperw1].ai[1] = (float) 178;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.trapperw1, 0f, 0f, 0f, 0);
                }
                if (NPC.NewNPC(310*16 + 8, 178*16, 43, Main.trapperw2) != 200)
                {
                    Main.npc[Main.trapperw2].ai[0] = (float) 310;
                    Main.npc[Main.trapperw2].ai[1] = (float) 178;
                    if (Main.netMode == 2) NetMessage.SendData(23, -1, -1, "", Main.trapperw2, 0f, 0f, 0f, 0);
                }
            }
            return;
        }

        public static void SpawnNPC3v3()
        {
            if (Main.gameTime == -3600) //towers
            {
                NPC.twt = NPC.NewNPC(197*16 + 8, 98*16, 69, 0); //white top lane
                NPC.tbt = NPC.NewNPC(339*16 + 8, 98*16, 70, 0); //black top lane
                NPC.bwt = NPC.NewNPC(197*16 + 8, 292*16, 69, 0); //white bot lane
                NPC.bbt = NPC.NewNPC(339*16 + 8, 292*16, 70, 0); //black bot lane
            }

            if ((Main.gameTime >= 0) && ((Main.gameTime%1800) <= 240)) //team creeps
            {
                if (Main.gameTime%60 == 0)
                {
                    if (NPC.numWhite < 20)
                    {
                        int newWhite = NPC.NewNPC(197*16 + 8, 98*16, WHITE_SOLDIER, 0);
                        Main.npc[newWhite].direction = 1;
                        Main.npc[newWhite].directionY = -1;
                        NPC.numWhite++;
                    }

                    if (NPC.numBlack < 20)
                    {
                        int newBlack = NPC.NewNPC(339*16 + 8, 98*16, BLACK_SOLDIER, 0);
                        Main.npc[newBlack].direction = -1;
                        Main.npc[newBlack].directionY = -1;
                        NPC.numBlack++;
                    }

                    if (NPC.numBlue < 20)
                    {
                        int newWhiteJelly = NPC.NewNPC(197*16 + 8, 292*16, BLUE_JELLYFISH, 0);
                        NPC.numBlue++;
                    }

                    if (NPC.numPink < 20)
                    {
                        int newBlackJelly = NPC.NewNPC(339*16 + 8, 292*16, PINK_JELLYFISH, 0);
                        NPC.numPink++;
                    }
                }
            }

            if ((Main.gameTime >= 0) && (Main.gameTime%600 == 0) && NPC.numPiranha < 10) //bot lane ambient creeps
            {
                int spx = 0;
                int spy = 0;
                switch (Main.rand.Next(7))
                {
                    case 0:
                        spx = 180;
                        spy = 260;
                        break;
                    case 1:
                        spx = 207;
                        spy = 243;
                        break;
                    case 2:
                        spx = 230;
                        spy = 260;
                        break;
                    case 3:
                        spx = 255;
                        spy = 236;
                        break;
                    case 4:
                        spx = 300;
                        spy = 242;
                        break;
                    case 5:
                        spx = 325;
                        spy = 242;
                        break;
                    case 6:
                        spx = 357;
                        spy = 238;
                        break;
                    default:
                        break;
                }
                int top = (NPC.isBossDowned) ? NPC.NewNPC(spx*16, spy*16, ANGLER_FISH, 0) : NPC.NewNPC(spx*16, spy*16, PIRANHA, 0);
                NPC.numPiranha++;
            }
            if ((Main.gameTime%3600 == 2700) && NPC.numDiabolist < 2) //top lane ambient creeps
            {
                int spx = 0;
                int spy = 0;
                switch (Main.rand.Next(7))
                {
                    case 0:
                        spx = 193;
                        spy = 63;
                        break;
                    case 1:
                        spx = 235;
                        spy = 74;
                        break;
                    case 2:
                        spx = 266;
                        spy = 60;
                        break;
                    case 3:
                        spx = 304;
                        spy = 74;
                        break;
                    case 4:
                        spx = 341;
                        spy = 63;
                        break;
                    case 5:
                        spx = 267;
                        spy = 92;
                        break;
                    case 6:
                        spx = 281;
                        spy = 119;
                        break;
                    default:
                        break;
                }
                int bot = (NPC.isBossDowned) ? NPC.NewNPC(spx*16, spy*16, DIABOLIST, 0) : NPC.NewNPC(spx*16, spy*16, RAGGED_CASTER, 0);
                NPC.numDiabolist++;
            }

            if (Main.jCounter >= NPC.BOSS_SUMMON) //jungle boss
            {
                NPC.NewNPC(266*16 + 8, 164*16, NPC.BRAIN_OF_CTHULU, 0);
                Main.jCounter = 0;
            }
            if (Main.blackTowersDowned >= 2) //black boss
            {
                int blackBoss = NPC.NewNPC(436*16 + 8, 430*16, 51, 0);
                Main.blackTowersDowned = 0;
                for (int i = 0; i < 7; i++) Main.tile[361 + i, 206].type = 131;
                for (int i = 0; i < 3; i++) Main.tile[361, 207 + i].type = 131;
                for (int i = 0; i < 7; i++) Main.tile[363 + i, 446].type = 131;
                for (int i = 0; i < 3; i++) Main.tile[369, 447 + i].type = 131;
            }
            if (Main.whiteTowersDowned >= 2) //white boss
            {
                int whiteBoss = NPC.NewNPC(117*16 + 8, 430*16, 50, 0);
                Main.whiteTowersDowned = 0;
                for (int i = 0; i < 7; i++) Main.tile[168 + i, 206].type = 131;
                for (int i = 0; i < 3; i++) Main.tile[174, 207 + i].type = 131;
                for (int i = 0; i < 7; i++) Main.tile[188 + i, 446].type = 131;
                for (int i = 0; i < 3; i++) Main.tile[188, 447 + i].type = 131;
            }
            if (Main.gameTime >= 0 && (Main.gameTime%900 == 0)) //jungle
            {
                int s1 = 0;
                int s2 = 0;
                for (int i = 0; i < 6; i++)
                {
                    if (!Main.npc[P1_SP1 + (4*i)].active && !Main.npc[P1_SP2 + (4*i)].active && !Main.npc[P1_SP3 + (4*i)].active && !Main.npc[P1_SP4 + (4*i)].active)
                    {
                        int spx1 = Main.rand.Next(10);
                        int spy1 = Main.rand.Next(10);
                        int spx2 = Main.rand.Next(10);
                        int spy2 = Main.rand.Next(10);
                        switch (i)
                        {
                            case 0:
                                spx1 += 188;
                                spy1 += 185;
                                spx2 += 188;
                                spy2 += 185;
                                break;
                            case 1:
                                spx1 += 243;
                                spy1 += 200;
                                spx2 += 243;
                                spy2 += 200;
                                break;
                            case 2:
                                spx1 += 211;
                                spy1 += 140;
                                spx2 += 211;
                                spy2 += 140;
                                break;
                            case 3:
                                spx1 += 325;
                                spy1 += 132;
                                spx2 += 325;
                                spy2 += 132;
                                break;
                            case 4:
                                spx1 += 342;
                                spy1 += 160;
                                spx2 += 342;
                                spy2 += 160;
                                break;
                            case 5:
                                spx1 += 295;
                                spy1 += 180;
                                spx2 += 295;
                                spy2 += 180;
                                break;
                            default:
                                break;
                        }
                        switch (Main.rand.Next(4))
                        {
                            case 0: //HORNETS/DEMONS
                                s1 = (!isBossDowned) ? NPC.NewNPC(spx1*16, spy1*16, HORNET, P1_SP1 + (4*i)) : NPC.NewNPC(spx1*16, spy1*16, DEMON, P1_SP1 + (4*i));
                                s2 = (!isBossDowned) ? NPC.NewNPC(spx2*16, spy2*16, HORNET, P1_SP2 + (4*i)) : NPC.NewNPC(spx2*16, spy2*16, DEMON, P1_SP2 + (4*i));
                                break;
                            case 1: //BLOOD CRAWLERS/BLACK RECLUSES
                                s1 = (!isBossDowned) ? NPC.NewNPC(spx1*16, spy1*16, BLOOD_CRAWLER, P1_SP1 + (4*i)) : NPC.NewNPC(spx1*16, spy1*16, BLACK_RECLUSE, P1_SP1 + (4*i));
                                s2 = (!isBossDowned) ? NPC.NewNPC(spx2*16, spy2*16, BLOOD_CRAWLER, P1_SP2 + (4*i)) : NPC.NewNPC(spx2*16, spy2*16, BLACK_RECLUSE, P1_SP2 + (4*i));
                                break;
                            case 2: //WOLF/GIANT TORTOISE
                                s1 = (!isBossDowned) ? NPC.NewNPC(spx1*16, spy1*16, WOLF, P1_SP1 + (4*i)) : NPC.NewNPC(spx1*16, spy1*16, GIANT_TORTOISE, P1_SP1 + (4*i));
                                break;
                            case 3: //MOTHER SLIME/CORRUPT SLIME
                                s1 = (!isBossDowned) ? NPC.NewNPC(spx1*16, spy1*16, MOTHER_SLIME, P1_SP1 + (4*i)) : NPC.NewNPC(spx1*16, spy1*16, CORRUPT_SLIME, P1_SP1 + (4*i));
                                break;
                            default:
                                break;
                        }
                    }
                }
            }
            return;
        }

        //    int freeSlots = 0;
        //    for (int i = 0; i < 20; i++)
        //    {
        //        if (Main.player[i].active && !Main.player[i].dead)
        //        {
        //            if (Main.player[i].getRect().Intersects(NPC.JUNGLE_AREA))
        //            {
        //                if (
        //                    (Main.npc[P1_SP1].target != Main.player[i].whoAmi || !Main.npc[P1_SP1].active) &&
        //                    (Main.npc[P1_SP2].target != Main.player[i].whoAmi || !Main.npc[P1_SP2].active) &&
        //                    (Main.npc[P1_SP3].target != Main.player[i].whoAmi || !Main.npc[P1_SP3].active) &&
        //                    (Main.npc[P1_SP4].target != Main.player[i].whoAmi || !Main.npc[P1_SP4].active) &&

        //                    (Main.npc[P2_SP1].target != Main.player[i].whoAmi || !Main.npc[P2_SP1].active) &&
        //                    (Main.npc[P2_SP2].target != Main.player[i].whoAmi || !Main.npc[P2_SP2].active) &&
        //                    (Main.npc[P2_SP3].target != Main.player[i].whoAmi || !Main.npc[P2_SP3].active) &&
        //                    (Main.npc[P2_SP4].target != Main.player[i].whoAmi || !Main.npc[P2_SP4].active) &&

        //                    (Main.npc[P3_SP1].target != Main.player[i].whoAmi || !Main.npc[P3_SP1].active) &&
        //                    (Main.npc[P3_SP2].target != Main.player[i].whoAmi || !Main.npc[P3_SP2].active) &&
        //                    (Main.npc[P3_SP3].target != Main.player[i].whoAmi || !Main.npc[P3_SP3].active) &&
        //                    (Main.npc[P3_SP4].target != Main.player[i].whoAmi || !Main.npc[P3_SP4].active) &&

        //                    (Main.npc[P4_SP1].target != Main.player[i].whoAmi || !Main.npc[P4_SP1].active) &&
        //                    (Main.npc[P4_SP2].target != Main.player[i].whoAmi || !Main.npc[P4_SP2].active) &&
        //                    (Main.npc[P4_SP3].target != Main.player[i].whoAmi || !Main.npc[P4_SP3].active) &&
        //                    (Main.npc[P4_SP4].target != Main.player[i].whoAmi || !Main.npc[P4_SP4].active) &&

        //                    (Main.npc[P5_SP1].target != Main.player[i].whoAmi || !Main.npc[P5_SP1].active) &&
        //                    (Main.npc[P5_SP2].target != Main.player[i].whoAmi || !Main.npc[P5_SP2].active) &&
        //                    (Main.npc[P5_SP3].target != Main.player[i].whoAmi || !Main.npc[P5_SP3].active) &&
        //                    (Main.npc[P5_SP4].target != Main.player[i].whoAmi || !Main.npc[P5_SP4].active) &&

        //                    (Main.npc[P6_SP1].target != Main.player[i].whoAmi || !Main.npc[P6_SP1].active) &&
        //                    (Main.npc[P6_SP2].target != Main.player[i].whoAmi || !Main.npc[P6_SP2].active) &&
        //                    (Main.npc[P6_SP3].target != Main.player[i].whoAmi || !Main.npc[P6_SP3].active) &&
        //                    (Main.npc[P6_SP4].target != Main.player[i].whoAmi || !Main.npc[P6_SP4].active)
        //                   )
        //                {
        //                    if (
        //                        !Main.npc[P1_SP1].active &&
        //                        !Main.npc[P1_SP2].active &&
        //                        !Main.npc[P1_SP3].active &&
        //                        !Main.npc[P1_SP4].active
        //                        )
        //                    {
        //                        freeSlots = P1_SP1;
        //                    }
        //                    else if (
        //                        !Main.npc[P2_SP1].active &&
        //                        !Main.npc[P2_SP2].active &&
        //                        !Main.npc[P2_SP3].active &&
        //                        !Main.npc[P2_SP4].active
        //                        )
        //                    {
        //                        freeSlots = P2_SP1;
        //                    }
        //                    else if (
        //                        !Main.npc[P3_SP1].active &&
        //                        !Main.npc[P3_SP2].active &&
        //                        !Main.npc[P3_SP3].active &&
        //                        !Main.npc[P3_SP4].active
        //                        )
        //                    {
        //                        freeSlots = P3_SP1;
        //                    }
        //                    else if (
        //                        !Main.npc[P4_SP1].active &&
        //                        !Main.npc[P4_SP2].active &&
        //                        !Main.npc[P4_SP3].active &&
        //                        !Main.npc[P4_SP4].active
        //                        )
        //                    {
        //                        freeSlots = P4_SP1;
        //                    }
        //                    else if (
        //                        !Main.npc[P5_SP1].active &&
        //                        !Main.npc[P5_SP2].active &&
        //                        !Main.npc[P5_SP3].active &&
        //                        !Main.npc[P5_SP4].active
        //                        )
        //                    {
        //                        freeSlots = P5_SP1;
        //                    }
        //                    else if (
        //                        !Main.npc[P6_SP1].active &&
        //                        !Main.npc[P6_SP2].active &&
        //                        !Main.npc[P6_SP3].active &&
        //                        !Main.npc[P6_SP4].active
        //                        )
        //                    {
        //                        freeSlots = P6_SP1;
        //                    }

        //                    int spawn = 0;
        //                    int x1Spawn = 0;
        //                    int y1Spawn = 0;
        //                    int x2Spawn = 0;
        //                    int y2Spawn = 0;
        //                    int leftOrRight = 1;
        //                    switch (Main.rand.Next(4))
        //                    {
        //                        case 0: //hornets/demons
        //                            spawn = (NPC.isBossDowned) ? NPC.DEMON : NPC.HORNET;
        //                            x1Spawn = (int)Main.player[i].center().X - (NPC.SPAWN_RANGE * 16);
        //                            y1Spawn = (int)Main.player[i].center().Y - Main.rand.Next(50, 100);
        //                            if (x1Spawn < NPC.JUNGLE_AREA.X + 60)
        //                            {
        //                                x1Spawn = NPC.JUNGLE_AREA.X + 60;
        //                            }
        //                            if (x1Spawn > NPC.JUNGLE_AREA.X + NPC.JUNGLE_AREA.Width - 60)
        //                            {
        //                                x1Spawn = NPC.JUNGLE_AREA.X + NPC.JUNGLE_AREA.Width - 60;
        //                            }
        //                            if (y1Spawn < NPC.JUNGLE_AREA.Y + 60)
        //                            {
        //                                y1Spawn = NPC.JUNGLE_AREA.Y + 60;
        //                            }
        //                            if (y1Spawn > NPC.JUNGLE_AREA.Y + NPC.JUNGLE_AREA.Height - 60)
        //                            {
        //                                y1Spawn = NPC.JUNGLE_AREA.Y + NPC.JUNGLE_AREA.Height - 60;
        //                            }
        //                            NPC.NewNPC(x1Spawn, y1Spawn, spawn, freeSlots);
        //                            Main.npc[freeSlots].target = i;

        //                            x2Spawn = (int)Main.player[i].center().X + (NPC.SPAWN_RANGE * 16);
        //                            y2Spawn = (int)Main.player[i].center().Y - Main.rand.Next(50, 100);
        //                            if (x2Spawn < NPC.JUNGLE_AREA.X + 60)
        //                            {
        //                                x2Spawn = NPC.JUNGLE_AREA.X + 60;
        //                            }
        //                            if (x2Spawn > NPC.JUNGLE_AREA.X + NPC.JUNGLE_AREA.Width - 60)
        //                            {
        //                                x2Spawn = NPC.JUNGLE_AREA.X + NPC.JUNGLE_AREA.Width - 60;
        //                            }
        //                            if (y2Spawn < NPC.JUNGLE_AREA.Y + 60)
        //                            {
        //                                y2Spawn = NPC.JUNGLE_AREA.Y + 60;
        //                            }
        //                            if (y2Spawn > NPC.JUNGLE_AREA.Y + NPC.JUNGLE_AREA.Height - 60)
        //                            {
        //                                y1Spawn = NPC.JUNGLE_AREA.Y + NPC.JUNGLE_AREA.Height - 60;
        //                            }
        //                            NPC.NewNPC(x2Spawn, y2Spawn, spawn, freeSlots+1);
        //                            Main.npc[freeSlots+1].target = i;

        //                            break;
        //                        case 1://wolf/bone lee
        //                            spawn = (NPC.isBossDowned) ? NPC.GIANT_TORTOISE : NPC.WOLF;
        //                            leftOrRight = (Main.rand.Next(2) == 0) ? 1 : -1;
        //                            x1Spawn = (int)Main.player[i].center().X + (NPC.SPAWN_RANGE * (16 * leftOrRight));
        //                            if (x1Spawn < (NPC.JUNGLE_AREA.X + 60) || x1Spawn > NPC.JUNGLE_AREA.X + (NPC.JUNGLE_AREA.Width - 60))
        //                                x1Spawn = (int)Main.player[i].center().X + (NPC.SPAWN_RANGE * (16 * (-1 * leftOrRight)));
        //                            y1Spawn = (int)Main.player[i].center().Y;
        //                            NPC.NewNPC(x1Spawn, y1Spawn, spawn, freeSlots);
        //                            Main.npc[freeSlots].target = i;

        //                            break;
        //                        case 2://blood crawlers/black recluses
        //                            spawn = (NPC.isBossDowned) ? NPC.BLACK_RECLUSE : NPC.BLOOD_CRAWLER;
        //                            x1Spawn = (int)Main.player[i].center().X - (NPC.SPAWN_RANGE * 16);
        //                            y1Spawn = (int)Main.player[i].center().Y - Main.rand.Next(50, 100);
        //                            if (x1Spawn < NPC.JUNGLE_AREA.X + 60)
        //                            {
        //                                x1Spawn = NPC.JUNGLE_AREA.X + 60;
        //                            }
        //                            if (x1Spawn > NPC.JUNGLE_AREA.X + NPC.JUNGLE_AREA.Width - 60)
        //                            {
        //                                x1Spawn = NPC.JUNGLE_AREA.X + NPC.JUNGLE_AREA.Width - 60;
        //                            }
        //                            if (y1Spawn < NPC.JUNGLE_AREA.Y + 60)
        //                            {
        //                                y1Spawn = NPC.JUNGLE_AREA.Y + 60;
        //                            }
        //                            if (y1Spawn > NPC.JUNGLE_AREA.Y + NPC.JUNGLE_AREA.Height - 60)
        //                            {
        //                                y1Spawn = NPC.JUNGLE_AREA.Y + NPC.JUNGLE_AREA.Height - 60;
        //                            }
        //                            NPC.NewNPC(x1Spawn, y1Spawn, spawn, freeSlots);
        //                            Main.npc[freeSlots].target = i;

        //                            x2Spawn = (int)Main.player[i].center().X + (NPC.SPAWN_RANGE * 16);
        //                            y2Spawn = (int)Main.player[i].center().Y - Main.rand.Next(50, 100);
        //                            if (x2Spawn < NPC.JUNGLE_AREA.X + 60)
        //                            {
        //                                x2Spawn = NPC.JUNGLE_AREA.X + 60;
        //                            }
        //                            if (x2Spawn > NPC.JUNGLE_AREA.X + NPC.JUNGLE_AREA.Width - 60)
        //                            {
        //                                x2Spawn = NPC.JUNGLE_AREA.X + NPC.JUNGLE_AREA.Width - 60;
        //                            }
        //                            if (y2Spawn < NPC.JUNGLE_AREA.Y + 60)
        //                            {
        //                                y2Spawn = NPC.JUNGLE_AREA.Y + 60;
        //                            }
        //                            if (y2Spawn > NPC.JUNGLE_AREA.Y + NPC.JUNGLE_AREA.Height - 60)
        //                            {
        //                                y1Spawn = NPC.JUNGLE_AREA.Y + NPC.JUNGLE_AREA.Height - 60;
        //                            }
        //                            NPC.NewNPC(x2Spawn, y2Spawn, spawn, freeSlots+1);
        //                            Main.npc[freeSlots+1].target = i;

        //                            break;
        //                        case 3://mother slime/corrupt slime
        //                            spawn = (NPC.isBossDowned) ? NPC.CORRUPT_SLIME : NPC.MOTHER_SLIME;
        //                            leftOrRight = (Main.rand.Next(2) == 0) ? 1 : -1;
        //                            x1Spawn = (int)Main.player[i].center().X + (NPC.SPAWN_RANGE * (16 * leftOrRight));
        //                            if (x1Spawn < (NPC.JUNGLE_AREA.X + 60) || x1Spawn > NPC.JUNGLE_AREA.X + (NPC.JUNGLE_AREA.Width - 60))
        //                                x1Spawn = (int)Main.player[i].center().X + (NPC.SPAWN_RANGE * (16 * (-1 * leftOrRight)));
        //                            y1Spawn = (int)Main.player[i].center().Y;
        //                            NPC.NewNPC(x1Spawn, y1Spawn, spawn, freeSlots);
        //                            Main.npc[freeSlots].target = i;
        //                            break;
        //                        default:
        //                            break;
        //                    }
        //                }
        //            }
        //        }
        //    }
        //}
        //}

        //public static void SpawnNPC()
        //{

        //}
        //    if (NPC.noSpawnCycle)
        //    {
        //        NPC.noSpawnCycle = false;
        //        return;
        //    }
        //    bool flag = false;
        //    int num = 0;
        //    int num2 = 0;
        //    int num3 = 0;
        //    int num4 = 0;
        //    for (int i = 0; i < 255; i++)
        //    {
        //        if (Main.player[i].active)
        //        {
        //            num4++;
        //        }
        //    }
        //    for (int j = 0; j < 255; j++)
        //    {
        //        if (Main.player[j].active && !Main.player[j].dead)
        //        {
        //            bool flag2 = false;
        //            bool flag3 = false;
        //            bool flag4 = false;
        //            bool flag5 = false;
        //            bool flag6 = false;
        //            if (Main.player[j].active && Main.invasionType > 0 && Main.invasionDelay == 0 && Main.invasionSize > 0 && (double)Main.player[j].position.Y < Main.worldSurface * 16.0 + (double)NPC.sHeight)
        //            {
        //                int num5 = 3000;
        //                if ((double)Main.player[j].position.X > Main.invasionX * 16.0 - (double)num5 && (double)Main.player[j].position.X < Main.invasionX * 16.0 + (double)num5)
        //                {
        //                    flag4 = true;
        //                }
        //            }
        //            bool flag7 = false;
        //            NPC.spawnRate = NPC.defaultSpawnRate;
        //            NPC.maxSpawns = NPC.defaultMaxSpawns;
        //            if (Main.hardMode)
        //            {
        //                NPC.spawnRate = (int)((double)NPC.defaultSpawnRate * 0.9);
        //                NPC.maxSpawns = NPC.defaultMaxSpawns + 1;
        //            }
        //            if (Main.player[j].position.Y > (float)((Main.maxTilesY - 200) * 16))
        //            {
        //                NPC.maxSpawns = (int)((float)NPC.maxSpawns * 2f);
        //            }
        //            else
        //            {
        //                if ((double)Main.player[j].position.Y > Main.rockLayer * 16.0 + (double)NPC.sHeight)
        //                {
        //                    NPC.spawnRate = (int)((double)NPC.spawnRate * 0.4);
        //                    NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.9f);
        //                }
        //                else
        //                {
        //                    if ((double)Main.player[j].position.Y > Main.worldSurface * 16.0 + (double)NPC.sHeight)
        //                    {
        //                        if (Main.hardMode)
        //                        {
        //                            NPC.spawnRate = (int)((double)NPC.spawnRate * 0.45);
        //                            NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.8f);
        //                        }
        //                        else
        //                        {
        //                            NPC.spawnRate = (int)((double)NPC.spawnRate * 0.5);
        //                            NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.7f);
        //                        }
        //                    }
        //                    else
        //                    {
        //                        if (!Main.dayTime)
        //                        {
        //                            NPC.spawnRate = (int)((double)NPC.spawnRate * 0.6);
        //                            NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.3f);
        //                            if (Main.bloodMoon)
        //                            {
        //                                NPC.spawnRate = (int)((double)NPC.spawnRate * 0.3);
        //                                NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.8f);
        //                            }
        //                        }
        //                        else
        //                        {
        //                            if (Main.dayTime && Main.eclipse)
        //                            {
        //                                NPC.spawnRate = (int)((double)NPC.spawnRate * 0.2);
        //                                NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.9f);
        //                            }
        //                        }
        //                    }
        //                }
        //            }
        //            if (Main.player[j].zoneSnow && (double)(Main.player[j].position.Y / 16f) < Main.worldSurface)
        //            {
        //                NPC.maxSpawns = (int)((float)NPC.maxSpawns + (float)NPC.maxSpawns * Main.cloudAlpha);
        //                NPC.spawnRate = (int)((float)NPC.spawnRate * (1f - Main.cloudAlpha + 1f) / 2f);
        //            }
        //            if (Main.player[j].zoneDungeon)
        //            {
        //                NPC.spawnRate = (int)((double)NPC.spawnRate * 0.4);
        //                NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.7f);
        //            }
        //            else
        //            {
        //                if (Main.player[j].zoneJungle)
        //                {
        //                    NPC.spawnRate = (int)((double)NPC.spawnRate * 0.4);
        //                    NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.5f);
        //                }
        //                else
        //                {
        //                    if (Main.player[j].zoneEvil || Main.player[j].zoneBlood)
        //                    {
        //                        NPC.spawnRate = (int)((double)NPC.spawnRate * 0.65);
        //                        NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.3f);
        //                    }
        //                    else
        //                    {
        //                        if (Main.player[j].zoneMeteor)
        //                        {
        //                            NPC.spawnRate = (int)((double)NPC.spawnRate * 0.4);
        //                            NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.1f);
        //                        }
        //                    }
        //                }
        //            }
        //            if (Main.player[j].zoneHoly && (double)Main.player[j].position.Y > Main.rockLayer * 16.0 + (double)NPC.sHeight)
        //            {
        //                NPC.spawnRate = (int)((double)NPC.spawnRate * 0.65);
        //                NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.3f);
        //            }
        //            if (Main.wof >= 0 && Main.player[j].position.Y > (float)((Main.maxTilesY - 200) * 16))
        //            {
        //                NPC.maxSpawns = (int)((float)NPC.maxSpawns * 0.3f);
        //                NPC.spawnRate *= 3;
        //            }
        //            if ((double)Main.player[j].activeNPCs < (double)NPC.maxSpawns * 0.2)
        //            {
        //                NPC.spawnRate = (int)((float)NPC.spawnRate * 0.6f);
        //            }
        //            else
        //            {
        //                if ((double)Main.player[j].activeNPCs < (double)NPC.maxSpawns * 0.4)
        //                {
        //                    NPC.spawnRate = (int)((float)NPC.spawnRate * 0.7f);
        //                }
        //                else
        //                {
        //                    if ((double)Main.player[j].activeNPCs < (double)NPC.maxSpawns * 0.6)
        //                    {
        //                        NPC.spawnRate = (int)((float)NPC.spawnRate * 0.8f);
        //                    }
        //                    else
        //                    {
        //                        if ((double)Main.player[j].activeNPCs < (double)NPC.maxSpawns * 0.8)
        //                        {
        //                            NPC.spawnRate = (int)((float)NPC.spawnRate * 0.9f);
        //                        }
        //                    }
        //                }
        //            }
        //            if ((double)(Main.player[j].position.Y * 16f) > (Main.worldSurface + Main.rockLayer) / 2.0 || Main.player[j].zoneEvil || Main.player[j].zoneBlood)
        //            {
        //                if ((double)Main.player[j].activeNPCs < (double)NPC.maxSpawns * 0.2)
        //                {
        //                    NPC.spawnRate = (int)((float)NPC.spawnRate * 0.7f);
        //                }
        //                else
        //                {
        //                    if ((double)Main.player[j].activeNPCs < (double)NPC.maxSpawns * 0.4)
        //                    {
        //                        NPC.spawnRate = (int)((float)NPC.spawnRate * 0.9f);
        //                    }
        //                }
        //            }
        //            if (Main.player[j].inventory[Main.player[j].selectedItem].type == 148)
        //            {
        //                NPC.spawnRate = (int)((double)NPC.spawnRate * 0.75);
        //                NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.5f);
        //            }
        //            if (Main.player[j].enemySpawns)
        //            {
        //                NPC.spawnRate = (int)((double)NPC.spawnRate * 0.5);
        //                NPC.maxSpawns = (int)((float)NPC.maxSpawns * 2f);
        //            }
        //            if (Main.player[j].zoneCandle)
        //            {
        //                NPC.spawnRate = (int)((double)NPC.spawnRate * 0.75);
        //                NPC.maxSpawns = (int)((float)NPC.maxSpawns * 1.5f);
        //            }
        //            if ((double)NPC.spawnRate < (double)NPC.defaultSpawnRate * 0.1)
        //            {
        //                NPC.spawnRate = (int)((double)NPC.defaultSpawnRate * 0.1);
        //            }
        //            if (NPC.maxSpawns > NPC.defaultMaxSpawns * 3)
        //            {
        //                NPC.maxSpawns = NPC.defaultMaxSpawns * 3;
        //            }
        //            if (flag4)
        //            {
        //                NPC.maxSpawns = (int)((double)NPC.defaultMaxSpawns * (2.0 + 0.3 * (double)num4));
        //                NPC.spawnRate = 20;
        //            }
        //            if (Main.player[j].zoneDungeon && !NPC.downedBoss3)
        //            {
        //                NPC.spawnRate = 10;
        //            }
        //            bool flag8 = false;
        //            if (!flag4 && (!Main.bloodMoon || Main.dayTime) && (!Main.eclipse || !Main.dayTime) && !Main.player[j].zoneDungeon && !Main.player[j].zoneEvil && !Main.player[j].zoneBlood && !Main.player[j].zoneMeteor)
        //            {
        //                if (Main.player[j].townNPCs == 1f)
        //                {
        //                    flag3 = true;
        //                    if (Main.rand.Next(3) <= 1)
        //                    {
        //                        flag8 = true;
        //                        NPC.maxSpawns = (int)((double)((float)NPC.maxSpawns) * 0.6);
        //                    }
        //                    else
        //                    {
        //                        NPC.spawnRate = (int)((float)NPC.spawnRate * 2f);
        //                    }
        //                }
        //                else
        //                {
        //                    if (Main.player[j].townNPCs == 2f)
        //                    {
        //                        flag3 = true;
        //                        if (Main.rand.Next(3) == 0)
        //                        {
        //                            flag8 = true;
        //                            NPC.maxSpawns = (int)((double)((float)NPC.maxSpawns) * 0.6);
        //                        }
        //                        else
        //                        {
        //                            NPC.spawnRate = (int)((float)NPC.spawnRate * 3f);
        //                        }
        //                    }
        //                    else
        //                    {
        //                        if (Main.player[j].townNPCs >= 3f)
        //                        {
        //                            flag3 = true;
        //                            flag8 = true;
        //                            NPC.maxSpawns = (int)((double)((float)NPC.maxSpawns) * 0.6);
        //                        }
        //                    }
        //                }
        //            }
        //            int num6 = (int)(Main.player[j].position.X + (float)(Main.player[j].width / 2)) / 16;
        //            int num7 = (int)(Main.player[j].position.Y + (float)(Main.player[j].height / 2)) / 16;
        //            if (Main.wallHouse[(int)Main.tile[num6, num7].wall])
        //            {
        //                flag3 = true;
        //            }
        //            if (Main.tile[num6, num7].wall == 87)
        //            {
        //                flag2 = true;
        //            }
        //            if (Main.player[j].active && !Main.player[j].dead && Main.player[j].activeNPCs < (float)NPC.maxSpawns && Main.rand.Next(NPC.spawnRate) == 0)
        //            {
        //                NPC.spawnRangeX = (int)((double)(NPC.sWidth / 16) * 0.7);
        //                NPC.spawnRangeY = (int)((double)(NPC.sHeight / 16) * 0.7);
        //                NPC.safeRangeX = (int)((double)(NPC.sWidth / 16) * 0.52);
        //                NPC.safeRangeY = (int)((double)(NPC.sHeight / 16) * 0.52);
        //                if (Main.player[j].inventory[Main.player[j].selectedItem].type == 1254 || Main.player[j].inventory[Main.player[j].selectedItem].type == 1299 || Main.player[j].scope)
        //                {
        //                    float num8 = 1.5f;
        //                    if (Main.player[j].inventory[Main.player[j].selectedItem].type == 1254 && Main.player[j].scope)
        //                    {
        //                        num8 = 1.25f;
        //                    }
        //                    else
        //                    {
        //                        if (Main.player[j].inventory[Main.player[j].selectedItem].type == 1254)
        //                        {
        //                            num8 = 1.5f;
        //                        }
        //                        else
        //                        {
        //                            if (Main.player[j].inventory[Main.player[j].selectedItem].type == 1299)
        //                            {
        //                                num8 = 1.5f;
        //                            }
        //                            else
        //                            {
        //                                if (Main.player[j].scope)
        //                                {
        //                                    num8 = 2f;
        //                                }
        //                            }
        //                        }
        //                    }
        //                    NPC.spawnRangeX += (int)((double)(NPC.sWidth / 16) * 0.5 / (double)num8);
        //                    NPC.spawnRangeY += (int)((double)(NPC.sHeight / 16) * 0.5 / (double)num8);
        //                    NPC.safeRangeX += (int)((double)(NPC.sWidth / 16) * 0.5 / (double)num8);
        //                    NPC.safeRangeY += (int)((double)(NPC.sHeight / 16) * 0.5 / (double)num8);
        //                }
        //                int num9 = (int)(Main.player[j].position.X / 16f) - NPC.spawnRangeX;
        //                int num10 = (int)(Main.player[j].position.X / 16f) + NPC.spawnRangeX;
        //                int num11 = (int)(Main.player[j].position.Y / 16f) - NPC.spawnRangeY;
        //                int num12 = (int)(Main.player[j].position.Y / 16f) + NPC.spawnRangeY;
        //                int num13 = (int)(Main.player[j].position.X / 16f) - NPC.safeRangeX;
        //                int num14 = (int)(Main.player[j].position.X / 16f) + NPC.safeRangeX;
        //                int num15 = (int)(Main.player[j].position.Y / 16f) - NPC.safeRangeY;
        //                int num16 = (int)(Main.player[j].position.Y / 16f) + NPC.safeRangeY;
        //                if (num9 < 0)
        //                {
        //                    num9 = 0;
        //                }
        //                if (num10 > Main.maxTilesX)
        //                {
        //                    num10 = Main.maxTilesX;
        //                }
        //                if (num11 < 0)
        //                {
        //                    num11 = 0;
        //                }
        //                if (num12 > Main.maxTilesY)
        //                {
        //                    num12 = Main.maxTilesY;
        //                }
        //                int k = 0;
        //                while (k < 50)
        //                {
        //                    int num17 = Main.rand.Next(num9, num10);
        //                    int num18 = Main.rand.Next(num11, num12);
        //                    if (Main.tile[num17, num18].nactive() && Main.tileSolid[(int)Main.tile[num17, num18].type])
        //                    {
        //                        goto IL_FF5;
        //                    }
        //                    if (!Main.wallHouse[(int)Main.tile[num17, num18].wall])
        //                    {
        //                        if (!flag4 && (double)num18 < Main.worldSurface * 0.34999999403953552 && !flag8 && ((double)num17 < (double)Main.maxTilesX * 0.45 || (double)num17 > (double)Main.maxTilesX * 0.55 || Main.hardMode))
        //                        {
        //                            num3 = (int)Main.tile[num17, num18].type;
        //                            num = num17;
        //                            num2 = num18;
        //                            flag7 = true;
        //                            flag = true;
        //                        }
        //                        else
        //                        {
        //                            if (!flag4 && (double)num18 < Main.worldSurface * 0.44999998807907104 && !flag8 && Main.hardMode && Main.rand.Next(10) == 0)
        //                            {
        //                                num3 = (int)Main.tile[num17, num18].type;
        //                                num = num17;
        //                                num2 = num18;
        //                                flag7 = true;
        //                                flag = true;
        //                            }
        //                            else
        //                            {
        //                                int l = num18;
        //                                while (l < Main.maxTilesY)
        //                                {
        //                                    if (Main.tile[num17, l].nactive() && Main.tileSolid[(int)Main.tile[num17, l].type])
        //                                    {
        //                                        if (num17 < num13 || num17 > num14 || l < num15 || l > num16)
        //                                        {
        //                                            num3 = (int)Main.tile[num17, l].type;
        //                                            num = num17;
        //                                            num2 = l;
        //                                            flag7 = true;
        //                                            break;
        //                                        }
        //                                        break;
        //                                    }
        //                                    else
        //                                    {
        //                                        l++;
        //                                    }
        //                                }
        //                            }
        //                        }
        //                        if (!flag7)
        //                        {
        //                            goto IL_FF5;
        //                        }
        //                        int num19 = num - NPC.spawnSpaceX / 2;
        //                        int num20 = num + NPC.spawnSpaceX / 2;
        //                        int num21 = num2 - NPC.spawnSpaceY;
        //                        int num22 = num2;
        //                        if (num19 < 0)
        //                        {
        //                            flag7 = false;
        //                        }
        //                        if (num20 > Main.maxTilesX)
        //                        {
        //                            flag7 = false;
        //                        }
        //                        if (num21 < 0)
        //                        {
        //                            flag7 = false;
        //                        }
        //                        if (num22 > Main.maxTilesY)
        //                        {
        //                            flag7 = false;
        //                        }
        //                        if (flag7)
        //                        {
        //                            for (int m = num19; m < num20; m++)
        //                            {
        //                                for (int n = num21; n < num22; n++)
        //                                {
        //                                    if (Main.tile[m, n].nactive() && Main.tileSolid[(int)Main.tile[m, n].type])
        //                                    {
        //                                        flag7 = false;
        //                                        break;
        //                                    }
        //                                    if (Main.tile[m, n].lava())
        //                                    {
        //                                        flag7 = false;
        //                                        break;
        //                                    }
        //                                }
        //                            }
        //                            goto IL_FF5;
        //                        }
        //                        goto IL_FF5;
        //                    }
        //                IL_FFB:
        //                    k++;
        //                    continue;
        //                IL_FF5:
        //                    if (!flag7 && !flag7)
        //                    {
        //                        goto IL_FFB;
        //                    }
        //                    break;
        //                }
        //            }
        //            if (flag7)
        //            {
        //                Rectangle rectangle = new Rectangle(num * 16, num2 * 16, 16, 16);
        //                for (int num23 = 0; num23 < 255; num23++)
        //                {
        //                    if (Main.player[num23].active)
        //                    {
        //                        Rectangle rectangle2 = new Rectangle((int)(Main.player[num23].position.X + (float)(Main.player[num23].width / 2) - (float)(NPC.sWidth / 2) - (float)NPC.safeRangeX), (int)(Main.player[num23].position.Y + (float)(Main.player[num23].height / 2) - (float)(NPC.sHeight / 2) - (float)NPC.safeRangeY), NPC.sWidth + NPC.safeRangeX * 2, NPC.sHeight + NPC.safeRangeY * 2);
        //                        if (rectangle.Intersects(rectangle2))
        //                        {
        //                            flag7 = false;
        //                        }
        //                    }
        //                }
        //            }
        //            if (flag7)
        //            {
        //                if (Main.player[j].zoneDungeon && (!Main.tileDungeon[(int)Main.tile[num, num2].type] || Main.tile[num, num2 - 1].wall == 0))
        //                {
        //                    flag7 = false;
        //                }
        //                if (Main.tile[num, num2 - 1].liquid > 0 && Main.tile[num, num2 - 2].liquid > 0 && !Main.tile[num, num2 - 1].lava())
        //                {
        //                    if (Main.tile[num, num2 - 1].honey())
        //                    {
        //                        flag6 = true;
        //                    }
        //                    else
        //                    {
        //                        flag5 = true;
        //                    }
        //                }
        //            }
        //            if (flag6)
        //            {
        //                flag7 = false;
        //            }
        //            if (flag7)
        //            {
        //                bool flag9 = false;
        //                if ((double)num2 > Main.rockLayer && num2 < Main.maxTilesY - 200 && !Main.player[j].zoneDungeon && !flag4)
        //                {
        //                    if (Main.rand.Next(3) == 0)
        //                    {
        //                        int num24 = Main.rand.Next(5, 15);
        //                        if (num - num24 >= 0 && num + num24 < Main.maxTilesX)
        //                        {
        //                            for (int num25 = num - num24; num25 < num + num24; num25++)
        //                            {
        //                                for (int num26 = num2 - num24; num26 < num2 + num24; num26++)
        //                                {
        //                                    if (Main.tile[num25, num26].wall == 62)
        //                                    {
        //                                        flag9 = true;
        //                                    }
        //                                }
        //                            }
        //                        }
        //                    }
        //                    else
        //                    {
        //                        int num27 = (int)Main.player[j].position.X / 16;
        //                        int num28 = (int)Main.player[j].position.Y / 16;
        //                        if (Main.tile[num27, num28].wall == 62)
        //                        {
        //                            flag9 = true;
        //                        }
        //                    }
        //                }
        //                int num29 = (int)Main.tile[num, num2].type;
        //                int num30 = 200;
        //                if (flag)
        //                {
        //                    if (Main.hardMode && Main.rand.Next(10) == 0 && !NPC.AnyNPCs(87) && !flag3)
        //                    {
        //                        NPC.NewNPC(num * 16 + 8, num2 * 16, 87, 1);
        //                    }
        //                    else
        //                    {
        //                        NPC.NewNPC(num * 16 + 8, num2 * 16, 48, 0);
        //                    }
        //                }
        //                else
        //                {
        //                    if (flag4)
        //                    {
        //                        if (Main.invasionType == 1)
        //                        {
        //                            if (Main.rand.Next(9) == 0)
        //                            {
        //                                NPC.NewNPC(num * 16 + 8, num2 * 16, 29, 0);
        //                            }
        //                            else
        //                            {
        //                                if (Main.rand.Next(5) == 0)
        //                                {
        //                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 26, 0);
        //                                }
        //                                else
        //                                {
        //                                    if (Main.rand.Next(3) == 0)
        //                                    {
        //                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 111, 0);
        //                                    }
        //                                    else
        //                                    {
        //                                        if (Main.rand.Next(3) == 0)
        //                                        {
        //                                            NPC.NewNPC(num * 16 + 8, num2 * 16, 27, 0);
        //                                        }
        //                                        else
        //                                        {
        //                                            NPC.NewNPC(num * 16 + 8, num2 * 16, 28, 0);
        //                                        }
        //                                    }
        //                                }
        //                            }
        //                        }
        //                        else
        //                        {
        //                            if (Main.invasionType == 2)
        //                            {
        //                                if (Main.rand.Next(7) == 0)
        //                                {
        //                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 145, 0);
        //                                }
        //                                else
        //                                {
        //                                    if (Main.rand.Next(3) == 0)
        //                                    {
        //                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 143, 0);
        //                                    }
        //                                    else
        //                                    {
        //                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 144, 0);
        //                                    }
        //                                }
        //                            }
        //                            else
        //                            {
        //                                if (Main.invasionType == 3)
        //                                {
        //                                    if (Main.rand.Next(30) == 0 && !NPC.AnyNPCs(216))
        //                                    {
        //                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 216, 0);
        //                                    }
        //                                    else
        //                                    {
        //                                        if (Main.rand.Next(11) == 0)
        //                                        {
        //                                            NPC.NewNPC(num * 16 + 8, num2 * 16, 215, 0);
        //                                        }
        //                                        else
        //                                        {
        //                                            if (Main.rand.Next(9) == 0)
        //                                            {
        //                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 252, 0);
        //                                            }
        //                                            else
        //                                            {
        //                                                if (Main.rand.Next(7) == 0)
        //                                                {
        //                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 214, 0);
        //                                                }
        //                                                else
        //                                                {
        //                                                    if (Main.rand.Next(3) == 0)
        //                                                    {
        //                                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 213, 0);
        //                                                    }
        //                                                    else
        //                                                    {
        //                                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 212, 0);
        //                                                    }
        //                                                }
        //                                            }
        //                                        }
        //                                    }
        //                                }
        //                            }
        //                        }
        //                    }
        //                    else
        //                    {
        //                        if (Main.tile[num, num2].wall == 62 || flag9)
        //                        {
        //                            if (Main.hardMode)
        //                            {
        //                                NPC.NewNPC(num * 16 + 8, num2 * 16, 163, 0);
        //                            }
        //                            else
        //                            {
        //                                NPC.NewNPC(num * 16 + 8, num2 * 16, 164, 0);
        //                            }
        //                        }
        //                        else
        //                        {
        //                            if (Main.hardMode && flag5 && Main.player[j].zoneJungle && Main.rand.Next(3) != 0)
        //                            {
        //                                NPC.NewNPC(num * 16 + 8, num2 * 16, 157, 0);
        //                            }
        //                            else
        //                            {
        //                                if (Main.hardMode && flag5 && Main.player[j].zoneBlood && Main.rand.Next(3) != 0)
        //                                {
        //                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 242, 0);
        //                                }
        //                                else
        //                                {
        //                                    if (Main.hardMode && flag5 && Main.player[j].zoneBlood && Main.rand.Next(3) != 0)
        //                                    {
        //                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 241, 0);
        //                                    }
        //                                    else
        //                                    {
        //                                        if (flag5 && (num < 250 || num > Main.maxTilesX - 250) && num29 == 53 && (double)num2 < Main.rockLayer)
        //                                        {
        //                                            if (Main.rand.Next(60) == 0)
        //                                            {
        //                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 220, 0);
        //                                            }
        //                                            else
        //                                            {
        //                                                if (Main.rand.Next(25) == 0)
        //                                                {
        //                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 221, 0);
        //                                                }
        //                                                else
        //                                                {
        //                                                    if (Main.rand.Next(8) == 0)
        //                                                    {
        //                                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 65, 0);
        //                                                    }
        //                                                    else
        //                                                    {
        //                                                        if (Main.rand.Next(3) == 0)
        //                                                        {
        //                                                            NPC.NewNPC(num * 16 + 8, num2 * 16, 67, 0);
        //                                                        }
        //                                                        else
        //                                                        {
        //                                                            NPC.NewNPC(num * 16 + 8, num2 * 16, 64, 0);
        //                                                        }
        //                                                    }
        //                                                }
        //                                            }
        //                                        }
        //                                        else
        //                                        {
        //                                            if (flag5 && (((double)num2 > Main.rockLayer && Main.rand.Next(2) == 0) || num29 == 60))
        //                                            {
        //                                                if (Main.hardMode && Main.rand.Next(3) > 0)
        //                                                {
        //                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 102, 0);
        //                                                }
        //                                                else
        //                                                {
        //                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 58, 0);
        //                                                }
        //                                            }
        //                                            else
        //                                            {
        //                                                if (flag5 && (double)num2 > Main.worldSurface && Main.rand.Next(3) == 0)
        //                                                {
        //                                                    if (Main.hardMode)
        //                                                    {
        //                                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 103, 0);
        //                                                    }
        //                                                    else
        //                                                    {
        //                                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 63, 0);
        //                                                    }
        //                                                }
        //                                                else
        //                                                {
        //                                                    if (flag5 && Main.rand.Next(4) == 0)
        //                                                    {
        //                                                        if (Main.player[j].zoneEvil)
        //                                                        {
        //                                                            NPC.NewNPC(num * 16 + 8, num2 * 16, 57, 0);
        //                                                        }
        //                                                        else
        //                                                        {
        //                                                            NPC.NewNPC(num * 16 + 8, num2 * 16, 55, 0);
        //                                                        }
        //                                                    }
        //                                                    else
        //                                                    {
        //                                                        if (NPC.downedGoblins && Main.rand.Next(20) == 0 && !flag5 && (double)num2 >= Main.rockLayer && num2 < Main.maxTilesY - 210 && !NPC.savedGoblin && !NPC.AnyNPCs(105))
        //                                                        {
        //                                                            NPC.NewNPC(num * 16 + 8, num2 * 16, 105, 0);
        //                                                        }
        //                                                        else
        //                                                        {
        //                                                            if (Main.hardMode && Main.rand.Next(20) == 0 && !flag5 && (double)num2 >= Main.rockLayer && num2 < Main.maxTilesY - 210 && !NPC.savedWizard && !NPC.AnyNPCs(106))
        //                                                            {
        //                                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 106, 0);
        //                                                            }
        //                                                            else
        //                                                            {
        //                                                                if (flag8)
        //                                                                {
        //                                                                    if (flag5)
        //                                                                    {
        //                                                                        NPC.NewNPC(num * 16 + 8, num2 * 16, 55, 0);
        //                                                                    }
        //                                                                    else
        //                                                                    {
        //                                                                        if (num29 == 147 || num29 == 161)
        //                                                                        {
        //                                                                            if (Main.rand.Next(2) == 0)
        //                                                                            {
        //                                                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 148, 0);
        //                                                                            }
        //                                                                            else
        //                                                                            {
        //                                                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 149, 0);
        //                                                                            }
        //                                                                        }
        //                                                                        else
        //                                                                        {
        //                                                                            if (num29 != 2 && num29 != 109 && (double)num2 <= Main.worldSurface)
        //                                                                            {
        //                                                                                return;
        //                                                                            }
        //                                                                            if (Main.raining)
        //                                                                            {
        //                                                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 230, 0);
        //                                                                            }
        //                                                                            else
        //                                                                            {
        //                                                                                if (Main.rand.Next(2) == 0 && (double)num2 <= Main.worldSurface)
        //                                                                                {
        //                                                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 74, 0);
        //                                                                                }
        //                                                                                else
        //                                                                                {
        //                                                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 46, 0);
        //                                                                                }
        //                                                                            }
        //                                                                        }
        //                                                                    }
        //                                                                }
        //                                                                else
        //                                                                {
        //                                                                    if (Main.player[j].zoneDungeon)
        //                                                                    {
        //                                                                        int num31 = 0;
        //                                                                        if (Main.tile[num, num2].wall == 94 || Main.tile[num, num2].wall == 96 || Main.tile[num, num2].wall == 98)
        //                                                                        {
        //                                                                            num31 = 1;
        //                                                                        }
        //                                                                        if (Main.tile[num, num2].wall == 95 || Main.tile[num, num2].wall == 97 || Main.tile[num, num2].wall == 99)
        //                                                                        {
        //                                                                            num31 = 2;
        //                                                                        }
        //                                                                        if (!NPC.downedBoss3)
        //                                                                        {
        //                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 68, 0);
        //                                                                        }
        //                                                                        else
        //                                                                        {
        //                                                                            if (!NPC.savedMech && Main.rand.Next(5) == 0 && !flag5 && !NPC.AnyNPCs(123) && (double)num2 > Main.rockLayer)
        //                                                                            {
        //                                                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 123, 0);
        //                                                                            }
        //                                                                            else
        //                                                                            {
        //                                                                                if (Main.hardMode && Main.rand.Next(75) == 0)
        //                                                                                {
        //                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 287, 0);
        //                                                                                }
        //                                                                                else
        //                                                                                {
        //                                                                                    if (Main.hardMode && num31 == 0 && Main.rand.Next(25) == 0)
        //                                                                                    {
        //                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 293, 0);
        //                                                                                    }
        //                                                                                    else
        //                                                                                    {
        //                                                                                        if (Main.hardMode && num31 == 1 && Main.rand.Next(25) == 0)
        //                                                                                        {
        //                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 291, 0);
        //                                                                                        }
        //                                                                                        else
        //                                                                                        {
        //                                                                                            if (Main.hardMode && num31 == 2 && Main.rand.Next(25) == 0)
        //                                                                                            {
        //                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 292, 0);
        //                                                                                            }
        //                                                                                            else
        //                                                                                            {
        //                                                                                                if (Main.hardMode && !NPC.AnyNPCs(290) && num31 == 0 && Main.rand.Next(45) == 0)
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 290, 0);
        //                                                                                                }
        //                                                                                                else
        //                                                                                                {
        //                                                                                                    if (Main.hardMode && (num31 == 1 || num31 == 2) && Main.rand.Next(30) == 0)
        //                                                                                                    {
        //                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 289, 0);
        //                                                                                                    }
        //                                                                                                    else
        //                                                                                                    {
        //                                                                                                        if (Main.hardMode && Main.rand.Next(20) == 0)
        //                                                                                                        {
        //                                                                                                            int num32 = 281;
        //                                                                                                            if (num31 == 0)
        //                                                                                                            {
        //                                                                                                                num32 += 2;
        //                                                                                                            }
        //                                                                                                            if (num31 == 2)
        //                                                                                                            {
        //                                                                                                                num32 += 4;
        //                                                                                                            }
        //                                                                                                            num32 += Main.rand.Next(2);
        //                                                                                                            if (!NPC.AnyNPCs(num32))
        //                                                                                                            {
        //                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, num32, 0);
        //                                                                                                            }
        //                                                                                                        }
        //                                                                                                        else
        //                                                                                                        {
        //                                                                                                            if (Main.hardMode && Main.rand.Next(3) != 0)
        //                                                                                                            {
        //                                                                                                                int num33 = 269;
        //                                                                                                                if (num31 == 0)
        //                                                                                                                {
        //                                                                                                                    num33 += 4;
        //                                                                                                                }
        //                                                                                                                if (num31 == 2)
        //                                                                                                                {
        //                                                                                                                    num33 += 8;
        //                                                                                                                }
        //                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, num33 + Main.rand.Next(4), 0);
        //                                                                                                            }
        //                                                                                                            else
        //                                                                                                            {
        //                                                                                                                if (Main.rand.Next(37) == 0)
        //                                                                                                                {
        //                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 71, 0);
        //                                                                                                                }
        //                                                                                                                else
        //                                                                                                                {
        //                                                                                                                    if (num31 == 1 && Main.rand.Next(4) == 0 && !NPC.NearSpikeBall(num, num2))
        //                                                                                                                    {
        //                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 70, 0);
        //                                                                                                                    }
        //                                                                                                                    else
        //                                                                                                                    {
        //                                                                                                                        if (num31 == 2 && Main.rand.Next(15) == 0)
        //                                                                                                                        {
        //                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 72, 0);
        //                                                                                                                        }
        //                                                                                                                        else
        //                                                                                                                        {
        //                                                                                                                            if (num31 == 0 && Main.rand.Next(9) == 0)
        //                                                                                                                            {
        //                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 34, 0);
        //                                                                                                                            }
        //                                                                                                                            else
        //                                                                                                                            {
        //                                                                                                                                if (Main.rand.Next(7) == 0)
        //                                                                                                                                {
        //                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 32, 0);
        //                                                                                                                                }
        //                                                                                                                                else
        //                                                                                                                                {
        //                                                                                                                                    int num34 = Main.rand.Next(5);
        //                                                                                                                                    if (num34 == 0)
        //                                                                                                                                    {
        //                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 294, 0);
        //                                                                                                                                    }
        //                                                                                                                                    else
        //                                                                                                                                    {
        //                                                                                                                                        if (num34 == 1)
        //                                                                                                                                        {
        //                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 295, 0);
        //                                                                                                                                        }
        //                                                                                                                                        else
        //                                                                                                                                        {
        //                                                                                                                                            if (num34 == 2)
        //                                                                                                                                            {
        //                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 296, 0);
        //                                                                                                                                            }
        //                                                                                                                                            else
        //                                                                                                                                            {
        //                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 31, 0);
        //                                                                                                                                                if (Main.rand.Next(4) == 0)
        //                                                                                                                                                {
        //                                                                                                                                                    Main.npc[num30].SetDefaults("Big Boned");
        //                                                                                                                                                }
        //                                                                                                                                                else
        //                                                                                                                                                {
        //                                                                                                                                                    if (Main.rand.Next(5) == 0)
        //                                                                                                                                                    {
        //                                                                                                                                                        Main.npc[num30].SetDefaults("Short Bones");
        //                                                                                                                                                    }
        //                                                                                                                                                }
        //                                                                                                                                            }
        //                                                                                                                                        }
        //                                                                                                                                    }
        //                                                                                                                                }
        //                                                                                                                            }
        //                                                                                                                        }
        //                                                                                                                    }
        //                                                                                                                }
        //                                                                                                            }
        //                                                                                                        }
        //                                                                                                    }
        //                                                                                                }
        //                                                                                            }
        //                                                                                        }
        //                                                                                    }
        //                                                                                }
        //                                                                            }
        //                                                                        }
        //                                                                    }
        //                                                                    else
        //                                                                    {
        //                                                                        if (Main.player[j].zoneMeteor)
        //                                                                        {
        //                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 23, 0);
        //                                                                        }
        //                                                                        else
        //                                                                        {
        //                                                                            if ((double)num2 <= Main.worldSurface && Main.dayTime && Main.eclipse)
        //                                                                            {
        //                                                                                if (Main.rand.Next(50) == 0 && !NPC.AnyNPCs(251))
        //                                                                                {
        //                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 251, 0);
        //                                                                                }
        //                                                                                else
        //                                                                                {
        //                                                                                    if (Main.rand.Next(10) == 0)
        //                                                                                    {
        //                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 253, 0);
        //                                                                                    }
        //                                                                                    else
        //                                                                                    {
        //                                                                                        if (Main.rand.Next(12) == 0)
        //                                                                                        {
        //                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 158, 0);
        //                                                                                        }
        //                                                                                        else
        //                                                                                        {
        //                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                            {
        //                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 162, 0);
        //                                                                                            }
        //                                                                                            else
        //                                                                                            {
        //                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 166, 0);
        //                                                                                            }
        //                                                                                        }
        //                                                                                    }
        //                                                                                }
        //                                                                            }
        //                                                                            else
        //                                                                            {
        //                                                                                if (Main.hardMode && num3 == 70 && flag5)
        //                                                                                {
        //                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 256, 0);
        //                                                                                }
        //                                                                                else
        //                                                                                {
        //                                                                                    if (num3 == 70 && (double)num2 <= Main.worldSurface && Main.rand.Next(3) != 0)
        //                                                                                    {
        //                                                                                        if (Main.rand.Next(3) == 0)
        //                                                                                        {
        //                                                                                            if (Main.rand.Next(4) == 0)
        //                                                                                            {
        //                                                                                                if (Main.hardMode && Main.rand.Next(3) != 0)
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 260, 0);
        //                                                                                                    Main.npc[num30].ai[0] = (float)num;
        //                                                                                                    Main.npc[num30].ai[1] = (float)num2;
        //                                                                                                    Main.npc[num30].netUpdate = true;
        //                                                                                                }
        //                                                                                                else
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 259, 0);
        //                                                                                                    Main.npc[num30].ai[0] = (float)num;
        //                                                                                                    Main.npc[num30].ai[1] = (float)num2;
        //                                                                                                    Main.npc[num30].netUpdate = true;
        //                                                                                                }
        //                                                                                            }
        //                                                                                            else
        //                                                                                            {
        //                                                                                                if (Main.rand.Next(2) == 0)
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 257, 0);
        //                                                                                                }
        //                                                                                                else
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 258, 0);
        //                                                                                                }
        //                                                                                            }
        //                                                                                        }
        //                                                                                        else
        //                                                                                        {
        //                                                                                            if (Main.rand.Next(2) == 0)
        //                                                                                            {
        //                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 254, 0);
        //                                                                                            }
        //                                                                                            else
        //                                                                                            {
        //                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 255, 0);
        //                                                                                            }
        //                                                                                        }
        //                                                                                    }
        //                                                                                    else
        //                                                                                    {
        //                                                                                        if (num3 == 70 && Main.hardMode && (double)num2 >= Main.worldSurface && Main.rand.Next(3) != 0)
        //                                                                                        {
        //                                                                                            if (Main.rand.Next(4) == 0)
        //                                                                                            {
        //                                                                                                if (Main.hardMode && Main.rand.Next(3) != 0)
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 260, 0);
        //                                                                                                    Main.npc[num30].ai[0] = (float)num;
        //                                                                                                    Main.npc[num30].ai[1] = (float)num2;
        //                                                                                                    Main.npc[num30].netUpdate = true;
        //                                                                                                }
        //                                                                                                else
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 259, 0);
        //                                                                                                    Main.npc[num30].ai[0] = (float)num;
        //                                                                                                    Main.npc[num30].ai[1] = (float)num2;
        //                                                                                                    Main.npc[num30].netUpdate = true;
        //                                                                                                }
        //                                                                                            }
        //                                                                                            else
        //                                                                                            {
        //                                                                                                if (Main.rand.Next(2) == 0)
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 257, 0);
        //                                                                                                }
        //                                                                                                else
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 258, 0);
        //                                                                                                }
        //                                                                                            }
        //                                                                                        }
        //                                                                                        else
        //                                                                                        {
        //                                                                                            if (Main.player[j].zoneEvil && Main.rand.Next(65) == 0 && !flag3)
        //                                                                                            {
        //                                                                                                if (Main.hardMode && Main.rand.Next(4) != 0)
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 98, 1);
        //                                                                                                }
        //                                                                                                else
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 7, 1);
        //                                                                                                }
        //                                                                                            }
        //                                                                                            else
        //                                                                                            {
        //                                                                                                if (Main.hardMode && (double)num2 > Main.worldSurface && Main.rand.Next(75) == 0)
        //                                                                                                {
        //                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 85, 0);
        //                                                                                                }
        //                                                                                                else
        //                                                                                                {
        //                                                                                                    if (Main.hardMode && Main.tile[num, num2 - 1].wall == 2 && Main.rand.Next(20) == 0)
        //                                                                                                    {
        //                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 85, 0);
        //                                                                                                    }
        //                                                                                                    else
        //                                                                                                    {
        //                                                                                                        if (Main.hardMode && (double)num2 <= Main.worldSurface && !Main.dayTime && (Main.rand.Next(20) == 0 || (Main.rand.Next(5) == 0 && Main.moonPhase == 4)))
        //                                                                                                        {
        //                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 82, 0);
        //                                                                                                        }
        //                                                                                                        else
        //                                                                                                        {
        //                                                                                                            if (num29 == 60 && Main.rand.Next(500) == 0 && !Main.dayTime)
        //                                                                                                            {
        //                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 52, 0);
        //                                                                                                            }
        //                                                                                                            else
        //                                                                                                            {
        //                                                                                                                if (num29 == 60 && (double)num2 > Main.worldSurface && Main.rand.Next(60) == 0)
        //                                                                                                                {
        //                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 219, 0);
        //                                                                                                                }
        //                                                                                                                else
        //                                                                                                                {
        //                                                                                                                    if (num29 == 60 && Main.hardMode)
        //                                                                                                                    {
        //                                                                                                                        if ((double)num2 < Main.worldSurface && !Main.dayTime && Main.rand.Next(3) == 0)
        //                                                                                                                        {
        //                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 152, 0);
        //                                                                                                                        }
        //                                                                                                                        else
        //                                                                                                                        {
        //                                                                                                                            if ((double)num2 < Main.worldSurface && Main.dayTime && Main.rand.Next(4) != 0)
        //                                                                                                                            {
        //                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 177, 0);
        //                                                                                                                            }
        //                                                                                                                            else
        //                                                                                                                            {
        //                                                                                                                                if ((double)num2 > Main.worldSurface && Main.rand.Next(100) == 0)
        //                                                                                                                                {
        //                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 205, 0);
        //                                                                                                                                }
        //                                                                                                                                else
        //                                                                                                                                {
        //                                                                                                                                    if ((double)num2 > Main.worldSurface && Main.rand.Next(5) == 0)
        //                                                                                                                                    {
        //                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 236, 0);
        //                                                                                                                                    }
        //                                                                                                                                    else
        //                                                                                                                                    {
        //                                                                                                                                        if ((double)num2 > Main.worldSurface && Main.rand.Next(3) != 0)
        //                                                                                                                                        {
        //                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 176, 0);
        //                                                                                                                                            if (Main.rand.Next(10) == 0)
        //                                                                                                                                            {
        //                                                                                                                                                Main.npc[num30].SetDefaults("Tiny Moss Hornet");
        //                                                                                                                                            }
        //                                                                                                                                            if (Main.rand.Next(10) == 0)
        //                                                                                                                                            {
        //                                                                                                                                                Main.npc[num30].SetDefaults("Little Moss Hornet");
        //                                                                                                                                            }
        //                                                                                                                                            if (Main.rand.Next(10) == 0)
        //                                                                                                                                            {
        //                                                                                                                                                Main.npc[num30].SetDefaults("Big Moss Hornet");
        //                                                                                                                                            }
        //                                                                                                                                            if (Main.rand.Next(10) == 0)
        //                                                                                                                                            {
        //                                                                                                                                                Main.npc[num30].SetDefaults("Giant Moss Hornet");
        //                                                                                                                                            }
        //                                                                                                                                        }
        //                                                                                                                                        else
        //                                                                                                                                        {
        //                                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                                            {
        //                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 175, 0);
        //                                                                                                                                                Main.npc[num30].ai[0] = (float)num;
        //                                                                                                                                                Main.npc[num30].ai[1] = (float)num2;
        //                                                                                                                                                Main.npc[num30].netUpdate = true;
        //                                                                                                                                            }
        //                                                                                                                                            else
        //                                                                                                                                            {
        //                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 153, 0);
        //                                                                                                                                            }
        //                                                                                                                                        }
        //                                                                                                                                    }
        //                                                                                                                                }
        //                                                                                                                            }
        //                                                                                                                        }
        //                                                                                                                    }
        //                                                                                                                    else
        //                                                                                                                    {
        //                                                                                                                        if (num29 == 226 && flag2)
        //                                                                                                                        {
        //                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                            {
        //                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 226, 0);
        //                                                                                                                            }
        //                                                                                                                            else
        //                                                                                                                            {
        //                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 198, 0);
        //                                                                                                                            }
        //                                                                                                                        }
        //                                                                                                                        else
        //                                                                                                                        {
        //                                                                                                                            if (num29 == 60 && (double)num2 > (Main.worldSurface + Main.rockLayer) / 2.0)
        //                                                                                                                            {
        //                                                                                                                                if (Main.rand.Next(4) == 0)
        //                                                                                                                                {
        //                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 204, 0);
        //                                                                                                                                }
        //                                                                                                                                else
        //                                                                                                                                {
        //                                                                                                                                    if (Main.rand.Next(4) == 0)
        //                                                                                                                                    {
        //                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 43, 0);
        //                                                                                                                                        Main.npc[num30].ai[0] = (float)num;
        //                                                                                                                                        Main.npc[num30].ai[1] = (float)num2;
        //                                                                                                                                        Main.npc[num30].netUpdate = true;
        //                                                                                                                                    }
        //                                                                                                                                    else
        //                                                                                                                                    {
        //                                                                                                                                        int num35 = Main.rand.Next(8);
        //                                                                                                                                        if (num35 == 0)
        //                                                                                                                                        {
        //                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 231, 0);
        //                                                                                                                                            if (Main.rand.Next(4) == 0)
        //                                                                                                                                            {
        //                                                                                                                                                Main.npc[num30].SetDefaults("Little Hornet Fatty");
        //                                                                                                                                            }
        //                                                                                                                                            else
        //                                                                                                                                            {
        //                                                                                                                                                if (Main.rand.Next(4) == 0)
        //                                                                                                                                                {
        //                                                                                                                                                    Main.npc[num30].SetDefaults("Big Hornet Fatty");
        //                                                                                                                                                }
        //                                                                                                                                            }
        //                                                                                                                                        }
        //                                                                                                                                        else
        //                                                                                                                                        {
        //                                                                                                                                            if (num35 == 1)
        //                                                                                                                                            {
        //                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 232, 0);
        //                                                                                                                                                if (Main.rand.Next(4) == 0)
        //                                                                                                                                                {
        //                                                                                                                                                    Main.npc[num30].SetDefaults("Little Hornet Honey");
        //                                                                                                                                                }
        //                                                                                                                                                else
        //                                                                                                                                                {
        //                                                                                                                                                    if (Main.rand.Next(4) == 0)
        //                                                                                                                                                    {
        //                                                                                                                                                        Main.npc[num30].SetDefaults("Big Hornet Honey");
        //                                                                                                                                                    }
        //                                                                                                                                                }
        //                                                                                                                                            }
        //                                                                                                                                            else
        //                                                                                                                                            {
        //                                                                                                                                                if (num35 == 2)
        //                                                                                                                                                {
        //                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 233, 0);
        //                                                                                                                                                    if (Main.rand.Next(4) == 0)
        //                                                                                                                                                    {
        //                                                                                                                                                        Main.npc[num30].SetDefaults("Little Hornet Leafy");
        //                                                                                                                                                    }
        //                                                                                                                                                    else
        //                                                                                                                                                    {
        //                                                                                                                                                        if (Main.rand.Next(4) == 0)
        //                                                                                                                                                        {
        //                                                                                                                                                            Main.npc[num30].SetDefaults("Big Hornet Leafy");
        //                                                                                                                                                        }
        //                                                                                                                                                    }
        //                                                                                                                                                }
        //                                                                                                                                                else
        //                                                                                                                                                {
        //                                                                                                                                                    if (num35 == 3)
        //                                                                                                                                                    {
        //                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 234, 0);
        //                                                                                                                                                        if (Main.rand.Next(4) == 0)
        //                                                                                                                                                        {
        //                                                                                                                                                            Main.npc[num30].SetDefaults("Little Hornet Spikey");
        //                                                                                                                                                        }
        //                                                                                                                                                        else
        //                                                                                                                                                        {
        //                                                                                                                                                            if (Main.rand.Next(4) == 0)
        //                                                                                                                                                            {
        //                                                                                                                                                                Main.npc[num30].SetDefaults("Big Hornet Spikey");
        //                                                                                                                                                            }
        //                                                                                                                                                        }
        //                                                                                                                                                    }
        //                                                                                                                                                    else
        //                                                                                                                                                    {
        //                                                                                                                                                        if (num35 == 4)
        //                                                                                                                                                        {
        //                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 235, 0);
        //                                                                                                                                                            if (Main.rand.Next(4) == 0)
        //                                                                                                                                                            {
        //                                                                                                                                                                Main.npc[num30].SetDefaults("Little Hornet Stingy");
        //                                                                                                                                                            }
        //                                                                                                                                                            else
        //                                                                                                                                                            {
        //                                                                                                                                                                if (Main.rand.Next(4) == 0)
        //                                                                                                                                                                {
        //                                                                                                                                                                    Main.npc[num30].SetDefaults("Big Hornet Stingy");
        //                                                                                                                                                                }
        //                                                                                                                                                            }
        //                                                                                                                                                        }
        //                                                                                                                                                        else
        //                                                                                                                                                        {
        //                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 42, 0);
        //                                                                                                                                                            if (Main.rand.Next(4) == 0)
        //                                                                                                                                                            {
        //                                                                                                                                                                Main.npc[num30].SetDefaults("Little Stinger");
        //                                                                                                                                                            }
        //                                                                                                                                                            else
        //                                                                                                                                                            {
        //                                                                                                                                                                if (Main.rand.Next(4) == 0)
        //                                                                                                                                                                {
        //                                                                                                                                                                    Main.npc[num30].SetDefaults("Big Stinger");
        //                                                                                                                                                                }
        //                                                                                                                                                            }
        //                                                                                                                                                        }
        //                                                                                                                                                    }
        //                                                                                                                                                }
        //                                                                                                                                            }
        //                                                                                                                                        }
        //                                                                                                                                    }
        //                                                                                                                                }
        //                                                                                                                            }
        //                                                                                                                            else
        //                                                                                                                            {
        //                                                                                                                                if (num29 == 60 && Main.rand.Next(4) == 0)
        //                                                                                                                                {
        //                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 51, 0);
        //                                                                                                                                }
        //                                                                                                                                else
        //                                                                                                                                {
        //                                                                                                                                    if (num29 == 60 && Main.rand.Next(8) == 0)
        //                                                                                                                                    {
        //                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 56, 0);
        //                                                                                                                                        Main.npc[num30].ai[0] = (float)num;
        //                                                                                                                                        Main.npc[num30].ai[1] = (float)num2;
        //                                                                                                                                        Main.npc[num30].netUpdate = true;
        //                                                                                                                                    }
        //                                                                                                                                    else
        //                                                                                                                                    {
        //                                                                                                                                        if (Main.hardMode && num29 == 53 && Main.rand.Next(3) == 0)
        //                                                                                                                                        {
        //                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 78, 0);
        //                                                                                                                                        }
        //                                                                                                                                        else
        //                                                                                                                                        {
        //                                                                                                                                            if (Main.hardMode && (num29 == 112 || num29 == 234) && Main.rand.Next(2) == 0)
        //                                                                                                                                            {
        //                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 79, 0);
        //                                                                                                                                            }
        //                                                                                                                                            else
        //                                                                                                                                            {
        //                                                                                                                                                if (Main.hardMode && num29 == 116 && Main.rand.Next(2) == 0)
        //                                                                                                                                                {
        //                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 80, 0);
        //                                                                                                                                                }
        //                                                                                                                                                else
        //                                                                                                                                                {
        //                                                                                                                                                    if (Main.hardMode && !flag5 && (double)num2 < Main.rockLayer && (num29 == 116 || num29 == 117 || num29 == 109 || num29 == 164))
        //                                                                                                                                                    {
        //                                                                                                                                                        if (!Main.dayTime && Main.rand.Next(2) == 0)
        //                                                                                                                                                        {
        //                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 122, 0);
        //                                                                                                                                                        }
        //                                                                                                                                                        else
        //                                                                                                                                                        {
        //                                                                                                                                                            if (Main.rand.Next(10) == 0)
        //                                                                                                                                                            {
        //                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 86, 0);
        //                                                                                                                                                            }
        //                                                                                                                                                            else
        //                                                                                                                                                            {
        //                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 75, 0);
        //                                                                                                                                                            }
        //                                                                                                                                                        }
        //                                                                                                                                                    }
        //                                                                                                                                                    else
        //                                                                                                                                                    {
        //                                                                                                                                                        if (!flag3 && Main.hardMode && Main.rand.Next(50) == 0 && !flag5 && (double)num2 >= Main.rockLayer && (num29 == 116 || num29 == 117 || num29 == 109 || num29 == 164))
        //                                                                                                                                                        {
        //                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 84, 0);
        //                                                                                                                                                        }
        //                                                                                                                                                        else
        //                                                                                                                                                        {
        //                                                                                                                                                            if ((num29 == 204 && Main.player[j].zoneBlood) || num29 == 199 || num29 == 200 || num29 == 203)
        //                                                                                                                                                            {
        //                                                                                                                                                                if (Main.hardMode && (double)num2 >= Main.rockLayer && Main.rand.Next(5) == 0 && !flag3)
        //                                                                                                                                                                {
        //                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 182, 0);
        //                                                                                                                                                                }
        //                                                                                                                                                                else
        //                                                                                                                                                                {
        //                                                                                                                                                                    if (Main.hardMode && (double)num2 >= Main.rockLayer && Main.rand.Next(2) == 0)
        //                                                                                                                                                                    {
        //                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 268, 0);
        //                                                                                                                                                                    }
        //                                                                                                                                                                    else
        //                                                                                                                                                                    {
        //                                                                                                                                                                        if (Main.hardMode && Main.rand.Next(3) == 0)
        //                                                                                                                                                                        {
        //                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 183, 0);
        //                                                                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                            {
        //                                                                                                                                                                                Main.npc[num30].SetDefaults("Little Crimslime");
        //                                                                                                                                                                            }
        //                                                                                                                                                                            else
        //                                                                                                                                                                            {
        //                                                                                                                                                                                if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    Main.npc[num30].SetDefaults("Big Crimslime");
        //                                                                                                                                                                                }
        //                                                                                                                                                                            }
        //                                                                                                                                                                        }
        //                                                                                                                                                                        else
        //                                                                                                                                                                        {
        //                                                                                                                                                                            if (Main.hardMode && (double)num2 >= Main.rockLayer && Main.rand.Next(40) == 0 && !flag3)
        //                                                                                                                                                                            {
        //                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 179, 0);
        //                                                                                                                                                                            }
        //                                                                                                                                                                            else
        //                                                                                                                                                                            {
        //                                                                                                                                                                                if (Main.hardMode && (Main.rand.Next(2) == 0 || (double)num2 > Main.worldSurface))
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 174, 0);
        //                                                                                                                                                                                }
        //                                                                                                                                                                                else
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    if ((Main.tile[num, num2].wall > 0 && Main.rand.Next(4) != 0) || Main.rand.Next(8) == 0)
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 239, 0);
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                    else
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 181, 0);
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                        else
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 173, 0);
        //                                                                                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                Main.npc[num30].SetDefaults("Little Crimera");
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                            else
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Big Crimera");
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                }
        //                                                                                                                                                                            }
        //                                                                                                                                                                        }
        //                                                                                                                                                                    }
        //                                                                                                                                                                }
        //                                                                                                                                                            }
        //                                                                                                                                                            else
        //                                                                                                                                                            {
        //                                                                                                                                                                if ((num29 == 22 && Main.player[j].zoneEvil) || num29 == 23 || num29 == 25 || num29 == 112 || num29 == 163)
        //                                                                                                                                                                {
        //                                                                                                                                                                    if (Main.hardMode && (double)num2 >= Main.rockLayer && Main.rand.Next(3) == 0)
        //                                                                                                                                                                    {
        //                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 101, 0);
        //                                                                                                                                                                        Main.npc[num30].ai[0] = (float)num;
        //                                                                                                                                                                        Main.npc[num30].ai[1] = (float)num2;
        //                                                                                                                                                                        Main.npc[num30].netUpdate = true;
        //                                                                                                                                                                    }
        //                                                                                                                                                                    else
        //                                                                                                                                                                    {
        //                                                                                                                                                                        if (Main.hardMode && Main.rand.Next(3) == 0)
        //                                                                                                                                                                        {
        //                                                                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                            {
        //                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 121, 0);
        //                                                                                                                                                                            }
        //                                                                                                                                                                            else
        //                                                                                                                                                                            {
        //                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 81, 0);
        //                                                                                                                                                                            }
        //                                                                                                                                                                        }
        //                                                                                                                                                                        else
        //                                                                                                                                                                        {
        //                                                                                                                                                                            if (Main.hardMode && (double)num2 >= Main.rockLayer && Main.rand.Next(40) == 0 && !flag3)
        //                                                                                                                                                                            {
        //                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 83, 0);
        //                                                                                                                                                                            }
        //                                                                                                                                                                            else
        //                                                                                                                                                                            {
        //                                                                                                                                                                                if (Main.hardMode && (Main.rand.Next(2) == 0 || (double)num2 > Main.rockLayer))
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 94, 0);
        //                                                                                                                                                                                }
        //                                                                                                                                                                                else
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 6, 0);
        //                                                                                                                                                                                    if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        Main.npc[num30].SetDefaults("Little Eater");
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                    else
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            Main.npc[num30].SetDefaults("Big Eater");
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                }
        //                                                                                                                                                                            }
        //                                                                                                                                                                        }
        //                                                                                                                                                                    }
        //                                                                                                                                                                }
        //                                                                                                                                                                else
        //                                                                                                                                                                {
        //                                                                                                                                                                    if ((double)num2 <= Main.worldSurface)
        //                                                                                                                                                                    {
        //                                                                                                                                                                        if (Main.player[j].zoneSnow && Main.hardMode && Main.cloudAlpha > 0f && !NPC.AnyNPCs(243) && Main.rand.Next(20) == 0)
        //                                                                                                                                                                        {
        //                                                                                                                                                                            NPC.NewNPC(num * 16 + 8, num2 * 16, 243, 0);
        //                                                                                                                                                                        }
        //                                                                                                                                                                        else
        //                                                                                                                                                                        {
        //                                                                                                                                                                            if (Main.player[j].zoneHoly && Main.hardMode && Main.cloudAlpha > 0f && !NPC.AnyNPCs(244) && Main.rand.Next(20) == 0)
        //                                                                                                                                                                            {
        //                                                                                                                                                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 244, 0);
        //                                                                                                                                                                            }
        //                                                                                                                                                                            else
        //                                                                                                                                                                            {
        //                                                                                                                                                                                if (!Main.player[j].zoneSnow && Main.hardMode && Main.cloudAlpha > 0f && !NPC.AnyNPCs(250) && Main.rand.Next(14) == 0)
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 250, 0);
        //                                                                                                                                                                                }
        //                                                                                                                                                                                else
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    if (Main.dayTime)
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        int num36 = Math.Abs(num - Main.spawnTileX);
        //                                                                                                                                                                                        if (num36 < Main.maxTilesX / 3 && Main.rand.Next(15) == 0 && (num29 == 2 || num29 == 109 || num29 == 147 || num29 == 161))
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            if (num29 == 147 || num29 == 161)
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 148, 0);
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                                else
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 149, 0);
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                            else
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 46, 0);
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                        else
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            if (num36 < Main.maxTilesX / 3 && Main.rand.Next(15) == 0 && (num29 == 2 || num29 == 109 || num29 == 147))
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 74, 0);
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                            else
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                if (num36 > Main.maxTilesX / 3 && num29 == 2 && Main.rand.Next(300) == 0 && !NPC.AnyNPCs(50))
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 50, 0);
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                                else
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    if (num29 == 53 && Main.rand.Next(5) == 0 && !flag5)
        //                                                                                                                                                                                                    {
        //                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 69, 0);
        //                                                                                                                                                                                                    }
        //                                                                                                                                                                                                    else
        //                                                                                                                                                                                                    {
        //                                                                                                                                                                                                        if (num29 == 53 && !flag5)
        //                                                                                                                                                                                                        {
        //                                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 61, 0);
        //                                                                                                                                                                                                        }
        //                                                                                                                                                                                                        else
        //                                                                                                                                                                                                        {
        //                                                                                                                                                                                                            if (num36 > Main.maxTilesX / 3 && (Main.rand.Next(15) == 0 || (!NPC.downedGoblins && WorldGen.shadowOrbSmashed && Main.rand.Next(7) == 0)))
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 73, 0);
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                            else
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                if (Main.raining && Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 224, 0);
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    if (Main.raining && Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 225, 0);
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 1, 0);
        //                                                                                                                                                                                                                        if (num29 == 60)
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Jungle Slime");
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            if (num29 == 161 || num29 == 147)
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                Main.npc[num30].SetDefaults("Ice Slime");
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                if (Main.rand.Next(3) == 0 || num36 < 200)
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Green Slime");
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    if (Main.rand.Next(10) == 0 && num36 > 400)
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Purple Slime");
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                        }
        //                                                                                                                                                                                                    }
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                    else
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        if (Main.rand.Next(6) == 0 || (Main.moonPhase == 4 && Main.rand.Next(2) == 0))
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            if (Main.hardMode && Main.rand.Next(3) == 0)
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 133, 0);
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                            else
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 2, 0);
        //                                                                                                                                                                                                    if (Main.rand.Next(4) == 0)
        //                                                                                                                                                                                                    {
        //                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Demon Eye 2");
        //                                                                                                                                                                                                    }
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                                else
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    int num37 = Main.rand.Next(5);
        //                                                                                                                                                                                                    if (num37 == 0)
        //                                                                                                                                                                                                    {
        //                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 190, 0);
        //                                                                                                                                                                                                        if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                        {
        //                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Cataract Eye 2");
        //                                                                                                                                                                                                        }
        //                                                                                                                                                                                                    }
        //                                                                                                                                                                                                    else
        //                                                                                                                                                                                                    {
        //                                                                                                                                                                                                        if (num37 == 1)
        //                                                                                                                                                                                                        {
        //                                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 191, 0);
        //                                                                                                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                Main.npc[num30].SetDefaults("Sleepy Eye 2");
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                        }
        //                                                                                                                                                                                                        else
        //                                                                                                                                                                                                        {
        //                                                                                                                                                                                                            if (num37 == 2)
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 192, 0);
        //                                                                                                                                                                                                                if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Dialated Eye 2");
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                            else
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                if (num37 == 3)
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 193, 0);
        //                                                                                                                                                                                                                    if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Green Eye 2");
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    if (num37 == 4)
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 194, 0);
        //                                                                                                                                                                                                                        if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Purple Eye 2");
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                        }
        //                                                                                                                                                                                                    }
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                        else
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            if (Main.hardMode && Main.rand.Next(50) == 0 && Main.bloodMoon && !NPC.AnyNPCs(109))
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                NPC.NewNPC(num * 16 + 8, num2 * 16, 109, 0);
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                            else
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                if (Main.rand.Next(250) == 0 && Main.bloodMoon)
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    NPC.NewNPC(num * 16 + 8, num2 * 16, 53, 0);
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                                else
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    if (Main.moonPhase == 0 && Main.hardMode && Main.rand.Next(3) != 0)
        //                                                                                                                                                                                                    {
        //                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 104, 0);
        //                                                                                                                                                                                                    }
        //                                                                                                                                                                                                    else
        //                                                                                                                                                                                                    {
        //                                                                                                                                                                                                        if (Main.hardMode && Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                        {
        //                                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 140, 0);
        //                                                                                                                                                                                                        }
        //                                                                                                                                                                                                        else
        //                                                                                                                                                                                                        {
        //                                                                                                                                                                                                            if (num3 == 147 || num3 == 161 || num3 == 163 || num3 == 164 || num3 == 162)
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                if (Main.hardMode && Main.rand.Next(4) == 0)
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 169, 0);
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    if (Main.hardMode && Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 155, 0);
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 161, 0);
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                            else
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                if (Main.raining && Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 223, 0);
        //                                                                                                                                                                                                                    if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Small Rain Zombie");
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Big Rain Zombie");
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    int num38 = Main.rand.Next(7);
        //                                                                                                                                                                                                                    if (num38 == 0)
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 3, 0);
        //                                                                                                                                                                                                                        if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                Main.npc[num30].SetDefaults("Small Zombie");
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                Main.npc[num30].SetDefaults("Big Zombie");
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        if (num38 == 1)
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 132, 0);
        //                                                                                                                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Small Bald Zombie");
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Big Bald Zombie");
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            if (num38 == 2)
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 186, 0);
        //                                                                                                                                                                                                                                if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Small Pincushion Zombie");
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Big Pincushion Zombie");
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                if (num38 == 3)
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 187, 0);
        //                                                                                                                                                                                                                                    if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Small Slimed Zombie");
        //                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Big Slimed Zombie");
        //                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    if (num38 == 4)
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 188, 0);
        //                                                                                                                                                                                                                                        if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                            if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                Main.npc[num30].SetDefaults("Small Swamp Zombie");
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                Main.npc[num30].SetDefaults("Big Swamp Zombie");
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        if (num38 == 5)
        //                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 189, 0);
        //                                                                                                                                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Small Twiggy Zombie");
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Big Twiggy Zombie");
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                            if (num38 == 6)
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 200, 0);
        //                                                                                                                                                                                                                                                if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Small Female Zombie");
        //                                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Big Female Zombie");
        //                                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                        }
        //                                                                                                                                                                                                    }
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                }
        //                                                                                                                                                                            }
        //                                                                                                                                                                        }
        //                                                                                                                                                                    }
        //                                                                                                                                                                    else
        //                                                                                                                                                                    {
        //                                                                                                                                                                        if ((double)num2 <= Main.rockLayer)
        //                                                                                                                                                                        {
        //                                                                                                                                                                            if (!flag3 && Main.rand.Next(50) == 0 && !Main.player[j].zoneSnow)
        //                                                                                                                                                                            {
        //                                                                                                                                                                                if (Main.hardMode)
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 95, 1);
        //                                                                                                                                                                                }
        //                                                                                                                                                                                else
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    if (Main.player[j].zoneSnow)
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 185, 0);
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                    else
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 10, 1);
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                }
        //                                                                                                                                                                            }
        //                                                                                                                                                                            else
        //                                                                                                                                                                            {
        //                                                                                                                                                                                if (Main.hardMode && Main.rand.Next(3) == 0)
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 140, 0);
        //                                                                                                                                                                                }
        //                                                                                                                                                                                else
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    if (Main.hardMode && Main.rand.Next(4) != 0)
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 141, 0);
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                    else
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        if (num29 == 147 || num29 == 161 || Main.player[j].zoneSnow)
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 147, 0);
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                        else
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 1, 0);
        //                                                                                                                                                                                            if (Main.rand.Next(5) == 0)
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                Main.npc[num30].SetDefaults("Yellow Slime");
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                            else
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Blue Slime");
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                                else
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Red Slime");
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                }
        //                                                                                                                                                                            }
        //                                                                                                                                                                        }
        //                                                                                                                                                                        else
        //                                                                                                                                                                        {
        //                                                                                                                                                                            if (num2 > Main.maxTilesY - 190)
        //                                                                                                                                                                            {
        //                                                                                                                                                                                if (Main.rand.Next(40) == 0 && !NPC.AnyNPCs(39))
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 39, 1);
        //                                                                                                                                                                                }
        //                                                                                                                                                                                else
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    if (Main.rand.Next(14) == 0)
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 24, 0);
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                    else
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        if (Main.rand.Next(8) == 0)
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            if (Main.rand.Next(7) == 0)
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 66, 0);
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                            else
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                if (NPC.downedMechBossAny && Main.rand.Next(5) != 0)
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 156, 0);
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                                else
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 62, 0);
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                        else
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 59, 0);
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                            else
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                if (NPC.downedMechBossAny && Main.rand.Next(5) != 0)
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 151, 0);
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                                else
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 60, 0);
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                }
        //                                                                                                                                                                            }
        //                                                                                                                                                                            else
        //                                                                                                                                                                            {
        //                                                                                                                                                                                if (Main.rand.Next(60) == 0)
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    if (Main.player[j].zoneSnow)
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 218, 0);
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                    else
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 217, 0);
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                }
        //                                                                                                                                                                                else
        //                                                                                                                                                                                {
        //                                                                                                                                                                                    if ((num29 == 116 || num29 == 117 || num29 == 164) && !flag3 && Main.rand.Next(8) == 0)
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 120, 0);
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                    else
        //                                                                                                                                                                                    {
        //                                                                                                                                                                                        if ((num3 == 147 || num3 == 161 || num3 == 162 || num3 == 163 || num3 == 164) && !flag3 && Main.hardMode && Main.player[j].zoneEvil && Main.rand.Next(30) == 0)
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 170, 0);
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                        else
        //                                                                                                                                                                                        {
        //                                                                                                                                                                                            if ((num3 == 147 || num3 == 161 || num3 == 162 || num3 == 163 || num3 == 164) && !flag3 && Main.hardMode && Main.player[j].zoneHoly && Main.rand.Next(30) == 0)
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 171, 0);
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                            else
        //                                                                                                                                                                                            {
        //                                                                                                                                                                                                if ((num3 == 147 || num3 == 161 || num3 == 162 || num3 == 163 || num3 == 164) && !flag3 && Main.hardMode && Main.player[j].zoneBlood && Main.rand.Next(30) == 0)
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 171, 0);
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                                else
        //                                                                                                                                                                                                {
        //                                                                                                                                                                                                    if (Main.hardMode && Main.player[j].zoneSnow && Main.rand.Next(10) == 0)
        //                                                                                                                                                                                                    {
        //                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 154, 0);
        //                                                                                                                                                                                                    }
        //                                                                                                                                                                                                    else
        //                                                                                                                                                                                                    {
        //                                                                                                                                                                                                        if (!flag3 && Main.rand.Next(100) == 0 && !Main.player[j].zoneHoly)
        //                                                                                                                                                                                                        {
        //                                                                                                                                                                                                            if (Main.hardMode)
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 95, 1);
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                            else
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                if (Main.player[j].zoneSnow)
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 185, 0);
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 10, 1);
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                        }
        //                                                                                                                                                                                                        else
        //                                                                                                                                                                                                        {
        //                                                                                                                                                                                                            if (Main.player[j].zoneSnow && Main.rand.Next(20) == 0)
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 185, 0);
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                            else
        //                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                if (!Main.hardMode && Main.rand.Next(10) == 0)
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    if (Main.player[j].zoneSnow)
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        Main.npc[num30].SetDefaults(184, -1f);
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 16, 0);
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                    if (!Main.hardMode && Main.rand.Next(4) == 0)
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 1, 0);
        //                                                                                                                                                                                                                        if (Main.player[j].zoneJungle)
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Jungle Slime");
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            if (Main.player[j].zoneSnow)
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                Main.npc[num30].SetDefaults(184, -1f);
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                Main.npc[num30].SetDefaults("Black Slime");
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                        if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            if ((!Main.hardMode && Main.rand.Next(100) == 0) || Main.rand.Next(500) == 0)
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 195, 0);
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                if (Main.hardMode && (double)num2 > (Main.rockLayer + (double)Main.maxTilesY) / 2.0 && Main.rand.Next(400) == 0)
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 172, 0);
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    if ((double)num2 > (Main.rockLayer + (double)Main.maxTilesY) / 2.0 && Main.rand.Next(350) == 0)
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 45, 0);
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        if (Main.hardMode && Main.rand.Next(10) != 0)
        //                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                            if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                if (Main.player[j].zoneSnow)
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 197, 0);
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 77, 0);
        //                                                                                                                                                                                                                                                    if ((double)num2 > (Main.rockLayer + (double)Main.maxTilesY) / 2.0 && Main.rand.Next(5) == 0)
        //                                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Heavy Skeleton");
        //                                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                if (Main.player[j].zoneSnow)
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 206, 0);
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 110, 0);
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                            if (Main.rand.Next(20) == 0)
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 44, 0);
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                if (num3 == 147 || num3 == 161 || num3 == 162)
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 167, 0);
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    if (Main.player[j].zoneSnow)
        //                                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 185, 0);
        //                                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                                        int num39 = Main.rand.Next(4);
        //                                                                                                                                                                                                                                                        if (num39 == 0)
        //                                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 21, 0);
        //                                                                                                                                                                                                                                                            if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                                if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Big Skeleton");
        //                                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                                    Main.npc[num30].SetDefaults("Small Skeleton");
        //                                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                                            if (num39 == 1)
        //                                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 201, 0);
        //                                                                                                                                                                                                                                                                if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                                    if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Big Headache Skeleton");
        //                                                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                                                        Main.npc[num30].SetDefaults("Small Headache Skeleton");
        //                                                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                                if (num39 == 2)
        //                                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 202, 0);
        //                                                                                                                                                                                                                                                                    if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                                                        if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Big Misassembled Skeleton");
        //                                                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                                                            Main.npc[num30].SetDefaults("Small Misassembled Skeleton");
        //                                                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                                    if (num39 == 3)
        //                                                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 203, 0);
        //                                                                                                                                                                                                                                                                        if (Main.rand.Next(3) == 0)
        //                                                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                                                            if (Main.rand.Next(2) == 0)
        //                                                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                                                Main.npc[num30].SetDefaults("Big Pantless Skeleton");
        //                                                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                                                Main.npc[num30].SetDefaults("Small Pantless Skeleton");
        //                                                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                            if (Main.hardMode && (Main.player[j].zoneHoly & Main.rand.Next(2) == 0))
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 138, 0);
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                if (Main.player[j].zoneJungle)
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 51, 0);
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                    if (Main.hardMode && Main.player[j].zoneHoly)
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 137, 0);
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                    else
        //                                                                                                                                                                                                                                    {
        //                                                                                                                                                                                                                                        if (Main.hardMode && Main.rand.Next(6) > 0)
        //                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                            num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 93, 0);
        //                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                        else
        //                                                                                                                                                                                                                                        {
        //                                                                                                                                                                                                                                            if (num3 == 147 || num3 == 161 || num3 == 162)
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                if (Main.hardMode)
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 169, 0);
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                                else
        //                                                                                                                                                                                                                                                {
        //                                                                                                                                                                                                                                                    num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 150, 0);
        //                                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                            else
        //                                                                                                                                                                                                                                            {
        //                                                                                                                                                                                                                                                num30 = NPC.NewNPC(num * 16 + 8, num2 * 16, 49, 0);
        //                                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                                }
        //                                                                                                                                                                                                                            }
        //                                                                                                                                                                                                                        }
        //                                                                                                                                                                                                                    }
        //                                                                                                                                                                                                                }
        //                                                                                                                                                                                                            }
        //                                                                                                                                                                                                        }
        //                                                                                                                                                                                                    }
        //                                                                                                                                                                                                }
        //                                                                                                                                                                                            }
        //                                                                                                                                                                                        }
        //                                                                                                                                                                                    }
        //                                                                                                                                                                                }
        //                                                                                                                                                                            }
        //                                                                                                                                                                        }
        //                                                                                                                                                                    }
        //                                                                                                                                                                }
        //                                                                                                                                                            }
        //                                                                                                                                                        }
        //                                                                                                                                                    }
        //                                                                                                                                                }
        //                                                                                                                                            }
        //                                                                                                                                        }
        //                                                                                                                                    }
        //                                                                                                                                }
        //                                                                                                                            }
        //                                                                                                                        }
        //                                                                                                                    }
        //                                                                                                                }
        //                                                                                                            }
        //                                                                                                        }
        //                                                                                                    }
        //                                                                                                }
        //                                                                                            }
        //                                                                                        }
        //                                                                                    }
        //                                                                                }
        //                                                                            }
        //                                                                        }
        //                                                                    }
        //                                                                }
        //                                                            }
        //                                                        }
        //                                                    }
        //                                                }
        //                                            }
        //                                        }
        //                                    }
        //                                }
        //                            }
        //                        }
        //                    }
        //                }
        //                if (Main.npc[num30].type == 1 && Main.rand.Next(250) == 0)
        //                {
        //                    Main.npc[num30].SetDefaults("Pinky");
        //                }
        //                if (Main.netMode == 2 && num30 < 200)
        //                {
        //                    NetMessage.SendData(23, -1, -1, "", num30, 0f, 0f, 0f, 0);
        //                    return;
        //                }
        //                break;
        //            }
        //        }
        //    }
        //}
        public static void SpawnWOF(Vector2 pos)
        {
            if (pos.Y/16f < (float) (Main.maxTilesY - 205))
            {
                return;
            }
            if (Main.wof >= 0)
            {
                return;
            }
            if (Main.netMode == 1)
            {
                return;
            }
            Player.FindClosest(pos, 16, 16);
            int num = 1;
            if (pos.X/16f > (float) (Main.maxTilesX/2))
            {
                num = -1;
            }
            bool flag = false;
            int num2 = (int) pos.X;
            while (!flag)
            {
                flag = true;
                for (int i = 0; i < 255; i++)
                {
                    if (Main.player[i].active && Main.player[i].position.X > (float) (num2 - 1200) && Main.player[i].position.X < (float) (num2 + 1200))
                    {
                        num2 -= num*16;
                        flag = false;
                    }
                }
                if (num2/16 < 20 || num2/16 > Main.maxTilesX - 20)
                {
                    flag = true;
                }
            }
            int num3 = (int) pos.Y;
            int num4 = num2/16;
            int num5 = num3/16;
            int num6 = 0;
            try
            {
                while (WorldGen.SolidTile(num4, num5 - num6) || Main.tile[num4, num5 - num6].liquid >= 100)
                {
                    if (!WorldGen.SolidTile(num4, num5 + num6) && Main.tile[num4, num5 + num6].liquid < 100)
                    {
                        num5 += num6;
                        goto IL_162;
                    }
                    num6++;
                }
                num5 -= num6;
            }
            catch
            {
            }
            IL_162:
            num3 = num5*16;
            int num7 = NPC.NewNPC(num2, num3, 113, 0);
            if (Main.npc[num7].displayName == "")
            {
                Main.npc[num7].displayName = Main.npc[num7].name;
            }
            if (Main.netMode == 0)
            {
                Main.NewText(Main.npc[num7].displayName + " " + Lang.misc[16], 175, 75, 255, false);
                return;
            }
            if (Main.netMode == 2)
            {
                NetMessage.SendData(25, -1, -1, Main.npc[num7].displayName + " " + Lang.misc[16], 255, 175f, 75f, 255f, 0);
            }
        }

        public static void SpawnOnPlayer(int plr, int Type)
        {
            if (Main.netMode == 1)
            {
                return;
            }
            if (Type == 262 && NPC.AnyNPCs(262))
            {
                return;
            }
            if (Type != 245)
            {
                bool flag = false;
                int num = 0;
                int num2 = 0;
                int num3 = (int) (Main.player[plr].position.X/16f) - NPC.spawnRangeX*2;
                int num4 = (int) (Main.player[plr].position.X/16f) + NPC.spawnRangeX*2;
                int num5 = (int) (Main.player[plr].position.Y/16f) - NPC.spawnRangeY*2;
                int num6 = (int) (Main.player[plr].position.Y/16f) + NPC.spawnRangeY*2;
                int num7 = (int) (Main.player[plr].position.X/16f) - NPC.safeRangeX;
                int num8 = (int) (Main.player[plr].position.X/16f) + NPC.safeRangeX;
                int num9 = (int) (Main.player[plr].position.Y/16f) - NPC.safeRangeY;
                int num10 = (int) (Main.player[plr].position.Y/16f) + NPC.safeRangeY;
                if (num3 < 0)
                {
                    num3 = 0;
                }
                if (num4 > Main.maxTilesX)
                {
                    num4 = Main.maxTilesX;
                }
                if (num5 < 0)
                {
                    num5 = 0;
                }
                if (num6 > Main.maxTilesY)
                {
                    num6 = Main.maxTilesY;
                }
                for (int i = 0; i < 1000; i++)
                {
                    int j = 0;
                    while (j < 100)
                    {
                        int num11 = Main.rand.Next(num3, num4);
                        int num12 = Main.rand.Next(num5, num6);
                        if (Main.tile[num11, num12].nactive() && Main.tileSolid[(int) Main.tile[num11, num12].type])
                        {
                            goto IL_518;
                        }
                        if (!Main.wallHouse[(int) Main.tile[num11, num12].wall] || i >= 999)
                        {
                            int k = num12;
                            while (k < Main.maxTilesY)
                            {
                                if (Main.tile[num11, k].nactive() && Main.tileSolid[(int) Main.tile[num11, k].type])
                                {
                                    if (num11 < num7 || num11 > num8 || k < num9 || k > num10 || i == 999)
                                    {
                                        byte arg_43A_0 = Main.tile[num11, k].type;
                                        num = num11;
                                        num2 = k;
                                        flag = true;
                                        break;
                                    }
                                    break;
                                }
                                else
                                {
                                    k++;
                                }
                            }
                            if (!flag || i >= 999)
                            {
                                goto IL_518;
                            }
                            int num13 = num - NPC.spawnSpaceX/2;
                            int num14 = num + NPC.spawnSpaceX/2;
                            int num15 = num2 - NPC.spawnSpaceY;
                            int num16 = num2;
                            if (num13 < 0)
                            {
                                flag = false;
                            }
                            if (num14 > Main.maxTilesX)
                            {
                                flag = false;
                            }
                            if (num15 < 0)
                            {
                                flag = false;
                            }
                            if (num16 > Main.maxTilesY)
                            {
                                flag = false;
                            }
                            if (flag)
                            {
                                for (int l = num13; l < num14; l++)
                                {
                                    for (int m = num15; m < num16; m++)
                                    {
                                        if (Main.tile[l, m].nactive() && Main.tileSolid[(int) Main.tile[l, m].type])
                                        {
                                            flag = false;
                                            break;
                                        }
                                    }
                                }
                                goto IL_518;
                            }
                            goto IL_518;
                        }
                        IL_520:
                        j++;
                        continue;
                        IL_518:
                        if (!flag && !flag)
                        {
                            goto IL_520;
                        }
                        break;
                    }
                    if (flag && i < 999)
                    {
                        Rectangle rectangle = new Rectangle(num*16, num2*16, 16, 16);
                        for (int n = 0; n < 255; n++)
                        {
                            if (Main.player[n].active)
                            {
                                Rectangle rectangle2 = new Rectangle((int) (Main.player[n].position.X + (float) (Main.player[n].width/2) - (float) (NPC.sWidth/2) - (float) NPC.safeRangeX), (int) (Main.player[n].position.Y + (float) (Main.player[n].height/2) - (float) (NPC.sHeight/2) - (float) NPC.safeRangeY), NPC.sWidth + NPC.safeRangeX*2, NPC.sHeight + NPC.safeRangeY*2);
                                if (rectangle.Intersects(rectangle2))
                                {
                                    flag = false;
                                }
                            }
                        }
                    }
                    if (flag)
                    {
                        break;
                    }
                }
                if (flag)
                {
                    int num17 = NPC.NewNPC(num*16 + 8, num2*16, Type, 1);
                    if (num17 == 200)
                    {
                        return;
                    }
                    Main.npc[num17].target = plr;
                    Main.npc[num17].timeLeft *= 20;
                    string str = Main.npc[num17].name;
                    if (Main.npc[num17].displayName != "")
                    {
                        str = Main.npc[num17].displayName;
                    }
                    if (Main.netMode == 2 && num17 < 200)
                    {
                        NetMessage.SendData(23, -1, -1, "", num17, 0f, 0f, 0f, 0);
                    }
                    if (Type == 125)
                    {
                        if (Main.netMode == 0)
                        {
                            Main.NewText("The Twins " + Lang.misc[16], 175, 75, 255, false);
                            return;
                        }
                        if (Main.netMode == 2)
                        {
                            NetMessage.SendData(25, -1, -1, "The Twins " + Lang.misc[16], 255, 175f, 75f, 255f, 0);
                            return;
                        }
                    }
                    else
                    {
                        if (Type != 82 && Type != 126 && Type != 50)
                        {
                            if (Main.netMode == 0)
                            {
                                Main.NewText(str + " " + Lang.misc[16], 175, 75, 255, false);
                                return;
                            }
                            if (Main.netMode == 2)
                            {
                                NetMessage.SendData(25, -1, -1, str + " " + Lang.misc[16], 255, 175f, 75f, 255f, 0);
                            }
                        }
                    }
                }
                return;
            }
            if (NPC.AnyNPCs(245))
            {
                return;
            }
            try
            {
                int num18 = (int) Main.player[plr].center().X/16;
                int num19 = (int) Main.player[plr].center().Y/16;
                int num20 = 0;
                int num21 = 0;
                for (int num22 = num18 - 20; num22 < num18 + 20; num22++)
                {
                    for (int num23 = num19 - 20; num23 < num19 + 20; num23++)
                    {
                        if (Main.tile[num22, num23].active() && Main.tile[num22, num23].type == 237 && Main.tile[num22, num23].frameX == 18 && Main.tile[num22, num23].frameY == 0)
                        {
                            num20 = num22;
                            num21 = num23;
                        }
                    }
                }
                if (num20 > 0 && num21 > 0)
                {
                    int num24 = num21 - 15;
                    int num25 = num21 - 15;
                    for (int num26 = num21; num26 > num21 - 100; num26--)
                    {
                        if (WorldGen.SolidTile(num20, num26))
                        {
                            num24 = num26;
                            break;
                        }
                    }
                    for (int num27 = num21; num27 < num21 + 100; num27++)
                    {
                        if (WorldGen.SolidTile(num20, num27))
                        {
                            num25 = num27;
                            break;
                        }
                    }
                    num21 = (num24 + num24 + num25)/3;
                    int num28 = NPC.NewNPC(num20*16 + 8, num21*16, 245, 100);
                    Main.npc[num28].target = plr;
                    string str2 = Main.npc[num28].name;
                    if (Main.netMode == 0)
                    {
                        Main.NewText(str2 + " " + Lang.misc[16], 175, 75, 255, false);
                    }
                    else
                    {
                        if (Main.netMode == 2)
                        {
                            NetMessage.SendData(25, -1, -1, str2 + " " + Lang.misc[16], 255, 175f, 75f, 255f, 0);
                        }
                    }
                }
            }
            catch
            {
            }
        }

        public static int NewNPC(int X, int Y, int Type, int Start = 0)
        {
            int num = -1;
            if (Type == 222)
            {
                for (int i = 199; i >= 0; i--)
                {
                    if (!Main.npc[i].active)
                    {
                        num = i;
                        break;
                    }
                }
            }
            if (Type == 101 || Type == 260 || Type == 43 || Type == 56 || Type == 175)
            {
                if (Main.npc[Start].active) return 200;
                else num = Start;
            }
            else if (Start > 150)
            {
                if (Main.npc[Start].active) return 200;
                else num = Start;
            }
            else
            {
                for (int j = Start; j < 150; j++)
                {
                    if (!Main.npc[j].active)
                    {
                        num = j;
                        break;
                    }
                }
            }
            if (num >= 0)
            {
                Main.npc[num] = new NPC();
                Main.npc[num].SetDefaults(Type, -1f);
                Main.npc[num].position.X = (float) (X - Main.npc[num].width/2);
                Main.npc[num].position.Y = (float) (Y - Main.npc[num].height);
                Main.npc[num].active = true;
                Main.npc[num].timeLeft = (int) ((double) NPC.activeTime*1.25);
                Main.npc[num].wet = Collision.WetCollision(Main.npc[num].position, Main.npc[num].width, Main.npc[num].height);
                for (int l = 0; l < Main.npc[num].buffs.Length; l++)
                {
                    Main.npc[num].buffs[l] = new Buff();
                }
                if (Type == 50 || Type == 51 || Type == 266)
                {
                    if (Main.netMode == 0)
                    {
                        Main.NewText(Main.npc[num].name + " " + Lang.misc[16], 175, 75, 255, false);
                    }
                    else
                    {
                        if (Main.netMode == 2)
                        {
                            NetMessage.SendData(25, -1, -1, Main.npc[num].name + " " + Lang.misc[16], 255, 175f, 75f, 255f, 0);
                        }
                    }
                }
                return num;
            }
            return 200;
        }

        public void xForm(int oldType, int newType)
        {
            if ((oldType == 158 && newType == 159) || (oldType == 159 && newType == 158))
            {
                Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 8);
                int num = Gore.NewGore(new Vector2(this.position.X, this.position.Y - 10f), this.velocity, 99, this.scale);
                Main.gore[num].velocity *= 0.3f;
                num = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 10f), this.velocity, 99, this.scale);
                Main.gore[num].velocity *= 0.3f;
                num = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) this.height - 10f), this.velocity, 99, this.scale);
                Main.gore[num].velocity *= 0.3f;
            }
        }

        public void Teleport(Vector2 newPos, int Style = 0)
        {
            Main.TeleportEffect(this.getRect(), Style);
            this.position = newPos;
            Main.TeleportEffect(this.getRect(), Style);
            this.teleportTime = 1f;
            if (Main.netMode == 2)
            {
                NetMessage.SendData(65, -1, -1, "", 1, (float) this.whoAmI, newPos.X, newPos.Y, Style);
            }
        }

        public void Transform(int newType)
        {
            if (Main.netMode != 1)
            {
                bool flag = false;
                if (this.value == 0f)
                {
                    flag = true;
                }
                int oldType = this.type;
                int num = this.life;
                int num2 = this.lifeMax;
                Vector2 vector = this.velocity;
                this.position.Y = this.position.Y + (float) this.height;
                int num3 = this.spriteDirection;
                this.SetDefaults(newType, -1f);
                this.spriteDirection = num3;
                this.TargetClosest(true);
                this.velocity = vector;
                this.position.Y = this.position.Y - (float) this.height;
                if (flag)
                {
                    this.value = 0f;
                }
                if (this.lifeMax == num2)
                {
                    this.life = num;
                }
                if (newType == 107 || newType == 108)
                {
                    this.homeTileX = (int) (this.position.X + (float) (this.width/2))/16;
                    this.homeTileY = (int) (this.position.Y + (float) this.height)/16;
                    this.homeless = true;
                }
                if (Main.netMode == 2)
                {
                    this.netUpdate = true;
                    NetMessage.SendData(23, -1, -1, "", this.whoAmI, 0f, 0f, 0f, 0);
                }
                this.xForm(oldType, newType);
            }
        }

        public double StrikeNPC(int Damage, float knockBack, int hitDirection, bool crit = false, bool noEffect = false, int lastHitNPC = -99, int hero = byte.MaxValue, bool trueDamage = false)
        {
            if (!this.active || this.life <= 0)
            {
                return 0.0;
            }
            double num = (double) Damage;
            if (hero != byte.MaxValue && Main.myPlayer == lastHitNPC) //hero caused debuffs
            {
                if (hero == Main.DRAGOON && crit)
                {
                    if (Main.player[lastHitNPC].hasAbility(Main.FLAMARANG, Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].boomerang) || Main.player[lastHitNPC].hasAbility(Main.FIERY_GREATSWORD, Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].sword))
                    {
                        this.AddBuff(30, (int) (Damage*3f*1.25f), false, lastHitNPC);
                    }
                    else this.AddBuff(30, Damage*3, false, lastHitNPC);
                }
                if (hero == Main.MARLBORO)
                {
                    int debuff = Player.npcDebuffs[Main.rand.Next(Player.npcDebuffs.Length)];
                    int duration = Player.debuffTimers[debuff];
                    if (crit)
                    {
                        duration *= 2;
                    }
                    else
                    {
                        duration += Main.rand.Next(duration + 1);
                    }
                    this.AddBuff(debuff, (duration*60), false, lastHitNPC);
                }
                if (hero == Main.PYRO)
                {
                    if (Main.rand.Next(2) == 0)
                    {
                        this.AddBuff(39, 240, false, lastHitNPC);
                    }
                }
            }
            if (hero == Main.MARLBORO && !trueDamage)
            {
                num = 1;
            }
            else if (!trueDamage)
            {
                num = Main.CalculateDamage((int) num, this.defense);
            }
            if (crit)
            {
                if (Main.player[lastHitNPC].hasAbility(Main.FLAMARANG, Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].boomerang) || Main.player[lastHitNPC].hasAbility(Main.FIERY_GREATSWORD, Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].sword))
                {
                    num *= 2.5;
                }
                else num *= 2.0;
            }
            if (Damage != 9999 && this.lifeMax > 1)
            {
                if (this.friendly)
                {
                    CombatText.NewText(new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height), new Color(255, 80, 90, 255), string.Concat((int) num), crit, false);
                }
                else
                {
                    CombatText.NewText(new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height), new Color(255, 160, 80, 255), string.Concat((int) num), crit, false);
                }
            }
            if (num >= 1.0)
            {
                this.justHit = true;
                if (this.townNPC)
                {
                    this.ai[0] = 1f;
                    this.ai[1] = (float) (300 + Main.rand.Next(300));
                    this.ai[2] = 0f;
                    this.direction = hitDirection;
                    this.netUpdate = true;
                }
                if (this.aiStyle == 8 && Main.netMode != 1)
                {
                    if (this.type == 172)
                    {
                        this.ai[0] = 450f;
                    }
                    else
                    {
                        this.ai[0] = 400f;
                    }
                    this.TargetClosest(true);
                }
                if (this.type == 184)
                {
                    this.localAI[0] = 60f;
                }
                if (this.type == 185)
                {
                    this.localAI[0] = 1f;
                }
                if (this.realLife >= 0)
                {
                    Main.npc[this.realLife].life -= (int) num;
                    this.life = Main.npc[this.realLife].life;
                    this.lifeMax = Main.npc[this.realLife].lifeMax;
                }
                else
                {
                    this.life -= (int) num;
                }
                if (Damage != 9999 && this.boss && lastHitNPC != -99 && hero != byte.MaxValue && lastHitNPC == Main.myPlayer)
                {
                    if (this.type == NPC.SPAZMATISM || this.type == NPC.RETINAZER) Main.player[lastHitNPC].bossDamage += ((int)num / 2);
                    else Main.player[lastHitNPC].bossDamage += (int)num;
                    Main.player[lastHitNPC].damageMult = 1.0f + ((float)Main.player[lastHitNPC].bossDamage/(float)this.lifeMax);
                    Main.player[lastHitNPC].bossDamageAP += (int)num;
                    byte pointsEarned = 0;
                    while (Main.player[lastHitNPC].bossDamageAP > this.abilityPointHP && this.abilityPointHP != 0)
                    {
                        Main.player[lastHitNPC].bossDamageAP -= this.abilityPointHP;
                        pointsEarned++;
                    }
                    if (pointsEarned > 0)
                    {
                        if (Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability >= 0 &&
                            Main.player[lastHitNPC].abilities[Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability] < 50)
                        {
                            CombatText.NewText(new Rectangle((int)Main.player[lastHitNPC].position.X, (int)Main.player[lastHitNPC].position.Y, Main.player[lastHitNPC].width, Main.player[lastHitNPC].height), Color.Cyan, "" + pointsEarned);
                            Main.player[lastHitNPC].abilities[Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability] += pointsEarned;
                            if (Main.player[lastHitNPC].abilities[Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability] >= 50)
                            {
                                CombatText.NewText(new Rectangle((int)Main.player[lastHitNPC].position.X, (int)Main.player[lastHitNPC].position.Y, Main.player[lastHitNPC].width, Main.player[lastHitNPC].height), Color.Cyan, "Ability Learned!");
                                Main.player[lastHitNPC].abilities[Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability] = 50;
                                if (Main.netMode == 1 && lastHitNPC == Main.myPlayer)
                                {
                                    NetMessage.SendData(73, -1, -1, "", lastHitNPC, Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability);
                                }
                            }
                        }
                    }
                }
                if (knockBack > 0f && this.knockBackResist > 0f)
                {
                    float num2 = knockBack*this.knockBackResist;
                    if (num2 > 8f)
                    {
                        num2 = 8f;
                    }
                    if (crit)
                    {
                        num2 *= 1.4f;
                    }
                    if (num*10.0 > (double) this.lifeMax)
                    {
                        if (hitDirection < 0 && this.velocity.X > -num2)
                        {
                            if (this.velocity.X > 0f)
                            {
                                this.velocity.X = this.velocity.X - num2;
                            }
                            this.velocity.X = this.velocity.X - num2;
                            if (this.velocity.X < -num2)
                            {
                                this.velocity.X = -num2;
                            }
                        }
                        else
                        {
                            if (hitDirection > 0 && this.velocity.X < num2)
                            {
                                if (this.velocity.X < 0f)
                                {
                                    this.velocity.X = this.velocity.X + num2;
                                }
                                this.velocity.X = this.velocity.X + num2;
                                if (this.velocity.X > num2)
                                {
                                    this.velocity.X = num2;
                                }
                            }
                        }
                        if (this.type == 185)
                        {
                            num2 *= 1.5f;
                        }
                        if (!this.noGravity)
                        {
                            num2 *= -0.75f;
                        }
                        else
                        {
                            num2 *= -0.5f;
                        }
                        if (this.velocity.Y > num2)
                        {
                            this.velocity.Y = this.velocity.Y + num2;
                            if (this.velocity.Y < num2)
                            {
                                this.velocity.Y = num2;
                            }
                        }
                    }
                    else
                    {
                        if (!this.noGravity)
                        {
                            this.velocity.Y = -num2*0.75f*this.knockBackResist;
                        }
                        else
                        {
                            this.velocity.Y = -num2*0.5f*this.knockBackResist;
                        }
                        this.velocity.X = num2*(float) hitDirection*this.knockBackResist;
                    }
                }
                if ((this.type == 113 || this.type == 114) && this.life <= 0)
                {
                    for (int i = 0; i < 200; i++)
                    {
                        if (Main.npc[i].active && (Main.npc[i].type == 113 || Main.npc[i].type == 114))
                        {
                            Main.npc[i].HitEffect(hitDirection, num);
                        }
                    }
                }
                else
                {
                    this.HitEffect(hitDirection, num);
                }
                if (this.soundHit > 0)
                {
                    Main.PlaySound(3, (int) this.position.X, (int) this.position.Y, this.soundHit);
                }
                if (this.realLife >= 0)
                {
                    Main.npc[this.realLife].checkDead(lastHitNPC);
                }
                else
                {
                    this.checkDead(lastHitNPC);
                }
                return num;
            }
            return 0.0;
        }

        public void checkDead(int lastHitNPC = -99)
        {
            if (!this.active)
            {
                return;
            }
            if (this.realLife >= 0 && this.realLife != this.whoAmI)
            {
                return;
            }
            if (this.life <= 0)
            {
                if (this.whoAmI == Main.wof ||
                    this.whoAmI == Main.wofB ||
                    this.whoAmI == Main.wofT
                    )
                {
                    Main.wof = -1;
                    Main.wofB = -1;
                    Main.wofF = -1;
                    Main.wofT = -1;
                }
                //NPC.noSpawnCycle = true;
                if (this.townNPC && this.type != 37)
                {
                    string str = this.name;
                    if (this.displayName != "")
                    {
                        str = this.displayName;
                    }
                    if (Main.netMode == 0)
                    {
                        Main.NewText(str + Lang.misc[19], 255, 25, 25, false);
                    }
                    else
                    {
                        if (Main.netMode == 2)
                        {
                            NetMessage.SendData(25, -1, -1, str + Lang.misc[19], 255, 255f, 25f, 25f, 0);
                        }
                    }
                }
                if (Main.netMode != 1 && !Main.dayTime && this.type == 54 && !NPC.AnyNPCs(35))
                {
                    for (int i = 0; i < 255; i++)
                    {
                        if (Main.player[i].active && !Main.player[i].dead && Main.player[i].killClothier)
                        {
                            NPC.SpawnOnPlayer(i, 35);
                            break;
                        }
                    }
                }
                if (this.townNPC && Main.netMode != 1 && this.homeless && WorldGen.spawnNPC == this.type)
                {
                    WorldGen.spawnNPC = 0;
                }
                if (this.soundKilled > 0)
                {
                    Main.PlaySound(4, (int) this.position.X, (int) this.position.Y, this.soundKilled);
                }
                if (this.type == 69)
                {
                    Main.whiteTowersDowned++;
                }
                else if (this.type == 70)
                {
                    Main.blackTowersDowned++;
                }
                else if (this.type == NPC.BRAIN_OF_CTHULU)
                {
                    NPC.isBossDowned = true;
                }
                else if (this.type == WHITE_SOLDIER)
                {
                    NPC.numWhite--;
                }
                else if (this.type == BLACK_SOLDIER)
                {
                    NPC.numBlack--;
                }
                else if (this.type == BLUE_JELLYFISH)
                {
                    NPC.numBlue--;
                }
                else if (this.type == PINK_JELLYFISH)
                {
                    NPC.numPink--;
                }
                else if (this.type == PIRANHA || this.type == ANGLER_FISH)
                {
                    NPC.numPiranha--;
                }
                else if (this.type == DIABOLIST || this.type == RAGGED_CASTER)
                {
                    NPC.numDiabolist--;
                }
                if (this.junglePoints > 0 && Main.netMode != 1)
                {
                    Main.jCounter += this.junglePoints;
                    if (Main.jCounter > NPC.BOSS_SUMMON) Main.jCounter = NPC.BOSS_SUMMON;
                    if (Main.netMode == 2) NetMessage.SendData(74, -1, -1, "", Main.jCounter);
                }
                this.NPCLoot(lastHitNPC);
                if (this.townNPC && this.type != 37 && Main.netMode != 1)
                {
                    Main.chrName[this.type] = "";
                    NPC.setNames();
                    NetMessage.SendData(56, -1, -1, "", this.type, 0f, 0f, 0f, 0);
                }
                this.active = false;
                for (int buff = 0; buff < this.buffs.Length; buff++)
                {
                    this.DelBuff(buff);
                }
                //if (this.type == 26 || this.type == 27 || this.type == 28 || this.type == 29 || this.type == 111 || this.type == 143 || this.type == 144 || this.type == 145 || this.type == 212 || this.type == 213 || this.type == 214 || this.type == 215)
                //{
                //Main.invasionSize--;
                //}
                //if (this.type == 216)
                //{
                //    Main.invasionSize -= 5;
                //}
            }
        }

        public void NPCLoot(int lastHitNPC = -99)
        {
            if (Main.netMode == 1)
            {
                // return;
            }
            if (Main.netMode == 2)
            {
                if (this.boss)
                {
                    bool setTimeBack = true;
                    if ((this.type == NPC.RETINAZER || this.type == NPC.SPAZMATISM))
                    {
                        int eyeType = this.type;
                        for (int i = 0; i < Main.npc.Length; i++)
                        {
                            if (Main.npc[i].active && (Main.npc[i].type == NPC.RETINAZER || Main.npc[i].type == NPC.SPAZMATISM))
                            {
                                if (Main.npc[i].type != eyeType)
                                {
                                    setTimeBack = false;
                                    break;
                                }
                            }
                        }
                    }
                    if (setTimeBack) Main.gameTime = -300;
                }
            }
            if (this.type == 113) Main.wof = -1;
            if (lastHitNPC >= 0 && Main.player[lastHitNPC].hero == Main.SOUL_EATER)
            {
                Main.player[lastHitNPC].statLife += (this.lifeMax / 3);
                Main.player[lastHitNPC].HealEffect(this.lifeMax / 3);
            }
            if (Main.bossMode)
            {
                if (this.boss && lastHitNPC == Main.myPlayer)
                {
                    if (this.type == NPC.RETINAZER || this.type == NPC.SPAZMATISM) Main.player[Main.myPlayer].lastHitMult += 0.25f;
                    else Main.player[Main.myPlayer].lastHitMult += 0.5f;
                }
                else if (lastHitNPC == Main.myPlayer)
                {
                    Main.player[Main.myPlayer].lastHitMult += this.lastHitValue;
                }
                if (Main.player[Main.myPlayer].lastHitMult > 2f) Main.player[Main.myPlayer].lastHitMult = 2.0f;
            }
            if (this.type == Main.wave_minions[0] || this.type == Main.wave_minions[1] || this.type == Main.wave_minions[2])
            {
                if (this.type == Main.wave_minions[0])
                {
                    Main.waveCounter -= 1;
                    if (lastHitNPC == Main.myPlayer) Main.player[Main.myPlayer].damageMult += 1.0f / 200.0f;
                }
                if (this.type == Main.wave_minions[1])
                {
                    Main.waveCounter -= 3;
                    if (lastHitNPC == Main.myPlayer) Main.player[Main.myPlayer].damageMult += 3.0f / 200.0f;
                }
                if (this.type == Main.wave_minions[2])
                {
                    Main.waveCounter -= 5;
                    if (lastHitNPC == Main.myPlayer) Main.player[Main.myPlayer].damageMult += 5.0f / 200.0f;
                }
                if (Main.waveCounter <= 0)
                {
                    for (int i = 0; i < Main.npc.Length; i++)
                    {
                        if (Main.npc[i].type == Main.wave_minions[0] || Main.npc[i].type == Main.wave_minions[1] || Main.npc[i].type == Main.wave_minions[2])
                        {
                            Main.npc[i].StrikeNPC(9999, 0, 0);
                        }
                    }
                    Main.waveCounter = 0;
                    Main.gameTime = -300;
                }
            }
            if (this.type == 69 || this.type == 70 || this.type == 276 || this.type == 277 && Main.netMode == 2)
            {
                //Item.NewItem((int)Main.player[lastHitNPC].position.X, (int)Main.player[lastHitNPC].position.Y, Main.player[lastHitNPC].width, Main.player[lastHitNPC].height, 1293, 1, false, 0, false);
                if (this.type == 69)
                {
                    NetMessage.SendData(25, -1, -1, "A White Tower has been destroyed!", 0, 0, 0, 0, 0);
                    NetMessage.SendData(71, -1, -1, "", 100, 2);
                }
                if (this.type == 70)
                {
                    NetMessage.SendData(25, -1, -1, "A Black Tower has been destroyed!", 0, 0, 0, 0, 0);
                    NetMessage.SendData(71, -1, -1, "", 100, 1);
                }
                if (this.type == 276)
                {
                    NetMessage.SendData(71, -1, -1, "", (int) this.value, 2);
                }
                if (this.type == 277)
                {
                    NetMessage.SendData(71, -1, -1, "", (int) this.value, 1);
                }
            }
            else if (this.type == 276 || this.type == 277 && lastHitNPC >= 0)
            {
                if (Main.player[lastHitNPC].level < 11)
                {
                    Main.player[lastHitNPC].experience += (int) (this.value*0.8f);
                    CombatText.NewText(new Rectangle((int) Main.player[lastHitNPC].position.X, (int) Main.player[lastHitNPC].position.Y, Main.player[lastHitNPC].width, Main.player[lastHitNPC].height), Color.BlueViolet, string.Concat("+" + (int) (this.value*0.8f)));
                }
            }
            else if (lastHitNPC >= 0 && this.value > 0 && this.type != 69 && this.type != 70 && this.type != 276 && this.type != 277)
            {
                if (this.midas)
                {
                    Main.player[lastHitNPC].money += (int) (this.value*0.1f);
                    Main.player[lastHitNPC].totalMoney += (int) (this.value*0.1f);
                }
                if (Main.player[lastHitNPC].hero == Main.MIMIC && Main.player[lastHitNPC].mimicSuf == Player.ADVANTAGE) this.value = this.value*1.2f;
                Main.player[lastHitNPC].money += (int) this.value;
                Main.player[lastHitNPC].totalMoney += (int) this.value;
                Main.player[lastHitNPC].creepKills++;
                if (Main.player[lastHitNPC].level < 11)
                {
                    if (this.type == 245)
                    {
                        //Main.player[lastHitNPC].experience += 110000;
                    }
                    else
                    {
                        //Main.player[lastHitNPC].experience += (int) (this.value*0.6f);
                    }
                }
                NetMessage.SendData(72, -1, -1, "", (int) (this.value*0.2f), Main.player[lastHitNPC].team);
                CombatText.NewText(new Rectangle((int) Main.player[lastHitNPC].position.X, (int) Main.player[lastHitNPC].position.Y, Main.player[lastHitNPC].width, Main.player[lastHitNPC].height), Color.Yellow, string.Concat("+" + (int) this.value));
                if (this.midas)
                {
                    CombatText.NewText(new Rectangle((int) Main.player[lastHitNPC].position.X, (int) Main.player[lastHitNPC].position.Y, Main.player[lastHitNPC].width, Main.player[lastHitNPC].height), Color.Yellow, string.Concat("+" + (int) (this.value*0.1f)));
                }
                if (this.type != 245 && Main.player[lastHitNPC].level < 11)
                {
                    CombatText.NewText(new Rectangle((int) Main.player[lastHitNPC].position.X, (int) Main.player[lastHitNPC].position.Y, Main.player[lastHitNPC].width, Main.player[lastHitNPC].height), Color.BlueViolet, string.Concat("+" + (int) (this.value*0.8f)));
                }
                if (this.type == 245)
                {
                    //Item.NewItem((int) Main.player[lastHitNPC].position.X, (int) Main.player[lastHitNPC].position.Y, Main.player[lastHitNPC].width, Main.player[lastHitNPC].height, 227, 1, false, 0, false);
                }
            }
            else
            {
                if (this.type == 69 || this.type == 70)
                {
                    Item.NewItem((int) this.position.X, (int) this.position.Y, this.width, this.height, 1293, 1, false, 0, false);
                    if (Main.netMode == 2)
                    {
                        if (this.type == 69)
                        {
                            NetMessage.SendData(25, -1, -1, "A White Tower has been destroyed!", 0, 0, 0, 0, 0);
                        }
                        if (this.type == 70)
                        {
                            NetMessage.SendData(25, -1, -1, "A Black Tower has been destroyed!", 0, 0, 0, 0, 0);
                        }
                    }
                }
            }
            if (lastHitNPC != -99)
            {
                if (this.itemEXP > 0 && Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability >= 0 && Main.player[lastHitNPC].abilities[Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability] < 50)
                {
                    Main.player[lastHitNPC].abilities[Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability] += this.itemEXP;
                    if (Main.player[lastHitNPC].abilities[Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability] >= 50)
                    {
                        CombatText.NewText(new Rectangle((int) Main.player[lastHitNPC].position.X, (int) Main.player[lastHitNPC].position.Y, Main.player[lastHitNPC].width, Main.player[lastHitNPC].height), Color.Cyan, string.Concat("Ability Learned!"));
                        Main.player[lastHitNPC].abilities[Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability] = 50;
                        if (Main.netMode == 1 && lastHitNPC == Main.myPlayer)
                        {
                            NetMessage.SendData(73, -1, -1, "", lastHitNPC, Main.player[lastHitNPC].inventory[Main.player[lastHitNPC].selectedItem].ability);
                        }
                    }
                }
            }
        }

        //if (Main.hardMode && this.lifeMax > 1 && this.damage > 0 && !this.friendly && (double)this.position.Y > Main.rockLayer * 16.0 && Main.rand.Next(5) == 0 && this.type != 121 && this.value > 0f)
        //{
        //    if (Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].zoneEvil || Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].zoneBlood)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 521, 1, false, 0, false);
        //    }
        //    if (Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].zoneHoly)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 520, 1, false, 0, false);
        //    }
        //}
        //if (this.type == 22 && Main.chrName[22] == "Andrew")
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 867, 1, false, 0, false);
        //}
        //if (Main.hardMode && this.value > 0f)
        //{
        //    if (!NPC.downedMechBoss1 && Main.rand.Next(1000) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 556, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        if (!NPC.downedMechBoss2 && Main.rand.Next(1000) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 544, 1, false, 0, false);
        //        }
        //        else
        //        {
        //            if (!NPC.downedMechBoss3 && Main.rand.Next(1000) == 0)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 557, 1, false, 0, false);
        //            }
        //        }
        //    }
        //}
        //if (Main.hardMode && this.value > 0f)
        //{
        //    if (Main.rand.Next(4000) == 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].zoneJungle)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1533, 1, false, 0, false);
        //    }
        //    if (Main.rand.Next(4000) == 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].zoneEvil)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1534, 1, false, 0, false);
        //    }
        //    if (Main.rand.Next(4000) == 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].zoneBlood)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1535, 1, false, 0, false);
        //    }
        //    if (Main.rand.Next(4000) == 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].zoneHoly)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1536, 1, false, 0, false);
        //    }
        //    if (Main.rand.Next(4000) == 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].zoneSnow)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1537, 1, false, 0, false);
        //    }
        //}
        //if (this.type == 68)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1169, 1, false, 0, false);
        //}
        //if (this.type == 156 && Main.rand.Next(75) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1518, 1, false, 0, false);
        //}
        //if (this.type == 243 && Main.rand.Next(3) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1519, 1, false, 0, false);
        //}
        //if (this.type >= 269 && this.type <= 280 && Main.rand.Next(450) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1517, 1, false, 0, false);
        //}
        //if ((this.type == 158 || this.type == 159) && Main.rand.Next(40) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1520, 1, false, 0, false);
        //}
        //if (this.type == 176 && Main.rand.Next(150) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1521, 1, false, 0, false);
        //}
        //if (this.type == 48 && Main.rand.Next(200) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1516, 1, false, 0, false);
        //}
        //if (this.type == 205 && Main.rand.Next(2) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1611, 1, false, 0, false);
        //}
        //if (Main.xMas && this.lifeMax > 1 && this.damage > 0 && !this.friendly && this.type != 121 && this.value > 0f && Main.rand.Next(13) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, Main.rand.Next(599, 602), 1, false, 0, false);
        //}
        //if ((this.type == 281 || this.type == 282) && Main.rand.Next(30) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1446, 1, false, -1, false);
        //}
        //if ((this.type == 283 || this.type == 284) && Main.rand.Next(30) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1444, 1, false, -1, false);
        //}
        //if ((this.type == 285 || this.type == 286) && Main.rand.Next(30) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1445, 1, false, -1, false);
        //}
        //if (this.lifeMax > 100 && this.type != 288 && this.target >= 0 && Main.hardMode && Main.player[this.target].zoneDungeon && Main.rand.Next(10) == 0 && Main.wallDungeon[(int)Main.tile[(int)this.center().X / 16, (int)this.center().Y / 16].wall])
        //{
        //    NPC.NewNPC((int)this.center().X, (int)this.center().Y, 288, 0);
        //}
        //if (this.type == 288)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1508, Main.rand.Next(1, 4), false, -1, false);
        //}
        //if ((this.type == 162 || this.type == 166) && Main.rand.Next(250) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1570, 1, false, -1, false);
        //}
        //if ((this.type == 158 || this.type == 159) && Main.rand.Next(100) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 900, 1, false, -1, false);
        //}
        //if (this.type == 35)
        //{
        //    if (Main.rand.Next(7) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1281, 1, false, -1, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(7) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1273, 1, false, -1, false);
        //        }
        //        else
        //        {
        //            if (Main.rand.Next(7) == 0)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1313, 1, false, -1, false);
        //            }
        //        }
        //    }
        //}
        //if (Main.bloodMoon && Main.hardMode && Main.rand.Next(1000) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1314, 1, false, -1, false);
        //}
        //if (Main.rand.Next(100) == 0)
        //{
        //    if (this.type == 104 || this.type == 102 || (this.type >= 269 && this.type <= 272))
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 885, 1, false, -1, false);
        //    }
        //    if (this.type == 77 || (this.type >= 273 && this.type <= 276))
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 886, 1, false, -1, false);
        //    }
        //    if (this.type == 141 || this.type == 42 || (this.type >= 231 && this.type <= 235))
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 887, 1, false, -1, false);
        //    }
        //    if (this.type == 79 || this.type == 81)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 888, 1, false, -1, false);
        //    }
        //    if (this.type == 75 || this.type == 78 || this.type == 82)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 889, 1, false, -1, false);
        //    }
        //    if (this.type == 75 || this.type == 79 || this.type == 103)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 890, 1, false, -1, false);
        //    }
        //    if (this.type == 34 || this.type == 83 || this.type == 84)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 891, 1, false, -1, false);
        //    }
        //    if (this.type == 94)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 892, 1, false, -1, false);
        //    }
        //    if (this.type == 93 || this.type == 109 || this.type == 80)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 893, 1, false, -1, false);
        //    }
        //}
        //if (this.type == 290)
        //{
        //    if (Main.rand.Next(25) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1513, 1, false, -1, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(10) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 938, 1, false, -1, false);
        //        }
        //    }
        //}
        //if (this.type == 291)
        //{
        //    if (Main.rand.Next(10) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1300, 1, false, -1, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(10) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1254, 1, false, -1, false);
        //        }
        //    }
        //}
        //if (this.type == 292)
        //{
        //    if (Main.rand.Next(10) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1514, 1, false, -1, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(10) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 679, 1, false, -1, false);
        //        }
        //    }
        //}
        //if (this.type == 292 && Main.rand.Next(10) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 759, 1, false, -1, false);
        //}
        //if (this.type == 156 && Main.rand.Next(30) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 683, 1, false, -1, false);
        //}
        //if (this.type == 245)
        //{
        //    int num = Main.rand.Next(8);
        //    if (num == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1258, 1, false, -1, false);
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1261, Main.rand.Next(60, 100), false, 0, false);
        //    }
        //    else
        //    {
        //        if (num == 1)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1122, 1, false, -1, false);
        //        }
        //        else
        //        {
        //            if (num == 2)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 899, 1, false, -1, false);
        //            }
        //            else
        //            {
        //                if (num == 3)
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1248, 1, false, -1, false);
        //                }
        //                else
        //                {
        //                    if (num == 4)
        //                    {
        //                        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1294, 1, false, -1, false);
        //                    }
        //                    else
        //                    {
        //                        if (num == 5)
        //                        {
        //                            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1295, 1, false, -1, false);
        //                        }
        //                        else
        //                        {
        //                            if (num == 6)
        //                            {
        //                                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1296, 1, false, -1, false);
        //                            }
        //                            else
        //                            {
        //                                if (num == 7)
        //                                {
        //                                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1297, 1, false, -1, false);
        //                                }
        //                            }
        //                        }
        //                    }
        //                }
        //            }
        //        }
        //    }
        //    NPC.downedGolemBoss = true;
        //}
        //if (this.type == 268)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1332, Main.rand.Next(1, 4), false, 0, false);
        //}
        //if (this.type == 109 && !NPC.downedClown)
        //{
        //    NPC.downedClown = true;
        //    if (Main.netMode == 2)
        //    {
        //        NetMessage.SendData(7, -1, -1, "", 0, 0f, 0f, 0f, 0);
        //    }
        //}
        //if (this.type == 153 && Main.rand.Next(17) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1328, 1, false, -1, false);
        //}
        //if (this.type == 253 && Main.rand.Next(250) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1327, 1, false, -1, false);
        //}
        //if (this.type == 120 && Main.rand.Next(500) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1325, 1, false, -1, false);
        //}
        //if (this.type == 49 && Main.rand.Next(250) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1325, 1, false, -1, false);
        //}
        //if (this.type == 185 && Main.rand.Next(150) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 951, 1, false, -1, false);
        //}
        //if (this.type == 44 && Main.rand.Next(75) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1320, 1, false, -1, false);
        //}
        //if (this.type == 110 && Main.rand.Next(100) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1321, 1, false, -1, false);
        //}
        //if (this.type == 260 && Main.rand.Next(150) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1322, 1, false, -1, false);
        //}
        //if (this.type == 151 && Main.rand.Next(50) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1322, 1, false, -1, false);
        //}
        //if (this.type == 24 && Main.rand.Next(75) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1323, 1, false, -1, false);
        //}
        //if (this.type == 109 && Main.rand.Next(30) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1324, Main.rand.Next(1, 5), false, -1, false);
        //}
        //if ((this.type == 163 || this.type == 238) && Main.rand.Next(40) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1308, 1, false, -1, false);
        //}
        //if (this.type == 287 && Main.rand.Next(7) == 0)
        //{
        //    if (Main.rand.Next(2) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 963, 1, false, -1, false);
        //    }
        //    else
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 977, 1, false, -1, false);
        //    }
        //}
        //if (this.type == 77 && Main.rand.Next(150) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 723, 1, false, -1, false);
        //}
        //if (this.type == 251 && Main.rand.Next(50) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1311, 1, false, -1, false);
        //}
        //if (this.type == 197 && Main.rand.Next(200) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1306, 1, false, -1, false);
        //}
        //if (this.type == 244)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 23, Main.rand.Next(1, 6), false, 0, false);
        //    if (Main.rand.Next(2) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 23, Main.rand.Next(1, 6), false, 0, false);
        //    }
        //    if (Main.rand.Next(2) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 23, Main.rand.Next(1, 6), false, 0, false);
        //    }
        //    if (Main.rand.Next(2) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 23, Main.rand.Next(1, 6), false, 0, false);
        //    }
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 662, Main.rand.Next(30, 60), false, 0, false);
        //}
        //if (this.type == 250 && Main.rand.Next(15) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1244, 1, false, -1, false);
        //}
        //if (this.type == 172)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 754, 1, false, -1, false);
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 755, 1, false, -1, false);
        //}
        //if (this.type == 110 && Main.rand.Next(200) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 682, 1, false, -1, false);
        //}
        //if (this.type >= 269 && this.type <= 280)
        //{
        //    if (Main.rand.Next(600) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1183, 1, false, -1, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(400) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1266, 1, false, -1, false);
        //        }
        //        else
        //        {
        //            if (Main.rand.Next(300) == 0)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 671, 1, false, -1, false);
        //            }
        //        }
        //    }
        //}
        //if (this.type == 154 && Main.rand.Next(100) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1253, 1, false, -1, false);
        //}
        //if ((this.type == 169 || this.type == 206) && Main.rand.Next(50) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 726, 1, false, -1, false);
        //}
        //if (this.type == 243)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, Main.rand.Next(684, 687), 1, false, -1, false);
        //}
        //if (this.type == 198 || this.type == 199 || this.type == 226)
        //{
        //    if (Main.rand.Next(3000) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1172, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(100) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1293, 1, false, -1, false);
        //    }
        //}
        //if (this.type == 78 || this.type == 79 || this.type == 80)
        //{
        //    if (Main.rand.Next(75) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 870, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(75) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 871, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(75) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 872, 1, false, -1, false);
        //    }
        //}
        //if (this.type == 85 && this.value > 0f)
        //{
        //    if (this.ai[3] == 4f)
        //    {
        //        if (Main.rand.Next(20) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1312, 1, false, -1, false);
        //        }
        //        else
        //        {
        //            int num2 = Main.rand.Next(3);
        //            if (num2 == 0)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 676, 1, false, -1, false);
        //            }
        //            else
        //            {
        //                if (num2 == 1)
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 725, 1, false, -1, false);
        //                }
        //                else
        //                {
        //                    if (num2 == 2)
        //                    {
        //                        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1264, 1, false, -1, false);
        //                    }
        //                }
        //            }
        //        }
        //    }
        //    else
        //    {
        //        int num3 = Main.rand.Next(7);
        //        if (num3 == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 437, 1, false, -1, false);
        //        }
        //        if (num3 == 1)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 517, 1, false, -1, false);
        //        }
        //        if (num3 == 2)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 535, 1, false, -1, false);
        //        }
        //        if (num3 == 3)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 536, 1, false, -1, false);
        //        }
        //        if (num3 == 4)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 532, 1, false, -1, false);
        //        }
        //        if (num3 == 5)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 393, 1, false, -1, false);
        //        }
        //        if (num3 == 6)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 554, 1, false, -1, false);
        //        }
        //    }
        //}
        //if (this.type == 87)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 575, Main.rand.Next(5, 11), false, 0, false);
        //}
        //if (this.type >= 212 && this.type <= 215)
        //{
        //    if (Main.rand.Next(8000) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 905, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(4000) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 855, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(2000) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 854, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(200) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 672, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(500) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1277, 1, false, 0, false);
        //    }
        //    if (Main.rand.Next(500) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1278, 1, false, 0, false);
        //    }
        //    if (Main.rand.Next(500) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1279, 1, false, 0, false);
        //    }
        //    if (Main.rand.Next(500) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1280, 1, false, 0, false);
        //    }
        //}
        //else
        //{
        //    if (this.type == 216)
        //    {
        //        if (Main.rand.Next(4000) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 905, 1, false, -1, false);
        //        }
        //        if (Main.rand.Next(2000) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 855, 1, false, -1, false);
        //        }
        //        if (Main.rand.Next(1000) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 854, 1, false, -1, false);
        //        }
        //        if (Main.rand.Next(100) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 672, 1, false, -1, false);
        //        }
        //    }
        //}
        //if (this.type == 161 && Main.rand.Next(50) == 0)
        //{
        //    int num4 = Main.rand.Next(3);
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 803 + num4, 1, false, 0, false);
        //}
        //if (this.type == 217)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1115, 1, false, -1, false);
        //}
        //if (this.type == 218)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1116, 1, false, -1, false);
        //}
        //if (this.type == 219)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1117, 1, false, -1, false);
        //}
        //if (this.type == 220)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1118, 1, false, -1, false);
        //}
        //if (this.type == 221)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1119, 1, false, -1, false);
        //}
        //if (this.type == 167 && Main.rand.Next(50) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 879, 1, false, -1, false);
        //}
        //if (this.type == 143 || this.type == 144 || this.type == 145)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 593, Main.rand.Next(5, 11), false, 0, false);
        //}
        //if (this.type == 79)
        //{
        //    if (Main.rand.Next(10) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 527, 1, false, 0, false);
        //    }
        //}
        //else
        //{
        //    if (this.type == 80 && Main.rand.Next(10) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 528, 1, false, 0, false);
        //    }
        //}
        //if (this.type == 49 && Main.rand.Next(200) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 18, 1, false, -1, false);
        //}
        //if (this.type == 21 || this.type == 201 || this.type == 202 || this.type == 203)
        //{
        //    if (Main.rand.Next(100) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 954, 1, false, -1, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(200) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 955, 1, false, -1, false);
        //        }
        //        else
        //        {
        //            if (Main.rand.Next(200) == 0)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1166, 1, false, -1, false);
        //            }
        //            else
        //            {
        //                if (Main.rand.Next(500) == 0)
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1274, 1, false, -1, false);
        //                }
        //            }
        //        }
        //    }
        //}
        //else
        //{
        //    if (this.type == 6)
        //    {
        //        if (Main.rand.Next(150) == 0)
        //        {
        //            int num5 = Main.rand.Next(3);
        //            if (num5 == 0)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 956, 1, false, -1, false);
        //            }
        //            if (num5 == 1)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 957, 1, false, -1, false);
        //            }
        //            else
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 958, 1, false, -1, false);
        //            }
        //        }
        //    }
        //    else
        //    {
        //        if (this.type == 42 || this.type == 43 || (this.type >= 231 && this.type <= 235))
        //        {
        //            if (Main.rand.Next(100) == 0)
        //            {
        //                int num6 = Main.rand.Next(3);
        //                if (num6 == 0)
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 960, 1, false, -1, false);
        //                }
        //                if (num6 == 1)
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 961, 1, false, -1, false);
        //                }
        //                else
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 962, 1, false, -1, false);
        //                }
        //            }
        //        }
        //        else
        //        {
        //            if (this.type == 31 || this.type == 32 || this.type == 294 || this.type == 295 || this.type == 296)
        //            {
        //                if (Main.rand.Next(450) == 0)
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 959, 1, false, -1, false);
        //                }
        //                if (Main.rand.Next(300) == 0)
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1307, 1, false, -1, false);
        //                }
        //            }
        //        }
        //    }
        //}
        //if ((this.type == 174 || this.type == 179 || this.type == 182 || this.type == 183) && Main.rand.Next(200) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 996, 1, false, 0, false);
        //}
        //if (this.type == 101 || this.type == 98)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 522, Main.rand.Next(2, 6), false, 0, false);
        //}
        //if (this.type == 86)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 526, 1, false, 0, false);
        //    if (Main.rand.Next(100) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 856, 1, false, 0, false);
        //    }
        //}
        //if (this.type == 113)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 367, 1, false, -1, false);
        //    if (Main.rand.Next(2) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, Main.rand.Next(489, 492), 1, false, -1, false);
        //    }
        //    else
        //    {
        //        int num7 = Main.rand.Next(3);
        //        if (num7 == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 514, 1, false, -1, false);
        //        }
        //        else
        //        {
        //            if (num7 == 1)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 426, 1, false, -1, false);
        //            }
        //            else
        //            {
        //                if (num7 == 2)
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 434, 1, false, -1, false);
        //                }
        //            }
        //        }
        //    }
        //    if (Main.netMode != 1)
        //    {
        //        int num8 = (int)(this.position.X + (float)(this.width / 2)) / 16;
        //        int num9 = (int)(this.position.Y + (float)(this.height / 2)) / 16;
        //        int num10 = this.width / 2 / 16 + 1;
        //        for (int i = num8 - num10; i <= num8 + num10; i++)
        //        {
        //            for (int j = num9 - num10; j <= num9 + num10; j++)
        //            {
        //                if ((i == num8 - num10 || i == num8 + num10 || j == num9 - num10 || j == num9 + num10) && !Main.tile[i, j].active())
        //                {
        //                    Main.tile[i, j].type = 140;
        //                    Main.tile[i, j].active(true);
        //                }
        //                Main.tile[i, j].lava(false);
        //                Main.tile[i, j].liquid = 0;
        //                if (Main.netMode == 2)
        //                {
        //                    NetMessage.SendTileSquare(-1, i, j, 1);
        //                }
        //                else
        //                {
        //                    WorldGen.SquareTileFrame(i, j, true);
        //                }
        //            }
        //        }
        //    }
        //}
        //if (this.type == 186)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 40, Main.rand.Next(1, 10), false, 0, false);
        //}
        //if (this.type == 225)
        //{
        //    if (Main.rand.Next(45) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1243, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 23, Main.rand.Next(2, 6), false, 0, false);
        //    }
        //}
        //if (this.type == 1 || this.type == 16 || this.type == 138 || this.type == 141 || this.type == 147 || this.type == 184 || this.type == 187 || this.type == 204)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 23, Main.rand.Next(1, 3), false, 0, false);
        //    if (Main.rand.Next(10000) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1309, 1, false, -1, false);
        //    }
        //}
        //if (this.type == 75)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 501, Main.rand.Next(1, 4), false, 0, false);
        //}
        //if (this.type == 81)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 23, Main.rand.Next(2, 5), false, 0, false);
        //}
        //if (this.type == 122)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 23, Main.rand.Next(5, 11), false, 0, false);
        //}
        //if (this.type == 71)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 327, 1, false, 0, false);
        //}
        //if (this.type == 2)
        //{
        //    if (Main.rand.Next(3) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 38, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(100) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 236, 1, false, 0, false);
        //        }
        //    }
        //}
        //if (this.type == 104 && Main.rand.Next(60) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 485, 1, false, -1, false);
        //}
        //if (this.type == 58)
        //{
        //    if (Main.rand.Next(500) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 263, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(40) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 118, 1, false, 0, false);
        //        }
        //    }
        //}
        //if (this.type == 102 && Main.rand.Next(500) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 263, 1, false, 0, false);
        //}
        //if (this.type == 3 || this.type == 132 || this.type == 161 || this.type == 186 || this.type == 187 || this.type == 188 || this.type == 189 || this.type == 200 || this.type == 223)
        //{
        //    if (Main.rand.Next(50) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 216, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(250) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1304, 1, false, -1, false);
        //    }
        //}
        //if (this.type == 223 && Main.rand.Next(10) == 0)
        //{
        //    if (Main.rand.Next(2) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1135, 1, false, -1, false);
        //    }
        //    else
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1136, 1, false, -1, false);
        //    }
        //}
        //if (this.type == 66)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 267, 1, false, 0, false);
        //}
        //if (this.type == 62 && Main.rand.Next(50) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 272, 1, false, -1, false);
        //}
        //if (Main.hardMode && (double)(this.position.Y / 16f) < Main.worldSurface + 10.0 && (this.center().X / 16f < 380f || this.center().X / 16f > (float)(Main.maxTilesX - 380)) && Main.rand.Next(100) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1315, 1, false, 0, false);
        //}
        //if (this.type == 52)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 251, 1, false, 0, false);
        //}
        //if (this.type == 53)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 239, 1, false, 0, false);
        //}
        //if (this.type == 54)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 260, 1, false, 0, false);
        //}
        //if (this.type == 55 || this.type == 230)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 261, 1, false, 0, false);
        //}
        //if (this.type == 69 && Main.rand.Next(7) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 323, 1, false, 0, false);
        //}
        //if (this.type == 73)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 362, Main.rand.Next(1, 3), false, 0, false);
        //}
        //if (this.type == 4)
        //{
        //    if (Main.rand.Next(150) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1299, 1, false, 0, false);
        //    }
        //    if (WorldGen.crimson)
        //    {
        //        int stack = Main.rand.Next(20) + 10;
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 880, stack, false, 0, false);
        //        stack = Main.rand.Next(20) + 10;
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 880, stack, false, 0, false);
        //        stack = Main.rand.Next(20) + 10;
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 880, stack, false, 0, false);
        //    }
        //    else
        //    {
        //        int stack2 = Main.rand.Next(30) + 20;
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 47, stack2, false, 0, false);
        //        stack2 = Main.rand.Next(20) + 10;
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 56, stack2, false, 0, false);
        //        stack2 = Main.rand.Next(20) + 10;
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 56, stack2, false, 0, false);
        //        stack2 = Main.rand.Next(20) + 10;
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 56, stack2, false, 0, false);
        //        stack2 = Main.rand.Next(3) + 1;
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 59, stack2, false, 0, false);
        //    }
        //}
        //if ((this.type == 6 || this.type == 94) && Main.rand.Next(3) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 68, 1, false, 0, false);
        //}
        //if ((this.type == 181 || this.type == 173 || this.type == 239 || this.type == 240) && Main.rand.Next(3) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1330, 1, false, 0, false);
        //}
        //if (this.type == 7 || this.type == 8 || this.type == 9)
        //{
        //    if (Main.rand.Next(3) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 68, Main.rand.Next(1, 3), false, 0, false);
        //    }
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 69, Main.rand.Next(3, 9), false, 0, false);
        //}
        //if ((this.type == 10 || this.type == 11 || this.type == 12 || this.type == 95 || this.type == 96 || this.type == 97) && Main.rand.Next(500) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 215, 1, false, 0, false);
        //}
        //if (this.type == 47 && Main.rand.Next(75) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 243, 1, false, 0, false);
        //}
        //if (this.type == 222)
        //{
        //    NPC.downedQueenBee = true;
        //    int num11 = Main.rand.Next(3);
        //    if (num11 == 0)
        //    {
        //        num11 = 1121;
        //    }
        //    else
        //    {
        //        if (num11 == 1)
        //        {
        //            num11 = 1123;
        //        }
        //        else
        //        {
        //            if (num11 == 2)
        //            {
        //                num11 = 1132;
        //            }
        //        }
        //    }
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, num11, 1, false, 0, false);
        //    if (Main.rand.Next(20) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1170, 1, false, 0, false);
        //    }
        //    if (Main.rand.Next(3) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1129, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(2) == 0)
        //        {
        //            num11 = Main.rand.Next(842, 845);
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, num11, 1, false, 0, false);
        //        }
        //    }
        //    if (Main.rand.Next(4) != 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1130, Main.rand.Next(10, 30), false, 0, false);
        //    }
        //}
        //if (this.type == 266)
        //{
        //    int stack3 = Main.rand.Next(15, 41);
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 880, stack3, false, 0, false);
        //    stack3 = Main.rand.Next(15, 41);
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 880, stack3, false, 0, false);
        //}
        //if (this.type == 267 && NPC.AnyNPCs(266))
        //{
        //    int stack4 = Main.rand.Next(2, 6);
        //    if (Main.rand.Next(3) != 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1329, stack4, false, 0, false);
        //    }
        //    if (Main.rand.Next(3) != 0)
        //    {
        //        stack4 = Main.rand.Next(4, 11);
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 880, stack4, false, 0, false);
        //    }
        //    if (Main.rand.Next(2) == 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statLife < Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statLifeMax)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 58, 1, false, 0, false);
        //    }
        //}
        //if (this.type == 13 || this.type == 14 || this.type == 15)
        //{
        //    int stack5 = Main.rand.Next(1, 3);
        //    if (Main.rand.Next(2) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 86, stack5, false, 0, false);
        //    }
        //    if (Main.rand.Next(2) == 0)
        //    {
        //        stack5 = Main.rand.Next(2, 6);
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 56, stack5, false, 0, false);
        //    }
        //    if (this.boss)
        //    {
        //        stack5 = Main.rand.Next(10, 30);
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 56, stack5, false, 0, false);
        //        stack5 = Main.rand.Next(10, 31);
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 56, stack5, false, 0, false);
        //    }
        //    if (Main.rand.Next(4) == 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statLife < Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statLifeMax)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 58, 1, false, 0, false);
        //    }
        //}
        //if (this.type == 116 || this.type == 117 || this.type == 118 || this.type == 119 || this.type == 139)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 58, 1, false, 0, false);
        //}
        //if (this.type == 63 || this.type == 64 || this.type == 103)
        //{
        //    if (Main.rand.Next(100) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1303, 1, false, -1, false);
        //    }
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 282, Main.rand.Next(1, 5), false, 0, false);
        //}
        //if (this.type == 21 || this.type == 44 || this.type == 167 || this.type == 201 || this.type == 202 || this.type == 203)
        //{
        //    if (Main.rand.Next(25) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 118, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        if (this.type == 44)
        //        {
        //            if (Main.rand.Next(20) == 0)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, Main.rand.Next(410, 412), 1, false, 0, false);
        //            }
        //            else
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 166, Main.rand.Next(1, 4), false, 0, false);
        //            }
        //        }
        //    }
        //}
        //if (this.type == 45)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 238, 1, false, 0, false);
        //}
        //if (this.type == 50)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, Main.rand.Next(256, 259), 1, false, 0, false);
        //}
        //if (this.type == 23 && Main.rand.Next(50) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 116, 1, false, 0, false);
        //}
        //if (this.type == 24 && Main.rand.Next(300) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 244, 1, false, 0, false);
        //}
        //if (this.type == 31 || this.type == 32 || this.type == 34)
        //{
        //    if (Main.rand.Next(250) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 932, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(65) == 0)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 327, 1, false, 0, false);
        //        }
        //        else
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 154, Main.rand.Next(1, 4), false, 0, false);
        //        }
        //    }
        //}
        //if (this.type == 26 || this.type == 27 || this.type == 28 || this.type == 29 || this.type == 111)
        //{
        //    if (Main.rand.Next(200) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 160, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(2) == 0)
        //        {
        //            int stack6 = Main.rand.Next(1, 6);
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 161, stack6, false, 0, false);
        //        }
        //    }
        //}
        //if (this.type == 175 && Main.rand.Next(400) == 0 && Main.rand.Next(200) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1265, 1, false, -1, false);
        //}
        //if ((this.type == 42 || (this.type >= 231 && this.type <= 235)) && Main.rand.Next(2) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 209, 1, false, 0, false);
        //}
        //if (this.type == 204 && Main.rand.Next(3) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 209, 1, false, 0, false);
        //}
        //if (this.type == 43 && Main.rand.Next(3) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 210, 1, false, 0, false);
        //}
        //if (this.type == 65)
        //{
        //    if (Main.rand.Next(50) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 268, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 319, 1, false, 0, false);
        //    }
        //}
        //if (this.type == 48 && Main.rand.Next(2) == 0)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 320, 1, false, 0, false);
        //}
        //if (this.type == 125 || this.type == 126)
        //{
        //    int num12 = 125;
        //    if (this.type == 125)
        //    {
        //        num12 = 126;
        //    }
        //    if (!NPC.AnyNPCs(num12))
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 549, Main.rand.Next(25, 41), false, 0, false);
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1225, Main.rand.Next(20, 36), false, 0, false);
        //    }
        //    else
        //    {
        //        this.value = 0f;
        //        this.boss = false;
        //    }
        //}
        //else
        //{
        //    if (this.type == 127)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 547, Main.rand.Next(25, 41), false, 0, false);
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1225, Main.rand.Next(20, 36), false, 0, false);
        //    }
        //    else
        //    {
        //        if (this.type == 134)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 548, Main.rand.Next(25, 41), false, 0, false);
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1225, Main.rand.Next(20, 36), false, 0, false);
        //        }
        //    }
        //}
        //if (this.type == 262)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1141, 1, false, -1, false);
        //    if (Main.rand.Next(20) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1182, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(200) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1305, 1, false, -1, false);
        //    }
        //    if (Main.rand.Next(4) == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1157, 1, false, -1, false);
        //    }
        //    int num13 = Main.rand.Next(6);
        //    if (!NPC.downedPlantBoss)
        //    {
        //        num13 = 0;
        //    }
        //    if (num13 == 0)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 758, 1, false, -1, false);
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 771, Main.rand.Next(20, 50), false, 0, false);
        //    }
        //    else
        //    {
        //        if (num13 == 1)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1255, 1, false, -1, false);
        //        }
        //        else
        //        {
        //            if (num13 == 2)
        //            {
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 788, 1, false, -1, false);
        //            }
        //            else
        //            {
        //                if (num13 == 3)
        //                {
        //                    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1178, 1, false, -1, false);
        //                }
        //                else
        //                {
        //                    if (num13 == 4)
        //                    {
        //                        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1259, 1, false, -1, false);
        //                    }
        //                    else
        //                    {
        //                        if (num13 == 5)
        //                        {
        //                            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1155, 1, false, -1, false);
        //                        }
        //                    }
        //                }
        //            }
        //        }
        //    }
        //    NPC.downedPlantBoss = true;
        //}
        //if ((this.boss || this.type == 125 || this.type == 126) && Main.rand.Next(10) == 0)
        //{
        //    if (this.type == 4)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1360, 1, false, 0, false);
        //    }
        //    if (this.type == 13 || this.type == 14 || this.type == 15)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1361, 1, false, 0, false);
        //    }
        //    if (this.type == 266)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1362, 1, false, 0, false);
        //    }
        //    if (this.type == 35)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1363, 1, false, 0, false);
        //    }
        //    if (this.type == 222)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1364, 1, false, 0, false);
        //    }
        //    if (this.type == 113)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1365, 1, false, 0, false);
        //    }
        //    if (this.type == 134)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1366, 1, false, 0, false);
        //    }
        //    if (this.type == 127)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1367, 1, false, 0, false);
        //    }
        //    if (this.type == 125)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1368, 1, false, 0, false);
        //    }
        //    if (this.type == 126)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1369, 1, false, 0, false);
        //    }
        //    if (this.type == 262)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1370, 1, false, 0, false);
        //    }
        //    if (this.type == 245)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 1371, 1, false, 0, false);
        //    }
        //}
        //if (this.boss)
        //{
        //    if (this.type == 4)
        //    {
        //        NPC.downedBoss1 = true;
        //    }
        //    else
        //    {
        //        if (this.type == 13 || this.type == 14 || this.type == 15)
        //        {
        //            NPC.downedBoss2 = true;
        //            this.name = "Eater of Worlds";
        //        }
        //        else
        //        {
        //            if (this.type == 35)
        //            {
        //                NPC.downedBoss3 = true;
        //                this.name = "Skeletron";
        //            }
        //            else
        //            {
        //                this.name = this.displayName;
        //            }
        //        }
        //    }
        //    if (this.type == 127)
        //    {
        //        NPC.downedMechBoss3 = true;
        //        NPC.downedMechBossAny = true;
        //    }
        //    if (this.type == 134)
        //    {
        //        NPC.downedMechBoss1 = true;
        //        NPC.downedMechBossAny = true;
        //    }
        //    string str = this.name;
        //    if (this.displayName != "")
        //    {
        //        str = this.displayName;
        //    }
        //    int stack7 = Main.rand.Next(5, 16);
        //    int num14 = 28;
        //    if (this.type == 113)
        //    {
        //        num14 = 188;
        //    }
        //    else
        //    {
        //        if (this.type == 222)
        //        {
        //            num14 = 1134;
        //        }
        //        else
        //        {
        //            if (this.type > 113 && this.type < 222)
        //            {
        //                num14 = 499;
        //            }
        //            else
        //            {
        //                if (this.type == 245 || this.type == 262)
        //                {
        //                    num14 = 499;
        //                }
        //            }
        //        }
        //    }
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, num14, stack7, false, 0, false);
        //    int num15 = Main.rand.Next(5) + 5;
        //    for (int k = 0; k < num15; k++)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 58, 1, false, 0, false);
        //    }
        //    if (this.type == 125 || this.type == 126)
        //    {
        //        NPC.downedMechBoss2 = true;
        //        NPC.downedMechBossAny = true;
        //        if (Main.netMode == 0)
        //        {
        //            Main.NewText("The Twins " + Lang.misc[17], 175, 75, 255, false);
        //        }
        //        else
        //        {
        //            if (Main.netMode == 2)
        //            {
        //                NetMessage.SendData(25, -1, -1, "The Twins " + Lang.misc[17], 255, 175f, 75f, 255f, 0);
        //            }
        //        }
        //    }
        //    else
        //    {
        //        if (Main.netMode == 0)
        //        {
        //            Main.NewText(str + " " + Lang.misc[17], 175, 75, 255, false);
        //        }
        //        else
        //        {
        //            if (Main.netMode == 2)
        //            {
        //                NetMessage.SendData(25, -1, -1, str + " " + Lang.misc[17], 255, 175f, 75f, 255f, 0);
        //            }
        //        }
        //    }
        //    if (this.type == 113 && Main.netMode != 1)
        //    {
        //        WorldGen.StartHardmode();
        //    }
        //    if (Main.netMode == 2)
        //    {
        //        NetMessage.SendData(7, -1, -1, "", 0, 0f, 0f, 0f, 0);
        //    }
        //}
        //if (Main.rand.Next(6) == 0 && this.lifeMax > 1 && this.damage > 0)
        //{
        //    if (Main.rand.Next(2) == 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statMana < Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statManaMax)
        //    {
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 184, 1, false, 0, false);
        //    }
        //    else
        //    {
        //        if (Main.rand.Next(2) == 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statLife < Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statLifeMax)
        //        {
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 58, 1, false, 0, false);
        //        }
        //    }
        //}
        //if (Main.rand.Next(2) == 0 && this.lifeMax > 1 && this.damage > 0 && Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statMana < Main.player[(int)Player.FindClosest(this.position, this.width, this.height)].statManaMax)
        //{
        //    Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 184, 1, false, 0, false);
        //}
        //float num16 = this.value;
        //if (this.midas)
        //{
        //    num16 *= 1f + (float)Main.rand.Next(10, 50) * 0.01f;
        //}
        //num16 *= 1f + (float)Main.rand.Next(-20, 21) * 0.01f;
        //if (Main.rand.Next(5) == 0)
        //{
        //    num16 *= 1f + (float)Main.rand.Next(5, 11) * 0.01f;
        //}
        //if (Main.rand.Next(10) == 0)
        //{
        //    num16 *= 1f + (float)Main.rand.Next(10, 21) * 0.01f;
        //}
        //if (Main.rand.Next(15) == 0)
        //{
        //    num16 *= 1f + (float)Main.rand.Next(15, 31) * 0.01f;
        //}
        //if (Main.rand.Next(20) == 0)
        //{
        //    num16 *= 1f + (float)Main.rand.Next(20, 41) * 0.01f;
        //}
        //while ((int)num16 > 0)
        //{
        //    if (num16 > 1000000f)
        //    {
        //        int num17 = (int)(num16 / 1000000f);
        //        if (num17 > 50 && Main.rand.Next(5) == 0)
        //        {
        //            num17 /= Main.rand.Next(3) + 1;
        //        }
        //        if (Main.rand.Next(5) == 0)
        //        {
        //            num17 /= Main.rand.Next(3) + 1;
        //        }
        //        num16 -= (float)(1000000 * num17);
        //        Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 74, num17, false, 0, false);
        //    }
        //    else
        //    {
        //        if (num16 > 10000f)
        //        {
        //            int num18 = (int)(num16 / 10000f);
        //            if (num18 > 50 && Main.rand.Next(5) == 0)
        //            {
        //                num18 /= Main.rand.Next(3) + 1;
        //            }
        //            if (Main.rand.Next(5) == 0)
        //            {
        //                num18 /= Main.rand.Next(3) + 1;
        //            }
        //            num16 -= (float)(10000 * num18);
        //            Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 73, num18, false, 0, false);
        //        }
        //        else
        //        {
        //            if (num16 > 100f)
        //            {
        //                int num19 = (int)(num16 / 100f);
        //                if (num19 > 50 && Main.rand.Next(5) == 0)
        //                {
        //                    num19 /= Main.rand.Next(3) + 1;
        //                }
        //                if (Main.rand.Next(5) == 0)
        //                {
        //                    num19 /= Main.rand.Next(3) + 1;
        //                }
        //                num16 -= (float)(100 * num19);
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 72, num19, false, 0, false);
        //            }
        //            else
        //            {
        //                int num20 = (int)num16;
        //                if (num20 > 50 && Main.rand.Next(5) == 0)
        //                {
        //                    num20 /= Main.rand.Next(3) + 1;
        //                }
        //                if (Main.rand.Next(5) == 0)
        //                {
        //                    num20 /= Main.rand.Next(4) + 1;
        //                }
        //                if (num20 < 1)
        //                {
        //                    num20 = 1;
        //                }
        //                num16 -= (float)num20;
        //                Item.NewItem((int)this.position.X, (int)this.position.Y, this.width, this.height, 71, num20, false, 0, false);
        //            }
        //        }
        //    }
        //}
        public void HitEffect(int hitDirection = 0, double dmg = 10.0)
        {
            if (!this.active)
            {
                return;
            }
            if (this.type == 1 || this.type == 16 || this.type == 71 || this.type == 244)
            {
                if (this.life > 0)
                {
                    int num = 0;
                    while ((double) num < dmg/(double) this.lifeMax*100.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) hitDirection, -1f, this.alpha, this.color, 1f);
                        num++;
                    }
                }
                else
                {
                    for (int i = 0; i < 50; i++)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) (2*hitDirection), -2f, this.alpha, this.color, 1f);
                    }
                    if (Main.netMode != 1 && this.type == 16)
                    {
                        int num2 = 3; // Main.rand.Next(2) + 2;
                        for (int j = 0; j < num2; j++)
                        {
                            int num3 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), 1, this.whoAmI + j + 1);
                            Main.npc[num3].SetDefaults("Baby Slime");
                            Main.npc[num3].velocity.X = this.velocity.X*2f;
                            Main.npc[num3].velocity.Y = this.velocity.Y;
                            NPC expr_193_cp_0 = Main.npc[num3];
                            expr_193_cp_0.velocity.X = expr_193_cp_0.velocity.X + ((float) Main.rand.Next(-20, 20)*0.1f + (float) (j*this.direction)*0.3f);
                            NPC expr_1D1_cp_0 = Main.npc[num3];
                            expr_1D1_cp_0.velocity.Y = expr_1D1_cp_0.velocity.Y - ((float) Main.rand.Next(0, 10)*0.1f + (float) j);
                            Main.npc[num3].ai[1] = (float) j;
                            Main.npc[num3].target = this.target;
                            if (Main.netMode == 2 && num3 < 200)
                            {
                                NetMessage.SendData(23, -1, -1, "", num3, 0f, 0f, 0f, 0);
                            }
                        }
                    }
                }
            }
            if (this.type >= 245 && this.type <= 249)
            {
                if (this.life > 0)
                {
                    int num4 = 0;
                    while ((double) num4 < dmg/(double) this.lifeMax*100.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 148, (float) hitDirection, -1f, 0, default(Color), 1f);
                        num4++;
                    }
                }
                else
                {
                    if (this.type == 246)
                    {
                        if (Main.netMode != 1)
                        {
                            NPC.NewNPC((int) this.center().X, (int) this.position.Y + this.height, 249, this.whoAmI);
                        }
                    }
                    else
                    {
                        for (int k = 0; k < 50; k++)
                        {
                            Dust.NewDust(this.position, this.width, this.height, 148, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                        }
                        if (this.type == 245)
                        {
                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 368, this.scale);
                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 370, this.scale);
                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 368, this.scale);
                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 370, this.scale);
                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 368, this.scale);
                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 370, this.scale);
                            Gore.NewGore(this.position, this.velocity, 360, this.scale);
                            Gore.NewGore(this.position, this.velocity, 361, this.scale);
                            Gore.NewGore(this.position, this.velocity, 362, this.scale);
                            Gore.NewGore(this.position, this.velocity, 363, this.scale);
                            Gore.NewGore(this.position, this.velocity, 364, this.scale);
                            Gore.NewGore(this.position, this.velocity, 367, this.scale);
                            Gore.NewGore(this.position, this.velocity, 366, this.scale);
                        }
                        else
                        {
                            if (this.type == 249)
                            {
                                Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 368, this.scale);
                                Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 370, this.scale);
                                Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 368, this.scale);
                                Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 370, this.scale);
                                Gore.NewGore(this.position, this.velocity, 365, this.scale);
                                Gore.NewGore(this.position, this.velocity, 363, this.scale);
                                Gore.NewGore(this.position, this.velocity, 362, this.scale);
                            }
                            else
                            {
                                Gore.NewGore(this.position, this.velocity, 369, this.scale);
                                Gore.NewGore(this.position, this.velocity, 371, this.scale);
                                Gore.NewGore(this.position, this.velocity, 370, this.scale);
                            }
                        }
                    }
                }
            }
            if (this.type == 288 && this.life <= 0)
            {
                for (int l = 0; l < 50; l++)
                {
                    int num5 = Dust.NewDust(this.position, this.width, this.height, 180, this.velocity.X, this.velocity.Y, 0, default(Color), 1f);
                    Main.dust[num5].velocity *= 2f;
                    Main.dust[num5].noGravity = true;
                    Main.dust[num5].scale = 1.4f;
                }
            }
            if (this.type == 204)
            {
                if (this.life > 0)
                {
                    int num6 = 0;
                    while ((double) num6 < dmg/(double) this.lifeMax*100.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) hitDirection, -1f, 100, new Color(149, 208, 104), 1f);
                        num6++;
                    }
                }
                else
                {
                    for (int m = 0; m < 50; m++)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) (2*hitDirection), -2f, 100, new Color(149, 208, 104), 1f);
                    }
                }
            }
            if (this.type == 225)
            {
                if (this.life > 0)
                {
                    int num7 = 0;
                    while ((double) num7 < dmg/(double) this.lifeMax*100.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) hitDirection, -1f, 100, new Color(0, 80, 255, 100), 1f);
                        num7++;
                    }
                }
                else
                {
                    for (int n = 0; n < 50; n++)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) (2*hitDirection), -2f, 100, new Color(0, 80, 255, 100), 1f);
                    }
                    Gore.NewGore(this.position, this.velocity, 314, this.scale);
                }
            }
            if (this.type == 243)
            {
                if (this.life > 0)
                {
                    int num8 = 0;
                    while ((double) num8 < dmg/(double) this.lifeMax*150.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 161, (float) hitDirection, -1f, 0, default(Color), 1f);
                        num8++;
                    }
                }
                else
                {
                    for (int num9 = 0; num9 < 200; num9++)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 161, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                    }
                    Gore.NewGore(this.position, this.velocity, 359, this.scale);
                }
            }
            if ((this.type == 210 || this.type == 211) && this.life <= 0)
            {
                for (int num10 = 0; num10 < 6; num10++)
                {
                    int num11 = Dust.NewDust(this.position, this.width, this.height, 150, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                    if (Main.rand.Next(2) == 0)
                    {
                        Main.dust[num11].noGravity = true;
                        Main.dust[num11].scale = 1.5f;
                    }
                    else
                    {
                        Main.dust[num11].scale = 0.8f;
                    }
                }
            }
            if (this.type == 154)
            {
                if (this.life > 0)
                {
                    int num12 = 0;
                    while ((double) num12 < dmg/(double) this.lifeMax*50.0)
                    {
                        int num13 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 67, this.velocity.X, this.velocity.Y, 90, default(Color), 1.5f);
                        Main.dust[num13].noGravity = true;
                        Main.dust[num13].velocity *= 0.2f;
                        num12++;
                    }
                }
                else
                {
                    for (int num14 = 0; num14 < 50; num14++)
                    {
                        int num15 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 67, this.velocity.X, this.velocity.Y, 90, default(Color), 1.5f);
                        Main.dust[num15].noGravity = true;
                        Main.dust[num15].velocity *= 0.2f;
                    }
                    Gore.NewGore(this.position, this.velocity, 180, this.scale);
                }
            }
            if (this.type == 147 || this.type == 184)
            {
                if (this.life > 0)
                {
                    int num16 = 0;
                    while ((double) num16 < dmg/(double) this.lifeMax*50.0)
                    {
                        int num17 = Dust.NewDust(this.position, this.width, this.height, 76, (float) hitDirection, -1f, 0, default(Color), 1f);
                        Main.dust[num17].noGravity = true;
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) hitDirection, -1f, 100, new Color(97, 200, 255, 100), 1f);
                        num16++;
                    }
                }
                else
                {
                    for (int num18 = 0; num18 < 30; num18++)
                    {
                        int num19 = Dust.NewDust(this.position, this.width, this.height, 76, (float) hitDirection, -2f, 0, default(Color), 1f);
                        Main.dust[num19].noGravity = true;
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) hitDirection, -2f, 100, new Color(97, 200, 255, 100), 1f);
                    }
                }
            }
            if (this.type == 143 || this.type == 144 || this.type == 145)
            {
                if (this.life > 0)
                {
                    int num20 = 0;
                    while ((double) num20 < dmg/(double) this.lifeMax*100.0)
                    {
                        int num21 = Dust.NewDust(this.position, this.width, this.height, 76, (float) hitDirection, -1f, 0, default(Color), 1f);
                        Main.dust[num21].noGravity = true;
                        num20++;
                    }
                }
                else
                {
                    for (int num22 = 0; num22 < 50; num22++)
                    {
                        int num23 = Dust.NewDust(this.position, this.width, this.height, 76, (float) hitDirection, -1f, 0, default(Color), 1f);
                        Main.dust[num23].noGravity = true;
                        Main.dust[num23].scale *= 1.2f;
                    }
                }
            }
            if (this.type == 141)
            {
                if (this.life > 0)
                {
                    int num24 = 0;
                    while ((double) num24 < dmg/(double) this.lifeMax*100.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) hitDirection, -1f, this.alpha, new Color(210, 230, 140), 1f);
                        num24++;
                    }
                }
                else
                {
                    for (int num25 = 0; num25 < 50; num25++)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) (2*hitDirection), -2f, this.alpha, new Color(210, 230, 140), 1f);
                    }
                }
            }
            if (this.type == 112)
            {
                for (int num26 = 0; num26 < 20; num26++)
                {
                    int num27 = Dust.NewDust(new Vector2(this.position.X, this.position.Y + 2f), this.width, this.height, 18, 0f, 0f, 100, default(Color), 2f);
                    if (Main.rand.Next(2) == 0)
                    {
                        Main.dust[num27].scale *= 0.6f;
                    }
                    else
                    {
                        Main.dust[num27].velocity *= 1.4f;
                        Main.dust[num27].noGravity = true;
                    }
                }
            }
            if (this.type == 183)
            {
                if (this.life > 0)
                {
                    int num28 = 0;
                    while ((double) num28 < dmg/(double) this.lifeMax*100.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 136, 0f, 0f, this.alpha, this.color, 1f);
                        num28++;
                    }
                }
                else
                {
                    for (int num29 = 0; num29 < 50; num29++)
                    {
                        int num30 = Dust.NewDust(this.position, this.width, this.height, 136, (float) hitDirection, 0f, this.alpha, this.color, 1f);
                        Main.dust[num30].velocity *= 2f;
                    }
                }
            }
            if (this.type == 81 || this.type == 121)
            {
                if (this.life > 0)
                {
                    int num31 = 0;
                    while ((double) num31 < dmg/(double) this.lifeMax*100.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 14, 0f, 0f, this.alpha, this.color, 1f);
                        num31++;
                    }
                }
                else
                {
                    for (int num32 = 0; num32 < 50; num32++)
                    {
                        int num33 = Dust.NewDust(this.position, this.width, this.height, 14, (float) hitDirection, 0f, this.alpha, this.color, 1f);
                        Main.dust[num33].velocity *= 2f;
                    }
                    if (Main.netMode != 1)
                    {
                        if (this.type == 121)
                        {
                            int num34 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), 81, 0);
                            Main.npc[num34].SetDefaults("Slimer2");
                            Main.npc[num34].velocity.X = this.velocity.X;
                            Main.npc[num34].velocity.Y = this.velocity.Y;
                            Gore.NewGore(this.position, this.velocity, 94, this.scale);
                            if (Main.netMode == 2 && num34 < 200)
                            {
                                NetMessage.SendData(23, -1, -1, "", num34, 0f, 0f, 0f, 0);
                            }
                        }
                        else
                        {
                            if (this.scale >= 1f)
                            {
                                int num35 = 3; // Main.rand.Next(2) + 2;
                                for (int num36 = 0; num36 < num35; num36++)
                                {
                                    int num37 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), 1, this.whoAmI + num36 + 1);
                                    Main.npc[num37].SetDefaults("Slimeling");
                                    Main.npc[num37].velocity.X = this.velocity.X*3f;
                                    Main.npc[num37].velocity.Y = this.velocity.Y;
                                    NPC expr_1545_cp_0 = Main.npc[num37];
                                    expr_1545_cp_0.velocity.X = expr_1545_cp_0.velocity.X + ((float) Main.rand.Next(-10, 10)*0.1f + (float) (num36*this.direction)*0.3f);
                                    NPC expr_1584_cp_0 = Main.npc[num37];
                                    expr_1584_cp_0.velocity.Y = expr_1584_cp_0.velocity.Y - ((float) Main.rand.Next(0, 10)*0.1f + (float) num36);
                                    Main.npc[num37].ai[1] = (float) num36;
                                    Main.npc[num37].target = this.target;
                                    if (Main.netMode == 2 && num37 < 200)
                                    {
                                        NetMessage.SendData(23, -1, -1, "", num37, 0f, 0f, 0f, 0);
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (this.type == 120 || this.type == 137 || this.type == 138)
            {
                if (this.life > 0)
                {
                    int num38 = 0;
                    while ((double) num38 < dmg/(double) this.lifeMax*50.0)
                    {
                        int num39 = Dust.NewDust(this.position, this.width, this.height, 71, 0f, 0f, 200, default(Color), 1f);
                        Main.dust[num39].velocity *= 1.5f;
                        num38++;
                    }
                }
                else
                {
                    for (int num40 = 0; num40 < 50; num40++)
                    {
                        int num41 = Dust.NewDust(this.position, this.width, this.height, 71, (float) hitDirection, 0f, 200, default(Color), 1f);
                        Main.dust[num41].velocity *= 1.5f;
                    }
                }
            }
            if (this.type == 122)
            {
                if (this.life > 0)
                {
                    int num42 = 0;
                    while ((double) num42 < dmg/(double) this.lifeMax*50.0)
                    {
                        int num43 = Dust.NewDust(this.position, this.width, this.height, 72, 0f, 0f, 200, default(Color), 1f);
                        Main.dust[num43].velocity *= 1.5f;
                        num42++;
                    }
                }
                else
                {
                    for (int num44 = 0; num44 < 50; num44++)
                    {
                        int num45 = Dust.NewDust(this.position, this.width, this.height, 72, (float) hitDirection, 0f, 200, default(Color), 1f);
                        Main.dust[num45].velocity *= 1.5f;
                    }
                }
            }
            if (this.type == 75)
            {
                if (this.life > 0)
                {
                    int num46 = 0;
                    while ((double) num46 < dmg/(double) this.lifeMax*50.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 55, 0f, 0f, 200, this.color, 1f);
                        num46++;
                    }
                }
                else
                {
                    for (int num47 = 0; num47 < 50; num47++)
                    {
                        int num48 = Dust.NewDust(this.position, this.width, this.height, 55, (float) hitDirection, 0f, 200, this.color, 1f);
                        Main.dust[num48].velocity *= 2f;
                    }
                }
            }
            if (this.type == 63 || this.type == 64 || this.type == 103)
            {
                Color newColor = new Color(50, 120, 255, 100);
                if (this.type == 64)
                {
                    newColor = new Color(225, 70, 140, 100);
                }
                if (this.type == 103)
                {
                    newColor = new Color(70, 225, 140, 100);
                }
                if (this.life > 0)
                {
                    int num49 = 0;
                    while ((double) num49 < dmg/(double) this.lifeMax*50.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 4, (float) hitDirection, -1f, 0, newColor, 1f);
                        num49++;
                    }
                    return;
                }
                for (int num50 = 0; num50 < 25; num50++)
                {
                    Dust.NewDust(this.position, this.width, this.height, 4, (float) (2*hitDirection), -2f, 0, newColor, 1f);
                }
                return;
            }
            else
            {
                if (this.type != 59 && this.type != 60 && this.type != 151)
                {
                    if (this.type == 50 || this.type == 51)
                    {
                        if (this.life > 0)
                        {
                            int num51 = 0;
                            while ((double) num51 < dmg/(double) this.lifeMax*300.0)
                            {
                                Dust.NewDust(this.position, this.width, this.height, 4, (float) hitDirection, -1f, 175, new Color(0, 80, 255, 100), 1f);
                                num51++;
                            }
                            return;
                        }
                        for (int num52 = 0; num52 < 200; num52++)
                        {
                            Dust.NewDust(this.position, this.width, this.height, 4, (float) (2*hitDirection), -2f, 175, new Color(0, 80, 255, 100), 1f);
                        }
                        if (Main.netMode != 1)
                        {
                            int num53 = Main.rand.Next(4) + 4;
                            for (int num54 = 0; num54 < num53; num54++)
                            {
                                int x = (int) (this.position.X + (float) Main.rand.Next(this.width - 32));
                                int y = (int) (this.position.Y + (float) Main.rand.Next(this.height - 32));
                                int num55 = NPC.NewNPC(x, y, 1, 0);
                                Main.npc[num55].SetDefaults(1, -1f);
                                Main.npc[num55].velocity.X = (float) Main.rand.Next(-15, 16)*0.1f;
                                Main.npc[num55].velocity.Y = (float) Main.rand.Next(-30, 1)*0.1f;
                                Main.npc[num55].ai[1] = (float) Main.rand.Next(3);
                                if (Main.netMode == 2 && num55 < 200)
                                {
                                    NetMessage.SendData(23, -1, -1, "", num55, 0f, 0f, 0f, 0);
                                }
                            }
                            return;
                        }
                    }
                    else
                    {
                        if (this.type == 153)
                        {
                            if (this.life > 0)
                            {
                                int num56 = 0;
                                while ((double) num56 < dmg/(double) this.lifeMax*30.0)
                                {
                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                    num56++;
                                }
                                return;
                            }
                            for (int num57 = 0; num57 < 15; num57++)
                            {
                                Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                            }
                            Gore.NewGore(this.position, this.velocity, 177, 1f);
                            Gore.NewGore(this.position, this.velocity, 178, 1f);
                            Gore.NewGore(this.position, this.velocity, 179, 1f);
                            Gore.NewGore(this.position, this.velocity, 179, 1f);
                            return;
                        }
                        else
                        {
                            if (this.type == 177)
                            {
                                if (this.life > 0)
                                {
                                    int num58 = 0;
                                    while ((double) num58 < dmg/(double) this.lifeMax*30.0)
                                    {
                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                        num58++;
                                    }
                                    return;
                                }
                                for (int num59 = 0; num59 < 15; num59++)
                                {
                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                }
                                Gore.NewGore(this.position, this.velocity, 234, 1f);
                                Gore.NewGore(this.position, this.velocity, 235, 1f);
                                Gore.NewGore(this.position, this.velocity, 236, 1f);
                                Gore.NewGore(this.position, this.velocity, 236, 1f);
                                return;
                            }
                            else
                            {
                                if (this.type == 49 || /*this.type == 51 ||*/ this.type == 93 || this.type == 150 || this.type == 152 || this.type == 226)
                                {
                                    if (this.life > 0)
                                    {
                                        int num60 = 0;
                                        while ((double) num60 < dmg/(double) this.lifeMax*30.0)
                                        {
                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                            num60++;
                                        }
                                        return;
                                    }
                                    for (int num61 = 0; num61 < 15; num61++)
                                    {
                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                    }
                                    //if (this.type == 51)
                                    //{
                                    //    Gore.NewGore(this.position, this.velocity, 83, 1f);
                                    //    return;
                                    //}
                                    if (this.type == 93)
                                    {
                                        Gore.NewGore(this.position, this.velocity, 107, 1f);
                                        return;
                                    }
                                    if (this.type == 150)
                                    {
                                        Gore.NewGore(this.position, this.velocity, 164, 1f);
                                        Gore.NewGore(this.position, this.velocity, 165, 1f);
                                        return;
                                    }
                                    if (this.type == 152)
                                    {
                                        Gore.NewGore(this.position, this.velocity, 175, 1f);
                                        Gore.NewGore(this.position, this.velocity, 176, 1f);
                                        Gore.NewGore(this.position, this.velocity, 176, 1f);
                                        return;
                                    }
                                    if (this.type == 226)
                                    {
                                        Gore.NewGore(this.position, this.velocity, 317, 1f);
                                        Gore.NewGore(this.position, this.velocity, 318, 1f);
                                        Gore.NewGore(this.position, this.velocity, 318, 1f);
                                        Gore.NewGore(this.position, this.velocity, 319, 1f);
                                        return;
                                    }
                                    Gore.NewGore(this.position, this.velocity, 82, 1f);
                                    return;
                                }
                                else
                                {
                                    if (this.type == 46 || this.type == 55 || this.type == 67 || this.type == 74 || this.type == 102 || this.type == 224 || this.type == 230)
                                    {
                                        if (this.life > 0)
                                        {
                                            int num62 = 0;
                                            while ((double) num62 < dmg/(double) this.lifeMax*20.0)
                                            {
                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                num62++;
                                            }
                                            return;
                                        }
                                        for (int num63 = 0; num63 < 10; num63++)
                                        {
                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                        }
                                        if (this.type == 46)
                                        {
                                            Gore.NewGore(this.position, this.velocity, 76, 1f);
                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 77, 1f);
                                            return;
                                        }
                                        if (this.type == 67)
                                        {
                                            Gore.NewGore(this.position, this.velocity, 95, 1f);
                                            Gore.NewGore(this.position, this.velocity, 95, 1f);
                                            Gore.NewGore(this.position, this.velocity, 96, 1f);
                                            return;
                                        }
                                        if (this.type == 74)
                                        {
                                            Gore.NewGore(this.position, this.velocity, 100, 1f);
                                            return;
                                        }
                                        if (this.type == 102)
                                        {
                                            Gore.NewGore(this.position, this.velocity, 116, 1f);
                                            return;
                                        }
                                        if (this.type == 224)
                                        {
                                            Gore.NewGore(this.position, this.velocity, 312, 1f);
                                            Gore.NewGore(this.position, this.velocity, 313, 1f);
                                            return;
                                        }
                                    }
                                    else
                                    {
                                        if (this.type == 148 || this.type == 149 || this.type == 168)
                                        {
                                            if (this.life > 0)
                                            {
                                                int num64 = 0;
                                                while ((double) num64 < dmg/(double) this.lifeMax*20.0)
                                                {
                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                    num64++;
                                                }
                                                return;
                                            }
                                            for (int num65 = 0; num65 < 10; num65++)
                                            {
                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                            }
                                            if (this.type == 148)
                                            {
                                                Gore.NewGore(this.position, this.velocity, 160, 1f);
                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 161, 1f);
                                                return;
                                            }
                                            if (this.type == 149)
                                            {
                                                Gore.NewGore(this.position, this.velocity, 162, 1f);
                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 163, 1f);
                                                return;
                                            }
                                            if (this.type == 168)
                                            {
                                                Gore.NewGore(this.position, this.velocity, 215, 1f);
                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 216, 1f);
                                                return;
                                            }
                                        }
                                        else
                                        {
                                            if (this.type == 47 || this.type == 57 || this.type == 58)
                                            {
                                                if (this.life > 0)
                                                {
                                                    int num66 = 0;
                                                    while ((double) num66 < dmg/(double) this.lifeMax*20.0)
                                                    {
                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                        num66++;
                                                    }
                                                    return;
                                                }
                                                for (int num67 = 0; num67 < 10; num67++)
                                                {
                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                }
                                                if (this.type == 57)
                                                {
                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 84, 1f);
                                                    return;
                                                }
                                                if (this.type == 58)
                                                {
                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 85, 1f);
                                                    return;
                                                }
                                                Gore.NewGore(this.position, this.velocity, 78, 1f);
                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 79, 1f);
                                                return;
                                            }
                                            else
                                            {
                                                if (this.type == 173 || this.type == 174 || this.type == 181 || this.type == 182 || this.type == 268)
                                                {
                                                    if (this.life > 0)
                                                    {
                                                        int num68 = 0;
                                                        while ((double) num68 < dmg/(double) this.lifeMax*100.0)
                                                        {
                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, this.alpha, default(Color), 1f);
                                                            num68++;
                                                        }
                                                        return;
                                                    }
                                                    for (int num69 = 0; num69 < 50; num69++)
                                                    {
                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, this.alpha, default(Color), 1f);
                                                    }
                                                    if (this.type == 173)
                                                    {
                                                        Gore.NewGore(this.position, this.velocity, 223, 1f);
                                                        Gore.NewGore(this.position, this.velocity, 224, 1f);
                                                        return;
                                                    }
                                                    if (this.type == 174)
                                                    {
                                                        Gore.NewGore(this.position, this.velocity, 225, 1f);
                                                        Gore.NewGore(this.position, this.velocity, 226, 1f);
                                                        return;
                                                    }
                                                    if (this.type == 181)
                                                    {
                                                        Gore.NewGore(this.position, this.velocity, 237, 1f);
                                                        return;
                                                    }
                                                    if (this.type == 182)
                                                    {
                                                        Gore.NewGore(this.position, this.velocity, 238, 1f);
                                                        Gore.NewGore(this.position, this.velocity, 239, 1f);
                                                        return;
                                                    }
                                                    if (this.type == 268)
                                                    {
                                                        Gore.NewGore(this.position, this.velocity, 403, 1f);
                                                        Gore.NewGore(this.position, this.velocity, 404, 1f);
                                                        Gore.NewGore(this.position, this.velocity, 405, 1f);
                                                        return;
                                                    }
                                                }
                                                else
                                                {
                                                    if (this.type == 2 || this.type == 190 || this.type == 191 || this.type == 192 || this.type == 193 || this.type == 194)
                                                    {
                                                        if (this.life > 0)
                                                        {
                                                            int num70 = 0;
                                                            while ((double) num70 < dmg/(double) this.lifeMax*100.0)
                                                            {
                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                num70++;
                                                            }
                                                            return;
                                                        }
                                                        for (int num71 = 0; num71 < 50; num71++)
                                                        {
                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                        }
                                                        if (this.type == 190)
                                                        {
                                                            Gore.NewGore(this.position, this.velocity, 249, this.scale);
                                                            Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity, 2, this.scale);
                                                            return;
                                                        }
                                                        if (this.type == 191)
                                                        {
                                                            Gore.NewGore(this.position, this.velocity, 248, this.scale);
                                                            Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity, 2, this.scale);
                                                            return;
                                                        }
                                                        if (this.type == 192)
                                                        {
                                                            Gore.NewGore(this.position, this.velocity, 247, this.scale);
                                                            Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity, 2, this.scale);
                                                            return;
                                                        }
                                                        if (this.type == 193)
                                                        {
                                                            Gore.NewGore(this.position, this.velocity, 252, this.scale);
                                                            Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity, 253, this.scale);
                                                            return;
                                                        }
                                                        if (this.type == 194)
                                                        {
                                                            Gore.NewGore(this.position, this.velocity, 250, this.scale);
                                                            Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity, 251, this.scale);
                                                            return;
                                                        }
                                                        Gore.NewGore(this.position, this.velocity, 1, this.scale);
                                                        Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity, 2, this.scale);
                                                        return;
                                                    }
                                                    else
                                                    {
                                                        if (this.type == 157)
                                                        {
                                                            if (this.life > 0)
                                                            {
                                                                int num72 = 0;
                                                                while ((double) num72 < dmg/(double) this.lifeMax*100.0)
                                                                {
                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                    num72++;
                                                                }
                                                                return;
                                                            }
                                                            for (int num73 = 0; num73 < 50; num73++)
                                                            {
                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                            }
                                                            Gore.NewGore(this.position, this.velocity, 186, 1f);
                                                            Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity, 187, 1f);
                                                            return;
                                                        }
                                                        else
                                                        {
                                                            if (this.type == 133)
                                                            {
                                                                if (this.life <= 0)
                                                                {
                                                                    for (int num74 = 0; num74 < 50; num74++)
                                                                    {
                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                    }
                                                                    Gore.NewGore(this.position, this.velocity, 155, 1f);
                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 14f), this.velocity, 155, 1f);
                                                                    return;
                                                                }
                                                                int num75 = 0;
                                                                while ((double) num75 < dmg/(double) this.lifeMax*100.0)
                                                                {
                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                    num75++;
                                                                }
                                                                if ((float) this.life < (float) this.lifeMax*0.5f && this.localAI[0] == 0f)
                                                                {
                                                                    this.localAI[0] = 1f;
                                                                    Gore.NewGore(this.position, this.velocity, 1, 1f);
                                                                    return;
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.type == 69)
                                                                {
                                                                    if (this.life > 0)
                                                                    {
                                                                        int num76 = 0;
                                                                        while ((double) num76 < dmg/(double) this.lifeMax*100.0)
                                                                        {
                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                            num76++;
                                                                        }
                                                                        return;
                                                                    }
                                                                    for (int num77 = 0; num77 < 50; num77++)
                                                                    {
                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                    }
                                                                    Gore.NewGore(this.position, this.velocity, 97, 1f);
                                                                    Gore.NewGore(this.position, this.velocity, 98, 1f);
                                                                    return;
                                                                }
                                                                else
                                                                {
                                                                    if (this.type == 61)
                                                                    {
                                                                        if (this.life > 0)
                                                                        {
                                                                            int num78 = 0;
                                                                            while ((double) num78 < dmg/(double) this.lifeMax*100.0)
                                                                            {
                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                num78++;
                                                                            }
                                                                            return;
                                                                        }
                                                                        for (int num79 = 0; num79 < 50; num79++)
                                                                        {
                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                        }
                                                                        Gore.NewGore(this.position, this.velocity, 86, 1f);
                                                                        Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity, 87, 1f);
                                                                        Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity, 88, 1f);
                                                                        return;
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.type == 252)
                                                                        {
                                                                            if (this.life > 0)
                                                                            {
                                                                                int num80 = 0;
                                                                                while ((double) num80 < dmg/(double) this.lifeMax*100.0)
                                                                                {
                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                    num80++;
                                                                                }
                                                                                return;
                                                                            }
                                                                            for (int num81 = 0; num81 < 50; num81++)
                                                                            {
                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                            }
                                                                            Gore.NewGore(this.position, this.velocity, 373, 1f);
                                                                            Gore.NewGore(this.position, this.velocity, 374, 1f);
                                                                            return;
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.type == 65)
                                                                            {
                                                                                if (this.life > 0)
                                                                                {
                                                                                    int num82 = 0;
                                                                                    while ((double) num82 < dmg/(double) this.lifeMax*150.0)
                                                                                    {
                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                        num82++;
                                                                                    }
                                                                                    return;
                                                                                }
                                                                                for (int num83 = 0; num83 < 75; num83++)
                                                                                {
                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                }
                                                                                Gore.NewGore(this.position, this.velocity*0.8f, 89, 1f);
                                                                                Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity*0.8f, 90, 1f);
                                                                                Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity*0.8f, 91, 1f);
                                                                                Gore.NewGore(new Vector2(this.position.X + 14f, this.position.Y), this.velocity*0.8f, 92, 1f);
                                                                                return;
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.type == 195 || this.type == 196)
                                                                                {
                                                                                    if (this.life > 0)
                                                                                    {
                                                                                        int num84 = 0;
                                                                                        while ((double) num84 < dmg/(double) this.lifeMax*150.0)
                                                                                        {
                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                            num84++;
                                                                                        }
                                                                                        return;
                                                                                    }
                                                                                    for (int num85 = 0; num85 < 75; num85++)
                                                                                    {
                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                    }
                                                                                    Gore.NewGore(this.position, this.velocity, 254, this.scale);
                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 255, this.scale);
                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 255, this.scale);
                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 256, this.scale);
                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 256, this.scale);
                                                                                    return;
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.type == 198 || this.type == 199)
                                                                                    {
                                                                                        if (this.life > 0)
                                                                                        {
                                                                                            int num86 = 0;
                                                                                            while ((double) num86 < dmg/(double) this.lifeMax*150.0)
                                                                                            {
                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                num86++;
                                                                                            }
                                                                                            return;
                                                                                        }
                                                                                        for (int num87 = 0; num87 < 75; num87++)
                                                                                        {
                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                        }
                                                                                        Gore.NewGore(this.position, this.velocity, 258, this.scale);
                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 259, this.scale);
                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 259, this.scale);
                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 260, this.scale);
                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 260, this.scale);
                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 261, this.scale);
                                                                                        return;
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (this.type == 206)
                                                                                        {
                                                                                            if (this.life > 0)
                                                                                            {
                                                                                                int num88 = 0;
                                                                                                while ((double) num88 < dmg/(double) this.lifeMax*150.0)
                                                                                                {
                                                                                                    Dust.NewDust(this.position, this.width, this.height, 137, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                    num88++;
                                                                                                }
                                                                                                return;
                                                                                            }
                                                                                            for (int num89 = 0; num89 < 75; num89++)
                                                                                            {
                                                                                                Dust.NewDust(this.position, this.width, this.height, 137, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                            }
                                                                                            Gore.NewGore(this.position, this.velocity, 273, this.scale);
                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 274, this.scale);
                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 274, this.scale);
                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 275, this.scale);
                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 275, this.scale);
                                                                                            return;
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.type == 3 || this.type == 52 || this.type == 53 || this.type == 104 || this.type == 109 || this.type == 132 || this.type == 161 || this.type == 162 || this.type == 186 || this.type == 187 || this.type == 188 || this.type == 189 || this.type == 200 || this.type == 223 || this.type == 251)
                                                                                            {
                                                                                                if (this.life > 0)
                                                                                                {
                                                                                                    int num90 = 0;
                                                                                                    while ((double) num90 < dmg/(double) this.lifeMax*100.0)
                                                                                                    {
                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                        num90++;
                                                                                                    }
                                                                                                    if (this.type == 186 && Main.rand.Next(5) == 0)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 242, 1f);
                                                                                                    }
                                                                                                    if (this.type == 187)
                                                                                                    {
                                                                                                        int num91 = 0;
                                                                                                        while ((double) num91 < dmg/(double) this.lifeMax*200.0)
                                                                                                        {
                                                                                                            Dust.NewDust(this.position, this.width, 24, 4, (float) hitDirection, -1f, 125, new Color(0, 80, 255, 100), 1f);
                                                                                                            num91++;
                                                                                                        }
                                                                                                        return;
                                                                                                    }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    for (int num92 = 0; num92 < 50; num92++)
                                                                                                    {
                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                    }
                                                                                                    if (this.type == 187)
                                                                                                    {
                                                                                                        for (int num93 = 0; num93 < 25; num93++)
                                                                                                        {
                                                                                                            Dust.NewDust(this.position, this.width, 24, 4, (float) hitDirection, -1f, 125, new Color(0, 80, 255, 100), 1f);
                                                                                                        }
                                                                                                    }
                                                                                                    if (this.type == 104)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 117, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 118, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 118, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 119, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 119, this.scale);
                                                                                                        return;
                                                                                                    }
                                                                                                    if (this.type == 109)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 121, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 122, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 122, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 123, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 123, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 46f), this.velocity, 120, this.scale);
                                                                                                        return;
                                                                                                    }
                                                                                                    if (this.type == 161)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 191, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 192, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 192, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 193, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 193, this.scale);
                                                                                                        return;
                                                                                                    }
                                                                                                    if (this.type == 162)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 194, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 195, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 195, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 196, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 196, this.scale);
                                                                                                        return;
                                                                                                    }
                                                                                                    if (this.type == 188)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 243, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 244, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 244, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 245, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 245, this.scale);
                                                                                                        return;
                                                                                                    }
                                                                                                    if (this.type == 200)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 262, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 263, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 263, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 264, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 264, this.scale);
                                                                                                        return;
                                                                                                    }
                                                                                                    if (this.type == 223)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 309, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 310, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 310, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 311, this.scale);
                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 311, this.scale);
                                                                                                        return;
                                                                                                    }
                                                                                                    if (this.type == 132)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 154, 1f);
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (this.type == 186)
                                                                                                        {
                                                                                                            Gore.NewGore(this.position, this.velocity, 241, 1f);
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (this.type == 189)
                                                                                                            {
                                                                                                                Gore.NewGore(this.position, this.velocity, 246, 1f);
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (this.type == 251)
                                                                                                                {
                                                                                                                    Gore.NewGore(this.position, this.velocity, 372, 1f);
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (this.type != 187)
                                                                                                                    {
                                                                                                                        Gore.NewGore(this.position, this.velocity, 3, 1f);
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 4, 1f);
                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 4, 1f);
                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 5, 1f);
                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 5, 1f);
                                                                                                    if (this.type == 186)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 242, 1f);
                                                                                                    }
                                                                                                    if (this.type == 186 && Main.rand.Next(2) == 0)
                                                                                                    {
                                                                                                        Gore.NewGore(this.position, this.velocity, 242, 1f);
                                                                                                        return;
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.type == 83 || this.type == 84 || this.type == 179)
                                                                                                {
                                                                                                    if (this.life > 0)
                                                                                                    {
                                                                                                        int num94 = 0;
                                                                                                        while ((double) num94 < dmg/(double) this.lifeMax*50.0)
                                                                                                        {
                                                                                                            int num95 = Dust.NewDust(this.position, this.width, this.height, 31, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                            Main.dust[num95].noGravity = true;
                                                                                                            num94++;
                                                                                                        }
                                                                                                        return;
                                                                                                    }
                                                                                                    for (int num96 = 0; num96 < 20; num96++)
                                                                                                    {
                                                                                                        int num97 = Dust.NewDust(this.position, this.width, this.height, 31, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                        Main.dust[num97].velocity *= 2f;
                                                                                                        Main.dust[num97].noGravity = true;
                                                                                                    }
                                                                                                    int num98 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 10f), new Vector2((float) Main.rand.Next(-2, 3), (float) Main.rand.Next(-2, 3)), 61, this.scale);
                                                                                                    Main.gore[num98].velocity *= 0.5f;
                                                                                                    num98 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 10f), new Vector2((float) Main.rand.Next(-2, 3), (float) Main.rand.Next(-2, 3)), 61, this.scale);
                                                                                                    Main.gore[num98].velocity *= 0.5f;
                                                                                                    num98 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 10f), new Vector2((float) Main.rand.Next(-2, 3), (float) Main.rand.Next(-2, 3)), 61, this.scale);
                                                                                                    Main.gore[num98].velocity *= 0.5f;
                                                                                                    return;
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (this.type == 262 || this.type == 263 || this.type == 264)
                                                                                                    {
                                                                                                        if (this.life > 0)
                                                                                                        {
                                                                                                            int num99 = 0;
                                                                                                            while ((double) num99 < dmg/(double) this.lifeMax*100.0)
                                                                                                            {
                                                                                                                if (this.type == 262 && this.life > this.lifeMax/2 && Main.rand.Next(3) != 0)
                                                                                                                {
                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 166, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (this.type == 265 && Main.rand.Next(3) != 0)
                                                                                                                    {
                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 166, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 167, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                    }
                                                                                                                }
                                                                                                                num99++;
                                                                                                            }
                                                                                                            return;
                                                                                                        }
                                                                                                        for (int num100 = 0; num100 < 150; num100++)
                                                                                                        {
                                                                                                            if (this.type == 265 && Main.rand.Next(3) != 0)
                                                                                                            {
                                                                                                                Dust.NewDust(this.position, this.width, this.height, 166, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                Dust.NewDust(this.position, this.width, this.height, 167, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                            }
                                                                                                        }
                                                                                                        if (this.type == 262)
                                                                                                        {
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 381, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 382, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 383, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 384, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 385, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 386, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 386, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 387, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 387, this.scale);
                                                                                                        }
                                                                                                        if (this.type == 263)
                                                                                                        {
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 390, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 391, this.scale);
                                                                                                        }
                                                                                                        if (this.type == 264)
                                                                                                        {
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 388, this.scale);
                                                                                                            Gore.NewGore(new Vector2(this.position.X + (float) Main.rand.Next(this.width), this.position.Y + (float) Main.rand.Next(this.height)), this.velocity, 389, this.scale);
                                                                                                            return;
                                                                                                        }
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (this.type == 265)
                                                                                                        {
                                                                                                            if (this.life < 0)
                                                                                                            {
                                                                                                                for (int num101 = 0; num101 < 15; num101
                                                                                                                    ++)
                                                                                                                {
                                                                                                                    if (Main.rand.Next(3) != 0)
                                                                                                                    {
                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 166, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 167, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                    }
                                                                                                                }
                                                                                                                return;
                                                                                                            }
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (this.type == 266)
                                                                                                            {
                                                                                                                if (this.life > 0)
                                                                                                                {
                                                                                                                    int num102 = 0;
                                                                                                                    while ((double) num102 < dmg/(double) this.lifeMax*100.0)
                                                                                                                    {
                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                        num102
                                                                                                                            ++;
                                                                                                                    }
                                                                                                                    return;
                                                                                                                }
                                                                                                                for (int num103 = 0; num103 < 150; num103
                                                                                                                    ++)
                                                                                                                {
                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                                }
                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 396, 1f);
                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 397, 1f);
                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 398, 1f);
                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 399, 1f);
                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 400, 1f);
                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 401, 1f);
                                                                                                                return;
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (this.type == 267)
                                                                                                                {
                                                                                                                    if (this.life > 0)
                                                                                                                    {
                                                                                                                        int num104 = 0;
                                                                                                                        while ((double) num104 < dmg/(double) this.lifeMax*50.0)
                                                                                                                        {
                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                            num104
                                                                                                                                ++;
                                                                                                                        }
                                                                                                                        return;
                                                                                                                    }
                                                                                                                    for (int num105 = 0; num105 < 20; num105
                                                                                                                        ++)
                                                                                                                    {
                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                                    }
                                                                                                                    Gore.NewGore(this.position, this.velocity, 402, 1f);
                                                                                                                    return;
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (this.type == 4 || this.type == 126 || this.type == 125)
                                                                                                                    {
                                                                                                                        if (this.life > 0)
                                                                                                                        {
                                                                                                                            int num106 = 0;
                                                                                                                            while ((double) num106 < dmg/(double) this.lifeMax*100.0)
                                                                                                                            {
                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                num106
                                                                                                                                    ++;
                                                                                                                            }
                                                                                                                            return;
                                                                                                                        }
                                                                                                                        for (int num107 = 0; num107 < 150; num107
                                                                                                                            ++)
                                                                                                                        {
                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                                        }
                                                                                                                        for (int num108 = 0; num108 < 2; num108
                                                                                                                            ++)
                                                                                                                        {
                                                                                                                            Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 2, 1f);
                                                                                                                            Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 7, 1f);
                                                                                                                            Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 9, 1f);
                                                                                                                            if (this.type == 4)
                                                                                                                            {
                                                                                                                                Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 10, 1f);
                                                                                                                                Main.PlaySound(15, (int) this.position.X, (int) this.position.Y, 0);
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if (this.type == 125)
                                                                                                                                {
                                                                                                                                    Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 146, 1f);
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    if (this.type == 126)
                                                                                                                                    {
                                                                                                                                        Gore.NewGore(this.position, new Vector2((float) Main.rand.Next(-30, 31)*0.2f, (float) Main.rand.Next(-30, 31)*0.2f), 145, 1f);
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                        if (this.type == 125 || this.type == 126)
                                                                                                                        {
                                                                                                                            for (int num109 = 0; num109 < 10; num109
                                                                                                                                ++)
                                                                                                                            {
                                                                                                                                int num110 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 31, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                Main.dust[num110].velocity *= 1.4f;
                                                                                                                            }
                                                                                                                            for (int num111 = 0; num111 < 5; num111
                                                                                                                                ++)
                                                                                                                            {
                                                                                                                                int num112 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 2.5f);
                                                                                                                                Main.dust[num112].noGravity = true;
                                                                                                                                Main.dust[num112].velocity *= 5f;
                                                                                                                                num112 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                Main.dust[num112].velocity *= 3f;
                                                                                                                            }
                                                                                                                            int num113 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                            Main.gore[num113].velocity *= 0.4f;
                                                                                                                            Gore expr_5681_cp_0 = Main.gore[num113];
                                                                                                                            expr_5681_cp_0.velocity.X = expr_5681_cp_0.velocity.X + 1f;
                                                                                                                            Gore expr_569F_cp_0 = Main.gore[num113];
                                                                                                                            expr_569F_cp_0.velocity.Y = expr_569F_cp_0.velocity.Y + 1f;
                                                                                                                            num113 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                            Main.gore[num113].velocity *= 0.4f;
                                                                                                                            Gore expr_571D_cp_0 = Main.gore[num113];
                                                                                                                            expr_571D_cp_0.velocity.X = expr_571D_cp_0.velocity.X - 1f;
                                                                                                                            Gore expr_573B_cp_0 = Main.gore[num113];
                                                                                                                            expr_573B_cp_0.velocity.Y = expr_573B_cp_0.velocity.Y + 1f;
                                                                                                                            num113 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                            Main.gore[num113].velocity *= 0.4f;
                                                                                                                            Gore expr_57B9_cp_0 = Main.gore[num113];
                                                                                                                            expr_57B9_cp_0.velocity.X = expr_57B9_cp_0.velocity.X + 1f;
                                                                                                                            Gore expr_57D7_cp_0 = Main.gore[num113];
                                                                                                                            expr_57D7_cp_0.velocity.Y = expr_57D7_cp_0.velocity.Y - 1f;
                                                                                                                            num113 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                            Main.gore[num113].velocity *= 0.4f;
                                                                                                                            Gore expr_5855_cp_0 = Main.gore[num113];
                                                                                                                            expr_5855_cp_0.velocity.X = expr_5855_cp_0.velocity.X - 1f;
                                                                                                                            Gore expr_5873_cp_0 = Main.gore[num113];
                                                                                                                            expr_5873_cp_0.velocity.Y = expr_5873_cp_0.velocity.Y - 1f;
                                                                                                                            return;
                                                                                                                        }
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        if (this.type == 5)
                                                                                                                        {
                                                                                                                            if (this.life > 0)
                                                                                                                            {
                                                                                                                                int num114 = 0;
                                                                                                                                while ((double) num114 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                {
                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                    num114
                                                                                                                                        ++;
                                                                                                                                }
                                                                                                                                return;
                                                                                                                            }
                                                                                                                            for (int num115 = 0; num115 < 20; num115
                                                                                                                                ++)
                                                                                                                            {
                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                                            }
                                                                                                                            Gore.NewGore(this.position, this.velocity, 6, 1f);
                                                                                                                            Gore.NewGore(this.position, this.velocity, 7, 1f);
                                                                                                                            return;
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if (this.type == 113 || this.type == 114)
                                                                                                                            {
                                                                                                                                if (this.life > 0)
                                                                                                                                {
                                                                                                                                    for (int num116 = 0; num116 < 20; num116
                                                                                                                                        ++)
                                                                                                                                    {
                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                    }
                                                                                                                                    return;
                                                                                                                                }
                                                                                                                                for (int num117 = 0; num117 < 50; num117
                                                                                                                                    ++)
                                                                                                                                {
                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -1f, 0, default(Color), 1f);
                                                                                                                                }
                                                                                                                                if (this.type == 114)
                                                                                                                                {
                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 137, this.scale);
                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2)), this.velocity, 139, this.scale);
                                                                                                                                    Gore.NewGore(new Vector2(this.position.X + (float) (this.width/2), this.position.Y), this.velocity, 139, this.scale);
                                                                                                                                    Gore.NewGore(new Vector2(this.position.X + (float) (this.width/2), this.position.Y + (float) (this.height/2)), this.velocity, 137, this.scale);
                                                                                                                                    return;
                                                                                                                                }
                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 137, this.scale);
                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2)), this.velocity, 138, this.scale);
                                                                                                                                Gore.NewGore(new Vector2(this.position.X + (float) (this.width/2), this.position.Y), this.velocity, 138, this.scale);
                                                                                                                                Gore.NewGore(new Vector2(this.position.X + (float) (this.width/2), this.position.Y + (float) (this.height/2)), this.velocity, 137, this.scale);
                                                                                                                                if (Main.player[Main.myPlayer].position.Y/16f > (float) (Main.maxTilesY - 250))
                                                                                                                                {
                                                                                                                                    int num118 = (int) Main.screenPosition.Y;
                                                                                                                                    int num119 = num118 + Main.screenWidth;
                                                                                                                                    int num120 = (int) this.position.X;
                                                                                                                                    if (this.direction > 0)
                                                                                                                                    {
                                                                                                                                        num120 -= 80;
                                                                                                                                    }
                                                                                                                                    int num121 = num120 + 140;
                                                                                                                                    int num122 = num120;
                                                                                                                                    for (int num123 = num118; num123 < num119; num123 += 50)
                                                                                                                                    {
                                                                                                                                        while (num122 < num121)
                                                                                                                                        {
                                                                                                                                            for (int num124 = 0; num124 < 5; num124
                                                                                                                                                ++)
                                                                                                                                            {
                                                                                                                                                Dust.NewDust(new Vector2((float) num122, (float) num123), 32, 32, 5, (float) Main.rand.Next(-60, 61)*0.1f, (float) Main.rand.Next(-60, 61)*0.1f, 0, default(Color), 1f);
                                                                                                                                            }
                                                                                                                                            Vector2 vector = new Vector2((float) Main.rand.Next(-80, 81)*0.1f, (float) Main.rand.Next(-60, 21)*0.1f);
                                                                                                                                            Gore.NewGore(new Vector2((float) num122, (float) num123), vector, Main.rand.Next(140, 143), 1f);
                                                                                                                                            num122 += 46;
                                                                                                                                        }
                                                                                                                                        num122 = num120;
                                                                                                                                    }
                                                                                                                                    return;
                                                                                                                                }
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if (this.type == 115 || this.type == 116)
                                                                                                                                {
                                                                                                                                    if (this.life > 0)
                                                                                                                                    {
                                                                                                                                        for (int num125 = 0; num125 < 5; num125
                                                                                                                                            ++)
                                                                                                                                        {
                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                        }
                                                                                                                                        return;
                                                                                                                                    }
                                                                                                                                    if (this.type == 115 && Main.netMode != 1)
                                                                                                                                    {
                                                                                                                                        NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), 116, 0);
                                                                                                                                        for (int num126 = 0; num126 < 10; num126
                                                                                                                                            ++)
                                                                                                                                        {
                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                        }
                                                                                                                                        return;
                                                                                                                                    }
                                                                                                                                    for (int num127 = 0; num127 < 20; num127
                                                                                                                                        ++)
                                                                                                                                    {
                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                    }
                                                                                                                                    Gore.NewGore(this.position, this.velocity, 132, this.scale);
                                                                                                                                    Gore.NewGore(this.position, this.velocity, 133, this.scale);
                                                                                                                                    return;
                                                                                                                                }
                                                                                                                                else
                                                                                                                                {
                                                                                                                                    if (this.type >= 117 && this.type <= 119)
                                                                                                                                    {
                                                                                                                                        if (this.life > 0)
                                                                                                                                        {
                                                                                                                                            for (int num128 = 0; num128 < 5; num128
                                                                                                                                                ++)
                                                                                                                                            {
                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                            }
                                                                                                                                            return;
                                                                                                                                        }
                                                                                                                                        for (int num129 = 0; num129 < 10; num129
                                                                                                                                            ++)
                                                                                                                                        {
                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                        }
                                                                                                                                        Gore.NewGore(this.position, this.velocity, 134 + this.type - 117, this.scale);
                                                                                                                                        return;
                                                                                                                                    }
                                                                                                                                    else
                                                                                                                                    {
                                                                                                                                        if (this.type == 217 || this.type == 218 || this.type == 219)
                                                                                                                                        {
                                                                                                                                            if (this.life > 0)
                                                                                                                                            {
                                                                                                                                                int num130 = 0;
                                                                                                                                                while ((double) num130 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                {
                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, this.alpha, this.color, this.scale);
                                                                                                                                                    num130
                                                                                                                                                        ++;
                                                                                                                                                }
                                                                                                                                                return;
                                                                                                                                            }
                                                                                                                                            for (int num131 = 0; num131 < 50; num131
                                                                                                                                                ++)
                                                                                                                                            {
                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -2f, this.alpha, this.color, this.scale);
                                                                                                                                            }
                                                                                                                                            if (this.type == 217)
                                                                                                                                            {
                                                                                                                                                Gore.NewGore(this.position, this.velocity, 292, this.scale);
                                                                                                                                                Gore.NewGore(this.position, this.velocity, 293, this.scale);
                                                                                                                                            }
                                                                                                                                            if (this.type == 218)
                                                                                                                                            {
                                                                                                                                                Gore.NewGore(this.position, this.velocity, 295, this.scale);
                                                                                                                                                Gore.NewGore(this.position, this.velocity, 296, this.scale);
                                                                                                                                            }
                                                                                                                                            if (this.type == 219)
                                                                                                                                            {
                                                                                                                                                Gore.NewGore(this.position, this.velocity, 294, this.scale);
                                                                                                                                                return;
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                        else
                                                                                                                                        {
                                                                                                                                            if (this.type == 222)
                                                                                                                                            {
                                                                                                                                                if (this.life > 0)
                                                                                                                                                {
                                                                                                                                                    int num132 = 0;
                                                                                                                                                    while ((double) num132 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                    {
                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, this.alpha, this.color, this.scale);
                                                                                                                                                        num132
                                                                                                                                                            ++;
                                                                                                                                                    }
                                                                                                                                                    return;
                                                                                                                                                }
                                                                                                                                                for (int num133 = 0; num133 < 50; num133
                                                                                                                                                    ++)
                                                                                                                                                {
                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -2f, this.alpha, this.color, this.scale);
                                                                                                                                                }
                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y - 35f), this.velocity, 303, this.scale);
                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y - 45f), this.velocity, 304, this.scale);
                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y), this.velocity, 305, this.scale);
                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 306, this.scale);
                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 10f), this.velocity, 307, this.scale);
                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y - 10f), this.velocity, 308, this.scale);
                                                                                                                                                return;
                                                                                                                                            }
                                                                                                                                            else
                                                                                                                                            {
                                                                                                                                                if (this.type == 6 || this.type == 94 || this.type == 166)
                                                                                                                                                {
                                                                                                                                                    if (this.life > 0)
                                                                                                                                                    {
                                                                                                                                                        int num134 = 0;
                                                                                                                                                        while ((double) num134 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                        {
                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, this.alpha, this.color, this.scale);
                                                                                                                                                            num134
                                                                                                                                                                ++;
                                                                                                                                                        }
                                                                                                                                                        return;
                                                                                                                                                    }
                                                                                                                                                    for (int num135 = 0; num135 < 50; num135
                                                                                                                                                        ++)
                                                                                                                                                    {
                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -2f, this.alpha, this.color, this.scale);
                                                                                                                                                    }
                                                                                                                                                    int num136;
                                                                                                                                                    if (this.type == 94)
                                                                                                                                                    {
                                                                                                                                                        num136 = Gore.NewGore(this.position, this.velocity, 108, this.scale);
                                                                                                                                                        num136 = Gore.NewGore(this.position, this.velocity, 108, this.scale);
                                                                                                                                                        num136 = Gore.NewGore(this.position, this.velocity, 109, this.scale);
                                                                                                                                                        num136 = Gore.NewGore(this.position, this.velocity, 110, this.scale);
                                                                                                                                                        return;
                                                                                                                                                    }
                                                                                                                                                    if (this.type == 166)
                                                                                                                                                    {
                                                                                                                                                        num136 = Gore.NewGore(this.position, this.velocity, 209, this.scale);
                                                                                                                                                        num136 = Gore.NewGore(this.position, this.velocity, 210, this.scale);
                                                                                                                                                        num136 = Gore.NewGore(this.position, this.velocity, 211, this.scale);
                                                                                                                                                        return;
                                                                                                                                                    }
                                                                                                                                                    num136 = Gore.NewGore(this.position, this.velocity, 14, this.scale);
                                                                                                                                                    Main.gore[num136].alpha = this.alpha;
                                                                                                                                                    num136 = Gore.NewGore(this.position, this.velocity, 15, this.scale);
                                                                                                                                                    Main.gore[num136].alpha = this.alpha;
                                                                                                                                                    return;
                                                                                                                                                }
                                                                                                                                                else
                                                                                                                                                {
                                                                                                                                                    if (this.type == 101)
                                                                                                                                                    {
                                                                                                                                                        if (this.life > 0)
                                                                                                                                                        {
                                                                                                                                                            int num137 = 0;
                                                                                                                                                            while ((double) num137 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                            {
                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, this.alpha, this.color, this.scale);
                                                                                                                                                                num137
                                                                                                                                                                    ++;
                                                                                                                                                            }
                                                                                                                                                            return;
                                                                                                                                                        }
                                                                                                                                                        for (int num138 = 0; num138 < 50; num138
                                                                                                                                                            ++)
                                                                                                                                                        {
                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -2f, this.alpha, this.color, this.scale);
                                                                                                                                                        }
                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 110, this.scale);
                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 114, this.scale);
                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 114, this.scale);
                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 115, this.scale);
                                                                                                                                                        return;
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                        if (this.type == 7 || this.type == 8 || this.type == 9)
                                                                                                                                                        {
                                                                                                                                                            if (this.life > 0)
                                                                                                                                                            {
                                                                                                                                                                int num139 = 0;
                                                                                                                                                                while ((double) num139 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                {
                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, this.alpha, this.color, this.scale);
                                                                                                                                                                    num139
                                                                                                                                                                        ++;
                                                                                                                                                                }
                                                                                                                                                                return;
                                                                                                                                                            }
                                                                                                                                                            for (int num140 = 0; num140 < 50; num140
                                                                                                                                                                ++)
                                                                                                                                                            {
                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -2f, this.alpha, this.color, this.scale);
                                                                                                                                                            }
                                                                                                                                                            int num141 = Gore.NewGore(this.position, this.velocity, this.type - 7 + 18, 1f);
                                                                                                                                                            Main.gore[num141].alpha = this.alpha;
                                                                                                                                                            return;
                                                                                                                                                        }
                                                                                                                                                        else
                                                                                                                                                        {
                                                                                                                                                            if (this.type == 98 || this.type == 99 || this.type == 100)
                                                                                                                                                            {
                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                {
                                                                                                                                                                    int num142 = 0;
                                                                                                                                                                    while ((double) num142 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                    {
                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, this.alpha, this.color, this.scale);
                                                                                                                                                                        num142
                                                                                                                                                                            ++;
                                                                                                                                                                    }
                                                                                                                                                                    return;
                                                                                                                                                                }
                                                                                                                                                                for (int num143 = 0; num143 < 50; num143
                                                                                                                                                                    ++)
                                                                                                                                                                {
                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -2f, this.alpha, this.color, this.scale);
                                                                                                                                                                }
                                                                                                                                                                int num144 = Gore.NewGore(this.position, this.velocity, 110, 1f);
                                                                                                                                                                Main.gore[num144].alpha = this.alpha;
                                                                                                                                                                return;
                                                                                                                                                            }
                                                                                                                                                            else
                                                                                                                                                            {
                                                                                                                                                                if (this.type == 10 || this.type == 11 || this.type == 12)
                                                                                                                                                                {
                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                    {
                                                                                                                                                                        int num145 = 0;
                                                                                                                                                                        while ((double) num145 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                        {
                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                            num145
                                                                                                                                                                                ++;
                                                                                                                                                                        }
                                                                                                                                                                        return;
                                                                                                                                                                    }
                                                                                                                                                                    for (int num146 = 0; num146 < 10; num146
                                                                                                                                                                        ++)
                                                                                                                                                                    {
                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                    }
                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, this.type - 7 + 18, 1f);
                                                                                                                                                                    return;
                                                                                                                                                                }
                                                                                                                                                                else
                                                                                                                                                                {
                                                                                                                                                                    if (this.type == 95 || this.type == 96 || this.type == 97)
                                                                                                                                                                    {
                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                        {
                                                                                                                                                                            int num147 = 0;
                                                                                                                                                                            while ((double) num147 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                            {
                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                num147
                                                                                                                                                                                    ++;
                                                                                                                                                                            }
                                                                                                                                                                            return;
                                                                                                                                                                        }
                                                                                                                                                                        for (int num148 = 0; num148 < 10; num148
                                                                                                                                                                            ++)
                                                                                                                                                                        {
                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                        }
                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, this.type - 95 + 111, 1f);
                                                                                                                                                                        return;
                                                                                                                                                                    }
                                                                                                                                                                    else
                                                                                                                                                                    {
                                                                                                                                                                        if (this.type == 13 || this.type == 14 || this.type == 15)
                                                                                                                                                                        {
                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                            {
                                                                                                                                                                                int num149 = 0;
                                                                                                                                                                                while ((double) num149 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                {
                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, this.alpha, this.color, this.scale);
                                                                                                                                                                                    num149
                                                                                                                                                                                        ++;
                                                                                                                                                                                }
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                            for (int num150 = 0; num150 < 50; num150
                                                                                                                                                                                ++)
                                                                                                                                                                            {
                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -2f, this.alpha, this.color, this.scale);
                                                                                                                                                                            }
                                                                                                                                                                            if (this.type == 13)
                                                                                                                                                                            {
                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 24, 1f);
                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 25, 1f);
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                            if (this.type == 14)
                                                                                                                                                                            {
                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 26, 1f);
                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 27, 1f);
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 28, 1f);
                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 29, 1f);
                                                                                                                                                                            return;
                                                                                                                                                                        }
                                                                                                                                                                        else
                                                                                                                                                                        {
                                                                                                                                                                            if (this.type == 17)
                                                                                                                                                                            {
                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                {
                                                                                                                                                                                    int num151 = 0;
                                                                                                                                                                                    while ((double) num151 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                    {
                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                        num151
                                                                                                                                                                                            ++;
                                                                                                                                                                                    }
                                                                                                                                                                                    return;
                                                                                                                                                                                }
                                                                                                                                                                                for (int num152 = 0; num152 < 50; num152
                                                                                                                                                                                    ++)
                                                                                                                                                                                {
                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                }
                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 30, 1f);
                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 31, 1f);
                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 31, 1f);
                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 32, 1f);
                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 32, 1f);
                                                                                                                                                                                return;
                                                                                                                                                                            }
                                                                                                                                                                            else
                                                                                                                                                                            {
                                                                                                                                                                                if (this.type == 86)
                                                                                                                                                                                {
                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                    {
                                                                                                                                                                                        int num153 = 0;
                                                                                                                                                                                        while ((double) num153 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                        {
                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                            num153
                                                                                                                                                                                                ++;
                                                                                                                                                                                        }
                                                                                                                                                                                        return;
                                                                                                                                                                                    }
                                                                                                                                                                                    for (int num154 = 0; num154 < 50; num154
                                                                                                                                                                                        ++)
                                                                                                                                                                                    {
                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                    }
                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 101, 1f);
                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 102, 1f);
                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 103, 1f);
                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 103, 1f);
                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 104, 1f);
                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 104, 1f);
                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 105, 1f);
                                                                                                                                                                                    return;
                                                                                                                                                                                }
                                                                                                                                                                                else
                                                                                                                                                                                {
                                                                                                                                                                                    if (this.type == 155)
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                        {
                                                                                                                                                                                            int num155 = 0;
                                                                                                                                                                                            while ((double) num155 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                            {
                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                num155
                                                                                                                                                                                                    ++;
                                                                                                                                                                                            }
                                                                                                                                                                                            return;
                                                                                                                                                                                        }
                                                                                                                                                                                        for (int num156 = 0; num156 < 50; num156
                                                                                                                                                                                            ++)
                                                                                                                                                                                        {
                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                        }
                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 181, 1f);
                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 182, 1f);
                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 183, 1f);
                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 183, 1f);
                                                                                                                                                                                        return;
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                        if (this.type == 163 || this.type == 238)
                                                                                                                                                                                        {
                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                            {
                                                                                                                                                                                                int num157 = 0;
                                                                                                                                                                                                while ((double) num157 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                {
                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                    num157
                                                                                                                                                                                                        ++;
                                                                                                                                                                                                }
                                                                                                                                                                                                return;
                                                                                                                                                                                            }
                                                                                                                                                                                            for (int num158 = 0; num158 < 50; num158
                                                                                                                                                                                                ++)
                                                                                                                                                                                            {
                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 18, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                            }
                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 205, 1f);
                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 206, 1f);
                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 206, 1f);
                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 206, 1f);
                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 206, 1f);
                                                                                                                                                                                            return;
                                                                                                                                                                                        }
                                                                                                                                                                                        else
                                                                                                                                                                                        {
                                                                                                                                                                                            if (this.type == 164 || this.type == 165)
                                                                                                                                                                                            {
                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                {
                                                                                                                                                                                                    int num159 = 0;
                                                                                                                                                                                                    while ((double) num159 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                        num159
                                                                                                                                                                                                            ++;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    return;
                                                                                                                                                                                                }
                                                                                                                                                                                                for (int num160 = 0; num160 < 50; num160
                                                                                                                                                                                                    ++)
                                                                                                                                                                                                {
                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 18, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                }
                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 207, 1f);
                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 208, 1f);
                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 208, 1f);
                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 208, 1f);
                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 208, 1f);
                                                                                                                                                                                                return;
                                                                                                                                                                                            }
                                                                                                                                                                                            else
                                                                                                                                                                                            {
                                                                                                                                                                                                if (this.type == 239 || this.type == 240)
                                                                                                                                                                                                {
                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        int num161 = 0;
                                                                                                                                                                                                        while ((double) num161 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                            num161
                                                                                                                                                                                                                ++;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        return;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    for (int num162 = 0; num162 < 50; num162
                                                                                                                                                                                                        ++)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                    }
                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 351, 1f);
                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 352, 1f);
                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 352, 1f);
                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 353, 1f);
                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 353, 1f);
                                                                                                                                                                                                    return;
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                    if (this.type == 236 || this.type == 237)
                                                                                                                                                                                                    {
                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            int num163 = 0;
                                                                                                                                                                                                            while ((double) num163 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                num163
                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            return;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        for (int num164 = 0; num164 < 50; num164
                                                                                                                                                                                                            ++)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 18, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                        }
                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 332, 1f);
                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 333, 1f);
                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 334, 1f);
                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 335, 1f);
                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 335, 1f);
                                                                                                                                                                                                        return;
                                                                                                                                                                                                    }
                                                                                                                                                                                                    else
                                                                                                                                                                                                    {
                                                                                                                                                                                                        if (this.type == 241)
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                int num165 = 0;
                                                                                                                                                                                                                while ((double) num165 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                    num165
                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                return;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            for (int num166 = 0; num166 < 50; num166
                                                                                                                                                                                                                ++)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                            }
                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 354, 1f);
                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 355, 1f);
                                                                                                                                                                                                            return;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                            if (this.type == 242)
                                                                                                                                                                                                            {
                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    int num167 = 0;
                                                                                                                                                                                                                    while ((double) num167 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                        num167
                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                for (int num168 = 0; num168 < 50; num168
                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                }
                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 356, 1f);
                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 357, 1f);
                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 357, 1f);
                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 358, 1f);
                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 358, 1f);
                                                                                                                                                                                                                return;
                                                                                                                                                                                                            }
                                                                                                                                                                                                            else
                                                                                                                                                                                                            {
                                                                                                                                                                                                                if (this.type >= 105 && this.type <= 108)
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        int num169 = 0;
                                                                                                                                                                                                                        while ((double) num169 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                            num169
                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    for (int num170 = 0; num170 < 50; num170
                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    if (this.type == 105 || this.type == 107)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 124, 1f);
                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 125, 1f);
                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 125, 1f);
                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 126, 1f);
                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 126, 1f);
                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 127, 1f);
                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 128, 1f);
                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 128, 1f);
                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 129, 1f);
                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 129, 1f);
                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                else
                                                                                                                                                                                                                {
                                                                                                                                                                                                                    if (this.type == 123 || this.type == 124)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            int num171 = 0;
                                                                                                                                                                                                                            while ((double) num171 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                num171
                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        for (int num172 = 0; num172 < 50; num172
                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 151, 1f);
                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 152, 1f);
                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 152, 1f);
                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 153, 1f);
                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 153, 1f);
                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    else
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                        if (this.type == 22)
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                int num173 = 0;
                                                                                                                                                                                                                                while ((double) num173 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                    num173
                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            for (int num174 = 0; num174 < 50; num174
                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 73, 1f);
                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 74, 1f);
                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 74, 1f);
                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 75, 1f);
                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 75, 1f);
                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                        else
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                            if (this.type == 227)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    int num175 = 0;
                                                                                                                                                                                                                                    while ((double) num175 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                        num175
                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                for (int num176 = 0; num176 < 50; num176
                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 320, 1f);
                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 321, 1f);
                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 322, 1f);
                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 323, 1f);
                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 323, 1f);
                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            else
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                if (this.type == 228)
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        int num177 = 0;
                                                                                                                                                                                                                                        while ((double) num177 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                            num177
                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    for (int num178 = 0; num178 < 50; num178
                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 324, 1f);
                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 325, 1f);
                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 326, 1f);
                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 327, 1f);
                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 327, 1f);
                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                    if (this.type == 229)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            int num179 = 0;
                                                                                                                                                                                                                                            while ((double) num179 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                num179
                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        for (int num180 = 0; num180 < 50; num180
                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 328, 1f);
                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 329, 1f);
                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 329, 1f);
                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 330, 1f);
                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 330, 1f);
                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                        if (this.type == 142)
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                int num181 = 0;
                                                                                                                                                                                                                                                while ((double) num181 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                    num181
                                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                            for (int num182 = 0; num182 < 50; num182
                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 157, 1f);
                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 158, 1f);
                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 158, 1f);
                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 159, 1f);
                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 159, 1f);
                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                            if (this.type == 178)
                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                    int num183 = 0;
                                                                                                                                                                                                                                                    while ((double) num183 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                        num183
                                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                for (int num184 = 0; num184 < 50; num184
                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 231, 1f);
                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 232, 1f);
                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 232, 1f);
                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 233, 1f);
                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                if (this.type == 37 || this.type == 54)
                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                        int num185 = 0;
                                                                                                                                                                                                                                                        while ((double) num185 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                            num185
                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    for (int num186 = 0; num186 < 50; num186
                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 58, 1f);
                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 59, 1f);
                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 59, 1f);
                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 60, 1f);
                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 60, 1f);
                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                    if (this.type == 160)
                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                            int num187 = 0;
                                                                                                                                                                                                                                                            while ((double) num187 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 26, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                num187
                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                        for (int num188 = 0; num188 < 50; num188
                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 26, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 188, 1f);
                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 189, 1f);
                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 189, 1f);
                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 190, 1f);
                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 190, 1f);
                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                        if (this.type == 18)
                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                int num189 = 0;
                                                                                                                                                                                                                                                                while ((double) num189 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                    num189
                                                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                            for (int num190 = 0; num190 < 50; num190
                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 33, 1f);
                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 34, 1f);
                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 34, 1f);
                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 35, 1f);
                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 35, 1f);
                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                            if (this.type == 19)
                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                    int num191 = 0;
                                                                                                                                                                                                                                                                    while ((double) num191 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                        num191
                                                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                for (int num192 = 0; num192 < 50; num192
                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 36, 1f);
                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 37, 1f);
                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 37, 1f);
                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 38, 1f);
                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 38, 1f);
                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                if (this.type == 38)
                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                        int num193 = 0;
                                                                                                                                                                                                                                                                        while ((double) num193 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                            num193
                                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    for (int num194 = 0; num194 < 50; num194
                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 64, 1f);
                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 65, 1f);
                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 65, 1f);
                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 66, 1f);
                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 66, 1f);
                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                    if (this.type == 20)
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                            int num195 = 0;
                                                                                                                                                                                                                                                                            while ((double) num195 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                num195
                                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        for (int num196 = 0; num196 < 50; num196
                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 39, 1f);
                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 40, 1f);
                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 40, 1f);
                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 41, 1f);
                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 41, 1f);
                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                        if (this.type == 207)
                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                int num197 = 0;
                                                                                                                                                                                                                                                                                while ((double) num197 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                    num197
                                                                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                            for (int num198 = 0; num198 < 50; num198
                                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 283, 1f);
                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 284, 1f);
                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 284, 1f);
                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 285, 1f);
                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 285, 1f);
                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                            if (this.type == 208)
                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                    int num199 = 0;
                                                                                                                                                                                                                                                                                    while ((double) num199 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                        num199
                                                                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                for (int num200 = 0; num200 < 50; num200
                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 286, 1f);
                                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 287, 1f);
                                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 287, 1f);
                                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 288, 1f);
                                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 288, 1f);
                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                if (this.type == 209)
                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                        int num201 = 0;
                                                                                                                                                                                                                                                                                        while ((double) num201 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                            num201
                                                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                    for (int num202 = 0; num202 < 50; num202
                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 289, 1f);
                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 290, 1f);
                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 290, 1f);
                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 291, 1f);
                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 291, 1f);
                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                    if (this.type >= 212 && this.type <= 216)
                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            int num203 = 0;
                                                                                                                                                                                                                                                                                            while ((double) num203 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                num203
                                                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                        for (int num204 = 0; num204 < 50; num204
                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                        if (this.type == 212)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 336, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 337, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 337, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 338, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 338, 1f);
                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                        if (this.type == 213)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 339, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 340, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 340, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 341, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 341, 1f);
                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                        if (this.type == 214)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 342, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 343, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 343, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 344, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 344, 1f);
                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                        if (this.type == 215)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 345, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 346, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 346, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 347, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 347, 1f);
                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                        if (this.type == 216)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 348, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 348, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 348, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 348, 1f);
                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 348, 1f);
                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                        if (this.type == 220 || this.type == 221)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                int num205 = 0;
                                                                                                                                                                                                                                                                                                while ((double) num205 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 151, (float) hitDirection, -1f, 0, default(Color), 0.7f);
                                                                                                                                                                                                                                                                                                    num205
                                                                                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                            for (int num206 = 0; num206 < 20; num206
                                                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 151, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 0.7f);
                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                            if (this.type == 221)
                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 298, this.scale);
                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 299, this.scale);
                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 297, this.scale);
                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                            if (this.type == 21 || this.type == 31 || this.type == 294 || this.type == 295 || this.type == 296 || this.type == 32 || this.type == 44 || this.type == 45 || this.type == 77 || this.type == 110 || this.type == 167 || this.type == 197 || this.type == 201 || this.type == 202 || this.type == 203 || this.type == 287 || this.type == 291 || this.type == 292 || this.type == 293)
                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    int num207 = 0;
                                                                                                                                                                                                                                                                                                    while ((double) num207 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 26, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                        num207
                                                                                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                for (int num208 = 0; num208 < 20; num208
                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 26, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                if (this.type == 167)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 213, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 214, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 212, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 212, this.scale);
                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                if (this.type == 197)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 257, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 212, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 212, this.scale);
                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                if (this.type == 201)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 265, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 267, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 44, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 44, this.scale);
                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                if (this.type == 202)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 268, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 44, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 44, this.scale);
                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                if (this.type == 203)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 269, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 266, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 266, this.scale);
                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 42, this.scale);
                                                                                                                                                                                                                                                                                                if (this.type == 77)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 106, this.scale);
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                if (this.type == 110)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 130, this.scale);
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                if (this.type == 110)
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 131, this.scale);
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 44, this.scale);
                                                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 44, this.scale);
                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                if ((this.type >= 269 && this.type <= 276) || (this.type >= 281 && this.type <= 286))
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        int num209 = 0;
                                                                                                                                                                                                                                                                                                        while ((double) num209 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 26, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                            num209
                                                                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                    for (int num210 = 0; num210 < 20; num210
                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 26, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 42, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 43, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 44, this.scale);
                                                                                                                                                                                                                                                                                                    Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 44, this.scale);
                                                                                                                                                                                                                                                                                                    if (this.type == 269)
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 406, this.scale);
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                    if (this.type == 270)
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 407, this.scale);
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                    if (this.type == 271 || this.type == 272)
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 408, this.scale);
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                    if (this.type == 274)
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 409, this.scale);
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                    if (this.type == 276)
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 410, this.scale);
                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                    if (this.type >= 277 && this.type <= 280)
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                            int num211 = 0;
                                                                                                                                                                                                                                                                                                            while ((double) num211 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                int num212 = Dust.NewDust(this.position, this.width, this.height, 174, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                Main.dust[num212].scale = 1.1f;
                                                                                                                                                                                                                                                                                                                Main.dust[num212].noGravity = true;
                                                                                                                                                                                                                                                                                                                num211
                                                                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                        for (int num213 = 0; num213 < 75; num213
                                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                            int num214 = Dust.NewDust(this.position, this.width, this.height, 174, 1.5f*(float) hitDirection, -0.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                            Main.dust[num214].velocity *= 2f;
                                                                                                                                                                                                                                                                                                            Main.dust[num214].scale = 1.4f;
                                                                                                                                                                                                                                                                                                            Main.dust[num214].noGravity = true;
                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                        if (this.type == 85)
                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                            int num215 = 7;
                                                                                                                                                                                                                                                                                                            if (this.ai[3] == 2f)
                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                num215 = 10;
                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                            if (this.ai[3] == 3f)
                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                num215 = 37;
                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                int num216 = 0;
                                                                                                                                                                                                                                                                                                                while ((double) num216 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, num215, 0f, 0f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                    num216
                                                                                                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                            for (int num217 = 0; num217 < 20; num217
                                                                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, num215, 0f, 0f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                            int num218 = Gore.NewGore(new Vector2(this.position.X, this.position.Y - 10f), new Vector2((float) hitDirection, 0f), 61, this.scale);
                                                                                                                                                                                                                                                                                                            Main.gore[num218].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                            num218 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 10f), new Vector2((float) hitDirection, 0f), 62, this.scale);
                                                                                                                                                                                                                                                                                                            Main.gore[num218].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                            num218 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) this.height - 10f), new Vector2((float) hitDirection, 0f), 63, this.scale);
                                                                                                                                                                                                                                                                                                            Main.gore[num218].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                            if (this.type == 169)
                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                    int num219 = 0;
                                                                                                                                                                                                                                                                                                                    while ((double) num219 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                        int num220 = Dust.NewDust(this.position, this.width, this.height, 92, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                        Main.dust[num220].velocity *= 1.5f;
                                                                                                                                                                                                                                                                                                                        Main.dust[num220].noGravity = true;
                                                                                                                                                                                                                                                                                                                        num219
                                                                                                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                for (int num221 = 0; num221 < 100; num221
                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                    int num222 = Dust.NewDust(this.position, this.width, this.height, 92, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                    Main.dust[num222].scale = 1.5f;
                                                                                                                                                                                                                                                                                                                    Main.dust[num222].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                    Main.dust[num222].noGravity = true;
                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                if (this.type == 170 || this.type == 180)
                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                        int num223 = 0;
                                                                                                                                                                                                                                                                                                                        while ((double) num223 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                            int num224 = Dust.NewDust(this.position, this.width, this.height, 54, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                            Main.dust[num224].velocity *= 1.5f;
                                                                                                                                                                                                                                                                                                                            Main.dust[num224].noGravity = true;
                                                                                                                                                                                                                                                                                                                            num223
                                                                                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                    for (int num225 = 0; num225 < 10; num225
                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                        int num226 = Dust.NewDust(this.position, this.width, this.height, 54, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                        Main.dust[num226].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                        Main.dust[num226].noGravity = true;
                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                    for (int num227 = 0; num227 < 4; num227
                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                        int num228 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 10f), new Vector2((float) hitDirection, 0f), 99, this.scale);
                                                                                                                                                                                                                                                                                                                        Main.gore[num228].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                    if (this.type == 171)
                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                            int num229 = 0;
                                                                                                                                                                                                                                                                                                                            while ((double) num229 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                int num230 = Dust.NewDust(this.position, this.width, this.height, 16, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                Main.dust[num230].velocity *= 1.5f;
                                                                                                                                                                                                                                                                                                                                Main.dust[num230].noGravity = true;
                                                                                                                                                                                                                                                                                                                                num229
                                                                                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                        for (int num231 = 0; num231 < 10; num231
                                                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                            int num232 = Dust.NewDust(this.position, this.width, this.height, 16, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                            Main.dust[num232].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                            Main.dust[num232].noGravity = true;
                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                        for (int num233 = 0; num233 < 4; num233
                                                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                            int num234 = 11 + num233;
                                                                                                                                                                                                                                                                                                                            if (num234 > 13)
                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                num234 = Main.rand.Next(11, 14);
                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                            int num235 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 10f), new Vector2((float) hitDirection, 0f), num234, this.scale);
                                                                                                                                                                                                                                                                                                                            Main.gore[num235].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                        if (this.type == 290)
                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                            if (this.life <= 0)
                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                for (int num236 = 0; num236 < 10; num236
                                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                    int num237 = Dust.NewDust(this.position, this.width, this.height, 16, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                    Main.dust[num237].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                    Main.dust[num237].noGravity = true;
                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                int num238 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(11, 14), this.scale);
                                                                                                                                                                                                                                                                                                                                Main.gore[num238].velocity *= 0.5f;
                                                                                                                                                                                                                                                                                                                                num238 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), default(Vector2), Main.rand.Next(11, 14), this.scale);
                                                                                                                                                                                                                                                                                                                                Main.gore[num238].velocity *= 0.5f;
                                                                                                                                                                                                                                                                                                                                num238 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + 40f), default(Vector2), Main.rand.Next(11, 14), this.scale);
                                                                                                                                                                                                                                                                                                                                Main.gore[num238].velocity *= 0.5f;
                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                            if (this.type >= 87 && this.type <= 92)
                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                    int num239 = 0;
                                                                                                                                                                                                                                                                                                                                    while ((double) num239 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                        int num240 = Dust.NewDust(this.position, this.width, this.height, 16, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                        Main.dust[num240].velocity *= 1.5f;
                                                                                                                                                                                                                                                                                                                                        Main.dust[num240].noGravity = true;
                                                                                                                                                                                                                                                                                                                                        num239
                                                                                                                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                for (int num241 = 0; num241 < 10; num241
                                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                    int num242 = Dust.NewDust(this.position, this.width, this.height, 16, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                    Main.dust[num242].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                    Main.dust[num242].noGravity = true;
                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                int num243 = Main.rand.Next(1, 4);
                                                                                                                                                                                                                                                                                                                                for (int num244 = 0; num244 < num243; num244
                                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                    int num245 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 10f), new Vector2((float) hitDirection, 0f), Main.rand.Next(11, 14), this.scale);
                                                                                                                                                                                                                                                                                                                                    Main.gore[num245].velocity *= 0.8f;
                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                if (this.type == 78 || this.type == 79 || this.type == 80)
                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                        int num246 = 0;
                                                                                                                                                                                                                                                                                                                                        while ((double) num246 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                            int num247 = Dust.NewDust(this.position, this.width, this.height, 31, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                            Main.dust[num247].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                            Main.dust[num247].noGravity = true;
                                                                                                                                                                                                                                                                                                                                            num246
                                                                                                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                    for (int num248 = 0; num248 < 20; num248
                                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                        int num249 = Dust.NewDust(this.position, this.width, this.height, 31, 0f, 0f, 0, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                        Main.dust[num249].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                        Main.dust[num249].noGravity = true;
                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                    int num250 = Gore.NewGore(new Vector2(this.position.X, this.position.Y - 10f), new Vector2((float) hitDirection, 0f), 61, this.scale);
                                                                                                                                                                                                                                                                                                                                    Main.gore[num250].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                    num250 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 10f), new Vector2((float) hitDirection, 0f), 62, this.scale);
                                                                                                                                                                                                                                                                                                                                    Main.gore[num250].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                    num250 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) this.height - 10f), new Vector2((float) hitDirection, 0f), 63, this.scale);
                                                                                                                                                                                                                                                                                                                                    Main.gore[num250].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                    if (this.type == 82 || this.type == 158 || this.type == 159 || this.type == 250 || this.type == 253)
                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                            int num251 = 0;
                                                                                                                                                                                                                                                                                                                                            while ((double) num251 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                int num252 = Dust.NewDust(this.position, this.width, this.height, 54, 0f, 0f, 50, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                Main.dust[num252].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                Main.dust[num252].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                num251
                                                                                                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                        for (int num253 = 0; num253 < 20; num253
                                                                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                            int num254 = Dust.NewDust(this.position, this.width, this.height, 54, 0f, 0f, 50, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                            Main.dust[num254].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                            Main.dust[num254].noGravity = true;
                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                        int num255 = Gore.NewGore(new Vector2(this.position.X, this.position.Y - 10f), new Vector2((float) hitDirection, 0f), 99, this.scale);
                                                                                                                                                                                                                                                                                                                                        Main.gore[num255].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                        num255 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 15f), new Vector2((float) hitDirection, 0f), 99, this.scale);
                                                                                                                                                                                                                                                                                                                                        Main.gore[num255].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                        num255 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) this.height - 20f), new Vector2((float) hitDirection, 0f), 99, this.scale);
                                                                                                                                                                                                                                                                                                                                        Main.gore[num255].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                        if (this.type == 254 || this.type == 255 || this.type == 256 || this.type == 257 || this.type == 258 || this.type == 259 || this.type == 260 || this.type == 261)
                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                int num256 = 0;
                                                                                                                                                                                                                                                                                                                                                while ((double) num256 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                    int num257 = Dust.NewDust(this.position, this.width, this.height, 165, 0f, 0f, 50, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                    Main.dust[num257].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                    Main.dust[num257].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                    num256
                                                                                                                                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                            for (int num258 = 0; num258 < 20; num258
                                                                                                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                int num259 = Dust.NewDust(this.position, this.width, this.height, 165, 0f, 0f, 50, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                Main.dust[num259].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                Main.dust[num259].noGravity = true;
                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                            if (this.type != 261)
                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                int num260 = Gore.NewGore(new Vector2(this.position.X, this.position.Y - 10f), new Vector2((float) hitDirection, 0f), 375, this.scale);
                                                                                                                                                                                                                                                                                                                                                Main.gore[num260].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                                num260 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) (this.height/2) - 15f), new Vector2((float) hitDirection, 0f), 376, this.scale);
                                                                                                                                                                                                                                                                                                                                                Main.gore[num260].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                                num260 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float) this.height - 20f), new Vector2((float) hitDirection, 0f), 377, this.scale);
                                                                                                                                                                                                                                                                                                                                                Main.gore[num260].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                            //if (this.type == 140)
                                                                                                                                                                                                                                                                                                                                            //{
                                                                                                                                                                                                                                                                                                                                            //    if (this.life <= 0)
                                                                                                                                                                                                                                                                                                                                            //    {
                                                                                                                                                                                                                                                                                                                                            //        for (int num261 = 0; num261 < 20; num261++)
                                                                                                                                                                                                                                                                                                                                            //        {
                                                                                                                                                                                                                                                                                                                                            //            int num262 = Dust.NewDust(this.position, this.width, this.height, 54, 0f, 0f, 50, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                            //            Main.dust[num262].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                            //            Main.dust[num262].noGravity = true;
                                                                                                                                                                                                                                                                                                                                            //        }
                                                                                                                                                                                                                                                                                                                                            //        int num263 = Gore.NewGore(new Vector2(this.position.X, this.position.Y - 10f), new Vector2((float)hitDirection, 0f), 99, this.scale);
                                                                                                                                                                                                                                                                                                                                            //        Main.gore[num263].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                            //        num263 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float)(this.height / 2) - 15f), new Vector2((float)hitDirection, 0f), 99, this.scale);
                                                                                                                                                                                                                                                                                                                                            //        Main.gore[num263].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                            //        num263 = Gore.NewGore(new Vector2(this.position.X, this.position.Y + (float)this.height - 20f), new Vector2((float)hitDirection, 0f), 99, this.scale);
                                                                                                                                                                                                                                                                                                                                            //        Main.gore[num263].velocity *= 0.3f;
                                                                                                                                                                                                                                                                                                                                            //        return;
                                                                                                                                                                                                                                                                                                                                            //    }
                                                                                                                                                                                                                                                                                                                                            //}
                                                                                                                                                                                                                                                                                                                                            //else
                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                if (this.type == 39 || this.type == 40 || this.type == 41)
                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                        int num264 = 0;
                                                                                                                                                                                                                                                                                                                                                        while ((double) num264 < dmg/(double) this.lifeMax*50.0)
                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 26, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                            num264
                                                                                                                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                    for (int num265 = 0; num265 < 20; num265
                                                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 26, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, this.type - 39 + 67, 1f);
                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                    if (this.type == 34)
                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                            int num266 = 0;
                                                                                                                                                                                                                                                                                                                                                            while ((double) num266 < dmg/(double) this.lifeMax*30.0)
                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                int num267 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 15, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 1.8f);
                                                                                                                                                                                                                                                                                                                                                                Main.dust[num267].noLight = true;
                                                                                                                                                                                                                                                                                                                                                                Main.dust[num267].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                Main.dust[num267].velocity *= 1.3f;
                                                                                                                                                                                                                                                                                                                                                                num267 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 26, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 0, default(Color), 0.9f);
                                                                                                                                                                                                                                                                                                                                                                Main.dust[num267].noLight = true;
                                                                                                                                                                                                                                                                                                                                                                Main.dust[num267].velocity *= 1.3f;
                                                                                                                                                                                                                                                                                                                                                                num266
                                                                                                                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                        for (int num268 = 0; num268 < 15; num268
                                                                                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                            int num269 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 15, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 1.8f);
                                                                                                                                                                                                                                                                                                                                                            Main.dust[num269].noLight = true;
                                                                                                                                                                                                                                                                                                                                                            Main.dust[num269].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                            Main.dust[num269].velocity *= 1.3f;
                                                                                                                                                                                                                                                                                                                                                            num269 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 26, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 0, default(Color), 0.9f);
                                                                                                                                                                                                                                                                                                                                                            Main.dust[num269].noLight = true;
                                                                                                                                                                                                                                                                                                                                                            Main.dust[num269].velocity *= 1.3f;
                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                        if (this.type == 289)
                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                int num270 = 0;
                                                                                                                                                                                                                                                                                                                                                                while ((double) num270 < dmg/(double) this.lifeMax*30.0)
                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                    int num271 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 181, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 1.8f);
                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num271].noLight = true;
                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num271].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num271].velocity *= 1.3f;
                                                                                                                                                                                                                                                                                                                                                                    num270
                                                                                                                                                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                            for (int num272 = 0; num272 < 50; num272
                                                                                                                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                int num273 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 181, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 1.8f);
                                                                                                                                                                                                                                                                                                                                                                Main.dust[num273].noLight = true;
                                                                                                                                                                                                                                                                                                                                                                Main.dust[num273].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                Main.dust[num273].velocity *= 1.3f;
                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                            if (this.type == 35 || this.type == 36)
                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                    int num274 = 0;
                                                                                                                                                                                                                                                                                                                                                                    while ((double) num274 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 26, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                        num274
                                                                                                                                                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                for (int num275 = 0; num275 < 150; num275
                                                                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 26, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                if (this.type == 35)
                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 54, 1f);
                                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 55, 1f);
                                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 56, 1f);
                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 57, 1f);
                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 57, 1f);
                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 57, 1f);
                                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                if (this.type == 139 || this.type == 140)
                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                    if (this.life <= 0)
                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                        for (int num276 = 0; num276 < 10; num276
                                                                                                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                            int num277 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 31, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                                            Main.dust[num277].velocity *= 1.4f;
                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                        for (int num278 = 0; num278 < 5; num278
                                                                                                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                            int num279 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 2.5f);
                                                                                                                                                                                                                                                                                                                                                                            Main.dust[num279].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                            Main.dust[num279].velocity *= 5f;
                                                                                                                                                                                                                                                                                                                                                                            num279 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                                            Main.dust[num279].velocity *= 3f;
                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                        int num280 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                        Main.gore[num280].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                        Gore expr_C615_cp_0 = Main.gore[num280];
                                                                                                                                                                                                                                                                                                                                                                        expr_C615_cp_0.velocity.X = expr_C615_cp_0.velocity.X + 1f;
                                                                                                                                                                                                                                                                                                                                                                        Gore expr_C635_cp_0 = Main.gore[num280];
                                                                                                                                                                                                                                                                                                                                                                        expr_C635_cp_0.velocity.Y = expr_C635_cp_0.velocity.Y + 1f;
                                                                                                                                                                                                                                                                                                                                                                        num280 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                        Main.gore[num280].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                        Gore expr_C6B9_cp_0 = Main.gore[num280];
                                                                                                                                                                                                                                                                                                                                                                        expr_C6B9_cp_0.velocity.X = expr_C6B9_cp_0.velocity.X - 1f;
                                                                                                                                                                                                                                                                                                                                                                        Gore expr_C6D9_cp_0 = Main.gore[num280];
                                                                                                                                                                                                                                                                                                                                                                        expr_C6D9_cp_0.velocity.Y = expr_C6D9_cp_0.velocity.Y + 1f;
                                                                                                                                                                                                                                                                                                                                                                        num280 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                        Main.gore[num280].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                        Gore expr_C75D_cp_0 = Main.gore[num280];
                                                                                                                                                                                                                                                                                                                                                                        expr_C75D_cp_0.velocity.X = expr_C75D_cp_0.velocity.X + 1f;
                                                                                                                                                                                                                                                                                                                                                                        Gore expr_C77D_cp_0 = Main.gore[num280];
                                                                                                                                                                                                                                                                                                                                                                        expr_C77D_cp_0.velocity.Y = expr_C77D_cp_0.velocity.Y - 1f;
                                                                                                                                                                                                                                                                                                                                                                        num280 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                        Main.gore[num280].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                        Gore expr_C801_cp_0 = Main.gore[num280];
                                                                                                                                                                                                                                                                                                                                                                        expr_C801_cp_0.velocity.X = expr_C801_cp_0.velocity.X - 1f;
                                                                                                                                                                                                                                                                                                                                                                        Gore expr_C821_cp_0 = Main.gore[num280];
                                                                                                                                                                                                                                                                                                                                                                        expr_C821_cp_0.velocity.Y = expr_C821_cp_0.velocity.Y - 1f;
                                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                    if (this.type >= 134 && this.type <= 136)
                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                        if (this.type == 135 && this.life > 0 && Main.netMode != 1 && this.ai[2] == 0f && Main.rand.Next(25) == 0)
                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                            this.ai[2] = 1f;
                                                                                                                                                                                                                                                                                                                                                                            int num281 = NPC.NewNPC((int) (this.position.X + (float) (this.width/2)), (int) (this.position.Y + (float) this.height), 139, 0);
                                                                                                                                                                                                                                                                                                                                                                            if (Main.netMode == 2 && num281 < 200)
                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                NetMessage.SendData(23, -1, -1, "", num281, 0f, 0f, 0f, 0);
                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                            this.netUpdate = true;
                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                        if (this.life <= 0)
                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 156, 1f);
                                                                                                                                                                                                                                                                                                                                                                            if (Main.rand.Next(2) == 0)
                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                for (int num282 = 0; num282 < 10; num282
                                                                                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                    int num283 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 31, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num283].velocity *= 1.4f;
                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                for (int num284 = 0; num284 < 5; num284
                                                                                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                    int num285 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 2.5f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num285].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num285].velocity *= 5f;
                                                                                                                                                                                                                                                                                                                                                                                    num285 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num285].velocity *= 3f;
                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                int num286 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                Main.gore[num286].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CB62_cp_0 = Main.gore[num286];
                                                                                                                                                                                                                                                                                                                                                                                expr_CB62_cp_0.velocity.X = expr_CB62_cp_0.velocity.X + 1f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CB82_cp_0 = Main.gore[num286];
                                                                                                                                                                                                                                                                                                                                                                                expr_CB82_cp_0.velocity.Y = expr_CB82_cp_0.velocity.Y + 1f;
                                                                                                                                                                                                                                                                                                                                                                                num286 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                Main.gore[num286].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CC06_cp_0 = Main.gore[num286];
                                                                                                                                                                                                                                                                                                                                                                                expr_CC06_cp_0.velocity.X = expr_CC06_cp_0.velocity.X - 1f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CC26_cp_0 = Main.gore[num286];
                                                                                                                                                                                                                                                                                                                                                                                expr_CC26_cp_0.velocity.Y = expr_CC26_cp_0.velocity.Y + 1f;
                                                                                                                                                                                                                                                                                                                                                                                num286 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                Main.gore[num286].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CCAA_cp_0 = Main.gore[num286];
                                                                                                                                                                                                                                                                                                                                                                                expr_CCAA_cp_0.velocity.X = expr_CCAA_cp_0.velocity.X + 1f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CCCA_cp_0 = Main.gore[num286];
                                                                                                                                                                                                                                                                                                                                                                                expr_CCCA_cp_0.velocity.Y = expr_CCCA_cp_0.velocity.Y - 1f;
                                                                                                                                                                                                                                                                                                                                                                                num286 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                Main.gore[num286].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CD4E_cp_0 = Main.gore[num286];
                                                                                                                                                                                                                                                                                                                                                                                expr_CD4E_cp_0.velocity.X = expr_CD4E_cp_0.velocity.X - 1f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CD6E_cp_0 = Main.gore[num286];
                                                                                                                                                                                                                                                                                                                                                                                expr_CD6E_cp_0.velocity.Y = expr_CD6E_cp_0.velocity.Y - 1f;
                                                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                        if (this.type == 127)
                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                            if (this.life <= 0)
                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 149, 1f);
                                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 150, 1f);
                                                                                                                                                                                                                                                                                                                                                                                for (int num287 = 0; num287 < 10; num287
                                                                                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                    int num288 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 31, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num288].velocity *= 1.4f;
                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                for (int num289 = 0; num289 < 5; num289
                                                                                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                    int num290 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 2.5f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num290].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num290].velocity *= 5f;
                                                                                                                                                                                                                                                                                                                                                                                    num290 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.dust[num290].velocity *= 3f;
                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                int num291 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                Main.gore[num291].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CFDC_cp_0 = Main.gore[num291];
                                                                                                                                                                                                                                                                                                                                                                                expr_CFDC_cp_0.velocity.X = expr_CFDC_cp_0.velocity.X + 1f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_CFFC_cp_0 = Main.gore[num291];
                                                                                                                                                                                                                                                                                                                                                                                expr_CFFC_cp_0.velocity.Y = expr_CFFC_cp_0.velocity.Y + 1f;
                                                                                                                                                                                                                                                                                                                                                                                num291 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                Main.gore[num291].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_D080_cp_0 = Main.gore[num291];
                                                                                                                                                                                                                                                                                                                                                                                expr_D080_cp_0.velocity.X = expr_D080_cp_0.velocity.X - 1f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_D0A0_cp_0 = Main.gore[num291];
                                                                                                                                                                                                                                                                                                                                                                                expr_D0A0_cp_0.velocity.Y = expr_D0A0_cp_0.velocity.Y + 1f;
                                                                                                                                                                                                                                                                                                                                                                                num291 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                Main.gore[num291].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_D124_cp_0 = Main.gore[num291];
                                                                                                                                                                                                                                                                                                                                                                                expr_D124_cp_0.velocity.X = expr_D124_cp_0.velocity.X + 1f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_D144_cp_0 = Main.gore[num291];
                                                                                                                                                                                                                                                                                                                                                                                expr_D144_cp_0.velocity.Y = expr_D144_cp_0.velocity.Y - 1f;
                                                                                                                                                                                                                                                                                                                                                                                num291 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                Main.gore[num291].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_D1C8_cp_0 = Main.gore[num291];
                                                                                                                                                                                                                                                                                                                                                                                expr_D1C8_cp_0.velocity.X = expr_D1C8_cp_0.velocity.X - 1f;
                                                                                                                                                                                                                                                                                                                                                                                Gore expr_D1E8_cp_0 = Main.gore[num291];
                                                                                                                                                                                                                                                                                                                                                                                expr_D1E8_cp_0.velocity.Y = expr_D1E8_cp_0.velocity.Y - 1f;
                                                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                            if (this.type >= 128 && this.type <= 131)
                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                if (this.life <= 0)
                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 147, 1f);
                                                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 148, 1f);
                                                                                                                                                                                                                                                                                                                                                                                    for (int num292 = 0; num292 < 10; num292
                                                                                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                        int num293 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 31, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                                                        Main.dust[num293].velocity *= 1.4f;
                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                    for (int num294 = 0; num294 < 5; num294
                                                                                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                        int num295 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 2.5f);
                                                                                                                                                                                                                                                                                                                                                                                        Main.dust[num295].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                        Main.dust[num295].velocity *= 5f;
                                                                                                                                                                                                                                                                                                                                                                                        num295 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, 0f, 0f, 100, default(Color), 1.5f);
                                                                                                                                                                                                                                                                                                                                                                                        Main.dust[num295].velocity *= 3f;
                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                    int num296 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.gore[num296].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                    Gore expr_D469_cp_0 = Main.gore[num296];
                                                                                                                                                                                                                                                                                                                                                                                    expr_D469_cp_0.velocity.X = expr_D469_cp_0.velocity.X + 1f;
                                                                                                                                                                                                                                                                                                                                                                                    Gore expr_D489_cp_0 = Main.gore[num296];
                                                                                                                                                                                                                                                                                                                                                                                    expr_D489_cp_0.velocity.Y = expr_D489_cp_0.velocity.Y + 1f;
                                                                                                                                                                                                                                                                                                                                                                                    num296 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.gore[num296].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                    Gore expr_D50D_cp_0 = Main.gore[num296];
                                                                                                                                                                                                                                                                                                                                                                                    expr_D50D_cp_0.velocity.X = expr_D50D_cp_0.velocity.X - 1f;
                                                                                                                                                                                                                                                                                                                                                                                    Gore expr_D52D_cp_0 = Main.gore[num296];
                                                                                                                                                                                                                                                                                                                                                                                    expr_D52D_cp_0.velocity.Y = expr_D52D_cp_0.velocity.Y + 1f;
                                                                                                                                                                                                                                                                                                                                                                                    num296 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.gore[num296].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                    Gore expr_D5B1_cp_0 = Main.gore[num296];
                                                                                                                                                                                                                                                                                                                                                                                    expr_D5B1_cp_0.velocity.X = expr_D5B1_cp_0.velocity.X + 1f;
                                                                                                                                                                                                                                                                                                                                                                                    Gore expr_D5D1_cp_0 = Main.gore[num296];
                                                                                                                                                                                                                                                                                                                                                                                    expr_D5D1_cp_0.velocity.Y = expr_D5D1_cp_0.velocity.Y - 1f;
                                                                                                                                                                                                                                                                                                                                                                                    num296 = Gore.NewGore(new Vector2(this.position.X, this.position.Y), default(Vector2), Main.rand.Next(61, 64), 1f);
                                                                                                                                                                                                                                                                                                                                                                                    Main.gore[num296].velocity *= 0.4f;
                                                                                                                                                                                                                                                                                                                                                                                    Gore expr_D655_cp_0 = Main.gore[num296];
                                                                                                                                                                                                                                                                                                                                                                                    expr_D655_cp_0.velocity.X = expr_D655_cp_0.velocity.X - 1f;
                                                                                                                                                                                                                                                                                                                                                                                    Gore expr_D675_cp_0 = Main.gore[num296];
                                                                                                                                                                                                                                                                                                                                                                                    expr_D675_cp_0.velocity.Y = expr_D675_cp_0.velocity.Y - 1f;
                                                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                if (this.type == 23)
                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                        int num297 = 0;
                                                                                                                                                                                                                                                                                                                                                                                        while ((double) num297 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                            int num298 = 25;
                                                                                                                                                                                                                                                                                                                                                                                            if (Main.rand.Next(2) == 0)
                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                num298 = 6;
                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, num298, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                            int num299 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 2f);
                                                                                                                                                                                                                                                                                                                                                                                            Main.dust[num299].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                            num297
                                                                                                                                                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                    for (int num300 = 0; num300 < 50; num300
                                                                                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                        int num301 = 25;
                                                                                                                                                                                                                                                                                                                                                                                        if (Main.rand.Next(2) == 0)
                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                            num301 = 6;
                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, num301, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                    for (int num302 = 0; num302 < 50; num302
                                                                                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                        int num303 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, this.velocity.X*0.2f, this.velocity.Y*0.2f, 100, default(Color), 2.5f);
                                                                                                                                                                                                                                                                                                                                                                                        Main.dust[num303].velocity *= 6f;
                                                                                                                                                                                                                                                                                                                                                                                        Main.dust[num303].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                    if (this.type == 24)
                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                            int num304 = 0;
                                                                                                                                                                                                                                                                                                                                                                                            while ((double) num304 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                int num305 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, this.velocity.X, this.velocity.Y, 100, default(Color), 2.5f);
                                                                                                                                                                                                                                                                                                                                                                                                Main.dust[num305].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                                num304
                                                                                                                                                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                        for (int num306 = 0; num306 < 50; num306
                                                                                                                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                            int num307 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, this.velocity.X, this.velocity.Y, 100, default(Color), 2.5f);
                                                                                                                                                                                                                                                                                                                                                                                            Main.dust[num307].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                            Main.dust[num307].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 45, 1f);
                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 46, 1f);
                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 46, 1f);
                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 47, 1f);
                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 47, 1f);
                                                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                        if (this.type == 25)
                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                            Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 10);
                                                                                                                                                                                                                                                                                                                                                                                            for (int num308 = 0; num308 < 20; num308
                                                                                                                                                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                int num309 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 2f);
                                                                                                                                                                                                                                                                                                                                                                                                Main.dust[num309].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                                Main.dust[num309].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                                                                num309 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 6, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                Main.dust[num309].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                        if (this.type == 33)
                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                            Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 10);
                                                                                                                                                                                                                                                                                                                                                                                            for (int num310 = 0; num310 < 20; num310
                                                                                                                                                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                int num311 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 172, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 1.2f);
                                                                                                                                                                                                                                                                                                                                                                                                Main.dust[num311].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                                Main.dust[num311].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                                                                num311 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 172, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 0.6f);
                                                                                                                                                                                                                                                                                                                                                                                                Main.dust[num311].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                        if (this.type == 26 || this.type == 27 || this.type == 28 || this.type == 29 || this.type == 73 || this.type == 111)
                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                int num312 = 0;
                                                                                                                                                                                                                                                                                                                                                                                                while ((double) num312 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                    num312
                                                                                                                                                                                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                            for (int num313 = 0; num313 < 50; num313
                                                                                                                                                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 48, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 49, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 20f), this.velocity, 49, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                            if (this.type == 111)
                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 131, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 50, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                            Gore.NewGore(new Vector2(this.position.X, this.position.Y + 34f), this.velocity, 50, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                            if (this.type == 185)
                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                    int num314 = 0;
                                                                                                                                                                                                                                                                                                                                                                                                    while ((double) num314 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                        num314
                                                                                                                                                                                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                for (int num315 = 0; num315 < 50; num315
                                                                                                                                                                                                                                                                                                                                                                                                    ++)
                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, 2.5f*(float) hitDirection, -2.5f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 240, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                if (this.type == 30)
                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                    Main.PlaySound(2, (int) this.position.X, (int) this.position.Y, 10);
                                                                                                                                                                                                                                                                                                                                                                                                    for (int num316 = 0; num316 < 20; num316
                                                                                                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                        int num317 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 27, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 2f);
                                                                                                                                                                                                                                                                                                                                                                                                        Main.dust[num317].noGravity = true;
                                                                                                                                                                                                                                                                                                                                                                                                        Main.dust[num317].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                                                                        num317 = Dust.NewDust(new Vector2(this.position.X, this.position.Y), this.width, this.height, 27, -this.velocity.X*0.2f, -this.velocity.Y*0.2f, 100, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                        Main.dust[num317].velocity *= 2f;
                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                if (this.type == 42 || this.type == 176 || this.type == 205 || (this.type >= 231 && this.type <= 235))
                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                        int num318 = 0;
                                                                                                                                                                                                                                                                                                                                                                                                        while ((double) num318 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -1f, this.alpha, this.color, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                            num318
                                                                                                                                                                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                    for (int num319 = 0; num319 < 50; num319
                                                                                                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 18, (float) hitDirection, -2f, this.alpha, this.color, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                    if (this.type == 205)
                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 270, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 271, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 271, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 272, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                    if (this.type == 176)
                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 229, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 230, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 70, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 71, this.scale);
                                                                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                    if (this.type == 43 || this.type == 56)
                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                            int num320 = 0;
                                                                                                                                                                                                                                                                                                                                                                                                            while ((double) num320 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 40, (float) hitDirection, -1f, this.alpha, this.color, 1.2f);
                                                                                                                                                                                                                                                                                                                                                                                                                num320
                                                                                                                                                                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                        for (int num321 = 0; num321 < 50; num321
                                                                                                                                                                                                                                                                                                                                                                                                            ++)
                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 40, (float) hitDirection, -2f, this.alpha, this.color, 1.2f);
                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 72, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 72, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                        if (this.type == 175)
                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                            if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                                int num322 = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                while ((double) num322 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 40, (float) hitDirection, -1f, this.alpha, this.color, 1.2f);
                                                                                                                                                                                                                                                                                                                                                                                                                    num322
                                                                                                                                                                                                                                                                                                                                                                                                                        ++;
                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                            for (int num323 = 0; num323 < 50; num323
                                                                                                                                                                                                                                                                                                                                                                                                                ++)
                                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 40, (float) hitDirection, -2f, this.alpha, this.color, 1.2f);
                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 227, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                            Gore.NewGore(this.position, this.velocity, 228, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                        else
                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                            if (this.type == 48)
                                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                                if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                                    int num324 = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                    while ((double) num324 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                        num324
                                                                                                                                                                                                                                                                                                                                                                                                                            ++;
                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                for (int num325 = 0; num325 < 50; num325++)
                                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                                    Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 80, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                Gore.NewGore(this.position, this.velocity, 81, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                return;
                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                            else
                                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                                if (this.type == 62 || this.type == 66)
                                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                                    if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                                        int num326 = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                        while ((double) num326 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                            num326
                                                                                                                                                                                                                                                                                                                                                                                                                                ++;
                                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                                        return;
                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                    for (int num327 = 0; num327 < 50; num327
                                                                                                                                                                                                                                                                                                                                                                                                                        ++)
                                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                                        Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 93, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 94, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                    Gore.NewGore(this.position, this.velocity, 94, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                    return;
                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                else
                                                                                                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                                                                                                    if (this.type == 156)
                                                                                                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                                                                                                        if (this.life > 0)
                                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                                            int num328 = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                            while ((double) num328 < dmg/(double) this.lifeMax*100.0)
                                                                                                                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                                                                                                                                Dust.NewDust(this.position, this.width, this.height, 5, (float) hitDirection, -1f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                                num328
                                                                                                                                                                                                                                                                                                                                                                                                                                    ++;
                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                            return;
                                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                                        for (int num329 = 0; num329 < 50; num329++)
                                                                                                                                                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                                                                                                                                                            Dust.NewDust(this.position, this.width, this.height, 5, (float) (2*hitDirection), -2f, 0, default(Color), 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 184, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 185, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                        Gore.NewGore(this.position, this.velocity, 185, 1f);
                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                        }
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                        }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                }
                                                                                                                                                                                                            }
                                                                                                                                                                                                        }
                                                                                                                                                                                                    }
                                                                                                                                                                                                }
                                                                                                                                                                                            }
                                                                                                                                                                                        }
                                                                                                                                                                                    }
                                                                                                                                                                                }
                                                                                                                                                                            }
                                                                                                                                                                        }
                                                                                                                                                                    }
                                                                                                                                                                }
                                                                                                                                                            }
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            }
                                                                                                                                        }
                                                                                                                                    }
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    return;
                }
                if (this.life > 0)
                {
                    int num330 = 0;
                    while ((double) num330 < dmg/(double) this.lifeMax*80.0)
                    {
                        Dust.NewDust(this.position, this.width, this.height, 6, (float) (hitDirection*2), -1f, this.alpha, default(Color), 1.5f);
                        num330++;
                    }
                    return;
                }
                for (int num331 = 0; num331 < 40; num331++)
                {
                    Dust.NewDust(this.position, this.width, this.height, 6, (float) (hitDirection*2), -1f, this.alpha, default(Color), 1.5f);
                }
                return;
            }
        }

        public static bool AnyNPCs(int Type)
        {
            for (int i = 0; i < 200; i++)
            {
                if (Main.npc[i].active && Main.npc[i].type == Type)
                {
                    return true;
                }
            }
            return false;
        }

        public static int countNPCs(int Type)
        {
            int result = 0;
            for (int i = 0; i < 200; i++)
            {
                if (Main.npc[i].active && Main.npc[i].type == Type)
                {
                    result++;
                }
            }
            return result;
        }

        public static void SpawnSkeletron()
        {
            bool flag = true;
            bool flag2 = false;
            Vector2 vector = default(Vector2);
            int num = 0;
            int num2 = 0;
            for (int i = 0; i < 200; i++)
            {
                if (Main.npc[i].active && Main.npc[i].type == 35)
                {
                    flag = false;
                    break;
                }
            }
            for (int j = 0; j < 200; j++)
            {
                if (Main.npc[j].active && Main.npc[j].type == 37)
                {
                    flag2 = true;
                    Main.npc[j].ai[3] = 1f;
                    vector = Main.npc[j].position;
                    num = Main.npc[j].width;
                    num2 = Main.npc[j].height;
                    if (Main.netMode == 2)
                    {
                        NetMessage.SendData(23, -1, -1, "", j, 0f, 0f, 0f, 0);
                    }
                }
            }
            if (flag && flag2)
            {
                int num3 = NPC.NewNPC((int) vector.X + num/2, (int) vector.Y + num2/2, 35, 0);
                Main.npc[num3].netUpdate = true;
                string str = "Skeletron";
                if (Main.netMode == 0)
                {
                    Main.NewText(str + " " + Lang.misc[16], 175, 75, 255, false);
                    return;
                }
                if (Main.netMode == 2)
                {
                    NetMessage.SendData(25, -1, -1, str + " " + Lang.misc[16], 255, 175f, 75f, 255f, 0);
                }
            }
        }

        public static bool NearSpikeBall(int x, int y)
        {
            Rectangle rectangle = new Rectangle(x*16 - 300, y*16 - 300, 600, 600);
            for (int i = 0; i < 200; i++)
            {
                if (Main.npc[i].active && Main.npc[i].aiStyle == 20)
                {
                    Rectangle rectangle2 = new Rectangle((int) Main.npc[i].ai[1], (int) Main.npc[i].ai[2], 20, 20);
                    if (rectangle.Intersects(rectangle2))
                    {
                        return true;
                    }
                }
            }
            return false;
        }

        public void AddBuff(int type, int time, bool quiet = false, int owner = -99)

        {
            if (this.buffImmune[type])
            {
                return;
            }
            if (!quiet)
            {
                NetMessage.SendData(53, -1, -1, "", this.whoAmI, (float) type, (float) time, owner);
            }
            for (int i = 0; i < this.buffs.Length; i++)
            {
                if (this.buffs[i].type == type)
                {
                    if (this.buffs[i].time < time)
                    {
                        this.buffs[i].time = time;
                    }
                    return;
                }
            }
            for (int i = 0; i < this.buffs.Length; i++)
            {
                if (!this.buffs[i].active)
                {
                    this.buffs[i] = new Buff();
                    this.buffs[i].setDefaults(type, time, owner);
                    if (type == Buff.DRAIN && owner != -99)
                    {
                        Main.player[owner].numDrains++;
                    }
                    return;
                }
            }
        }

        public void DelBuff(int b, bool Quiet = false)
        {
            if (this.buffs[b].type == 75 && this.buffs[b].active)
            {
                this.StrikeNPC(100, 0, 0, false, false, this.buffs[b].owner, byte.MaxValue, true);
            }
            if (this.buffs[b].type == Buff.DRAIN && this.buffs[b].owner != -99)
            {
                if (Main.player[this.buffs[b].owner].numDrains > 0) Main.player[this.buffs[b].owner].numDrains--;
                else Main.player[this.buffs[b].owner].numDrains = 0;
            }
            this.buffs[b] = new Buff();
            if (Main.netMode == 2 && !Quiet)
            {
                //NetMessage.SendData(54, -1, -1, "", this.whoAmI, 0f, 0f, 0f, 0);
            }
        }

        public Vector2 center()
        {
            return new Vector2(this.position.X + (float) (this.width/2), this.position.Y + (float) (this.height/2));
        }

        public Rectangle getRect()
        {
            return new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
        }

        public void UpdateNPC(int i)
        {
            if (this.type == NPC.BLACK_RECLUSE || this.type == NPC.BLOOD_CRAWLER)
            {
                this.jungle = true;
            }
            this.whoAmI = i;
            if (!this.active && this.ichorOwner != -99)
            {
                Main.player[this.ichorOwner].ichorTargets--;
                this.ichorOwner = -99;
            }
            if (this.active)
            {
                if (this.jungle && (Main.player[this.target].dead || !Main.player[this.target].getRect().Intersects(NPC.JUNGLE_AREA)) && this.timeLeft > 180)
                {
                    //    this.timeLeft = 180;
                }
                if (this.realLife >= 0)
                {
                    this.life = Main.npc[this.realLife].life;
                }
                if (this.life > this.lifeMax)
                {
                    this.type = this.lifeMax;
                }
                if (Main.netMode == 1)
                {
                    bool flag = false;
                    int num = (int) (this.position.X + (float) (this.width/2))/16;
                    int num2 = (int) (this.position.Y + (float) (this.height/2))/16;
                    try
                    {
                        if (num >= 4 && num <= Main.maxTilesX - 4 && num2 >= 4 && num2 <= Main.maxTilesY - 4)
                        {
                            if (Main.tile[num, num2] == null)
                            {
                                flag = true;
                            }
                            else
                            {
                                if (Main.tile[num - 3, num2] == null)
                                {
                                    flag = true;
                                }
                                else
                                {
                                    if (Main.tile[num + 3, num2] == null)
                                    {
                                        flag = true;
                                    }
                                    else
                                    {
                                        if (Main.tile[num, num2 - 3] == null)
                                        {
                                            flag = true;
                                        }
                                        else
                                        {
                                            if (Main.tile[num, num2 + 3] == null)
                                            {
                                                flag = true;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    catch
                    {
                        flag = true;
                    }
                    if (flag)
                    {
                        return;
                    }
                }
                if (this.displayName == "")
                {
                    this.displayName = this.name;
                }
                if (this.townNPC && Main.chrName[this.type] != "")
                {
                    this.displayName = Main.chrName[this.type];
                }
                this.lifeRegen = 0;
                this.poisoned = false;
                this.venom = false;
                this.onFire = false;
                this.bleed = false;
                this.midas = false;
                this.ichor = false;
                this.doom = false;
                this.doomTimer = 0;
                this.onFrostBurn = false;
                this.onFire2 = false;
                this.confused = false;
                if (this.type == 69 || this.type == 70 || this.townNPC)
                {
                    this.canTakeDamage = false;
                }
                else this.canTakeDamage = true;
                for (int j = 0; j < this.buffs.Length; j++)
                {
                    if (this.buffs[j].type > 0 && this.buffs[j].time > 0)
                    {
                        if (this.buffs[j].type == 20)
                        {
                            this.poisoned = true;
                        }
                        if (this.buffs[j].type == 30)
                        {
                            this.bleed = true;
                        }
                        if (this.buffs[j].type == 70)
                        {
                            this.venom = true;
                        }
                        if (this.buffs[j].type == 24)
                        {
                            this.onFire = true;
                        }
                        if (this.buffs[j].type == 72)
                        {
                            this.midas = true;
                        }
                        if (this.buffs[j].type == 69)
                        {
                            this.ichor = true;
                        }
                        if (this.buffs[j].type == 31)
                        {
                            this.confused = true;
                        }
                        if (this.buffs[j].type == 39)
                        {
                            this.onFire2 = true;
                        }
                        if (this.buffs[j].type == 44)
                        {
                            this.onFrostBurn = true;
                        }
                        if (this.buffs[j].type == 75)
                        {
                            this.doom = true;
                            this.doomTimer = this.buffs[j].time;
                        }
                        if (this.buffs[j].type == 100)
                        {
                            this.canTakeDamage = true;
                        }
                        this.buffs[j].time--;
                        if (this.buffs[j].time <= 0)
                        {
                            this.DelBuff(j);
                        }
                    }
                }
                if (Main.netMode != 1)
                {
                    for (int k = 0; k < this.buffs.Length; k++)
                    {
                        if (this.buffs[k].active && this.buffs[k].time <= 0)
                        {
                            this.DelBuff(k);
                        }
                    }
                }
                if (this.teleportTime > 0f)
                {
                    if ((float) Main.rand.Next(100) <= 100f*this.teleportTime*2f)
                    {
                        int num3 = Dust.NewDust(new Vector2((float) this.getRect().X, (float) this.getRect().Y), this.getRect().Width, this.getRect().Height, 159, 0f, 0f, 0, default(Color), 1f);
                        Main.dust[num3].scale = this.teleportTime*1.5f;
                        Main.dust[num3].noGravity = true;
                        Main.dust[num3].velocity *= 1.1f;
                    }
                    this.teleportTime -= 0.005f;
                }
                if (this.type >= 254 && this.type <= 261)
                {
                    float num4 = (float) Main.rand.Next(28, 42)*0.005f;
                    num4 += (float) (270 - (int) Main.mouseTextColor)/500f;
                    float num5 = 0.1f;
                    float num6 = 0.3f + num4/2f;
                    float num7 = 0.6f + num4;
                    float num8 = 0.35f;
                    num5 *= num8;
                    num6 *= num8;
                    num7 *= num8;
                    Lighting.addLight((int) this.center().X/16, (int) this.center().Y/16, num5, num6, num7);
                }
                if (this.poisoned)
                {
                    this.damage = (int) ((float) this.damage*0.9f);
                }
                for (int b = 0; b < this.buffs.Length; b++)
                {
                    if (this.buffs[b].active && this.buffs[b].damagerate > 0)
                    {
                        this.buffs[b].damageCounter++;
                        if (this.buffs[b].damageCounter >= this.buffs[b].damagerate)
                        {
                            int damage = 1;
                            if (this.buffs[b].type == Buff.BURNING) damage = 5;
                            this.buffs[b].damageCounter -= this.buffs[b].damagerate;
                            int num9 = this.whoAmI;
                            if (this.realLife >= 0)
                            {
                                num9 = this.realLife;
                            }
                            Main.npc[num9].life -= damage;
                            if (this.buffs[b].owner == Main.myPlayer && this.boss)
                            {
                                Main.player[Main.myPlayer].bossDamageAP += damage;
                                if (this.type == NPC.SPAZMATISM || this.type == NPC.RETINAZER) Main.player[Main.myPlayer].bossDamage += (damage / 2);
                                else Main.player[Main.myPlayer].bossDamage += damage;
                                Main.player[Main.myPlayer].damageMult = 1.0f + ((float)Main.player[Main.myPlayer].bossDamage / (float)this.lifeMax);
                                byte pointsEarned = 0;
                                while (Main.player[Main.myPlayer].bossDamageAP > this.abilityPointHP && this.abilityPointHP != 0)
                                {
                                    Main.player[Main.myPlayer].bossDamageAP -= this.abilityPointHP;
                                    pointsEarned++;
                                }
                                if (pointsEarned > 0)
                                {
                                    if (Main.player[Main.myPlayer].inventory[Main.player[Main.myPlayer].selectedItem].ability >= 0 &&
                                        Main.player[Main.myPlayer].abilities[Main.player[Main.myPlayer].inventory[Main.player[Main.myPlayer].selectedItem].ability] < 50)
                                    {
                                        CombatText.NewText(new Rectangle((int)Main.player[Main.myPlayer].position.X, (int)Main.player[Main.myPlayer].position.Y, Main.player[Main.myPlayer].width, Main.player[Main.myPlayer].height), Color.Cyan, "" + pointsEarned);
                                        Main.player[Main.myPlayer].abilities[Main.player[Main.myPlayer].inventory[Main.player[Main.myPlayer].selectedItem].ability] += pointsEarned;
                                        if (Main.player[Main.myPlayer].abilities[Main.player[Main.myPlayer].inventory[Main.player[Main.myPlayer].selectedItem].ability] >= 50)
                                        {
                                            CombatText.NewText(new Rectangle((int)Main.player[Main.myPlayer].position.X, (int)Main.player[Main.myPlayer].position.Y, Main.player[Main.myPlayer].width, Main.player[Main.myPlayer].height), Color.Cyan, "Ability Learned!");
                                            Main.player[Main.myPlayer].abilities[Main.player[Main.myPlayer].inventory[Main.player[Main.myPlayer].selectedItem].ability] = 50;
                                            if (Main.netMode == 1 && this.buffs[b].owner == Main.myPlayer)
                                            {
                                                NetMessage.SendData(73, -1, -1, "", Main.myPlayer, Main.player[Main.myPlayer].inventory[Main.player[Main.myPlayer].selectedItem].ability);
                                            }
                                        }
                                    }
                                }
                            }
                            CombatText.NewText(new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height), new Color(255, 140, 40, 255), string.Concat(damage), false, true);
                            if (Main.npc[num9].life <= 0)
                            {
                                Main.npc[num9].life = 1;
                                if (Main.netMode != 1)
                                {
                                    int owner = this.buffs[b].owner;
                                    Main.npc[num9].StrikeNPC(9999, 0f, 0, false, false, this.buffs[b].owner);
                                    if (Main.netMode == 2)
                                    {
                                        NetMessage.SendData(28, -1, -1, "", num9, 9999f, 0f, 0f, 0, owner);
                                    }
                                }
                            }
                        }
                    }
                }
                if (Main.netMode != 1 && Main.bloodMoon)
                {
                    bool flag2 = false;
                    if (this.value == 0f)
                    {
                        flag2 = true;
                    }
                    if (this.type == 46)
                    {
                        this.Transform(47);
                    }
                    else
                    {
                        if (this.type == 55)
                        {
                            this.Transform(57);
                        }
                        else
                        {
                            if (this.type == 148 || this.type == 149)
                            {
                                this.Transform(168);
                            }
                        }
                    }
                    if (flag2)
                    {
                        this.value = 0f;
                    }
                }
                float num10 = 10f;
                NPC.gravity = 0.3f;
                if (this.type == 258)
                {
                    NPC.gravity = 0.1f;
                    if (this.velocity.Y > 3f)
                    {
                        this.velocity.Y = 3f;
                    }
                }
                float num11 = (float) (Main.maxTilesX/4200);
                num11 *= num11;
                float num12 = (float) ((double) (this.position.Y/16f - (60f + 10f*num11))/(Main.worldSurface/6.0));
                if ((double) num12 < 0.25)
                {
                    num12 = 0.25f;
                }
                if (num12 > 1f)
                {
                    num12 = 1f;
                }
                NPC.gravity *= num12;
                if (this.wet)
                {
                    if (this.honeyWet)
                    {
                        NPC.gravity = 0.1f;
                        num10 = 4f;
                    }
                    else
                    {
                        NPC.gravity = 0.2f;
                        num10 = 7f;
                    }
                }
                if (this.soundDelay > 0)
                {
                    this.soundDelay--;
                }
                if (this.life <= 0)
                {
                    this.active = false;
                    if (this.ichorOwner != -99)
                    {
                        Main.player[ichorOwner].ichorTargets--;
                        this.ichorOwner = -99;
                    }
                }
                this.oldTarget = this.target;
                this.oldDirection = this.direction;
                this.oldDirectionY = this.directionY;
                float num13 = 1f + Math.Abs(this.velocity.X)/3f;
                if (this.gfxOffY > 0f)
                {
                    this.gfxOffY -= num13*this.stepSpeed;
                    if (this.gfxOffY < 0f)
                    {
                        this.gfxOffY = 0f;
                    }
                }
                else
                {
                    if (this.gfxOffY < 0f)
                    {
                        this.gfxOffY += num13*this.stepSpeed;
                        if (this.gfxOffY > 0f)
                        {
                            this.gfxOffY = 0f;
                        }
                    }
                }
                if (this.gfxOffY > 16f)
                {
                    this.gfxOffY = 16f;
                }
                if (this.gfxOffY < -16f)
                {
                    this.gfxOffY = -16f;
                }
                this.AI();
                if (this.type == 44)
                {
                    Lighting.addLight((int) (this.position.X + (float) (this.width/2))/16, (int) (this.position.Y + 4f)/16, 0.9f, 0.75f, 0.5f);
                }
                for (int l = 0; l < 256; l++)
                {
                    if (this.immune[l] > 0)
                    {
                        this.immune[l]--;
                    }
                    if (this.bladeOfGrass[l] > 0)
                    {
                        this.bladeOfGrass[l]--;
                    }
                }
                if (!this.noGravity && !this.noTileCollide)
                {
                    int num14 = (int) (this.position.X + (float) (this.width/2))/16;
                    int num15 = (int) (this.position.Y + (float) (this.height/2))/16;
                    if (num14 > Main.maxTilesX) num14 = Main.maxTilesX;
                    if (num15 > Main.maxTilesY) num15 = Main.maxTilesY;
                    if (Main.tile[num14, num15] == null)
                    {
                        NPC.gravity = 0f;
                        this.velocity.X = 0f;
                        this.velocity.Y = 0f;
                    }
                }
                if (!this.noGravity)
                {
                    this.velocity.Y = this.velocity.Y + NPC.gravity;
                    if (this.velocity.Y > num10)
                    {
                        this.velocity.Y = num10;
                    }
                }
                if ((double) this.velocity.X < 0.005 && (double) this.velocity.X > -0.005)
                {
                    this.velocity.X = 0f;
                }
                if (Main.netMode != 1 && this.type != 37 && (this.friendly || this.type == 46 || this.type == 55 || this.type == 74 || this.type == 148 || this.type == 149 || this.type == 230))
                {
                    if (this.life < this.lifeMax)
                    {
                        this.friendlyRegen++;
                        if (this.friendlyRegen > 300)
                        {
                            this.friendlyRegen = 0;
                            this.life++;
                            this.netUpdate = true;
                        }
                    }
                    if (this.immune[255] == 0)
                    {
                        Rectangle rectangle = new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
                        for (int m = 0; m < 200; m++)
                        {
                            if (Main.npc[m].active && !Main.npc[m].friendly && Main.npc[m].damage > 0)
                            {
                                Rectangle rectangle2 = new Rectangle((int) Main.npc[m].position.X, (int) Main.npc[m].position.Y, Main.npc[m].width, Main.npc[m].height);
                                if (rectangle.Intersects(rectangle2))
                                {
                                    int num16 = Main.npc[m].damage;
                                    int num17 = 6;
                                    int num18 = 1;
                                    if (Main.npc[m].position.X + (float) (Main.npc[m].width/2) > this.position.X + (float) (this.width/2))
                                    {
                                        num18 = -1;
                                    }
                                    Main.npc[i].StrikeNPC(num16, (float) num17, num18, false, false);
                                    if (Main.netMode != 0)
                                    {
                                        NetMessage.SendData(28, -1, -1, "", i, (float) num16, (float) num17, (float) num18, 0);
                                    }
                                    this.netUpdate = true;
                                    this.immune[255] = 30;
                                }
                            }
                        }
                    }
                }
                if (!this.noTileCollide)
                {
                    Vector4 vector = Collision.WalkDownSlope(this.position, this.velocity, this.width, this.height, NPC.gravity);
                    this.position.X = vector.X;
                    this.position.Y = vector.Y;
                    this.velocity.X = vector.Z;
                    this.velocity.Y = vector.W;
                    bool flag3 = Collision.LavaCollision(this.position, this.width, this.height);
                    if (flag3)
                    {
                        this.lavaWet = true;
                        //if (!this.lavaImmune && !this.dontTakeDamage && Main.netMode != 1 && this.immune[255] == 0)
                        //{
                        //    this.AddBuff(24, 420, false);
                        //    this.immune[255] = 30;
                        //    this.StrikeNPC(50, 0f, 0, false, false);
                        //    if (Main.netMode == 2 && Main.netMode != 0)
                        //    {
                        //        NetMessage.SendData(28, -1, -1, "", this.whoAmI, 50f, 0f, 0f, 0);
                        //    }
                        //}
                    }
                    bool flag4;
                    if (this.type == 72 || this.aiStyle == 21)
                    {
                        flag4 = false;
                        this.wetCount = 0;
                        flag3 = false;
                    }
                    else
                    {
                        flag4 = Collision.WetCollision(this.position, this.width, this.height);
                        if (Collision.honey)
                        {
                            this.honeyWet = true;
                        }
                    }
                    if (flag4)
                    {
                        if (this.onFire && !this.lavaWet && Main.netMode != 1)
                        {
                            for (int n = 0; n < NPC.maxBuffs; n++)
                            {
                                if (this.buffs[n].type == 24)
                                {
                                    this.DelBuff(n);
                                }
                            }
                        }
                        if (!this.wet && this.wetCount == 0)
                        {
                            this.wetCount = 10;
                            if (!flag3)
                            {
                                if (this.honeyWet)
                                {
                                    for (int num19 = 0; num19 < 10; num19++)
                                    {
                                        int num20 = Dust.NewDust(new Vector2(this.position.X - 6f, this.position.Y + (float) (this.height/2) - 8f), this.width + 12, 24, 152, 0f, 0f, 0, default(Color), 1f);
                                        Dust expr_F31_cp_0 = Main.dust[num20];
                                        expr_F31_cp_0.velocity.Y = expr_F31_cp_0.velocity.Y - 1f;
                                        Dust expr_F4F_cp_0 = Main.dust[num20];
                                        expr_F4F_cp_0.velocity.X = expr_F4F_cp_0.velocity.X*2.5f;
                                        Main.dust[num20].scale = 1.3f;
                                        Main.dust[num20].alpha = 100;
                                        Main.dust[num20].noGravity = true;
                                    }
                                    if (this.aiStyle != 1 && this.type != 1 && this.type != 16 && this.type != 147 && this.type != 59 && this.aiStyle != 39 && !this.noGravity)
                                    {
                                        Main.PlaySound(19, (int) this.position.X, (int) this.position.Y, 1);
                                    }
                                }
                                else
                                {
                                    for (int num21 = 0; num21 < 30; num21++)
                                    {
                                        int num22 = Dust.NewDust(new Vector2(this.position.X - 6f, this.position.Y + (float) (this.height/2) - 8f), this.width + 12, 24, Dust.dustWater(), 0f, 0f, 0, default(Color), 1f);
                                        Dust expr_1094_cp_0 = Main.dust[num22];
                                        expr_1094_cp_0.velocity.Y = expr_1094_cp_0.velocity.Y - 4f;
                                        Dust expr_10B2_cp_0 = Main.dust[num22];
                                        expr_10B2_cp_0.velocity.X = expr_10B2_cp_0.velocity.X*2.5f;
                                        Main.dust[num22].scale *= 0.8f;
                                        Main.dust[num22].alpha = 100;
                                        Main.dust[num22].noGravity = true;
                                    }
                                    if (this.aiStyle != 1 && this.type != 1 && this.type != 16 && this.type != 147 && this.type != 59 && this.aiStyle != 39 && !this.noGravity)
                                    {
                                        Main.PlaySound(19, (int) this.position.X, (int) this.position.Y, 0);
                                    }
                                }
                            }
                            else
                            {
                                for (int num23 = 0; num23 < 10; num23++)
                                {
                                    int num24 = Dust.NewDust(new Vector2(this.position.X - 6f, this.position.Y + (float) (this.height/2) - 8f), this.width + 12, 24, 35, 0f, 0f, 0, default(Color), 1f);
                                    Dust expr_11FB_cp_0 = Main.dust[num24];
                                    expr_11FB_cp_0.velocity.Y = expr_11FB_cp_0.velocity.Y - 1.5f;
                                    Dust expr_1219_cp_0 = Main.dust[num24];
                                    expr_1219_cp_0.velocity.X = expr_1219_cp_0.velocity.X*2.5f;
                                    Main.dust[num24].scale = 1.3f;
                                    Main.dust[num24].alpha = 100;
                                    Main.dust[num24].noGravity = true;
                                }
                                if (this.aiStyle != 1 && this.type != 1 && this.type != 16 && this.type != 147 && this.type != 59 && this.aiStyle != 39 && !this.noGravity)
                                {
                                    Main.PlaySound(19, (int) this.position.X, (int) this.position.Y, 1);
                                }
                            }
                        }
                        this.wet = true;
                    }
                    else
                    {
                        if (this.wet)
                        {
                            this.velocity.X = this.velocity.X*0.5f;
                            this.wet = false;
                            if (this.wetCount == 0)
                            {
                                this.wetCount = 10;
                                if (!this.lavaWet)
                                {
                                    if (this.honeyWet)
                                    {
                                        for (int num25 = 0; num25 < 10; num25++)
                                        {
                                            int num26 = Dust.NewDust(new Vector2(this.position.X - 6f, this.position.Y + (float) (this.height/2) - 8f), this.width + 12, 24, 152, 0f, 0f, 0, default(Color), 1f);
                                            Dust expr_13A2_cp_0 = Main.dust[num26];
                                            expr_13A2_cp_0.velocity.Y = expr_13A2_cp_0.velocity.Y - 1f;
                                            Dust expr_13C0_cp_0 = Main.dust[num26];
                                            expr_13C0_cp_0.velocity.X = expr_13C0_cp_0.velocity.X*2.5f;
                                            Main.dust[num26].scale = 1.3f;
                                            Main.dust[num26].alpha = 100;
                                            Main.dust[num26].noGravity = true;
                                        }
                                        if (this.aiStyle != 1 && this.type != 1 && this.type != 16 && this.type != 147 && this.type != 59 && this.aiStyle != 39 && !this.noGravity)
                                        {
                                            Main.PlaySound(19, (int) this.position.X, (int) this.position.Y, 1);
                                        }
                                    }
                                    else
                                    {
                                        for (int num27 = 0; num27 < 30; num27++)
                                        {
                                            int num28 = Dust.NewDust(new Vector2(this.position.X - 6f, this.position.Y + (float) (this.height/2) - 8f), this.width + 12, 24, Dust.dustWater(), 0f, 0f, 0, default(Color), 1f);
                                            Dust expr_1505_cp_0 = Main.dust[num28];
                                            expr_1505_cp_0.velocity.Y = expr_1505_cp_0.velocity.Y - 4f;
                                            Dust expr_1523_cp_0 = Main.dust[num28];
                                            expr_1523_cp_0.velocity.X = expr_1523_cp_0.velocity.X*2.5f;
                                            Main.dust[num28].scale *= 0.8f;
                                            Main.dust[num28].alpha = 100;
                                            Main.dust[num28].noGravity = true;
                                        }
                                        if (this.aiStyle != 1 && this.type != 1 && this.type != 16 && this.type != 59 && this.aiStyle != 39 && !this.noGravity)
                                        {
                                            Main.PlaySound(19, (int) this.position.X, (int) this.position.Y, 0);
                                        }
                                    }
                                }
                                else
                                {
                                    for (int num29 = 0; num29 < 10; num29++)
                                    {
                                        int num30 = Dust.NewDust(new Vector2(this.position.X - 6f, this.position.Y + (float) (this.height/2) - 8f), this.width + 12, 24, 35, 0f, 0f, 0, default(Color), 1f);
                                        Dust expr_165C_cp_0 = Main.dust[num30];
                                        expr_165C_cp_0.velocity.Y = expr_165C_cp_0.velocity.Y - 1.5f;
                                        Dust expr_167A_cp_0 = Main.dust[num30];
                                        expr_167A_cp_0.velocity.X = expr_167A_cp_0.velocity.X*2.5f;
                                        Main.dust[num30].scale = 1.3f;
                                        Main.dust[num30].alpha = 100;
                                        Main.dust[num30].noGravity = true;
                                    }
                                    if (this.aiStyle != 1 && this.type != 1 && this.type != 16 && this.type != 59 && this.aiStyle != 39 && !this.noGravity)
                                    {
                                        Main.PlaySound(19, (int) this.position.X, (int) this.position.Y, 1);
                                    }
                                }
                            }
                        }
                    }
                    if (!this.wet)
                    {
                        this.lavaWet = false;
                        this.honeyWet = false;
                    }
                    if (this.wetCount > 0)
                    {
                        this.wetCount -= 1;
                    }
                    bool flag5 = false;
                    if (this.aiStyle == 10)
                    {
                        flag5 = true;
                    }
                    if (this.aiStyle == 14)
                    {
                        flag5 = true;
                    }
                    if (this.aiStyle == 3 && this.directionY == 1)
                    {
                        flag5 = true;
                    }
                    this.oldVelocity = this.velocity;
                    this.collideX = false;
                    this.collideY = false;
                    if (Main.netMode != 1)
                    {
                        if (this.type == 230 && this.wet)
                        {
                            int num31 = this.direction;
                            Vector2 vector2 = this.velocity;
                            this.Transform(55);
                            this.direction = num31;
                            this.velocity = vector2;
                            this.wet = true;
                            if (this.velocity.Y < 0f)
                            {
                                this.velocity.Y = 0f;
                            }
                        }
                        else
                        {
                            if (this.type == 55 && !this.wet && Main.raining)
                            {
                                int num32 = this.direction;
                                Vector2 vector3 = this.velocity;
                                this.Transform(230);
                                this.direction = num32;
                                this.velocity = vector3;
                                this.homeTileX = (int) (this.position.X/16f) + 10*this.direction;
                            }
                        }
                    }
                    Vector2 vector4 = this.position;
                    int num33 = this.width;
                    int num34 = this.height;
                    if (this.type == 243)
                    {
                        num34 = 90;
                    }
                    if (this.type == 290)
                    {
                        num34 = 40;
                    }
                    if (num34 != this.height)
                    {
                        vector4.Y += (float) (this.height - num34);
                    }
                    if (this.wet)
                    {
                        if (this.honeyWet)
                        {
                            Vector2 vector5 = this.velocity;
                            this.velocity = Collision.TileCollision(vector4, this.velocity, num33, num34, flag5, flag5);
                            if (Collision.up)
                            {
                                this.velocity.Y = 0.01f;
                            }
                            Vector2 value = this.velocity*0.25f;
                            if (this.velocity.X != vector5.X)
                            {
                                value.X = this.velocity.X;
                                this.collideX = true;
                            }
                            if (this.velocity.Y != vector5.Y)
                            {
                                value.Y = this.velocity.Y;
                                this.collideY = true;
                            }
                            this.oldPosition = this.position;
                            this.position += value;
                        }
                        else
                        {
                            Vector2 vector6 = this.velocity;
                            this.velocity = Collision.TileCollision(vector4, this.velocity, num33, num34, flag5, flag5);
                            if (Collision.up)
                            {
                                this.velocity.Y = 0.01f;
                            }
                            Vector2 value2 = this.velocity*0.5f;
                            if (this.velocity.X != vector6.X)
                            {
                                value2.X = this.velocity.X;
                                this.collideX = true;
                            }
                            if (this.velocity.Y != vector6.Y)
                            {
                                value2.Y = this.velocity.Y;
                                this.collideY = true;
                            }
                            this.oldPosition = this.position;
                            this.position += value2;
                        }
                    }
                    else
                    {
                        if (this.type == 72)
                        {
                            Vector2 vector7 = new Vector2(this.position.X + (float) (this.width/2), this.position.Y + (float) (this.height/2));
                            int num35 = 12;
                            int num36 = 12;
                            vector7.X -= (float) (num35/2);
                            vector7.Y -= (float) (num36/2);
                            this.velocity = Collision.noSlopeCollision(vector4, this.velocity, num33, num34, true, true);
                        }
                        else
                        {
                            this.velocity = Collision.TileCollision(vector4, this.velocity, num33, num34, flag5, flag5);
                        }
                        if (Collision.up)
                        {
                            this.velocity.Y = 0.01f;
                        }
                        if (this.oldVelocity.X != this.velocity.X)
                        {
                            this.collideX = true;
                        }
                        if (this.oldVelocity.Y != this.velocity.Y)
                        {
                            this.collideY = true;
                        }
                        this.oldPosition = this.position;
                        this.position += this.velocity;
                    }
                    Vector4 vector8 = Collision.SlopeCollision(this.position, this.velocity, this.width, this.height, NPC.gravity);
                    this.position.X = vector8.X;
                    this.position.Y = vector8.Y;
                    this.velocity.X = vector8.Z;
                    this.velocity.Y = vector8.W;
                }
                else
                {
                    this.oldPosition = this.position;
                    this.position += this.velocity;
                }
                bool isPaladin = false;
                if ((this.type == 276 || this.type == 277 || this.type == 245))
                {
                    isPaladin = true;
                }
                if (Main.netMode != 1 && !this.noTileCollide && this.lifeMax > 1 && Collision.SwitchTiles(this.position, this.width, this.height, this.oldPosition, 2, isPaladin) && (this.type == 46 || this.type == 148 || this.type == 149))
                {
                    this.ai[0] = 1f;
                    this.ai[1] = 400f;
                    this.ai[2] = 0f;
                }
                this.FindFrame();
                if (this.type == 120 || this.type == 137 || this.type == 138)
                {
                    for (int num37 = this.oldPos.Length - 1; num37 > 0; num37--)
                    {
                        this.oldPos[num37] = this.oldPos[num37 - 1];
                        Lighting.addLight((int) this.position.X/16, (int) this.position.Y/16, 0.3f, 0f, 0.2f);
                    }
                    this.oldPos[0] = this.position;
                }
                else
                {
                    if (this.type == 94)
                    {
                        for (int num38 = this.oldPos.Length - 1; num38 > 0; num38--)
                        {
                            this.oldPos[num38] = this.oldPos[num38 - 1];
                        }
                        this.oldPos[0] = this.position;
                    }
                    else
                    {
                        if (this.type == 125 || this.type == 126 || this.type == 127 || this.type == 128 || this.type == 129 || this.type == 130 || this.type == 131 || this.type == 139 || this.type == 140)
                        {
                            for (int num39 = this.oldPos.Length - 1; num39 > 0; num39--)
                            {
                                this.oldPos[num39] = this.oldPos[num39 - 1];
                            }
                            this.oldPos[0] = this.position;
                        }
                    }
                }
                if (!this.active)
                {
                    this.netUpdate = true;
                }
                if (Main.netMode == 2)
                {
                    if (Main.npcStreamSpeed > 0 && !this.townNPC && Math.Abs(this.velocity.X) + Math.Abs(this.velocity.Y) > 1f)
                    {
                        this.netStream += 1;
                        if ((int) this.netStream > Main.npcStreamSpeed)
                        {
                            for (int num40 = 0; num40 < 255; num40++)
                            {
                                if (Main.player[num40].active)
                                {
                                    float num41 = Math.Abs(this.center().X - Main.player[num40].center().X) + Math.Abs(this.center().Y - Main.player[num40].center().Y);
                                    if (num41 < 250f)
                                    {
                                        byte[] expr_1F7A_cp_0 = this.streamPlayer;
                                        int expr_1F7A_cp_1 = num40;
                                        expr_1F7A_cp_0[expr_1F7A_cp_1] -= 8;
                                    }
                                    else
                                    {
                                        if (num41 < 500f)
                                        {
                                            byte[] expr_1FA0_cp_0 = this.streamPlayer;
                                            int expr_1FA0_cp_1 = num40;
                                            expr_1FA0_cp_0[expr_1FA0_cp_1] -= 4;
                                        }
                                        else
                                        {
                                            if (num41 < 1000f)
                                            {
                                                byte[] expr_1FC6_cp_0 = this.streamPlayer;
                                                int expr_1FC6_cp_1 = num40;
                                                expr_1FC6_cp_0[expr_1FC6_cp_1] -= 2;
                                            }
                                            else
                                            {
                                                if (num41 < 1500f)
                                                {
                                                    byte[] expr_1FEC_cp_0 = this.streamPlayer;
                                                    int expr_1FEC_cp_1 = num40;
                                                    expr_1FEC_cp_0[expr_1FEC_cp_1] -= 1;
                                                }
                                            }
                                        }
                                    }
                                    if (this.streamPlayer[num40] <= 0)
                                    {
                                        this.streamPlayer[num40] = 8;
                                        NetMessage.SendData(23, num40, -1, "", i, 0f, 0f, 0f, 0);
                                    }
                                }
                            }
                        }
                    }
                    if (this.townNPC)
                    {
                        this.netSpam = 0;
                    }
                    if (this.netUpdate2)
                    {
                        this.netUpdate = true;
                    }
                    if (!this.active)
                    {
                        this.netSpam = 0;
                    }
                    if (this.netUpdate)
                    {
                        if (this.netSpam <= 90)
                        {
                            this.netSpam += 30;
                            NetMessage.SendData(23, -1, -1, "", i, 0f, 0f, 0f, 0);
                            this.netUpdate2 = false;
                        }
                        else
                        {
                            this.netUpdate2 = true;
                        }
                    }
                    if (this.netSpam > 0)
                    {
                        this.netSpam--;
                    }
                    if (this.active && this.townNPC && NPC.TypeToNum(this.type) != -1)
                    {
                        if (this.homeless != this.oldHomeless || this.homeTileX != this.oldHomeTileX || this.homeTileY != this.oldHomeTileY)
                        {
                            int num42 = 0;
                            if (this.homeless)
                            {
                                num42 = 1;
                            }
                            NetMessage.SendData(60, -1, -1, "", i, (float) Main.npc[i].homeTileX, (float) Main.npc[i].homeTileY, (float) num42, 0);
                        }
                        this.oldHomeless = this.homeless;
                        this.oldHomeTileX = this.homeTileX;
                        this.oldHomeTileY = this.homeTileY;
                    }
                }
                if (this.jungle && this.timeLeft <= 180)
                {
                    this.timeLeft--;
                    if (this.timeLeft <= 0)
                    {
                        this.active = false;
                        if (Main.netMode == 2)
                        {
                            this.netSkip = -1;
                            this.life = 0;
                            NetMessage.SendData(23, -1, -1, "", this.whoAmI, 0f, 0f, 0f, 0);
                        }
                        return;
                    }
                }

                //npcs hit eachother
                if (this.type == 63 || this.type == 64)
                {
                    if (Main.npc[NPC.bwt].active && this.type == 64)
                    {
                        if (Main.npc[NPC.bwt].getRect().Intersects(this.getRect()))
                        {
                            this.StrikeNPC(9999, 0, 0);
                            //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", this.whoAmI, 9999f, 0f, 0f);
                            Main.npc[NPC.bwt].StrikeNPC(15, 0, 0);
                            //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", NPC.bwt, 15f, 0f, 0f);
                            Main.npc[NPC.bwt].AddBuff(100, 300, false);
                        }
                    }
                    if (Main.npc[NPC.bbt].active && this.type == 63)
                    {
                        if (Main.npc[NPC.bbt].getRect().Intersects(this.getRect()))
                        {
                            this.StrikeNPC(9999, 0, 0);
                            //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", this.whoAmI, 9999f, 0f, 0f);
                            Main.npc[NPC.bbt].StrikeNPC(15, 0, 0);
                            //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", NPC.bbt, 15f, 0f, 0f);
                            Main.npc[NPC.bbt].AddBuff(100, 300, false);
                        }
                    }
                }
                if (this.type == 26)
                {
                    for (int npcs = 0; npcs < Main.npc.Length; npcs++)
                    {
                        if (Main.npc[npcs].active && Main.npc[npcs].type == 27)
                        {
                            Rectangle peon = new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
                            Rectangle thief = new Rectangle((int) Main.npc[npcs].position.X, (int) Main.npc[npcs].position.Y, Main.npc[npcs].width, Main.npc[npcs].height);
                            if (peon.Intersects(thief))
                            {
                                //if (Main.netMode != 1)
                                {
                                    this.StrikeNPC(9 + (Main.gameTime/900), 8000f, -1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", this.whoAmI, 9 + (Main.gameTime / 900), 8000f, -1);
                                    Main.npc[npcs].StrikeNPC(9 + (Main.gameTime/900), 8000f, 1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", npcs, 9 + (Main.gameTime / 900), 8000f, 1);
                                }
                            }
                        }
                        if (Main.npc[npcs].active && Main.npc[npcs].type == 70)
                        {
                            Rectangle peon = new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
                            Rectangle tower = new Rectangle((int) Main.npc[npcs].position.X, (int) Main.npc[npcs].position.Y, Main.npc[npcs].width, Main.npc[npcs].height);
                            if (peon.Intersects(tower))
                            {
                                //if (Main.netMode != 1)
                                {
                                    this.StrikeNPC(9999, 8f, -1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", this.whoAmI, 9999f, 8f, -1);
                                    Main.npc[npcs].StrikeNPC(20, 0f, 1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", npcs, 20, 0f, 1);
                                }
                                if (Main.netMode == 2 && !Main.npc[npcs].canTakeDamage)
                                {
                                    NetMessage.SendData(25, -1, -1, "A Black Tower has been struck!", 0, 0, 0, 0, 0);
                                }
                                Main.npc[npcs].AddBuff(100, 300, false);
                            }
                        }
                    }
                }
                if (this.type == 27)
                {
                    for (int npcs = 0; npcs < Main.npc.Length; npcs++)
                    {
                        if (Main.npc[npcs].active && Main.npc[npcs].type == 69)
                        {
                            Rectangle thief = new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
                            Rectangle tower = new Rectangle((int) Main.npc[npcs].position.X, (int) Main.npc[npcs].position.Y, Main.npc[npcs].width, Main.npc[npcs].height);
                            if (thief.Intersects(tower))
                            {
                                //if (Main.netMode != 1)
                                {
                                    this.StrikeNPC(9999, 8f, -1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", this.whoAmI, 9999f, 8f, -1);
                                    Main.npc[npcs].StrikeNPC(20, 0f, 1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", npcs, 20, 0f, 1);
                                }
                                if (Main.netMode == 2 && !Main.npc[npcs].canTakeDamage)
                                {
                                    NetMessage.SendData(25, -1, -1, "A White Tower has been struck!", 0, 0, 0, 0, 0);
                                }
                                Main.npc[npcs].AddBuff(100, 300, false);
                            }
                        }
                    }
                }
                if (this.type == 276)
                {
                    for (int npcs = 0; npcs < Main.npc.Length; npcs++)
                    {
                        if (Main.npc[npcs].active && (Main.npc[npcs].type == 27))
                        {
                            Rectangle bigPeon = new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
                            Rectangle thief = new Rectangle((int) Main.npc[npcs].position.X, (int) Main.npc[npcs].position.Y, Main.npc[npcs].width, Main.npc[npcs].height);
                            if (bigPeon.Intersects(thief))
                            {
                                //if (Main.netMode != 1)
                                {
                                    this.StrikeNPC(Main.npc[npcs].damage, 1f, -1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", this.whoAmI, Main.npc[npcs].damage, 1f, -1);
                                    Main.npc[npcs].StrikeNPC(9999, 8f, 1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", npcs, 9999, 8f, 1);
                                }
                            }
                        }
                        if (Main.npc[npcs].active && (Main.npc[npcs].type == 277))
                        {
                            Rectangle bigPeon = new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
                            Rectangle bigThief = new Rectangle((int) Main.npc[npcs].position.X, (int) Main.npc[npcs].position.Y, Main.npc[npcs].width, Main.npc[npcs].height);
                            if (bigPeon.Intersects(bigThief))
                            {
                                //if (Main.netMode != 1)
                                {
                                    this.StrikeNPC(Main.npc[npcs].damage, 800000f, -1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", this.whoAmI, Main.npc[npcs].damage, 800000f, -1);
                                    Main.npc[npcs].StrikeNPC(this.damage, 800000f, 1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", npcs, this.damage, 800000f, 1);
                                }
                            }
                        }
                    }
                }
                if (this.type == 277)
                {
                    for (int npcs = 0; npcs < Main.npc.Length; npcs++)
                    {
                        if (Main.npc[npcs].active && (Main.npc[npcs].type == 26))
                        {
                            Rectangle bigThief = new Rectangle((int) this.position.X, (int) this.position.Y, this.width, this.height);
                            Rectangle peon = new Rectangle((int) Main.npc[npcs].position.X, (int) Main.npc[npcs].position.Y, Main.npc[npcs].width, Main.npc[npcs].height);
                            if (bigThief.Intersects(peon))
                            {
                                //if (Main.netMode != 1)
                                {
                                    this.StrikeNPC(Main.npc[npcs].damage, 1f, -1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", this.whoAmI, Main.npc[npcs].damage, 1f, -1);
                                    Main.npc[npcs].StrikeNPC(9999, 8f, 1, false, false);
                                    //if (Main.netMode == 2) NetMessage.SendData(28, -1, -1, "", npcs, this.damage, 8f, 1);
                                }
                            }
                        }
                    }
                }
                this.netUpdate = false;
                this.justHit = false;
            }
        }

        public Color GetAlpha(Color newColor)
        {
            float num = (float) (255 - this.alpha)/255f;
            int num2 = (int) ((float) newColor.R*num);
            int num3 = (int) ((float) newColor.G*num);
            int num4 = (int) ((float) newColor.B*num);
            int num5 = (int) newColor.A - this.alpha;
            if (this.type == 25 || this.type == 30 || this.type == 59 || this.type == 60)
            {
                return new Color(200, 200, 200, 0);
            }
            if (this.type == 72)
            {
                num2 = (int) newColor.R;
                num3 = (int) newColor.G;
                num4 = (int) newColor.B;
            }
            else
            {
                if (this.type == 288)
                {
                    return new Color(200, 200, 200, 0);
                }
                if (this.type == 289)
                {
                    return new Color(250, 250, 250, 50);
                }
                if (this.type >= 254 && this.type <= 261)
                {
                    num4 = 255;
                    if (num2 < 100)
                    {
                        num2 = 100;
                    }
                    if (num3 < 150)
                    {
                        num3 = 150;
                    }
                }
                else
                {
                    if (this.type == 64 || this.type == 63 || this.type == 75 || this.type == 103)
                    {
                        num2 = (int) ((double) newColor.R*1.5);
                        num3 = (int) ((double) newColor.G*1.5);
                        num4 = (int) ((double) newColor.B*1.5);
                        if (num2 > 255)
                        {
                            num2 = 255;
                        }
                        if (num3 > 255)
                        {
                            num3 = 255;
                        }
                        if (num4 > 255)
                        {
                            num4 = 255;
                        }
                    }
                }
            }
            if (num5 < 0)
            {
                num5 = 0;
            }
            if (num5 > 255)
            {
                num5 = 255;
            }
            return new Color(num2, num3, num4, num5);
        }

        public Color GetColor(Color newColor)
        {
            int num = (int) (this.color.R - (255 - newColor.R));
            int num2 = (int) (this.color.G - (255 - newColor.G));
            int num3 = (int) (this.color.B - (255 - newColor.B));
            int num4 = (int) (this.color.A - (255 - newColor.A));
            if (num < 0)
            {
                num = 0;
            }
            if (num > 255)
            {
                num = 255;
            }
            if (num2 < 0)
            {
                num2 = 0;
            }
            if (num2 > 255)
            {
                num2 = 255;
            }
            if (num3 < 0)
            {
                num3 = 0;
            }
            if (num3 > 255)
            {
                num3 = 255;
            }
            if (num4 < 0)
            {
                num4 = 0;
            }
            if (num4 > 255)
            {
                num4 = 255;
            }
            return new Color(num, num2, num3, num4);
        }

        public string GetChat()
        {
            Recipe.FindRecipes();
            bool flag = false;
            bool flag2 = false;
            bool flag3 = false;
            bool flag4 = false;
            bool flag5 = false;
            bool flag6 = false;
            bool flag7 = false;
            bool flag8 = false;
            bool flag9 = false;
            bool flag10 = false;
            bool flag11 = false;
            bool flag12 = false;
            bool flag13 = false;
            bool flag14 = false;
            bool flag15 = false;
            for (int i = 0; i < 200; i++)
            {
                if (Main.npc[i].active)
                {
                    if (Main.npc[i].type == 17)
                    {
                        flag = true;
                    }
                    else
                    {
                        if (Main.npc[i].type == 18)
                        {
                            flag2 = true;
                        }
                        else
                        {
                            if (Main.npc[i].type == 19)
                            {
                                flag3 = true;
                            }
                            else
                            {
                                if (Main.npc[i].type == 20)
                                {
                                    flag4 = true;
                                }
                                else
                                {
                                    if (Main.npc[i].type == 37)
                                    {
                                        flag5 = true;
                                    }
                                    else
                                    {
                                        if (Main.npc[i].type == 38)
                                        {
                                            flag6 = true;
                                        }
                                        else
                                        {
                                            if (Main.npc[i].type == 124)
                                            {
                                                flag7 = true;
                                            }
                                            else
                                            {
                                                if (Main.npc[i].type == 107)
                                                {
                                                    flag8 = true;
                                                }
                                                else
                                                {
                                                    if (Main.npc[i].type == 54)
                                                    {
                                                        flag9 = true;
                                                    }
                                                    else
                                                    {
                                                        if (Main.npc[i].type == 160)
                                                        {
                                                            flag10 = true;
                                                        }
                                                        else
                                                        {
                                                            if (Main.npc[i].type == 178)
                                                            {
                                                                flag11 = true;
                                                            }
                                                            else
                                                            {
                                                                if (Main.npc[i].type == 229)
                                                                {
                                                                    flag12 = true;
                                                                }
                                                                else
                                                                {
                                                                    if (Main.npc[i].type == 209)
                                                                    {
                                                                        flag13 = true;
                                                                    }
                                                                    else
                                                                    {
                                                                        if (Main.npc[i].type == 208)
                                                                        {
                                                                            flag14 = true;
                                                                        }
                                                                        else
                                                                        {
                                                                            if (Main.npc[i].type == 2)
                                                                            {
                                                                                flag15 = true;
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            string result = "";
            if (this.type == 17)
            {
                if (!NPC.downedBoss1 && Main.rand.Next(3) == 0)
                {
                    if (Main.player[Main.myPlayer].statLifeMax < 200)
                    {
                        result = Lang.dialog(1, false);
                    }
                    else
                    {
                        if (Main.player[Main.myPlayer].statDefense <= 10)
                        {
                            result = Lang.dialog(2, false);
                        }
                        else
                        {
                            result = Lang.dialog(3, false);
                        }
                    }
                }
                else
                {
                    if (Main.dayTime)
                    {
                        if (Main.time < 16200.0)
                        {
                            int num = Main.rand.Next(3);
                            if (num == 0)
                            {
                                result = Lang.dialog(4, false);
                            }
                            else
                            {
                                if (num == 1)
                                {
                                    result = Lang.dialog(5, false);
                                }
                                else
                                {
                                    result = Lang.dialog(6, false);
                                }
                            }
                        }
                        else
                        {
                            if (Main.time > 37800.0)
                            {
                                int num2 = Main.rand.Next(3);
                                if (num2 == 0)
                                {
                                    result = Lang.dialog(7, false);
                                }
                                else
                                {
                                    if (num2 == 1)
                                    {
                                        result = Lang.dialog(8, false);
                                    }
                                    else
                                    {
                                        result = Lang.dialog(9, false);
                                    }
                                }
                            }
                            else
                            {
                                int num3 = Main.rand.Next(3);
                                if (num3 == 0)
                                {
                                    result = Lang.dialog(10, false);
                                }
                                else
                                {
                                    if (num3 == 1)
                                    {
                                        result = Lang.dialog(11, false);
                                    }
                                    else
                                    {
                                        result = Lang.dialog(12, false);
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                        if (Main.bloodMoon)
                        {
                            if (flag2 && flag7 && Main.rand.Next(3) == 0)
                            {
                                result = Lang.dialog(13, false);
                            }
                            else
                            {
                                int num4 = Main.rand.Next(4);
                                if (num4 == 0)
                                {
                                    result = Lang.dialog(14, false);
                                }
                                else
                                {
                                    if (num4 == 1)
                                    {
                                        result = Lang.dialog(15, false);
                                    }
                                    else
                                    {
                                        if (num4 == 2)
                                        {
                                            result = Lang.dialog(16, false);
                                        }
                                        else
                                        {
                                            result = Lang.dialog(17, false);
                                        }
                                    }
                                }
                            }
                        }
                        else
                        {
                            if (Main.time < 9720.0)
                            {
                                if (Main.rand.Next(2) == 0)
                                {
                                    result = Lang.dialog(18, false);
                                }
                                else
                                {
                                    result = Lang.dialog(19, false);
                                }
                            }
                            else
                            {
                                if (Main.time > 22680.0)
                                {
                                    if (Main.rand.Next(2) == 0)
                                    {
                                        result = Lang.dialog(20, false);
                                    }
                                    else
                                    {
                                        result = Lang.dialog(21, false);
                                    }
                                }
                                else
                                {
                                    int num5 = Main.rand.Next(3);
                                    if (num5 == 0)
                                    {
                                        result = Lang.dialog(22, false);
                                    }
                                    else
                                    {
                                        if (num5 == 1)
                                        {
                                            result = Lang.dialog(23, false);
                                        }
                                        else
                                        {
                                            result = Lang.dialog(24, false);
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            else
            {
                if (this.type == 18)
                {
                    if (Main.bloodMoon)
                    {
                        if ((double) Main.player[Main.myPlayer].statLife < (double) Main.player[Main.myPlayer].statLifeMax*0.66)
                        {
                            int num6 = Main.rand.Next(3);
                            if (num6 == 0)
                            {
                                result = Lang.dialog(25, false);
                            }
                            else
                            {
                                if (num6 == 1)
                                {
                                    result = Lang.dialog(26, false);
                                }
                                else
                                {
                                    result = Lang.dialog(27, false);
                                }
                            }
                        }
                        else
                        {
                            int num7 = Main.rand.Next(4);
                            if (num7 == 0)
                            {
                                result = Lang.dialog(28, false);
                            }
                            else
                            {
                                if (num7 == 1)
                                {
                                    result = Lang.dialog(29, false);
                                }
                                else
                                {
                                    if (num7 == 2)
                                    {
                                        result = Lang.dialog(30, false);
                                    }
                                    else
                                    {
                                        result = Lang.dialog(31, false);
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                        if (Main.rand.Next(3) == 0 && !NPC.downedBoss3)
                        {
                            result = Lang.dialog(32, false);
                        }
                        else
                        {
                            if (flag6 && Main.rand.Next(4) == 0)
                            {
                                result = Lang.dialog(33, false);
                            }
                            else
                            {
                                if (flag3 && Main.rand.Next(4) == 0)
                                {
                                    result = Lang.dialog(34, false);
                                }
                                else
                                {
                                    if (flag15 && Main.rand.Next(4) == 0)
                                    {
                                        result = Lang.dialog(35, false);
                                    }
                                    else
                                    {
                                        if ((double) Main.player[Main.myPlayer].statLife < (double) Main.player[Main.myPlayer].statLifeMax*0.33)
                                        {
                                            int num8 = Main.rand.Next(5);
                                            if (num8 == 0)
                                            {
                                                result = Lang.dialog(36, false);
                                            }
                                            else
                                            {
                                                if (num8 == 1)
                                                {
                                                    result = Lang.dialog(37, false);
                                                }
                                                else
                                                {
                                                    if (num8 == 2)
                                                    {
                                                        result = Lang.dialog(38, false);
                                                    }
                                                    else
                                                    {
                                                        if (num8 == 3)
                                                        {
                                                            result = Lang.dialog(39, false);
                                                        }
                                                        else
                                                        {
                                                            result = Lang.dialog(40, false);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else
                                        {
                                            if ((double) Main.player[Main.myPlayer].statLife < (double) Main.player[Main.myPlayer].statLifeMax*0.66)
                                            {
                                                int num9 = Main.rand.Next(7);
                                                if (num9 == 0)
                                                {
                                                    result = Lang.dialog(41, false);
                                                }
                                                else
                                                {
                                                    if (num9 == 1)
                                                    {
                                                        result = Lang.dialog(42, false);
                                                    }
                                                    else
                                                    {
                                                        if (num9 == 2)
                                                        {
                                                            result = Lang.dialog(43, false);
                                                        }
                                                        else
                                                        {
                                                            if (num9 == 3)
                                                            {
                                                                result = Lang.dialog(44, false);
                                                            }
                                                            else
                                                            {
                                                                if (num9 == 4)
                                                                {
                                                                    result = Lang.dialog(45, false);
                                                                }
                                                                else
                                                                {
                                                                    if (num9 == 5)
                                                                    {
                                                                        result = Lang.dialog(46, false);
                                                                    }
                                                                    else
                                                                    {
                                                                        result = Lang.dialog(47, false);
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                int num10 = Main.rand.Next(4);
                                                if (num10 == 0)
                                                {
                                                    result = Lang.dialog(48, false);
                                                }
                                                else
                                                {
                                                    if (num10 == 1)
                                                    {
                                                        result = Lang.dialog(49, false);
                                                    }
                                                    else
                                                    {
                                                        if (num10 == 2)
                                                        {
                                                            result = Lang.dialog(50, false);
                                                        }
                                                        else
                                                        {
                                                            result = Lang.dialog(51, false);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                else
                {
                    if (this.type == 19)
                    {
                        if (NPC.downedBoss3 && !Main.hardMode)
                        {
                            result = Lang.dialog(58, false);
                        }
                        else
                        {
                            if (flag2 && Main.rand.Next(5) == 0)
                            {
                                result = Lang.dialog(59, false);
                            }
                            else
                            {
                                if (flag2 && Main.rand.Next(5) == 0)
                                {
                                    result = Lang.dialog(60, false);
                                }
                                else
                                {
                                    if (flag4 && Main.rand.Next(5) == 0)
                                    {
                                        result = Lang.dialog(61, false);
                                    }
                                    else
                                    {
                                        if (flag6 && Main.rand.Next(5) == 0)
                                        {
                                            result = Lang.dialog(62, false);
                                        }
                                        else
                                        {
                                            if (flag6 && Main.rand.Next(5) == 0)
                                            {
                                                result = Lang.dialog(63, false);
                                            }
                                            else
                                            {
                                                if (Main.bloodMoon)
                                                {
                                                    if (Main.rand.Next(2) == 0)
                                                    {
                                                        result = Lang.dialog(64, false);
                                                    }
                                                    else
                                                    {
                                                        result = Lang.dialog(65, false);
                                                    }
                                                }
                                                else
                                                {
                                                    int num11 = Main.rand.Next(3);
                                                    if (num11 == 0)
                                                    {
                                                        result = Lang.dialog(66, false);
                                                    }
                                                    else
                                                    {
                                                        if (num11 == 1)
                                                        {
                                                            result = Lang.dialog(67, false);
                                                        }
                                                        else
                                                        {
                                                            result = Lang.dialog(68, false);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    else
                    {
                        if (this.type == 20)
                        {
                            if (!NPC.downedBoss2 && Main.rand.Next(3) == 0)
                            {
                                result = Lang.dialog(69, false);
                            }
                            else
                            {
                                if (flag3 && Main.rand.Next(6) == 0)
                                {
                                    result = Lang.dialog(70, false);
                                }
                                else
                                {
                                    if (flag && Main.rand.Next(6) == 0)
                                    {
                                        result = Lang.dialog(71, false);
                                    }
                                    else
                                    {
                                        if (flag5 && Main.rand.Next(6) == 0)
                                        {
                                            result = Lang.dialog(72, false);
                                        }
                                        else
                                        {
                                            if (flag10 && Main.rand.Next(6) == 0)
                                            {
                                                result = Lang.dialog(238, false);
                                            }
                                            else
                                            {
                                                if (Main.bloodMoon)
                                                {
                                                    int num12 = Main.rand.Next(4);
                                                    if (num12 == 0)
                                                    {
                                                        result = Lang.dialog(73, false);
                                                    }
                                                    else
                                                    {
                                                        if (num12 == 1)
                                                        {
                                                            result = Lang.dialog(74, false);
                                                        }
                                                        else
                                                        {
                                                            if (num12 == 2)
                                                            {
                                                                result = Lang.dialog(75, false);
                                                            }
                                                            else
                                                            {
                                                                result = Lang.dialog(76, false);
                                                            }
                                                        }
                                                    }
                                                }
                                                else
                                                {
                                                    int num13 = Main.rand.Next(5);
                                                    if (num13 == 0)
                                                    {
                                                        result = Lang.dialog(77, false);
                                                    }
                                                    else
                                                    {
                                                        if (num13 == 1)
                                                        {
                                                            result = Lang.dialog(78, false);
                                                        }
                                                        else
                                                        {
                                                            if (num13 == 2)
                                                            {
                                                                result = Lang.dialog(79, false);
                                                            }
                                                            else
                                                            {
                                                                if (num13 == 3)
                                                                {
                                                                    result = Lang.dialog(80, false);
                                                                }
                                                                else
                                                                {
                                                                    result = Lang.dialog(81, false);
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        else
                        {
                            if (this.type == 37)
                            {
                                if (Main.dayTime)
                                {
                                    int num14 = Main.rand.Next(3);
                                    if (num14 == 0)
                                    {
                                        result = Lang.dialog(82, false);
                                    }
                                    else
                                    {
                                        if (num14 == 1)
                                        {
                                            result = Lang.dialog(83, false);
                                        }
                                        else
                                        {
                                            result = Lang.dialog(84, false);
                                        }
                                    }
                                }
                                else
                                {
                                    if (Main.player[Main.myPlayer].statLifeMax < 300 || Main.player[Main.myPlayer].statDefense < 10)
                                    {
                                        int num15 = Main.rand.Next(4);
                                        if (num15 == 0)
                                        {
                                            result = Lang.dialog(85, false);
                                        }
                                        else
                                        {
                                            if (num15 == 1)
                                            {
                                                result = Lang.dialog(86, false);
                                            }
                                            else
                                            {
                                                if (num15 == 2)
                                                {
                                                    result = Lang.dialog(87, false);
                                                }
                                                else
                                                {
                                                    result = Lang.dialog(88, false);
                                                }
                                            }
                                        }
                                    }
                                    else
                                    {
                                        int num16 = Main.rand.Next(4);
                                        if (num16 == 0)
                                        {
                                            result = Lang.dialog(89, false);
                                        }
                                        else
                                        {
                                            if (num16 == 1)
                                            {
                                                result = Lang.dialog(90, false);
                                            }
                                            else
                                            {
                                                if (num16 == 2)
                                                {
                                                    result = Lang.dialog(91, false);
                                                }
                                                else
                                                {
                                                    result = Lang.dialog(92, false);
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            else
                            {
                                if (this.type == 38)
                                {
                                    if (!NPC.downedBoss2 && Main.rand.Next(3) == 0)
                                    {
                                        result = Lang.dialog(93, false);
                                    }
                                    if (Main.bloodMoon)
                                    {
                                        int num17 = Main.rand.Next(3);
                                        if (num17 == 0)
                                        {
                                            result = Lang.dialog(94, false);
                                        }
                                        else
                                        {
                                            if (num17 == 1)
                                            {
                                                result = Lang.dialog(95, false);
                                            }
                                            else
                                            {
                                                result = Lang.dialog(96, false);
                                            }
                                        }
                                    }
                                    else
                                    {
                                        if (flag3 && Main.rand.Next(5) == 0)
                                        {
                                            result = Lang.dialog(97, false);
                                        }
                                        else
                                        {
                                            if (flag3 && Main.rand.Next(5) == 0)
                                            {
                                                result = Lang.dialog(98, false);
                                            }
                                            else
                                            {
                                                if (flag2 && Main.rand.Next(4) == 0)
                                                {
                                                    result = Lang.dialog(99, false);
                                                }
                                                else
                                                {
                                                    if (flag4 && Main.rand.Next(4) == 0)
                                                    {
                                                        result = Lang.dialog(100, false);
                                                    }
                                                    else
                                                    {
                                                        if (!Main.dayTime)
                                                        {
                                                            int num18 = Main.rand.Next(4);
                                                            if (num18 == 0)
                                                            {
                                                                result = Lang.dialog(101, false);
                                                            }
                                                            else
                                                            {
                                                                if (num18 == 1)
                                                                {
                                                                    result = Lang.dialog(102, false);
                                                                }
                                                                else
                                                                {
                                                                    if (num18 == 2)
                                                                    {
                                                                        result = Lang.dialog(103, false);
                                                                    }
                                                                    else
                                                                    {
                                                                        result = Lang.dialog(104, false);
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            int num19 = Main.rand.Next(5);
                                                            if (num19 == 0)
                                                            {
                                                                result = Lang.dialog(105, false);
                                                            }
                                                            else
                                                            {
                                                                if (num19 == 1)
                                                                {
                                                                    result = Lang.dialog(106, false);
                                                                }
                                                                else
                                                                {
                                                                    if (num19 == 2)
                                                                    {
                                                                        result = Lang.dialog(107, false);
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num19 == 3)
                                                                        {
                                                                            result = Lang.dialog(108, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            result = Lang.dialog(109, false);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                                else
                                {
                                    if (this.type == 54)
                                    {
                                        if (!flag7 && Main.rand.Next(2) == 0)
                                        {
                                            result = Lang.dialog(110, false);
                                        }
                                        else
                                        {
                                            if (flag10 && Main.rand.Next(6) == 0)
                                            {
                                                result = Lang.dialog(237, false);
                                            }
                                            else
                                            {
                                                if (Main.bloodMoon)
                                                {
                                                    result = Lang.dialog(111, false);
                                                }
                                                else
                                                {
                                                    if (flag2 && Main.rand.Next(4) == 0)
                                                    {
                                                        result = Lang.dialog(112, false);
                                                    }
                                                    else
                                                    {
                                                        if (Main.player[Main.myPlayer].head == 24)
                                                        {
                                                            result = Lang.dialog(113, false);
                                                        }
                                                        else
                                                        {
                                                            int num20 = Main.rand.Next(6);
                                                            if (num20 == 0)
                                                            {
                                                                result = Lang.dialog(114, false);
                                                            }
                                                            else
                                                            {
                                                                if (num20 == 1)
                                                                {
                                                                    result = Lang.dialog(115, false);
                                                                }
                                                                else
                                                                {
                                                                    if (num20 == 2)
                                                                    {
                                                                        result = Lang.dialog(116, false);
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num20 == 3)
                                                                        {
                                                                            result = Lang.dialog(117, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num20 == 4)
                                                                            {
                                                                                result = Lang.dialog(118, false);
                                                                            }
                                                                            else
                                                                            {
                                                                                result = Lang.dialog(119, false);
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    else
                                    {
                                        if (this.type == 105)
                                        {
                                            result = Lang.dialog(120, false);
                                        }
                                        else
                                        {
                                            if (this.type == 107)
                                            {
                                                if (this.homeless)
                                                {
                                                    int num21 = Main.rand.Next(5);
                                                    if (num21 == 0)
                                                    {
                                                        result = Lang.dialog(121, false);
                                                    }
                                                    else
                                                    {
                                                        if (num21 == 1)
                                                        {
                                                            result = Lang.dialog(122, false);
                                                        }
                                                        else
                                                        {
                                                            if (num21 == 2)
                                                            {
                                                                result = Lang.dialog(123, false);
                                                            }
                                                            else
                                                            {
                                                                if (num21 == 3)
                                                                {
                                                                    result = Lang.dialog(124, false);
                                                                }
                                                                else
                                                                {
                                                                    result = Lang.dialog(125, false);
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                                else
                                                {
                                                    if (flag7 && Main.rand.Next(4) == 0)
                                                    {
                                                        result = Lang.dialog(126, false);
                                                    }
                                                    else
                                                    {
                                                        if (!Main.dayTime)
                                                        {
                                                            int num22 = Main.rand.Next(5);
                                                            if (num22 == 0)
                                                            {
                                                                result = Lang.dialog(127, false);
                                                            }
                                                            else
                                                            {
                                                                if (num22 == 1)
                                                                {
                                                                    result = Lang.dialog(128, false);
                                                                }
                                                                else
                                                                {
                                                                    if (num22 == 2)
                                                                    {
                                                                        result = Lang.dialog(129, false);
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num22 == 3)
                                                                        {
                                                                            result = Lang.dialog(130, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            result = Lang.dialog(131, false);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            int num23 = Main.rand.Next(5);
                                                            if (num23 == 0)
                                                            {
                                                                result = Lang.dialog(132, false);
                                                            }
                                                            else
                                                            {
                                                                if (num23 == 1)
                                                                {
                                                                    result = Lang.dialog(133, false);
                                                                }
                                                                else
                                                                {
                                                                    if (num23 == 2)
                                                                    {
                                                                        result = Lang.dialog(134, false);
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num23 == 3)
                                                                        {
                                                                            result = Lang.dialog(135, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            result = Lang.dialog(136, false);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                if (this.type == 106)
                                                {
                                                    result = Lang.dialog(137, false);
                                                }
                                                else
                                                {
                                                    if (this.type == 108)
                                                    {
                                                        if (this.homeless)
                                                        {
                                                            int num24 = Main.rand.Next(3);
                                                            if (num24 == 0)
                                                            {
                                                                result = Lang.dialog(138, false);
                                                            }
                                                            else
                                                            {
                                                                if (num24 == 1 && !Main.player[Main.myPlayer].male)
                                                                {
                                                                    result = Lang.dialog(139, false);
                                                                }
                                                                else
                                                                {
                                                                    if (num24 == 1)
                                                                    {
                                                                        result = Lang.dialog(140, false);
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num24 == 2)
                                                                        {
                                                                            result = Lang.dialog(141, false);
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        else
                                                        {
                                                            if (Main.player[Main.myPlayer].male && flag15 && Main.rand.Next(6) == 0)
                                                            {
                                                                result = Lang.dialog(142, false);
                                                            }
                                                            else
                                                            {
                                                                if (Main.player[Main.myPlayer].male && flag6 && Main.rand.Next(6) == 0)
                                                                {
                                                                    result = Lang.dialog(143, false);
                                                                }
                                                                else
                                                                {
                                                                    if (Main.player[Main.myPlayer].male && flag8 && Main.rand.Next(6) == 0)
                                                                    {
                                                                        result = Lang.dialog(144, false);
                                                                    }
                                                                    else
                                                                    {
                                                                        if (!Main.player[Main.myPlayer].male && flag2 && Main.rand.Next(6) == 0)
                                                                        {
                                                                            result = Lang.dialog(145, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            if (!Main.player[Main.myPlayer].male && flag7 && Main.rand.Next(6) == 0)
                                                                            {
                                                                                result = Lang.dialog(146, false);
                                                                            }
                                                                            else
                                                                            {
                                                                                if (!Main.player[Main.myPlayer].male && flag4 && Main.rand.Next(6) == 0)
                                                                                {
                                                                                    result = Lang.dialog(147, false);
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (!Main.dayTime)
                                                                                    {
                                                                                        int num25 = Main.rand.Next(3);
                                                                                        if (num25 == 0)
                                                                                        {
                                                                                            result = Lang.dialog(148, false);
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num25 == 1)
                                                                                            {
                                                                                                result = Lang.dialog(149, false);
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num25 == 2)
                                                                                                {
                                                                                                    result = Lang.dialog(150, false);
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        int num26 = Main.rand.Next(5);
                                                                                        if (num26 == 0)
                                                                                        {
                                                                                            result = Lang.dialog(151, false);
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num26 == 1)
                                                                                            {
                                                                                                result = Lang.dialog(152, false);
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num26 == 2)
                                                                                                {
                                                                                                    result = Lang.dialog(153, false);
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num26 == 3)
                                                                                                    {
                                                                                                        result = Lang.dialog(154, false);
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        result = Lang.dialog(155, false);
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                    else
                                                    {
                                                        if (this.type == 123)
                                                        {
                                                            result = Lang.dialog(156, false);
                                                        }
                                                        else
                                                        {
                                                            if (this.type == 124)
                                                            {
                                                                if (this.homeless)
                                                                {
                                                                    int num27 = Main.rand.Next(4);
                                                                    if (num27 == 0)
                                                                    {
                                                                        result = Lang.dialog(157, false);
                                                                    }
                                                                    else
                                                                    {
                                                                        if (num27 == 1)
                                                                        {
                                                                            result = Lang.dialog(158, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num27 == 2)
                                                                            {
                                                                                result = Lang.dialog(159, false);
                                                                            }
                                                                            else
                                                                            {
                                                                                result = Lang.dialog(160, false);
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (Main.bloodMoon)
                                                                    {
                                                                        int num28 = Main.rand.Next(4);
                                                                        if (num28 == 0)
                                                                        {
                                                                            result = Lang.dialog(161, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num28 == 1)
                                                                            {
                                                                                result = Lang.dialog(162, false);
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num28 == 2)
                                                                                {
                                                                                    result = Lang.dialog(163, false);
                                                                                }
                                                                                else
                                                                                {
                                                                                    result = Lang.dialog(164, false);
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (flag8 && Main.rand.Next(6) == 0)
                                                                        {
                                                                            result = Lang.dialog(165, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            if (flag3 && Main.rand.Next(6) == 0)
                                                                            {
                                                                                result = Lang.dialog(166, false);
                                                                            }
                                                                            else
                                                                            {
                                                                                int num29 = Main.rand.Next(3);
                                                                                if (num29 == 0)
                                                                                {
                                                                                    result = Lang.dialog(167, false);
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num29 == 1)
                                                                                    {
                                                                                        result = Lang.dialog(168, false);
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        result = Lang.dialog(169, false);
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                            else
                                                            {
                                                                if (this.type == 22)
                                                                {
                                                                    if (Main.bloodMoon)
                                                                    {
                                                                        int num30 = Main.rand.Next(3);
                                                                        if (num30 == 0)
                                                                        {
                                                                            result = Lang.dialog(170, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num30 == 1)
                                                                            {
                                                                                result = Lang.dialog(171, false);
                                                                            }
                                                                            else
                                                                            {
                                                                                result = Lang.dialog(172, false);
                                                                            }
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (!Main.dayTime)
                                                                        {
                                                                            result = Lang.dialog(173, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            int num31 = Main.rand.Next(3);
                                                                            if (num31 == 0)
                                                                            {
                                                                                result = Lang.dialog(174, false);
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num31 == 1)
                                                                                {
                                                                                    result = Lang.dialog(175, false);
                                                                                }
                                                                                else
                                                                                {
                                                                                    result = Lang.dialog(176, false);
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                                else
                                                                {
                                                                    if (this.type == 142)
                                                                    {
                                                                        int num32 = Main.rand.Next(3);
                                                                        if (num32 == 0)
                                                                        {
                                                                            result = Lang.dialog(224, false);
                                                                        }
                                                                        else
                                                                        {
                                                                            if (num32 == 1)
                                                                            {
                                                                                result = Lang.dialog(225, false);
                                                                            }
                                                                            else
                                                                            {
                                                                                if (num32 == 2)
                                                                                {
                                                                                    result = Lang.dialog(226, false);
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                    else
                                                                    {
                                                                        if (this.type == 160)
                                                                        {
                                                                            int num33 = Main.rand.Next(6);
                                                                            if (flag4 && Main.rand.Next(6) == 0)
                                                                            {
                                                                                result = Lang.dialog(232, false);
                                                                            }
                                                                            else
                                                                            {
                                                                                if (flag9 && Main.rand.Next(6) == 0)
                                                                                {
                                                                                    result = Lang.dialog(236, false);
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (num33 == 0)
                                                                                    {
                                                                                        result = Lang.dialog(231, false);
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num33 == 1)
                                                                                        {
                                                                                            result = Lang.dialog(233, false);
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num33 == 2)
                                                                                            {
                                                                                                result = Lang.dialog(234, false);
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num33 == 3)
                                                                                                {
                                                                                                    result = Lang.dialog(235, false);
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num33 == 4)
                                                                                                    {
                                                                                                        result = Lang.dialog(240, false);
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (num33 == 5)
                                                                                                        {
                                                                                                            result = Lang.dialog(241, false);
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                        else
                                                                        {
                                                                            if (this.type == 178)
                                                                            {
                                                                                int num34 = Main.rand.Next(5);
                                                                                if (Main.bloodMoon && Main.rand.Next(3) == 0)
                                                                                {
                                                                                    result = Lang.dialog(245, false);
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (flag13 && Main.rand.Next(6) == 0)
                                                                                    {
                                                                                        result = Lang.dialog(246, false);
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (flag12 && Main.rand.Next(6) == 0)
                                                                                        {
                                                                                            result = Lang.dialog(247, false);
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num34 == 0)
                                                                                            {
                                                                                                result = Lang.dialog(242, false);
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num34 == 1)
                                                                                                {
                                                                                                    result = Lang.dialog(243, false);
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num34 == 2)
                                                                                                    {
                                                                                                        result = Lang.dialog(244, false);
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (num34 == 3)
                                                                                                        {
                                                                                                            result = Lang.dialog(248, false);
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (num34 == 4)
                                                                                                            {
                                                                                                                result = Lang.dialog(249, false);
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                            else
                                                                            {
                                                                                if (this.type == 207)
                                                                                {
                                                                                    int num35 = Main.rand.Next(3);
                                                                                    if (flag12 && Main.rand.Next(6) == 0)
                                                                                    {
                                                                                        result = Lang.dialog(260, false);
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (num35 == 0)
                                                                                        {
                                                                                            result = Lang.dialog(257, false);
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num35 == 1)
                                                                                            {
                                                                                                result = Lang.dialog(258, false);
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num35 == 2)
                                                                                                {
                                                                                                    result = Lang.dialog(259, false);
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                                else
                                                                                {
                                                                                    if (this.type == 208)
                                                                                    {
                                                                                        int num36 = Main.rand.Next(7);
                                                                                        if (Main.player[Main.myPlayer].male && Main.rand.Next(5) == 0)
                                                                                        {
                                                                                            result = Lang.dialog(268, false);
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (num36 == 0)
                                                                                            {
                                                                                                result = Lang.dialog(265, false);
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (num36 == 1)
                                                                                                {
                                                                                                    result = Lang.dialog(266, false);
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num36 == 2)
                                                                                                    {
                                                                                                        result = Lang.dialog(267, false);
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (num36 == 3)
                                                                                                        {
                                                                                                            result = Lang.dialog(269, false);
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (num36 == 4)
                                                                                                            {
                                                                                                                result = Lang.dialog(270, false);
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (num36 == 5)
                                                                                                                {
                                                                                                                    result = Lang.dialog(271, false);
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (num36 == 6)
                                                                                                                    {
                                                                                                                        result = Lang.dialog(272, false);
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        if (this.type == 209)
                                                                                        {
                                                                                            int num37 = Main.rand.Next(5);
                                                                                            if (flag12 && Main.rand.Next(6) == 0)
                                                                                            {
                                                                                                result = Lang.dialog(284, false);
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (flag11 && Main.rand.Next(6) == 0)
                                                                                                {
                                                                                                    result = Lang.dialog(283, false);
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (num37 == 0)
                                                                                                    {
                                                                                                        result = Lang.dialog(280, false);
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (num37 == 1)
                                                                                                        {
                                                                                                            result = Lang.dialog(281, false);
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (num37 == 2)
                                                                                                            {
                                                                                                                result = Lang.dialog(282, false);
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (num37 == 3)
                                                                                                                {
                                                                                                                    result = Lang.dialog(285, false);
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (num37 == 4)
                                                                                                                    {
                                                                                                                        result = Lang.dialog(286, false);
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            if (this.type == 227)
                                                                                            {
                                                                                                int num38 = Main.rand.Next(5);
                                                                                                if (Main.hardMode && Main.rand.Next(7) == 0)
                                                                                                {
                                                                                                    result = Lang.dialog(250, false);
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (flag14 && Main.rand.Next(6) == 0)
                                                                                                    {
                                                                                                        result = Lang.dialog(251, false);
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (num38 == 0)
                                                                                                        {
                                                                                                            result = Lang.dialog(252, false);
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (num38 == 1)
                                                                                                            {
                                                                                                                result = Lang.dialog(253, false);
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (num38 == 2)
                                                                                                                {
                                                                                                                    result = Lang.dialog(254, false);
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (num38 == 3)
                                                                                                                    {
                                                                                                                        result = Lang.dialog(255, false);
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        if (num38 == 4)
                                                                                                                        {
                                                                                                                            result = Lang.dialog(256, false);
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                if (this.type == 228)
                                                                                                {
                                                                                                    int num39 = Main.rand.Next(3);
                                                                                                    if (flag2 && Main.rand.Next(6) == 0)
                                                                                                    {
                                                                                                        result = Lang.dialog(263, false);
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        if (num39 == 0)
                                                                                                        {
                                                                                                            result = Lang.dialog(261, false);
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (num39 == 1)
                                                                                                            {
                                                                                                                result = Lang.dialog(262, false);
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (num39 == 2)
                                                                                                                {
                                                                                                                    result = Lang.dialog(264, false);
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                    if (this.type == 229)
                                                                                                    {
                                                                                                        int num40 = Main.rand.Next(6);
                                                                                                        if (!Main.player[Main.myPlayer].male && Main.rand.Next(5) == 0)
                                                                                                        {
                                                                                                            result = Lang.dialog(276, false);
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            if (num40 == 0)
                                                                                                            {
                                                                                                                result = Lang.dialog(273, false);
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                if (num40 == 1)
                                                                                                                {
                                                                                                                    result = Lang.dialog(274, false);
                                                                                                                }
                                                                                                                else
                                                                                                                {
                                                                                                                    if (num40 == 2)
                                                                                                                    {
                                                                                                                        result = Lang.dialog(275, false);
                                                                                                                    }
                                                                                                                    else
                                                                                                                    {
                                                                                                                        if (num40 == 3)
                                                                                                                        {
                                                                                                                            result = Lang.dialog(277, false);
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                            if (num40 == 4)
                                                                                                                            {
                                                                                                                                result = Lang.dialog(278, false);
                                                                                                                            }
                                                                                                                            else
                                                                                                                            {
                                                                                                                                if (num40 == 5)
                                                                                                                                {
                                                                                                                                    result = Lang.dialog(279, false);
                                                                                                                                }
                                                                                                                            }
                                                                                                                        }
                                                                                                                    }
                                                                                                                }
                                                                                                            }
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            return result;
        }

        public object Clone()
        {
            return base.MemberwiseClone();
        }
    }
}